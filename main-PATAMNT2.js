var op=Object.create;var es=Object.defineProperty,sp=Object.defineProperties,ap=Object.getOwnPropertyDescriptor,lp=Object.getOwnPropertyDescriptors,cp=Object.getOwnPropertyNames,li=Object.getOwnPropertySymbols,up=Object.getPrototypeOf,ts=Object.prototype.hasOwnProperty,Ul=Object.prototype.propertyIsEnumerable;var jl=(e,t,n)=>t in e?es(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,F=(e,t)=>{for(var n in t||={})ts.call(t,n)&&jl(e,n,t[n]);if(li)for(var n of li(t))Ul.call(t,n)&&jl(e,n,t[n]);return e},fe=(e,t)=>sp(e,lp(t));var Bl=(e,t)=>{var n={};for(var r in e)ts.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&li)for(var r of li(e))t.indexOf(r)<0&&Ul.call(e,r)&&(n[r]=e[r]);return n};var dp=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var fp=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of cp(t))!ts.call(e,i)&&i!==n&&es(e,i,{get:()=>t[i],enumerable:!(r=ap(t,i))||r.enumerable});return e};var hp=(e,t,n)=>(n=e!=null?op(up(e)):{},fp(t||!e||!e.__esModule?es(n,"default",{value:e,enumerable:!0}):n,e));var ep=dp((eE,Pl)=>{"use strict";var o=function(e,t){var n=this;if((typeof e=="string"||e instanceof String)&&(e=document.querySelector(e)),this.element=e,this.config=o.mergeDeep(o._defaultConfig(t),t),this._layoutConfigs={base:{orientation:this.config.orientation,levelSeparation:this.config.levelSeparation,mixedHierarchyNodesSeparation:this.config.mixedHierarchyNodesSeparation,assistantSeparation:this.config.assistantSeparation,subtreeSeparation:this.config.subtreeSeparation,siblingSeparation:this.config.siblingSeparation,layout:this.config.layout,columns:this.config.columns,collapse:this.config.collapse,partnerNodeSeparation:this.config.partnerNodeSeparation}},this.config.tags)for(var r in this.config.tags){var i=this.config.tags[r];i.subTreeConfig!=null&&(this._layoutConfigs[r]={orientation:i.subTreeConfig.orientation!=null?i.subTreeConfig.orientation:this.config.orientation,levelSeparation:i.subTreeConfig.levelSeparation!=null?i.subTreeConfig.levelSeparation:this.config.levelSeparation,mixedHierarchyNodesSeparation:i.subTreeConfig.mixedHierarchyNodesSeparation!=null?i.subTreeConfig.mixedHierarchyNodesSeparation:this.config.mixedHierarchyNodesSeparation,assistantSeparation:i.subTreeConfig.assistantSeparation!=null?i.subTreeConfig.assistantSeparation:this.config.assistantSeparation,subtreeSeparation:i.subTreeConfig.subtreeSeparation!=null?i.subTreeConfig.subtreeSeparation:this.config.subtreeSeparation,siblingSeparation:i.subTreeConfig.siblingSeparation!=null?i.subTreeConfig.siblingSeparation:this.config.siblingSeparation,layout:i.subTreeConfig.layout!=null?i.subTreeConfig.layout:this.config.layout,columns:i.subTreeConfig.columns!=null?i.subTreeConfig.columns:this.config.columns,collapse:i.subTreeConfig.collapse!=null?i.subTreeConfig.collapse:this.config.collapse,partnerNodeSeparation:i.subTreeConfig.partnerNodeSeparation!=null?i.subTreeConfig.partnerNodeSeparation:this.config.partnerNodeSeparation})}this._event_id=o._guid(),o._validateConfig(this.config)&&(this._vScroll={},this.config.ui||(this.ui=o.ui),this.config.editUI?this.editUI=this.config.editUI:this.editUI=new o.editUI,this.editUI.init(this),this.config.filterUI?this.filterUI=this.config.filterUI:this.filterUI=new o.filterUI,this.filterUI.init(this),this.manager=new o.manager(this),this.config.searchUI?this.searchUI=this.config.searchUI:this.searchUI=new o.searchUI,this.config.nodeMenuUI?this.nodeMenuUI=this.config.nodeMenuUI:this.nodeMenuUI=new o.menuUI,this.nodeMenuUI.init(this,this.config.nodeMenu),this.config.nodeCircleMenuUI?this.nodeCircleMenuUI=this.config.nodeCircleMenuUI:this.nodeCircleMenuUI=new o.circleMenuUI,this.nodeCircleMenuUI.init(this,this.config.nodeCircleMenu),this.config.nodeContextMenuUI?this.nodeContextMenuUI=this.config.nodeContextMenuUI:this.nodeContextMenuUI=new o.menuUI,this.nodeContextMenuUI.init(this,this.config.nodeContextMenu),this.config.toolbarUI?this.toolbarUI=this.config.toolbarUI:this.toolbarUI=new o.toolbarUI,this.config.notifierUI?this.notifierUI=this.config.notifierUI:this.notifierUI=new o.notifierUI,this.notifierUI.init(this),this.config.menuUI?this.menuUI=this.config.menuUI:this.menuUI=new o.menuUI,this.menuUI.init(this,this.config.menu),this.config.xScrollUI||(this.xScrollUI=new o.xScrollUI(this.element,this.config,function(){return{boundary:n.response.boundary,scale:n.getScale(),viewBox:n.getViewBox(),padding:n.config.padding}},function(s){n.setViewBox(s)},function(){n._draw(!0,o.action.xScroll)})),this.config.yScrollUI||(this.yScrollUI=new o.yScrollUI(this.element,this.config,function(){return{boundary:n.response.boundary,scale:n.getScale(),viewBox:n.getViewBox(),padding:n.config.padding}},function(s){n.setViewBox(s)},function(){n._draw(!0,o.action.xScroll)})),this.config.undoRedoUI?this.undoRedoUI=this.config.undoRedoUI:this.undoRedoUI=new o.undoRedoUI,this.element.classList.add("bft-"+this.config.mode),this._gragStartedId=null,this._timeout=null,this._touch=null,this._initialized=!1,this._loaded=!1,this._moveInterval=null,this._movePosition=null,this.response=null,this.nodes=null,this.isVisible=null,o._intersectionObserver(this.element,function(s){n.isVisible=s,o.events.publish("visibility-change",[n])!==!1&&o.LAZY_LOADING&&n.isVisible&&(n._loaded?n._draw(!1,o.action.update):(n._setInitialSizeIfNotSet(),n._draw(!1,o.action.init)))}))};o._defaultConfig=function(e){return{interactive:!0,mode:"light",lazyLoading:!0,enableDragDrop:!1,enableSearch:!0,enableTouch:!1,enablePan:!0,keyNavigation:!1,miniMap:!1,nodeMenu:null,nodeCircleMenu:null,nodeContextMenu:null,menu:null,toolbar:!1,sticky:!0,nodeMouseClick:o.action.details,nodeMouseDbClick:o.none,mouseScrool:o.action.zoom,showXScroll:o.none,showYScroll:o.none,template:"ana",tags:{},min:!1,nodeBinding:{},linkBinding:{},searchFields:null,searchDisplayField:null,searchFieldsWeight:null,searchFieldsAbbreviation:null,nodes:[],clinks:[],slinks:[],backdrops:[],groupDottedLines:[],dottedLines:[],undoRedoStorageName:null,levelSeparation:60,siblingSeparation:20,subtreeSeparation:40,backdropSeparation:15,mixedHierarchyNodesSeparation:15,assistantSeparation:100,minPartnerSeparation:50,partnerChildrenSplitSeparation:20,partnerNodeSeparation:15,columns:10,padding:30,orientation:o.orientation.top,layout:o.layout.normal,layoutGridColumns:"dynamic",scaleInitial:1,movable:null,scaleMin:.1,scaleMax:5,orderBy:null,editUI:null,filterUI:null,searchUI:null,xScrollUI:null,yScrollUI:null,nodeMenuUI:null,nodeCircleMenuUI:null,nodeContextMenuUI:null,toolbarUI:null,notifierUI:null,menuUI:null,undoRedoUI:null,exportUrl:"https://balkan.app/export",collapse:{},expand:{},align:o.CENTER,UI:null,anim:{func:o.anim.outPow,duration:200},zoom:{speed:120,smooth:12},roots:null,state:null,editForm:{readOnly:!1,titleBinding:"name",photoBinding:"img",addMore:"Add more fields",addMoreBtn:"Add",addMoreFieldName:"Field name",saveAndCloseBtn:"Save and close",cancelBtn:"Cancel",generateElementsFromFields:!0,focusBinding:null,buttons:{edit:{icon:o.icon.edit(24,24,"#fff"),text:"Edit",hideIfEditMode:!0,hideIfDetailsMode:!1},share:{icon:o.icon.share(24,24,"#fff"),text:"Share"},pdf:{icon:o.icon.pdf(24,24,"#fff"),text:"Save as PDF"},remove:{icon:o.icon.remove(24,24,"#fff"),text:"Remove",hideIfDetailsMode:!0}},elements:[]}}},o.prototype.load=function(e,t){var n=this;return this.config.nodes=e,this._draw(!1,o.action.init,void 0,function(){n.filterUI.update(),t&&t()}),this},o.prototype.loadXML=function(e,t){var n=o._xml2json(e);return this.load(n,t)},o.prototype.getXML=function(){return o._json2xml(this.config.nodes)},o.prototype.on=function(e,t){return o.events.on(e,t,this._event_id),this},o.prototype.removeListener=function(e,t){return o.events.remove(e,t,this._event_id)},o.prototype.draw=function(e,t,n){e==null&&(e=o.action.update),this._draw(!1,e,t,n)},o.prototype._draw=function(e,t,n,r){var i=this;if(!o.LAZY_LOADING||this.isVisible)if(o.LAZY_LOADING||this._initialized||(this._setInitialSizeIfNotSet(),this.width()!=0&&this.height()!=0)){this._hideBeforeAnimationCompleted=!1;var s=t==o.action.init?null:this.getViewBox();this.manager.read(e,this.width(),this.height(),s,t,n,function(a){if(!i.notifierUI.show(a.notif)){t!=o.action.exporting&&(i.nodes=a.nodes,i.visibleNodeIds=a.visibleNodeIds,i.roots=a.roots),i.editUI.fields=a.allFields;var c={defs:""};o.events.publish("renderdefs",[i,c]);var l=i.ui.defs(c.defs),d=i.getScale(a.viewBox);l+=i.ui.pointer(i.config,t,d);var u=i.getViewBox(),f=a.viewBox;c={content:l,res:a},o.events.publish("prerender",[i,c]),l=c.content;var p=[];if(o.RENDER_LINKS_BEFORE_NODES)for(var h=0;h<a.visibleNodeIds.length;h++){var m=a.nodes[a.visibleNodeIds[h]];o.getRootOf(m).stParent?p.push(m.id):l+=i.ui.link(m,i,d,a.bordersByRootIdAndLevel,a.nodes,t)}for(h=0;h<a.visibleNodeIds.length;h++){m=a.nodes[a.visibleNodeIds[h]];var b=i._get(m.id);o.RENDER_LINKS_BEFORE_NODES&&p.includes(m.id)&&(l+=i.ui.link(m,i,d,a.bordersByRootIdAndLevel,a.nodes,t)),l+=i.ui.node(m,b,a.animations,i.config,void 0,void 0,void 0,t,d,i)}for(h=0;h<a.visibleNodeIds.length;h++)m=a.nodes[a.visibleNodeIds[h]],o.RENDER_LINKS_BEFORE_NODES||(l+=i.ui.link(m,i,d,a.bordersByRootIdAndLevel,a.nodes,t)),l+=i.ui.expandCollapseBtn(i,m,i._layoutConfigs,t,d);if(c={content:l,res:a},o.events.publish("render",[i,c]),l=c.content,a=c.res,l+=i.ui.lonely(i.config),t!==o.action.exporting){if(t!==o.action.centernode&&t!==o.action.insert&&t!==o.action.expand&&t!==o.action.collapse&&t!==o.action.update||(f=u),t===o.action.init&&u!=null&&(f=u),i.response=a,I=i.ui.svg(i.width(),i.height(),f,i.config,l),i._initialized){var _=i.getSvg(),g=_.parentNode;g.removeChild(_),g.insertAdjacentHTML("afterbegin",I),i._attachEventHandlers(),i.xScrollUI.addListener(i.getSvg()),i.yScrollUI.addListener(i.getSvg()),i.xScrollUI.setPosition(),i.yScrollUI.setPosition()}else i.element.innerHTML=i.ui.css()+I+i.ui.menuButton(i.config),i._attachInitEventHandlers(),i._attachEventHandlers(),i.xScrollUI.create(i.width(),i.config.padding),i.xScrollUI.setPosition(),i.xScrollUI.addListener(i.getSvg()),i.yScrollUI.create(i.height(),i.config.padding),i.yScrollUI.setPosition(),i.yScrollUI.addListener(i.getSvg()),i.config.enableSearch&&i.searchUI.init(i),i.toolbarUI.init(i,i.config.toolbar),i.undoRedoUI.init(i);var w=!1,y=i.response.animations;if(y[0].length>0){for(i._hideBeforeAnimation(y[0].length),h=0;h<y[0].length;h++)y[0][h]=i.getNodeElement(y[0][h]);o.animate(y[0],y[1],y[2],i.config.anim.duration,i.config.anim.func,function(){w||(r&&r(),o.events.publish("redraw",[i]),i._showAfterAnimation(),w=!0)})}t===o.action.centerNode?o.animate(i.getSvg(),{viewbox:u},{viewbox:i.response.viewBox},i.config.anim.duration,i.config.anim.func,function(){i.ripple(n.options.rippleId),w||(r&&r(),o.events.publish("redraw",[i]),i._showAfterAnimation(),w=!0)},function(){i.xScrollUI.setPosition(),i.yScrollUI.setPosition()}):!u||!i.response||u[0]==i.response.viewBox[0]&&u[1]==i.response.viewBox[1]&&u[2]==i.response.viewBox[2]&&u[3]==i.response.viewBox[3]||t!==o.action.insert&&t!==o.action.expand&&t!==o.action.collapse&&t!==o.action.update&&t!==o.action.init?y[0].length==0&&(w||(r&&r(),o.events.publish("redraw",[i]),w=!0)):o.animate(i.getSvg(),{viewbox:u},{viewbox:i.response.viewBox},2*i.config.anim.duration,i.config.anim.func,function(){i.xScrollUI.setPosition(),i.yScrollUI.setPosition(),w||(r&&r(),o.events.publish("redraw",[i]),w=!0)}),i._initialized||(i._initialized=!0,i.filterUI.update(),o.events.publish("init",[i])),!i._loaded&&a&&a.nodes&&Object.keys(a.nodes).length&&(i._loaded=!0)}else{var v=a.boundary,x=v.maxX-v.minX,C=v.maxY-v.minY,I=i.ui.svg(x,C,[v.minX,v.minY,x,C],i.config,l,d);r(I,a)}}},function(a){o.events.publish("ready",[i,a])})}else console.error("Cannot load the family with size 0! If you are using the FamilyTree within tabs set FamilyTree.LAZY_LOADING to true! ")},o.prototype._setInitialSizeIfNotSet=function(){this.element.style.overflow="hidden",this.element.style.position="relative",this.element.offsetHeight==0&&(this.element.style.height="100%",this.element.offsetHeight==0&&(this.element.style.height="700px")),this.element.offsetWidth==0&&(this.element.style.width="100%",this.element.offsetWidth==0&&(this.element.style.width="700px"))},o.prototype.width=function(){return this.element.offsetWidth},o.prototype.height=function(){return this.element.offsetHeight},o.prototype.getViewBox=function(){var e=this.getSvg();return o._getViewBox(e)},o.prototype.setViewBox=function(e){this.getSvg().setAttribute("viewBox",e.toString())},o.prototype.getScale=function(e){return e||(e=this.getViewBox()),o.getScale(e,this.width(),this.height(),this.config.scaleInitial,this.config.scaleMax,this.config.scaleMin)},o.prototype.setScale=function(e){e>this.config.scaleMax&&(e=this.config.scaleMax),e<this.config.scaleMin&&(e=this.config.scaleMin);var t=this.getViewBox().slice(0),n=this.width(),r=this.height(),i=n/t[2],s=r/t[3],a=i>s?s:i,c=t,l=t[2],d=t[3];return t[2]=t[2]/(e/a),t[3]=t[3]/(e/a),t[0]=c[0]-(t[2]-l)/2,t[1]=c[1]-(t[3]-d)/2,this.setViewBox(t),o.events.publish("redraw",[this]),e},o.prototype.ripple=function(e,t,n){var r=this.getNode(e);if(r!=null){var i=this.getNodeElement(e);if(i!=null){var s=this.getScale(),a=r.w/2,c=r.h/2;if(t!==void 0&&n!==void 0){var l=i.getBoundingClientRect();a=t/s-l.left/s,c=n/s-l.top/s}var d=r.w,u=r.h,f=d-a>a?d-a:a,p=u-c>c?u-c:c,h=f>p?f:p,m=document.createElementNS("http://www.w3.org/2000/svg","g"),b=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),_=document.createElementNS("http://www.w3.org/2000/svg","rect"),g=document.createElementNS("http://www.w3.org/2000/svg","circle"),w=o.randomId();b.setAttribute("id",w);var y={ripple:o.t(r.templateName,r.min,this.getScale()).ripple,node:r};o.events.publish("ripple",[this,y]),_.setAttribute("x",y.ripple.rect?y.ripple.rect.x:0),_.setAttribute("y",y.ripple.rect?y.ripple.rect.y:0),_.setAttribute("width",y.ripple.rect?y.ripple.rect.width:r.w),_.setAttribute("height",y.ripple.rect?y.ripple.rect.height:r.h),_.setAttribute("rx",y.ripple.radius),_.setAttribute("ry",y.ripple.radius),g.setAttribute("clip-path","url(#"+w+")"),g.setAttribute("cx",a),g.setAttribute("cy",c),g.setAttribute("r",0),g.setAttribute("fill",y.ripple.color),g.setAttribute("class","bft-ripple"),b.appendChild(_),m.appendChild(b),m.appendChild(g),i.appendChild(m),o.animate(g,{r:0,opacity:1},{r:h,opacity:0},500,o.anim.outPow,function(){i.removeChild(m)})}}},o.prototype.center=function(e,t,n){var r,i,s=e,a=!0,c=!0;t&&t.parentState!=null&&(r=t.parentState),t&&t.childrenState!=null&&(i=t.childrenState),t&&t.rippleId!=null&&(s=t.rippleId),t&&t.vertical!=null&&(a=t.vertical),t&&t.horizontal!=null&&(c=t.horizontal);var l={parentState:r,childrenState:i,rippleId:s,vertical:a,horizontal:c};this._draw(!1,o.action.centerNode,{id:e,options:l},n)},o.prototype.fit=function(e){this.config.scaleInitial=o.match.boundary,this._draw(!0,o.action.init,{method:"fit"},e)},o.prototype.toggleFullScreen=function(){var e=document.querySelector("["+o.attr.tlbr+"r='fullScreen']");document.fullscreenElement==this.element||document.webkitFullscreenElement==this.element||document.mozFullScreenElement==this.element||document.msFullscreenElement==this.element?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),e&&(e.innerHTML=o.toolbarUI.openFullScreenIcon)):(this.element.requestFullscreen?this.element.requestFullscreen():this.element.mozRequestFullScreen?this.element.mozRequestFullScreen():this.element.webkitRequestFullscreen?this.element.webkitRequestFullscreen():this.element.msRequestFullscreen&&this.element.msRequestFullscreen(),e&&(e.innerHTML=o.toolbarUI.closeFullScreenIcon))},o.prototype.getNode=function(e){return this.nodes[e]},o.prototype.setLayout=function(e,t){t||(t="base"),this._layoutConfigs[t].layout=e,t=="base"&&(this.config.layout=e),this._draw(!1,o.action.update)},o.prototype.setOrientation=function(e,t,n){var r=this;t||(t="base"),this._layoutConfigs[t].orientation=e,t=="base"&&(this.config.orientation=e),this._draw(!1,o.action.update,void 0,function(){o._moveToBoundaryArea(r.getSvg(),r.getViewBox(),r.response.boundary,function(){r._draw(!0,o.action.pan),n&&n()})})},o.prototype.search=function(e,t,n){return o.isNEU(t)&&(t=this.searchUI._searchFields),o.isNEU(n)&&(n=t),o._search.search(this.config.nodes,e,t,n,this.config.searchDisplayField,this.config.searchFieldsWeight,this.searchUI._searchFieldsAbbreviation)},o.prototype._hideBeforeAnimation=function(e){if(this._hideBeforeAnimationCompleted!=1&&!(e&&e<o.ANIM_THRESHOLD)){var t=this.element.getElementsByTagName("text");if(t.length>o.TEXT_THRESHOLD)for(var n=0;n<t.length;n++)t[n].style.display="none";var r=this.element.getElementsByTagName("image");if(r.length>o.IMAGES_THRESHOLD)for(n=0;n<r.length;n++)r[n].style.display="none";var i=this.element.querySelectorAll("["+o.attr.link_id+"]");if(i.length>o.LINKS_THRESHOLD)for(n=0;n<i.length;n++)i[n].style.display="none";var s=this.element.querySelectorAll("["+o.attr.control_expcoll_id+"]");if(s.length>o.BUTTONS_THRESHOLD)for(n=0;n<s.length;n++)s[n].style.display="none";var a=this.element.querySelectorAll("["+o.attr.control_up_id+"]");if(a.length>o.BUTTONS_THRESHOLD)for(n=0;n<a.length;n++)a[n].style.display="none";this._hideBeforeAnimationCompleted=!0}},o.prototype._showAfterAnimation=function(){for(var e=this.element.getElementsByTagName("text"),t=0;t<e.length;t++)e[t].style.display="";var n=this.element.getElementsByTagName("image");for(t=0;t<n.length;t++)n[t].style.display="";var r=this.element.querySelectorAll("["+o.attr.link_id+"]");for(t=0;t<r.length;t++)r[t].style.display="";var i=this.element.querySelectorAll("["+o.attr.control_expcoll_id+"]");for(t=0;t<i.length;t++)i[t].style.display="";var s=this.element.querySelectorAll("["+o.attr.control_up_id+"]");for(t=0;t<s.length;t++)s[t].style.display="";this._hideBeforeAnimationCompleted=!1},o.prototype.isChild=function(e,t){for(var n=this.getNode(t);n;){if(n.id==e)return!0;n=n.parent?n.parent:n.stParent}return!1},o.prototype.getCollapsedIds=function(e){for(var t=[],n=0;n<e.childrenIds.length;n++){var r=this.getNode(e.childrenIds[n]);r.collapsed==1&&t.push(r.id)}return t},o.prototype.stateToUrl=function(){if(this.manager.state){var e={};return e.exp=this.manager.state.exp.join("*"),e.min=this.manager.state.min.join("*"),e.adjustify=this.manager.state.adjustify.x+"*"+this.manager.state.adjustify.y,e.scale=this.manager.state.scale,e.y=this.manager.state.x,e.x=this.manager.state.y,new URLSearchParams(e).toString()}return""},o.prototype.generateId=function(){for(;;){var e="_"+("0000"+(Math.random()*Math.pow(36,4)|0).toString(36)).slice(-4);if(this.nodes==null||!this.nodes.hasOwnProperty(e))return e}},o.prototype.moveNodesToVisibleArea=function(e,t){for(var n=this,r=this.getSvg(),i=this.getViewBox(),s=null,a=null,c=null,l=null,d=0;d<e.length;d++){var u=this.nodes[e[d]];(s===null||s<u.x+u.w)&&(s=u.x+u.w),(a===null||a<u.y+u.h)&&(a=u.y+u.h),(c===null||c>u.x)&&(c=u.x),(l===null||l>u.y)&&(l=u.y)}var f=this.width(),p=this.height(),h=f/(w=s-c+2*this.config.padding),m=p/(y=a-l+2*this.config.padding),b=h>m?m:h,_=Math.ceil(f/b),g=Math.ceil(p/b),w=0,y=0;if(_-2*this.config.padding>=s-c)w=(s+c)/2-_/2;else switch(w=firstRoot.x-_/2+o.manager._getNodeWidth(firstRoot,this.config)/2,this.config.orientation){case o.orientation.right:case o.orientation.right_top:(w=-(_/2-(c-s)/2))<this.config.padding-_&&(w=this.config.padding-_);break;case o.orientation.left:case o.orientation.bottom_left:case o.orientation.top_left:case o.orientation.left_top:(w=-(_/2-(s-c)/2))>-this.config.padding&&(w=-this.config.padding)}if(g-2*this.config.padding>=a-l)y=(a+l)/2-g/2;else switch((y=-(g/2-(a-l)/2))>-this.config.padding&&(y=-this.config.padding),this.config.orientation){case o.orientation.bottom:case o.orientation.bottom_left:(y=-(g/2-(l-a)/2))<this.config.padding-g&&(y=this.config.padding-g);break;case o.orientation.left:case o.orientation.right:y=firstRoot.y-g/2+o.manager._getNodeWidth(firstRoot,this.config)/2}var v=[w,y,_,g];i[0]!==v[0]||i[1]!==v[1]?o.animate(r,{viewBox:i},{viewBox:v},this.config.anim.duration,this.config.anim.func,function(){n.draw(o.action.update,void 0,t)}):t&&t()},o.prototype._nodeHasHiddenParent=function(e){return!e.parent&&!o.isNEU(e.pid)&&this.getNode(e.pid)},o.prototype.destroy=function(){this._removeEvent(window,"resize"),o.events.removeForEventId(this._event_id),this.element.innerHTML=null},o.__defaultConfig=o._defaultConfig,o._defaultConfig=function(e){var t=o.__defaultConfig();return t.nodeTreeMenu=null,t.template="tommy",t.mode="light",t.minPartnerSeparation=30,t.partnerChildrenSplitSeparation=10,t.siblingSeparation=35,t.tags["children-group"]={template:"cgroup",subTreeConfig:{siblingSeparation:7,columns:1}},e&&e.template?(t.tags.male={template:e.template+"_male"},t.tags.female={template:e.template+"_female"}):(t.tags.male={template:t.template+"_male"},t.tags.female={template:t.template+"_female"}),t},o.prototype.load=function(e,t){var n=this;return this.config.nodes=e,this.config.roots=null,this._draw(!1,o.action.init,void 0,function(){n.filterUI.update(),t&&t()}),this},o.prototype.getRecentRootsByNodeId=function(e){this.recentRoots||(this.recentRoots=[]);var t=this.recentRoots,n=this.getNode(e);return n?(n.rids.sort(function(r,i){var s=t.indexOf(r),a=t.indexOf(i);return s==-1?1e3:a==-1?-1e3:s-a}),n.rids):[]},o.prototype._nodeHasHiddenParent=function(e){return!(e.parent||o.isNEU(e.pid)||!this.getNode(e.pid))||!(!e.isPartner||o.isNEU(e.mid)||!this.getNode(e.mid))||!(!e.isPartner||o.isNEU(e.fid)||!this.getNode(e.fid))||!!(e.isPartner&&e.pids.length>1)},o.prototype._center=o.prototype.center,o.prototype.center=function(e,t,n){var r=this.getRecentRootsByNodeId(e);Array.isArray(this.config.roots)||(roots=[]),o._changeRootOption(this.config.roots,r,this.manager.rootList),this._center(e,t,n)},o.localStorage={},o.localStorage.getItem=function(e){var t=localStorage.getItem("to_date");if(t){if((t=new Date(t))<new Date){for(var n=0,r=localStorage.length;n<r;++n){var i=localStorage.key(n);i&&i.startsWith&&i.startsWith('{"n"')&&localStorage.removeItem(i)}localStorage.removeItem("to_date")}}else(t=new Date).setDate(t.getDate()+5),t=t.toISOString(),localStorage.setItem("to_date",t);return localStorage.getItem(e)},o.localStorage.setItem=function(e,t){try{localStorage.setItem(e,t)}catch(n){n.code==n.QUOTA_EXCEEDED_ERR?(console.warn("Local storage quota exceeded"),localStorage.clear()):(console.error("Local storage error code:"+n.code),console.error(n))}},o.prototype.canUpdateLink=function(e,t){if(t==null||t==null||e==null||e==null||e==t)return!1;var n=this.getNode(t),r=this.getNode(e);return!(n&&r&&(n.isPartner||n.hasPartners&&r.isAssistant||n.hasAssistants&&r.isPartner))&&!this.isChild(e,t)},o.prototype._canUpdateLink=o.prototype.canUpdateLink,o.prototype.updateNode=function(e,t,n){var r=this,i=this.get(e.id);if(n===!0&&o.events.publish("update",[this,i,e])===!1)return!1;this.update(e),o.events.publish("updated",[this]),this.filterUI.update();var s=this.getNode(e.id),a=s.pid;a==null&&(a=s.stpid),this._draw(!1,o.action.update,{id:a},function(){r.ripple(e.id),t&&t()})},o.prototype.update=function(e){for(var t=0;t<this.config.nodes.length;t++)if(this.config.nodes[t].id==e.id){this._putInUndoStack(),this.clearRedo(),this.config.nodes[t]=e;break}return this},o.prototype.removeNode=function(e,t,n){var r=this;if(!this.canRemove(e))return!1;var i=this._getNewPidsAndStpidsForIds(e);return n===!0&&o.events.publish("remove",[this,e,i])===!1?!1:(this.remove(e),o.events.publish("updated",[this]),this.filterUI.update(),this._draw(!1,o.action.update,null,function(){r.config.sticky&&o._moveToBoundaryArea(r.getSvg(),r.getViewBox(),r.response.boundary),t&&t()}),!0)},o.prototype.remove=function(e){var t=this.get(e);if(t){this._putInUndoStack(),this.clearRedo();for(var n=this.config.nodes.length-1;n>=0;n--)this.config.nodes[n].pid!=e&&this.config.nodes[n].stpid!=e||(this.config.nodes[n].pid=t.pid,this.config.nodes[n].stpid=t.stpid),this.config.nodes[n].id==e&&this.config.nodes.splice(n,1)}return this},o.prototype._getNewPidsAndStpidsForIds=function(e){var t=this.get(e),n={},r={};if(t)for(var i=this.config.nodes.length-1;i>=0;i--)this.config.nodes[i].pid==e?n[this.config.nodes[i].id]=t.pid:this.config.nodes[i].stpid==e&&(r[this.config.nodes[i].id]=t.stpid);return{newPidsForIds:n,newStpidsForIds:r}},o.prototype.addNode=function(e,t,n){var r=this;if(n===!0&&o.events.publish("add",[this,e])===!1)return!1;this.add(e),o.events.publish("updated",[this]),this.filterUI.update(),r._draw(!1,o.action.insert,{id:e.pid,insertedNodeId:e.id},function(){r.ripple(e.id),t&&t()})},o.prototype.add=function(e){if(e.id==null&&console.error("Call addNode without id"),this._putInUndoStack(),this.clearRedo(),this.config.movable&&!o.isNEU(e.pid)){var t=this._get(e.pid);t&&(t.movex!=null&&(e.movex=t.movex),t.movey!=null&&(e.movey=t.movey))}return this.config.nodes.push(e),this},o.prototype.replaceIds=function(e,t){this._replaceIds(e),this._draw(!1,o.action.update,void 0,t)},o.prototype._replaceIds=function(e){for(var t=function(l){for(var d=0;d<l.length;d++){var u=l[d];for(var f in e){var p=e[f];u.from==f&&(u.from=p),u.to==f&&(u.to=p)}}},n=0;n<this.config.nodes.length;n++){var r=this.config.nodes[n];for(var i in e){var s=e[i];r.id==i&&(r.id=s),r.pid==i&&(r.pid=s),r.stpid==i&&(r.stpid=s),r.ppid==i&&(r.ppid=s)}}if(Array.isArray(this.config.roots))for(n=0;n<this.config.roots.length;n++)o.isNEU(e[this.config.roots[n]])||(this.config.roots[n]=e[this.config.roots[n]]);if(this.nodes)for(var a in this.nodes)o.isNEU(e[a])||(s=e[a],(c=this.nodes[a]).id=s,this.nodes[s]=c);if(this.manager.oldNodes)for(var a in this.manager.oldNodes)o.isNEU(e[a])||(s=e[a],(c=this.manager.oldNodes[a]).id=s,this.manager.oldNodes[s]=c);if(this.roots){for(var a in this.roots)if(!o.isNEU(e[a])){var c;s=e[a],(c=this.roots[a]).id=s,this.roots[s]=c}}t(this.config.clinks),t(this.config.slinks),t(this.config.groupDottedLines),t(this.config.dottedLines)},o.prototype._get=function(e){var t=this.__get(e);if(t)return t;if((this.config.groupDottedLines.length||this.config.dottedLines.length)&&!o.isNEU(e)&&typeof e=="string"&&(e.indexOf("balkan_group_dotted_")!=-1||e.indexOf("balkan_dotted_")!=-1)){var n=(e=(e=e.replace("balkan_group_dotted_","")).replace("balkan_dotted_","")).indexOf("_balkan_id_");if(e=e.substring(n+11),t=this.__get(e))return t}return null},o.prototype.__get=function(e){for(var t=0;t<this.config.nodes.length;t++)if(this.config.nodes[t].id==e)return this.config.nodes[t];return null},o.prototype.get=function(e){var t=this._get(e);return t==null?null:JSON.parse(JSON.stringify(t))},o.prototype.canRemove=function(e){var t=this.getNode(e);return!!t&&!t.hasPartners&&!t.hasAssistants},o.prototype.addChildNode=function(e,t,n){this.hideTreeMenu(!1);var r=this;if(!e||o.isNEU(e.mid)&&o.isNEU(e.fid))console.error("addSonNode invalid data");else{o.isNEU(e.id)&&(e.id=this.generateId());var i={addNodesData:[e],updateNodesData:[],removeNodeId:null};if(n===!0&&o.events.publish("update",[this,i])===!1)return!1;r._fireUpdate_addUpdateRemove(i,n);var s="";o.isNEU(i.addNodesData[0].pid)?o.isNEU(i.addNodesData[0].mid)?o.isNEU(i.addNodesData[0].fid)||(s=i.addNodesData[0].fid):s=i.addNodesData[0].mid:s=i.addNodesData[0].pid,r._draw(!1,o.action.insert,{id:s,insertedNodeId:i.addNodesData[0].id},function(){r.ripple(i.addNodesData[0].id),t&&t(),n===!0&&o.events.publish("updated",[r,i]),r.filterUI.update()})}},o.prototype.addChildAndPartnerNodes=function(e,t,n,r,i){this.hideTreeMenu(!1);var s=this;if(!t||o.isNEU(t.mid)&&o.isNEU(t.fid))console.error("addChildAndPartnerNodes invalid childData");else if(n){o.isNEU(t.id)&&(t.id=this.generateId()),o.isNEU(n.id)&&(n.id=this.generateId()),t.mid=="_ft_partner"?t.mid=n.id:t.fid=="_ft_partner"&&(t.fid=n.id);var a=[],c=null;Array.isArray(n.pids)&&(n.pids.length!=1&&console.error("addChildAndPartnerNodes partnerData.pids has to have one partner"),c=this.get(n.pids[0]),Array.isArray(c.pids)||(c.pids=[]),c.pids.push(n.id),a.push(c));var l={addNodesData:[t,n],updateNodesData:a,removeNodeId:null};if(i===!0&&o.events.publish("update",[this,l])===!1)return!1;s._fireUpdate_addUpdateRemove(l,i);var d=s.getRecentRootsByNodeId(e);o._changeRootOption(s.config.roots,d,s.manager.rootList);var u="";c?u=c.id:o.isNEU(t.pid)?o.isNEU(t.mid)?o.isNEU(t.fid)||(u=t.fid):u=t.mid:u=t.pid,s._draw(!1,o.action.update,{id:u},function(){s.ripple(t.id),s.ripple(n.id),r&&r(),i===!0&&o.events.publish("updated",[s,l]),s.filterUI.update()}),i===!0&&o.events.publish("updating",[s,l])}else console.error("addChildAndPartnerNodes invalid data")},o.prototype.addPartnerAndParentNodes=function(e,t,n,r,i){this.hideTreeMenu(!1);var s=this;if(!o.isNEU(t)&&t.length)if(n){o.isNEU(n.id)&&(n.id=this.generateId());for(var a=[],c=0;c<t.length;c++){var l=this.get(t[c]);if(!o.isNEU(l.mid)&&!o.isNEU(l.fid))return void console.error("father id (fid) or mather id (mid) has to be null or undefined");o.isNEU(l.mid)?l.mid=n.id:o.isNEU(l.mid)||(l.fid=n.id),a.push(l)}var d=null;Array.isArray(n.pids)&&(n.pids.length!=1&&console.error("addChildAndPartnerNodes partnerData.pids has to have one partner"),d=this.get(n.pids[0]),Array.isArray(d.pids)||(d.pids=[]),d.pids.push(n.id),a.push(d));var u={addNodesData:[n],updateNodesData:a,removeNodeId:null};if(i===!0&&o.events.publish("update",[this,u])===!1)return!1;s._fireUpdate_addUpdateRemove(u,i);var f=s.getRecentRootsByNodeId(e);o._changeRootOption(s.config.roots,f,s.manager.rootList);var p="";d&&(p=d.id),s._draw(!1,o.action.update,{id:p},function(){s.ripple(n.id),r&&r(),i===!0&&o.events.publish("updated",[s,u]),s.filterUI.update()}),i===!0&&o.events.publish("updating",[s,u])}else console.error("addPartnerAndParentNodes invalid data");else console.error("addPartnerAndParentNodes invalid data")},o.prototype.addPartnerNode=function(e,t,n){this.hideTreeMenu(!1);var r=this;if(e&&Array.isArray(e.pids)&&e.pids.length==1){o.isNEU(e.id)&&(e.id=this.generateId());var i=this.get(e.pids[0]);Array.isArray(i.pids)||(i.pids=[]),i.pids.push(e.id);var s={removeNodeId:null,updateNodesData:[i],addNodesData:[e]};if(n===!0&&o.events.publish("update",[this,s])===!1)return!1;r._fireUpdate_addUpdateRemove(s,n);var a=r.getRecentRootsByNodeId(s.updateNodesData[0].id);o._changeRootOption(r.config.roots,a,r.manager.rootList);var c=s.updateNodesData[0].id;r._draw(!1,o.action.insert,{id:c,insertedNodeId:s.addNodesData[0].id},function(){r.ripple(s.addNodesData[0].id),t&&t(),n===!0&&o.events.publish("updated",[r,s]),r.filterUI.update()}),n===!0&&o.events.publish("updating",[r,s])}else console.error("addPartnerNode invalid data")},o.prototype.addParentNode=function(e,t,n,r,i){this.hideTreeMenu(!1);var s=this;if(n)if(["mid","fid"].has(t))if(o.isNEU(e))console.error("addParentNode invalid childId");else{o.isNEU(n.id)&&(n.id=this.generateId());var a=[],c=this.get(e);c[t]=n.id,a.push(c);var l=null;Array.isArray(n.pids)&&(n.pids.length!=1&&console.error("addParentNode: data has to have one partner"),l=this.get(n.pids[0]),Array.isArray(l.pids)||(l.pids=[]),l.pids.push(n.id),a.push(l));var d={removeNodeId:null,updateNodesData:a,addNodesData:[n]};if(i===!0&&o.events.publish("update",[this,d])===!1)return!1;s._fireUpdate_addUpdateRemove(d,i);var u=e;s.config.roots=[d.addNodesData[0].id],s._draw(!1,o.action.insert,{id:u,insertedNodeId:d.addNodesData[0].id},function(){s.ripple(d.addNodesData[0].id),r&&r(),i===!0&&o.events.publish("updated",[s,d]),s.filterUI.update()}),i===!0&&o.events.publish("updating",[s,d])}else console.error("addParentNode invalid type");else console.error("addParentNode invalid data")},o.prototype.canRemove=function(e){var t=this.getNode(e);if(!t)return!1;var n=this.getNode(t.mid),r=this.getNode(t.fid),i=t.ftChildrenIds.length>0,s=!1,a=t.pids.length>0,c=t.pids.length>1;if(t.pids.length==1){var l=this.getNode(t.pids[0]);s=t.ftChildrenIds.compare(l.ftChildrenIds)}return!(!n&&!r||i||a)||!(n||r||i||c||!a||s)||!(n||r||!i||!s)||!(n||r||!i||s)||!(n||r||i||!s)},o.prototype.removeNode=function(e,t,n){var r=this;if(this.canRemove(e)){var i=this.getNode(e),s=[];if(Array.isArray(i.pids))for(var a=0;a<i.pids.length;a++){var c=this.get(i.pids[a]);c&&(d=c.pids.indexOf(i.id))!=-1&&(c.pids.splice(d,1),s.push(c))}if(Array.isArray(i.ftChildrenIds))for(a=0;a<i.ftChildrenIds.length;a++){var l=this.get(i.ftChildrenIds[a]);l&&(l.mid==i.id?(l.mid=void 0,s.push(l)):l.fid==i.id&&(l.fid=void 0,s.push(l)))}var d,u={removeNodeId:e,updateNodesData:s,addNodesData:[]};if(n===!0&&o.events.publish("update",[this,u])===!1)return!1;r._fireUpdate_addUpdateRemove(u,n),(d=r.config.roots.indexOf(e))!=-1&&r.config.roots.splice(d,1),r._draw(!1,o.action.update,null,function(){r.config.sticky&&o._moveToBoundaryArea(r.getSvg(),r.getViewBox(),r.response.boundary),t&&t(),n===!0&&o.events.publish("updated",[r,u]),r.filterUI.update()}),n===!0&&o.events.publish("updating",[r,u])}},o.prototype.updateNode=function(e,t,n){var r=this,i=this.getNode(e.id);e.pids||(e.pids=[]);var s=[];s.push(e);for(var a=0;a<i.pids.length;a++)if(!e.pids.has(i.pids[a])&&(l=this._get(i.pids[a]))&&l.pids){var c=l.pids.indexOf(e.id);c!=-1&&(l.pids.splice(c,1),s.push(e)),i.pids.splice(a,1),s.push(l)}for(a=0;a<e.pids.length;a++){var l;(!i.pids||!i.pids.has(e.pids[a]))&&((l=this._get(e.pids[a])).pids||(l.pids=[]),l.pids.push(e.pids[a]),s.push(l))}var d={removeNodeId:null,updateNodesData:s,addNodesData:[]};if(n===!0&&o.events.publish("update",[this,d])===!1)return!1;r._fireUpdate_addUpdateRemove(d,n),r._draw(!1,o.action.update,null,function(){r.config.sticky&&o._moveToBoundaryArea(r.getSvg(),r.getViewBox(),r.response.boundary),t&&t(),n===!0&&o.events.publish("updated",[r,d]),r.filterUI.update()})},o.prototype._fireUpdate_addUpdateRemove=function(e,t){for(var n=0;n<e.addNodesData.length;n++)this.add(e.addNodesData[n]);for(n=0;n<e.updateNodesData.length;n++)this.update(e.updateNodesData[n]);o.isNEU(e.removeNodeId)||this.remove(e.removeNodeId),t===!0&&o.events.publish("updating",[this,e])},o.prototype.__replaceIds=o.prototype._replaceIds,o.prototype._replaceIds=function(e){this.__replaceIds(e);for(var t=0;t<this.config.nodes.length;t++){var n=this.config.nodes[t];for(var r in e){var i=e[r];if(n.fid==r&&(n.fid=i),n.mid==r&&(n.mid=i),Array.isArray(n.pids))for(var s=0;s<n.pids.length;s++)n.pids[s]==r&&(n.pids[s]=i)}}},o===void 0&&(o={}),o._ajax=function(e,t,n,r,i){r==null&&(r="arraybuffer");var s=new XMLHttpRequest;s.onload=function(a){s.readyState==4&&this.status===200&&(a.target==null?i(this.response):i(a.target.response))},s.onerror=function(a){i({error:a})},s.open(t,e),s.responseType=r,s.setRequestHeader("Content-Type","application/json"),n==null?s.send():s.send(n)},o===void 0&&(o={}),o.animate=function(e,t,n,r,i,s,a){var c,l=10,d=1,u=r/l+1;return document.getElementsByTagName("g"),Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]),c=setInterval(function(){for(var f=0;f<e.length;f++)for(var p in n[f]){var h=o._arrayContains(["top","left","right","bottom","width","height"],p.toLowerCase())?"px":"";switch(p.toLowerCase()){case"d":var m=i((d*l-l)/r)*(n[f][p][0]-t[f][p][0])+t[f][p][0],b=i((d*l-l)/r)*(n[f][p][1]-t[f][p][1])+t[f][p][1];e[f].setAttribute("d",e[f].getAttribute("d")+" L"+m+" "+b);break;case"r":var _=i((d*l-l)/r)*(n[f][p]-t[f][p])+t[f][p];e[f].setAttribute("r",_);break;case"x1":_=i((d*l-l)/r)*(n[f][p]-t[f][p])+t[f][p],e[f].setAttribute("x1",_);break;case"x2":_=i((d*l-l)/r)*(n[f][p]-t[f][p])+t[f][p],e[f].setAttribute("x2",_);break;case"y1":_=i((d*l-l)/r)*(n[f][p]-t[f][p])+t[f][p],e[f].setAttribute("y1",_);break;case"y2":_=i((d*l-l)/r)*(n[f][p]-t[f][p])+t[f][p],e[f].setAttribute("y2",_);break;case"rotate3d":if(n[f][p]){var g=t[f][p],w=n[f][p],y=[0,0,0,0];for(var v in g)y[v]=i((d*l-l)/r)*(w[v]-g[v])+g[v];e[f].style.transform="rotate3d("+y.toString()+"deg)"}break;case"transform":if(n[f][p]){g=t[f][p],w=n[f][p],y=[0,0,0,0,0,0];for(var v in g)y[v]=i((d*l-l)/r)*(w[v]-g[v])+g[v];e[f].hasAttribute("transform")?e[f].setAttribute("transform","matrix("+y.toString()+")"):e[f].style.transform="matrix("+y.toString()+")"}break;case"viewbox":if(n[f][p]){g=t[f][p],w=n[f][p],y=[0,0,0,0];for(var v in g)y[v]=i((d*l-l)/r)*(w[v]-g[v])+g[v];e[f].setAttribute("viewBox",y.toString())}break;case"margin":if(n[f][p]){g=t[f][p],w=n[f][p],y=[0,0,0,0];for(var v in g)y[v]=i((d*l-l)/r)*(w[v]-g[v])+g[v];var x="";for(v=0;v<y.length;v++)x+=parseInt(y[v])+"px ";e[f]&&e[f].style&&(e[f].style[p]=x)}break;case"scrolly":_=i((d*l-l)/r)*(n[f][p]-t[f][p])+t[f][p],e[f].scrollTo(0,_);break;default:_=i((d*l-l)/r)*(n[f][p]-t[f][p])+t[f][p],e[f]&&e[f].style&&(e[f].style[p]=_+h)}}a&&a(),(d+=1)>u+1&&(clearInterval(c),s&&s(e))},l)},o.anim={},o.anim.inPow=function(e){return e<0?0:e>1?1:Math.pow(e,2)},o.anim.outPow=function(e){return e<0?0:e>1?1:-1*(Math.pow(e-1,2)+-1)},o.anim.inOutPow=function(e){return e<0?0:e>1?1:(e*=2)<1?o.anim.inPow(e,2)/2:-.5*(Math.pow(e-2,2)+-2)},o.anim.inSin=function(e){return e<0?0:e>1?1:1-Math.cos(e*(Math.PI/2))},o.anim.outSin=function(e){return e<0?0:e>1?1:Math.sin(e*(Math.PI/2))},o.anim.inOutSin=function(e){return e<0?0:e>1?1:-.5*(Math.cos(Math.PI*e)-1)},o.anim.inExp=function(e){return e<0?0:e>1?1:Math.pow(2,10*(e-1))},o.anim.outExp=function(e){return e<0?0:e>1?1:1-Math.pow(2,-10*e)},o.anim.inOutExp=function(e){return e<0?0:e>1?1:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,10*(-2*e+1)))},o.anim.inCirc=function(e){return e<0?0:e>1?1:-(Math.sqrt(1-e*e)-1)},o.anim.outCirc=function(e){return e<0?0:e>1?1:Math.sqrt(1-(e-1)*(e-1))},o.anim.inOutCirc=function(e){return e<0?0:e>1?1:e<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(2*e-2)*(2*e-2))+1)},o.anim.rebound=function(e){return e<0?0:e>1?1:e<1/2.75?1-7.5625*e*e:e<2/2.75?1-(7.5625*(e-1.5/2.75)*(e-1.5/2.75)+.75):e<2.5/2.75?1-(7.5625*(e-2.25/2.75)*(e-2.25/2.75)+.9375):1-(7.5625*(e-2.625/2.75)*(e-2.625/2.75)+.984375)},o.anim.inBack=function(e){return e<0?0:e>1?1:e*e*(2.70158*e-1.70158)},o.anim.outBack=function(e){return e<0?0:e>1?1:(e-1)*(e-1)*(2.70158*(e-1)+1.70158)+1},o.anim.inOutBack=function(e){return e<0?0:e>1?1:e<.5?4*e*e*(7.1898*e-2.5949)*.5:.5*((2*e-2)*(2*e-2)*(3.5949*(2*e-2)+2.5949)+2)},o.anim.impulse=function(e){var t=2*e;return t*Math.exp(1-t)},o.anim.expPulse=function(e){return Math.exp(-2*Math.pow(e,2))},o===void 0&&(o={}),o.prototype._attachInitEventHandlers=function(e){this._addEvent(window,"resize",this._resizeHandler)},o.prototype._attachEventHandlers=function(e){if(this.config.interactive){e=this.getSvg(),this.config.enableTouch||o.isMobile()?(this._addEvent(e,"touchstart",this._globalMouseDownHandler),this._addEvent(e,"touchend",this._globalClickHandler)):(this._addEvent(e,"mousedown",this._globalMouseDownHandler),this._addEvent(e,"click",this._globalClickHandler),this._addEvent(e,"contextmenu",this._globalContextHandler),this._addEvent(e,"dblclick",this._globalDbClickHandler),this.config.mouseScrool!=o.action.none&&this._addEvent(e,"wheel",this._mouseScrollHandler));var t=this.getMenuButton();t&&this._addEvent(t,"click",this._menuClickHandler)}},o.prototype._addEvent=function(e,t,n,r){var i,s;r||(r=""),e.getListenerList||(e.getListenerList={}),e.getListenerList[t+r]||(i=this,s=n,n=function(){if(s)return s.apply(i,[this,arguments[0]])},e.addEventListener?t=="mousewheel"?e.addEventListener(t,a,{passive:!1}):e.addEventListener(t,a,!1):e.attachEvent("on"+t,function(){var c=n.call(e,window.event);return c===!1&&(window.event.returnValue=!1,window.event.cancelBubble=!0),c}),e.getListenerList[t+r]=a);function a(c){var l=n.apply(this,arguments);return l===!1&&(c.stopPropagation(),c.preventDefault()),l}},o.prototype._removeEvent=function(e,t){if(e.getListenerList[t]){var n=e.getListenerList[t];e.removeEventListener(t,n,!1),delete e.getListenerList[t]}},o===void 0&&(o={}),o.VERSION="8.14.55",o.orientation={},o.orientation.top=0,o.orientation.bottom=1,o.orientation.right=2,o.orientation.left=3,o.orientation.top_left=4,o.orientation.bottom_left=5,o.orientation.right_top=6,o.orientation.left_top=7,o.align={},o.align.center=o.CENTER=8,o.align.orientation=o.ORIENTATION=9,o.attr={},o.attr.l="data-l",o.attr.id="data-id",o.attr.sl="data-sl",o.attr.lbl="data-lbl",o.attr.val="data-val",o.attr.tlbr="data-tlbr",o.attr.item="data-item",o.attr.layout="data-layout",o.attr.node_id="data-n-id",o.attr.link_id="data-l-id",o.attr.field_name="data-f-name",o.attr.c_link_to="data-c-l-to",o.attr.c_link_from="data-c-l-from",o.attr.s_link_to="data-s-l-to",o.attr.s_link_from="data-s-l-from",o.attr.control_add="data-ctrl-add",o.attr.control_expcoll_id="data-ctrl-ec-id",o.attr.control_up_id="data-ctrl-up-id",o.attr.control_export_menu="data-ctrl-menu",o.attr.control_node_menu_id="data-ctrl-n-menu-id",o.attr.control_node_circle_menu_id="data-ctrl-n-c-menu-id",o.attr.control_node_circle_menu_name="data-ctrl-n-c-menu-name",o.attr.control_node_circle_menu_wrraper_id="data-ctrl-n-c-menu-wrapper-id",o.attr.width="data-width",o.attr.text_overflow="data-text-overflow",o.ID="id",o.PID="pid",o.STPID="stpid",o.TAGS="tags",o.NODES="nodes",o.ELASTIC="elastic",o.ASSISTANT="Assistant",o.action={},o.action.expand=0,o.action.collapse=1,o.action.maximize=101,o.action.minimize=102,o.action.expandCollapse=501,o.action.edit=1,o.action.zoom=2,o.action.ctrlZoom=22,o.action.scroll=41,o.action.xScroll=3,o.action.yScroll=4,o.action.none=5,o.action.init=6,o.action.update=7,o.action.move=70,o.action.pan=8,o.action.centerNode=9,o.action.resize=10,o.action.insert=11,o.action.insertfirst=12,o.action.details=13,o.action.exporting=14,o.none=400001,o.scroll={},o.scroll.visible=!0,o.scroll.smooth=12,o.scroll.speed=120,o.scroll.safari={smooth:12,speed:250},o.match={},o.match.height=100001,o.match.width=100002,o.match.boundary=100003,o.movable={},o.movable.node="node",o.movable.tree="tree",o.movable.detachTree="detachTree",o.layout={},o.layout.normal=o.normal=0,o.layout.mixed=o.mixed=1,o.layout.tree=o.tree=2,o.layout.treeLeftOffset=o.treeLeftOffset=3,o.layout.treeRightOffset=o.treeRightOffset=4,o.layout.treeLeft=5,o.layout.treeRight=6,o.layout.grid=-1,o.nodeOpenTag="<g "+o.attr.node_id+'="{id}" style="opacity: {opacity}" transform="matrix(1,0,0,1,{x},{y})" class="{class}" '+o.attr.sl+'="{sl}" '+o.attr.l+"={level} {lcn}>",o.linkOpenTag="<g "+o.attr.link_id+'="[{id}][{child-id}]" class="{class}">',o.expcollOpenTag="<g "+o.attr.control_expcoll_id+'="{id}" transform="matrix(1,0,0,1,{x},{y})"  style="cursor:pointer;">',o.upOpenTag="<g "+o.attr.control_up_id+'="{id}" transform="matrix(1,0,0,1,{x},{y})" style="cursor:pointer;">',o.linkFieldsOpenTag='<g transform="matrix(1,0,0,1,{x},{y}) rotate({rotate})">',o.grCloseTag="</g>",o.A5w=420,o.A5h=595,o.A4w=595,o.A4h=842,o.A3w=842,o.A3h=1191,o.A2w=1191,o.A2h=1684,o.A1w=1684,o.A1h=2384,o.Letterw=612,o.Letterh=791,o.Legalw=612,o.Legalh=1009,o.COLLAPSE_PARENT_NEIGHBORS=1,o.COLLAPSE_SUB_CHILDRENS=2,o.COLLAPSE_PARENT_SUB_CHILDREN_EXCEPT_CLICKED=3,o.TEXT_THRESHOLD=400,o.IMAGES_THRESHOLD=100,o.LINKS_THRESHOLD=200,o.BUTTONS_THRESHOLD=70,o.ANIM_THRESHOLD=50,o.IT_IS_LONELY_HERE='<g transform="translate(-100, 0)" style="cursor:pointer;"  '+o.attr.control_add+'="control-add"><text fill="#039be5">{link}</text></g>',o.RES={},o.IT_IS_LONELY_HERE_LINK=o.RES.IT_IS_LONELY_HERE_LINK="It's lonely here, add your first node",o.FIRE_DRAG_NOT_CLICK_IF_MOVE=3,o.STRING_TAGS=!1,o.MAX_NODES_MESS="The trial has expired or 200 nodes limit was reached! <br /><a style='color: #039BE5;' target='_blank' href='https://balkan.app/FamilyTreeJS/Docs/Evaluation'>See more</a>",o.OFFLINE_MESS="The evaluation version requires internet connection! <br /><a style='color: #039BE5;' target='_blank' href='https://balkan.app/FamilyTreeJS/Docs/Evaluation'>See more</a>",o.SEARCH_PLACEHOLDER="Search... type ? to get help.",o.SEARCH_HELP_SYMBOL="?",o.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE=!1,o.SEARCH_RESULT_LIMIT=10,o.IMPORT_MESSAGE="Choose the columns (fields) in your data file that contain the required information.",o.FIXED_POSITION_ON_CLICK=!1,o.RENDER_LINKS_BEFORE_NODES=!1,o.RENDER_CLINKS_BEFORE_NODES=!1,o.MIXED_LAYOUT_ALL_NODES=!0,o.MIXED_LAYOUT_FOR_NODES_WITH_COLLAPSED_CHILDREN=!1,o.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN=1,o.LINK_ROUNDED_CORNERS=5,o.MOVE_STEP=5,o.CLINK_CURVE=1,o.MAX_DEPTH=200,o.SCALE_FACTOR=1.44,o.LAZY_LOADING_FACTOR=500,o.HIDE_EDIT_FORM_ON_PAN=!0,o.LAZY_LOADING=!0,o.ARRAY_FIELDS=["tags"],o.CSV_DELIMITER=",",o.EDITFORM_CLOSE_BTN='<svg data-edit-from-close class="bft-edit-form-close"><path style="fill:#ffffff;" d="M21.205,5.007c-0.429-0.444-1.143-0.444-1.587,0c-0.429,0.429-0.429,1.143,0,1.571l8.047,8.047H1.111 C0.492,14.626,0,15.118,0,15.737c0,0.619,0.492,1.127,1.111,1.127h26.554l-8.047,8.032c-0.429,0.444-0.429,1.159,0,1.587 c0.444,0.444,1.159,0.444,1.587,0l9.952-9.952c0.444-0.429,0.444-1.143,0-1.571L21.205,5.007z"></path></svg>',o.ESCAPE_HTML=!1,o.VERTICAL_CHILDREN_ASSISTANT=!1,o.EXPORT_PAGES_CUT_NODES=!1,o.RESET_MOVABLE_ONEXPANDCOLLAPSE=!1,o.FILTER_ALPHABETICALLY=!0,o.SERVER_PREFIX=".azurewebsites.net/api/OrgChartJS",o.FUNC_URL_NAME="func-url-orgfamilyjs",o.MINIMUM_SYMBOLS_IN_SEARCH_INPUT=1,typeof Pl<"u"&&(Pl.exports=o),o.SERVER_PREFIX=".azurewebsites.net/api/FamilyTreeJS",o.FUNC_URL_NAME="func-url-familytreejs",o.OC_VERSION=o.VERSION,o.VERSION="1.09.45",o.RENDER_LINKS_BEFORE_NODES=!0,o.ARRAY_FIELDS=["tags","pids"],o._intersects=function(e,t,n){var r=e.x-n.siblingSeparation/4,i=e.y,s=e.x+e.w+n.siblingSeparation/4,a=e.y;switch(n.orientation){case o.orientation.right:case o.orientation.right_top:case o.orientation.left:case o.orientation.left_top:r=e.x,i=e.y-n.siblingSeparation/4,s=e.x,a=e.y+e.h+n.siblingSeparation/4}var c,l,d,u=t.p,f=t.q,p=t.r,h=t.s;return(c=(s-r)*(h-f)-(p-u)*(a-i))!==0&&(l=((i-a)*(p-r)+(s-r)*(h-i))/c,0<(d=((h-f)*(p-r)+(u-p)*(h-i))/c)&&d<1&&0<l&&l<1)},o._addPoint=function(e,t,n,r,i){switch(n.orientation){case o.orientation.top:case o.orientation.top_left:return o._addPointTop(e,t,n,r,i);case o.orientation.bottom:case o.orientation.bottom_left:return o._addPointBottom(e,t,n,r,i);case o.orientation.left:case o.orientation.left_top:return o._addPointLeft(e,t,n,r,i);case o.orientation.right:case o.orientation.right_top:return o._addPointRight(e,t,n,r,i)}},o._addPointTop=function(e,t,n,r,i){var s,a,c;return i=="left"?s=e.leftNeighbor?e.x+(e.leftNeighbor.x+e.leftNeighbor.w-e.x)/2:e.x-n.siblingSeparation/2:i=="right"&&(s=e.rightNeighbor?e.x+e.w+(e.rightNeighbor.x-(e.x+e.w))/2:e.x+e.w+n.siblingSeparation/2),t.push([s,t[t.length-1][1]]),t.push([s,e.y-n.levelSeparation/3]),a=t[t.length-1][1],c=s,r.p=s,r.q=a,r.r=c,r},o._addPointBottom=function(e,t,n,r,i){var s,a,c;return i=="left"?s=e.leftNeighbor?e.x+(e.leftNeighbor.x+e.leftNeighbor.w-e.x)/2:e.x-n.siblingSeparation/2:i=="right"&&(s=e.rightNeighbor?e.x+e.w+(e.rightNeighbor.x-(e.x+e.w))/2:e.x+e.w+n.siblingSeparation/2),t.push([s,t[t.length-1][1]]),t.push([s,e.y+e.h+n.levelSeparation/3]),a=t[t.length-1][1],c=s,r.p=s,r.q=a,r.r=c,r},o._addPointLeft=function(e,t,n,r,i){var s,a=t[t.length-1][0];i=="bottom"?s=e.rightNeighbor?e.y+e.h+(e.rightNeighbor.y-(e.y+e.h))/2:e.y+e.h+n.siblingSeparation/2:i=="top"&&(s=e.leftNeighbor?e.y+(e.leftNeighbor.y+e.leftNeighbor.h-e.y)/2:e.y-n.siblingSeparation/2),t.push([t[t.length-1][0],s]),t.push([e.x-n.levelSeparation/3,s]),a=t[t.length-1][0];var c=s;return r.p=a,r.q=s,r.s=c,r},o._addPointRight=function(e,t,n,r,i){var s,a=t[t.length-1][0];i=="bottom"?s=e.rightNeighbor?e.y+e.h+(e.rightNeighbor.y-(e.y+e.h))/2:e.y+e.h+n.siblingSeparation/2:i=="top"&&(s=e.leftNeighbor?e.y+(e.leftNeighbor.y+e.leftNeighbor.h-e.y)/2:e.y-n.siblingSeparation/2),t.push([t[t.length-1][0],s]),t.push([e.x+e.w+n.levelSeparation/3,s]),a=t[t.length-1][0];var c=s;return r.p=a,r.q=s,r.s=c,r},o.editUI=function(){},o.editUI.prototype.init=function(e){this.obj=e,this.fields=null,this._event_id=o._guid()},o.editUI.prototype.on=function(e,t){return o.events.on(e,t,this._event_id),this},o.editUI.prototype.show=function(e,t,n){if(this.hide(),o.events.publish("show",[this,e])===!1)return!1;var r=this,i=this.content(e,t,n);this.obj.element.appendChild(i.element),o.input.init(this.obj.element),n?t||this._focusElement(i.focusId):this.interval=o.animate(i.element,{right:-20,opacity:0},{right:0,opacity:1},300,o.anim.outSin,function(){t||r._focusElement(i.focusId)}),this.obj.element.querySelector("[data-edit-from-close]").addEventListener("click",function(c){c.preventDefault(),o.events.publish("cancel",[r,{id:e}])!==!1&&r.hide()}),this.obj.element.querySelector("[data-edit-from-cancel]").addEventListener("click",function(c){c.preventDefault(),o.events.publish("cancel",[r,{id:e}])!==!1&&r.hide()}),this.obj.element.querySelector("[data-edit-from-save]").addEventListener("click",function(c){c.preventDefault();var l=o.input.validateAndGetData(i.element);if(l!==!1){var d=r.obj.get(e),u={data:o.mergeDeep(d,l)};if(o.events.publish("save",[r,u])===!1)return;r.obj.updateNode(u.data,null,!0),r.hide()}});for(var s=this.obj.element.querySelectorAll("[data-input-btn]"),a=0;a<s.length;a++)s[a].addEventListener("click",function(c){c.preventDefault(),o.events.publish("element-btn-click",[r,{input:this.parentNode.querySelector("input"),nodeId:e,event:c}])});this.obj.element.querySelector("[data-add-more-fields-btn]").addEventListener("click",function(c){c.stopPropagation(),c.preventDefault();var l=this,d=o.elements.textbox({},{type:"textbox",label:r.obj.config.editForm.addMoreFieldName,btn:r.obj.config.editForm.addMoreBtn},"280px");l.parentNode.insertAdjacentHTML("beforebegin",d.html),l.style.display="none",o.input.init(l.parentNode.previousSibling);var u=document.getElementById(d.id);u.focus(),u.nextElementSibling.addEventListener("click",function(f){f.stopPropagation(),f.preventDefault();var p=u.value,h=r.obj.element.querySelector('[data-binding="'+o._escapeDoubleQuotes(u.value)+'"]');if(o.isNEU(p)||h)u.focus();else{var m=o.elements.textbox({},{type:"textbox",label:p,binding:p},"280px");u.parentNode.parentNode.parentNode.removeChild(u.parentNode.parentNode),l.parentNode.insertAdjacentHTML("beforebegin",m.html),l.style.display="",o.input.init(l.parentNode.previousSibling),document.getElementById(m.id).focus()}})}),this.obj.element.querySelector("[data-bft-edit-from-btns]").addEventListener("click",function(c){for(var l=c.target;l&&l.hasAttribute&&!l.hasAttribute("data-edit-from-btn");)l=l.parentNode;if(l&&l.hasAttribute){var d=l.getAttribute("data-edit-from-btn"),u={button:r.obj.config.editForm.buttons[d],name:d,nodeId:e,event:c};if(o.events.publish("button-click",[r,u])===!1)return!1;switch(d){case"edit":r.obj.editUI.show(e,!1,!0);break;case"pdf":r.obj.exportPDFProfile({id:e,filename:i.title}),r.hide();break;case"png":r.obj.exportPNGProfile({id:e,filename:i.title}),r.hide();break;case"share":r.obj.shareProfile(e);break;case"remove":r.obj.removeNode(e,null,!0),r.hide()}}})},o.editUI.prototype._focusElement=function(e){var t=null;o.isNEU(this.obj.config.editForm.focusBinding)?o.isNEU(e)||(t=document.getElementById(e)):t=this.obj.element.querySelector('[data-binding="'+this.obj.config.editForm.focusBinding+'"]'),t&&(t.value&&t.value.length&&t.setSelectionRange(t.value.length,t.value.length),t.focus())},o.editUI.prototype.setAvatar=function(e){var t=this.obj.element.querySelector("#bft-avatar");o.isNEU(e)?t.innerHTML=o.icon.user(150,150,"#8C8C8C",0,0):t.innerHTML=`<img style="width: 100%;height:100%;object-fit:cover;border-radius: 50%;" src="${e}"></img>`},o.editUI.prototype.content=function(e,t,n,r,i){var s,a=this.obj.config.editForm.readOnly,c=JSON.parse(JSON.stringify(this.obj.config.editForm.elements)),l=this.obj.config.editForm.addMore,d=this.obj.config.editForm.saveAndCloseBtn,u=this.obj.config.editForm.cancelBtn,f=this.obj.config.editForm.buttons,p=this.obj.config.editForm.titleBinding,h=this.obj.config.editForm.photoBinding,m=this.obj.getNode(e),b=this.obj._get(e),_=o.t(m.templateName,m.min,this.obj.getScale()),g=b[p],w=b[h];if(this.obj.config.editForm.generateElementsFromFields)for(var y=0;y<this.fields.length;y++){var v=this.fields[y];if(v!="tags"){for(var x=!1,C=0;C<c.length;C++){if(Array.isArray(c[C])){for(var I=0;I<c[C].length;I++)if(v==c[C][I].binding){x=!0;break}}else if(v==c[C].binding){x=!0;break}if(x)break}x||c.push({type:"textbox",label:v,binding:v})}}o.isNEU(g)&&(g=""),w=o.isNEU(w)?o.icon.user(150,150,"#8C8C8C",0,0):`<img style="width: 100%;height:100%;border-radius: 50%;object-fit:cover;" src="${w}"></img>`;var E=!t,D=t?"display:none;":"",R=t||!l?"display:none;":"",M=_.editFormHeaderColor?`style="background-color:${_.editFormHeaderColor};"`:"",N=document.createElement("form");if(N.setAttribute("data-bft-edit-form",""),N.classList.add("bft-edit-form"),N.classList.add(this.obj.config.mode),N.classList.add(m.templateName.replaceAll(" ","")),N.classList.add(o.ui._defsIds[m.templateName]),Array.isArray(m.tags)&&m.tags.length)for(y=0;y<m.tags.length;y++)N.classList.add(m.tags[y].replaceAll(" ",""));N.style.display="flex",N.style.opacity=n?1:0,N.style.right=n?0:"-20px",r&&(N.style.width=r);var P=[],V=i?"":o.EDITFORM_CLOSE_BTN;return N.innerHTML=`<div>
                        <div class="bft-edit-form-header" ${M}>
                            ${V}
                            ${o.editUI.renderHeaderContent(g,w,m,b)}
                        </div>
                        <div data-bft-edit-from-btns class="bft-edit-form-instruments">
                        ${function(){if(i)return"";var G="";for(var O in f){var T=f[O];o.isNEU(T)||E&&T.hideIfEditMode||t&&T.hideIfDetailsMode||a&&T.text=="Edit"||(G+=`<div data-edit-from-btn='${O}' class="bft-img-button" ${M} title="${T.text}">${T.icon}</div>`)}return G}()}    
                        </div>
                    </div>
                    <div class="bft-edit-form-fields">
                        <div class="bft-edit-form-fields-inner">
                            <div class="bft-form-fieldset">
                                ${function(){for(var G="",O=0;O<c.length;O++){var T=c[O];if(Array.isArray(T)){G+='<div class="bft-form-field-100 bft-form-fieldset">';for(var L=0;L<T.length;L++){var Z=T[L],U=o.elements[Z.type](b,Z,"unset",t);!o.isNEU(U.id)&&o.isNEU(s)&&o.isNEU(U.value)&&(s=U.id),o.isNEU(U.value)||P.push(`${Z.label}: ${U.value}`),G+=U.html}G+="</div>"}else U=o.elements[T.type](b,T,"280px",t),!o.isNEU(U.id)&&o.isNEU(s)&&o.isNEU(U.value)&&(s=U.id),o.isNEU(U.value)||P.push(`${T.label}: ${U.value}`),G+=U.html}return G}()}

                                <div class="bft-form-field" style="min-width: 280px; text-align:center; ${R}">
                                    <a data-add-more-fields-btn href="#" class="bft-link">${l}</a>
                                </div>
                            </div>        
                        </div>
                    </div>
                    <div class="bft-form-fieldset" style="padding: 14px 10px; ${D}">
                        <div class="bft-form-field" style="min-width: initial;">
                            <button data-edit-from-cancel type="button" class="bft-button transparent">${u}</button>
                        </div>
                        <div class="bft-form-field" style="min-width: initial;">
                            <button type="submit" data-edit-from-save type="button" class="bft-button">${d}</button>
                        </div>
                    </div>`,{element:N,focusId:s,title:g,shareText:P.join(`
`)}},o.editUI.prototype.hide=function(){if(o.events.publish("hide",[this])===!1)return!1;o.isNEU(this.interval)&&(clearInterval(this.interval),this.interval=null);var e=this.obj.element.querySelector("[data-bft-edit-form]");e&&e.parentNode&&e.parentNode.removeChild(e)},o.editUI.renderHeaderContent=function(e,t,n,r){return`<h1 class="bft-edit-form-title">${o._escapeGreaterLessSign(e)}</h1>
                <div id="bft-avatar" class="bft-edit-form-avatar">${t}</div>`},o.prototype.getSvg=function(){var e=this.element.getElementsByTagName("svg");return e&&e.length?e[0]:null},o.prototype.getPointerElement=function(){return this.element.querySelector("g[data-pointer]")},o.prototype.getNodeElement=function(e){return this.element.querySelector("["+o.attr.node_id+"='"+e+"']")},o.prototype.getMenuButton=function(){return this.element.querySelector("["+o.attr.control_export_menu+"]")},o.menuUI=function(){},o.menuUI.prototype.init=function(e,t){this.obj=e,this.wrapper=null,this.menu=t,this._event_id=o._guid()},o.menuUI.prototype.showStickIn=function(e,t,n,r){this._show(e,null,t,n,r)},o.menuUI.prototype.show=function(e,t,n,r,i){this._show(e,t,n,r,i)},o.menuUI.prototype._show=function(e,t,n,r,i){var s=this;this.hide();var a="";i||(i=this.menu);var c={firstNodeId:n,secondNodeId:r,menu:i};if(o.events.publish("show",[this,c])===!1)return!1;for(var l in i=c.menu){var d=i[l].icon,u=i[l].text;d===void 0&&(d=o.icon[l]?o.icon[l](24,24,"#7A7A7A"):""),typeof u=="function"&&(u=u()),typeof d=="function"&&(d=d()),a+="<div "+o.attr.item+'="'+l+'">'+d+"<span>&nbsp;&nbsp;"+u+"</span></div>"}if(a!=""){if(this.wrapper=document.createElement("div"),this.wrapper.className="bft-family-menu",this.wrapper.style.left="-99999px",this.wrapper.style.top="-99999px",this.wrapper.innerHTML=a,this.obj.element.appendChild(this.wrapper),t==null){var f=o._menuPosition(e,this.wrapper,this.obj.getSvg());e=f.x,t=f.y}var p=e+45;this.wrapper.style.left=p+"px",this.wrapper.style.top=t+"px",this.wrapper.style.left=p-this.wrapper.offsetWidth+"px";var h=e-this.wrapper.offsetWidth;o.animate(this.wrapper,{opacity:0,left:p-this.wrapper.offsetWidth},{opacity:1,left:h},300,o.anim.inOutPow);for(var m=this.wrapper.getElementsByTagName("div"),b=0;b<m.length;b++)(l=m[b]).addEventListener("click",function(_){var g,w=this.getAttribute(o.attr.item);if(i[w].onClick===void 0)if(w==="add"){var y={id:s.obj.generateId(),pid:n};s.obj.addNode(y,null,!0)}else if(w==="edit"){var v=s.obj.getNode(n);s.obj.editUI.show(v.id)}else w==="details"?(v=s.obj.getNode(n),s.obj.editUI.show(v.id,!0)):w==="remove"?s.obj.removeNode(n,null,!0):w==="svg"?s.obj.exportSVG({filename:"FamilyTree.svg",expandChildren:!1,nodeId:n}):w==="pdf"?s.obj.exportPDF({filename:"FamilyTree.pdf",expandChildren:!1,nodeId:n}):w==="png"?s.obj.exportPNG({filename:"FamilyTree.png",expandChildren:!1,nodeId:n}):w==="csv"?s.obj.exportCSV({nodeId:n}):w==="xml"?s.obj.exportXML({nodeId:n}):w==="json"&&s.obj.exportJSON({nodeId:n});else g=i[w].onClick.call(s.obj,n,r);g!=0&&s.hide()})}},o.menuUI.prototype.isVisible=function(){return this.wrapper!=null},o.menuUI.prototype.hide=function(){this.wrapper!=null&&(this.obj.element.removeChild(this.wrapper),this.wrapper=null)},o.menuUI.prototype.on=function(e,t){return o.events.on(e,t,this._event_id),this},o.circleMenuUI=function(){},o.circleMenuUI.prototype.init=function(e,t){this.obj=e,this.menu=t,this._menu=null,this._buttonsInterval=[],this._linesInterval=[],this._event_id=o._guid()},o.circleMenuUI.prototype.show=function(e,t){this._show(e,t)},o.circleMenuUI.prototype._show=function(e,t){var n=this,r=this.obj.getNode(e),i=o.t(r.templateName,r.min,this.obj.getScale());if(!o.isNEU(i.nodeCircleMenuButton)){var s=this.obj.getSvg(),a=this.obj.element.querySelector("["+o.attr.control_node_circle_menu_id+'="'+e+'"]'),c=this.obj.getNodeElement(e),l=o._getTransform(a),d=o._getTransform(c),u=l[4]+d[4],f=l[5]+d[5],p=a.querySelectorAll("line"),h=this.obj.element.querySelector("["+o.attr.control_node_circle_menu_wrraper_id+"]");if(o.isNEU(h)||h.getAttribute(o.attr.control_node_circle_menu_wrraper_id)!=e){this.hide(),t||(t=this.menu);var m={nodeId:e,menu:t},b=o.events.publish("show",[this,m]);if(this._menu=t,b===!1)return!1;for(var _=0,g=Object.keys(m.menu).length,w=2*i.nodeCircleMenuButton.radius+4,y=2*Math.PI*w,v=y/g-(2*i.nodeCircleMenuButton.radius+2);v<0;)w+=8,v=(y=2*Math.PI*w)/g-(2*i.nodeCircleMenuButton.radius+2);for(var x in(h=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute(o.attr.control_node_circle_menu_wrraper_id,e),h.setAttribute("transform","matrix(1,0,0,1,"+u+","+f+")"),s.appendChild(h),m.menu){var C=m.menu[x].icon,I=m.menu[x].color,E=m.menu[x].text;typeof C=="function"&&(C=C()),typeof I=="function"&&(I=I()),typeof E=="function"&&(E=E());var D=document.createElementNS("http://www.w3.org/2000/svg","g");D.setAttribute("transform","matrix(1,0,0,1,0,0)"),D.setAttribute(o.attr.control_node_circle_menu_name,x),D.style.cursor="pointer";var R=document.createElementNS("http://www.w3.org/2000/svg","title");o.isNEU(E)||(R.innerHTML=E);var M=document.createElementNS("http://www.w3.org/2000/svg","circle");M.setAttribute("cx",0),M.setAttribute("cy",0),M.setAttribute("r",i.nodeCircleMenuButton.radius),M.setAttribute("fill",I),M.setAttribute("stroke-width","1"),M.setAttribute("stroke",i.nodeCircleMenuButton.stroke),D.appendChild(M),D.appendChild(R),D.innerHTML+=C,h.appendChild(D);var N=D.getElementsByTagName("svg")[0];if(N.setAttribute("pointer-events","none"),N){var P=parseInt(N.getAttribute("width")),V=parseInt(N.getAttribute("height"));N.setAttribute("x",-P/2),N.setAttribute("y",-V/2)}var G=_*Math.PI/(g/2);_++;var O=Math.cos(G)*w,T=Math.sin(G)*w;this._buttonsInterval.push(o.animate(D,{transform:[1,0,0,1,0,0]},{transform:[1,0,0,1,O,T]},250,o.anim.outBack,function(L){var Z=L[0].getAttribute(o.attr.control_node_circle_menu_name),U=L[0].parentNode.getAttribute(o.attr.control_node_circle_menu_wrraper_id);L[0].addEventListener("mouseenter",function(W){o.events.publish("mouseenter",[n,{from:U,menuItem:m.menu[Z],menuItemName:Z,event:W}])}),L[0].addEventListener("mouseout",function(W){o.events.publish("mouseout",[n,{from:U,menuItem:m.menu[Z],menuItemName:Z,event:W}])})}))}this._linesInterval.push(o.animate(p[0],{x1:-i.nodeCircleMenuButton.radius/2,y1:-6,x2:i.nodeCircleMenuButton.radius/2,y2:-6},{x1:-7,y1:-7,x2:7,y2:7},500,o.anim.inOutSin)),this._linesInterval.push(o.animate(p[1],{x1:-i.nodeCircleMenuButton.radius/2,y1:0,x2:i.nodeCircleMenuButton.radius/2,y2:0},{x1:0,y1:0,x2:0,y2:0},500,o.anim.inOutSin)),this._linesInterval.push(o.animate(p[2],{x1:-i.nodeCircleMenuButton.radius/2,y1:6,x2:i.nodeCircleMenuButton.radius/2,y2:6},{x1:-7,y1:7,x2:7,y2:-7},500,o.anim.inOutSin))}else this.hide()}},o.circleMenuUI.prototype.hide=function(){for(var e=this._buttonsInterval.length-1;e>=0;e--)clearInterval(this._buttonsInterval[e]),this._buttonsInterval.splice(e,1);for(this._buttonsInterval=[],e=this._linesInterval.length-1;e>=0;e--)clearInterval(this._linesInterval[e]),this._linesInterval.splice(e,1);this._linesInterval=[];var t=this.obj.element.querySelector("["+o.attr.control_node_circle_menu_wrraper_id+"]");if(t!=null){var n=t.getAttribute(o.attr.control_node_circle_menu_wrraper_id),r=this.obj.getNode(n),i=o.t(r.templateName,r.min,this.obj.getScale()),s=this.obj.element.querySelector("["+o.attr.control_node_circle_menu_id+'="'+n+'"]').querySelectorAll("line");s[0].setAttribute("x1",-i.nodeCircleMenuButton.radius/2),s[0].setAttribute("x2",i.nodeCircleMenuButton.radius/2),s[0].setAttribute("y1",-6),s[0].setAttribute("y2",-6),s[1].setAttribute("x1",-i.nodeCircleMenuButton.radius/2),s[1].setAttribute("x2",i.nodeCircleMenuButton.radius/2),s[1].setAttribute("y1",0),s[1].setAttribute("y2",0),s[2].setAttribute("x1",-i.nodeCircleMenuButton.radius/2),s[2].setAttribute("x2",i.nodeCircleMenuButton.radius/2),s[2].setAttribute("y1",6),s[2].setAttribute("y2",6),t.parentElement.removeChild(t),t=null}},o.circleMenuUI.prototype.on=function(e,t){return o.events.on(e,t,this._event_id),this},o===void 0&&(o={}),o.idb={version:1,dbName:"BALKAN",tableName:"familytree-js",keyPath:"id"},o.idb.db=null,o.idb._open=function(e){if(o._browser().msie)e&&e(!1);else if((navigator.userAgent.toLowerCase().indexOf("safari")>0||navigator.userAgent.toLowerCase().indexOf("firefox")>0)&&window.location!==window.parent.location)e&&e(!1);else{if(!window.indexedDB)return console.error("Your browser doesn't support a stable version of IndexedDB."),void(e&&e(!1));if(o.idb.db==null){var t=indexedDB.open(o.idb.dbName,o.idb.version);t.onerror=function(n){console.error("Cannot open database!"),e&&e(!1)},t.onsuccess=function(n){o.idb.db=n.target.result,e&&e(!0)},t.onupgradeneeded=function(n){var r=n.target.result;r.objectStoreNames.contains(o.idb.tableName)&&r.deleteObjectStore(o.idb.tableName),r.createObjectStore(o.idb.tableName,{keyPath:o.idb.keyPath})}}else e&&e(!0)}},o.idb.read=function(e,t){o.idb._open(function(n){if(n){var r=o.idb.db.transaction([o.idb.tableName]).objectStore(o.idb.tableName).get(e);r.onerror=function(i){console.error("Unable to retrieve data from database!"),t&&t(!1)},r.onsuccess=function(i){r.result?t&&t(!0,r.result):t&&t(null)}}else t&&t(!1)})},o.idb.write=function(e,t){o.idb.read(e.id,function(n){if(n==null){var r=o.idb.db.transaction([o.idb.tableName],"readwrite").objectStore(o.idb.tableName).add(e);r.onerror=function(i){console.error("Unable to add data to database!"),t&&t(!1)},r.onsuccess=function(i){t&&t(!0)}}else t&&t(n)})},o.idb.put=function(e,t){o.idb._open(function(n){if(n){var r=o.idb.db.transaction([o.idb.tableName],"readwrite").objectStore(o.idb.tableName).put(e);r.onerror=function(i){console.error("Unable to put data to database!"),t&&t(!1)},r.onsuccess=function(i){t&&t(!0)}}else t&&t(!1)})},o.idb.delete=function(e,t){o.idb._open(function(n){if(n){var r=o.idb.db.transaction([o.idb.tableName],"readwrite").objectStore(o.idb.tableName).delete(e);r.onerror=function(i){console.error("Unable to retrieve data from database!"),t&&t(!1)},r.onsuccess=function(i){r.error?t&&t(!1):t&&t(!0)}}else t&&t(!1)})},o.toolbarUI=function(){},o.toolbarUI.expandAllIcon='<svg style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><marker id="arrow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="4" markerHeight="4" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#757575" /></marker><line x1="11" y1="11" x2="6" y2="6" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><line x1="21" y1="11" x2="26" y2="6" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><line x1="21" y1="21" x2="26" y2="26" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><line x1="11" y1="21" x2="6" y2="26" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><rect x="12" y="12" width="8" height="8" fill="#757575"></rect></svg>',o.toolbarUI.fitIcon='<svg  style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M4,11 L4,4 L11,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,11 L28,4 L21,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,21 L28,28 L21,28"></path><path stroke-width="3" fill="none" stroke="#757575" d="M4,21 L4,28 L11,28"></path><circle cx="16" cy="16" r="5" fill="#757575"></circle></svg>',o.toolbarUI.openFullScreenIcon='<svg  style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M4,11 L4,4 L11,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,11 L28,4 L21,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,21 L28,28 L21,28"></path><path stroke-width="3" fill="none" stroke="#757575" d="M4,21 L4,28 L11,28"></path><line x1="5" y1="5" x2="27" y2="27" stroke-width="3" stroke="#757575"></line><line x1="5" y1="27" x2="27" y2="5" stroke-width="3" stroke="#757575"></line></svg>',o.toolbarUI.closeFullScreenIcon='<svg  style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M4,11 L4,4 L11,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,11 L28,4 L21,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,21 L28,28 L21,28"></path><path stroke-width="3" fill="none" stroke="#757575" d="M4,21 L4,28 L11,28"></path><rect x="11" y="11" width="10" height="10" stroke-width="3" fill="none" stroke="#757575" ></rect></svg>',o.toolbarUI.zoomInIcon='<svg style="box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border-left: 1px solid #cacaca; border-right: 1px solid #cacaca; border-top: 1px solid #cacaca; background-color: #f9f9f9;display: block; cursor: pointer;" width="32px" height="32px" ><g><rect fill="#f9f9f9" x="0" y="0" width="32" height="32" ></rect><line x1="8" y1="16" x2="24" y2="16" stroke-width="3" stroke="#757575"></line><line x1="16" y1="8" x2="16" y2="24" stroke-width="3" stroke="#757575"></line></g><line x1="4" y1="32" x2="28" y2="32" stroke-width="1" stroke="#cacaca"></line></svg>',o.toolbarUI.zoomOutIcon='<svg style="box-shadow: 0px 1px 4px rgba(0,0,0,0.3); margin-bottom:7px; border-left: 1px solid #cacaca; border-right: 1px solid #cacaca; border-bottom: 1px solid #cacaca; background-color: #f9f9f9;display: block; cursor: pointer;" width="32px" height="32px" ><g><rect fill="#f9f9f9" x="0" y="0" width="32" height="32" ></rect><line x1="8" y1="16" x2="24" y2="16" stroke-width="3" stroke="#757575"></line></g></svg>',o.toolbarUI.layoutIcon="<svg "+o.attr.tlbr+'="layout" style="box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M8,24 L16,14 L24,24"></path><path stroke-width="3" fill="none" stroke="#757575" d="M8,16 L16,8 L24,16"></path></svg>',o.toolbarUI.prototype.init=function(e,t){if(t){this.obj=e,this.toolbar=t,this._visible=!1,this.div=document.createElement("div"),this.div.classList.add("bft-toolbar-container"),Object.assign(this.div.style,{position:"absolute",padding:"3px",right:this.obj.config.padding-10+"px",bottom:this.obj.config.padding-10+"px"}),t.expandAll&&(this.div.innerHTML+="<div "+o.attr.tlbr+'="expand">'+o.toolbarUI.expandAllIcon+"</div>"),t.fit&&(this.div.innerHTML+="<div "+o.attr.tlbr+'="fit">'+o.toolbarUI.fitIcon+"</div>"),t.zoom&&(this.div.innerHTML+="<div "+o.attr.tlbr+'="plus">'+o.toolbarUI.zoomInIcon+"</div>",this.div.innerHTML+="<div "+o.attr.tlbr+'="minus">'+o.toolbarUI.zoomOutIcon+"</div>"),t.layout&&(this.div.innerHTML+="<div "+o.attr.tlbr+'="layout">'+o.toolbarUI.layoutIcon+"</div>",this.layouts=document.createElement("div"),this.layouts.classList.add("bft-toolbar-layout"),this.layouts.innerHTML=`<svg data-layout="normal" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="7" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="63" y="41" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="35" stroke-width="1"></line><line stroke="#000000" x1="32" x2="88" y1="35" y2="35" stroke-width="1"></line><line stroke="#000000" x1="32" x2="32" y1="35" y2="41" stroke-width="1"></line><line stroke="#000000" x1="88" x2="88" y1="35" y2="41" stroke-width="1"></line></svg>
            <svg data-layout="treeRightOffset" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="40" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="40" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="35" stroke-width="1"></line><line stroke="#000000" x1="60" x2="35" y1="35" y2="35" stroke-width="1"></line><line stroke="#000000" x1="35" x2="35" y1="35" y2="86" stroke-width="1"></line><line stroke="#000000" x1="35" x2="40" y1="86" y2="86" stroke-width="1"></line><line stroke="#000000" x1="35" x2="40" y1="54" y2="54" stroke-width="1"></line></svg>
            <svg data-layout="treeLeftOffset" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="30" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="30" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="35" stroke-width="1"></line><line stroke="#000000" x1="60" x2="85" y1="35" y2="35" stroke-width="1"></line><line stroke="#000000" x1="85" x2="85" y1="35" y2="86" stroke-width="1"></line><line stroke="#000000" x1="80" x2="85" y1="86" y2="86" stroke-width="1"></line><line stroke="#000000" x1="80" x2="85" y1="54" y2="54" stroke-width="1"></line></svg>
            <svg data-layout="mixed" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="35" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="35" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="41" stroke-width="1"></line><line stroke="#000000" x1="60" x2="60" y1="68" y2="73" stroke-width="1"></line></svg>
            <svg data-layout="tree" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="7" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="35" y="73" width="50" height="27"></rect><rect fill="#F57C00" x="63" y="41" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="73" stroke-width="1"></line><line stroke="#000000" x1="57" x2="63" y1="54" y2="54" stroke-width="1"></line></svg>
            <svg data-layout="grid" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="7" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="7" y="73" width="50" height="27"></rect><rect fill="#F57C00" x="63" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="63" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="71" stroke-width="1"></line><line stroke="#000000" x1="32" x2="88" y1="39" y2="39" stroke-width="1"></line><line stroke="#000000" x1="32" x2="88" y1="71" y2="71" stroke-width="1"></line><line stroke="#000000" x1="32" x2="32" y1="71" y2="73" stroke-width="1"></line><line stroke="#000000" x1="88" x2="88" y1="71" y2="73" stroke-width="1"></line><line stroke="#000000" x1="32" x2="32" y1="39" y2="41" stroke-width="1"></line><line stroke="#000000" x1="88" x2="88" y1="39" y2="41" stroke-width="1"></line></svg>`,this.obj.element.appendChild(this.layouts)),t.fullScreen&&(this.div.innerHTML+="<div "+o.attr.tlbr+'="fullScreen">'+o.toolbarUI.openFullScreenIcon+"</div>"),this.obj.element.appendChild(this.div),this.layoutBtn=this.div.querySelector("["+o.attr.tlbr+'="layout"]');var n=this.div.querySelector("["+o.attr.tlbr+'="plus"]'),r=this.div.querySelector("["+o.attr.tlbr+'="minus"]'),i=this.div.querySelector("["+o.attr.tlbr+'="fit"]'),s=this.div.querySelector("["+o.attr.tlbr+'="fullScreen"]'),a=this.div.querySelector("["+o.attr.tlbr+'="expand"]'),c=this;n&&n.addEventListener("click",function(){c.obj.zoom(!0,null,!0)}),r&&r.addEventListener("click",function(){c.obj.zoom(!1,null,!0)}),i&&i.addEventListener("click",function(){c.obj.fit()}),s&&s.addEventListener("click",function(){c.obj.toggleFullScreen()}),a&&a.addEventListener("click",function(){c.obj.expand(null,"all")}),this.layoutBtn&&this.layoutBtn.addEventListener("click",function(){c._visible?c.hideLayout():c.showLayout()}),this.layouts&&this.layouts.addEventListener("click",function(l){for(var d=l.target;d;){if(d.hasAttribute&&d.hasAttribute(o.attr.layout)){d=d.getAttribute(o.attr.layout),c.obj.setLayout(o.layout[d]);break}d=d.parentNode}})}},o.toolbarUI.prototype.showLayout=function(){this._visible=!0,this.layoutBtn.style.transform="rotate(180deg) translateX(0px) translateY(0px)",o.animate(this.div,{bottom:this.obj.config.padding-10},{bottom:this.obj.config.padding+135},this.obj.config.anim.duration,this.obj.config.anim.func),o.animate(this.layouts,{bottom:-145},{bottom:0},this.obj.config.anim.duration,this.obj.config.anim.func)},o.toolbarUI.prototype.hideLayout=function(){this._visible=!1,this.layoutBtn.style.transform="rotate(0deg) translateX(0px) translateY(0px)",o.animate(this.div,{bottom:this.obj.config.padding+135},{bottom:this.obj.config.padding-10},this.obj.config.anim.duration,this.obj.config.anim.func),o.animate(this.layouts,{bottom:0},{bottom:-145},this.obj.config.anim.duration,this.obj.config.anim.func)},o.notifierUI=function(){},o.notifierUI.prototype.init=function(e){this.obj=e},o.notifierUI.prototype.show=function(e,t){if(e==null)return!1;e==1&&(e=o.MAX_NODES_MESS,t="#FFCA28"),e==2&&(e=o.OFFLINE_MESS,t="#FFCA28");var n=document.createElement("div");n.innerHTML=e,Object.assign(n.style,{position:"absolute","background-color":t,color:"#ffffff",padding:"15px","border-radius":"40px",opacity:0,overflow:"hidden","white-space":"nowrap","text-align":"center"}),this.obj.element.appendChild(n);var r=this.obj.width()/2-n.offsetWidth/2,i=this.obj.height()/2-n.offsetHeight/2;n.style.left=r+"px",n.style.top=i+"px";var s=n.offsetWidth;return n.style.width="20px",o.animate(n,{opacity:0,width:10},{opacity:1,width:s},this.obj.config.anim.duration,this.obj.config.anim.func),!0},o===void 0&&(o={}),o._validateConfig=function(e){return!!e||(console.error("config is not defined"),!1)},o._arrayContains=function(e,t){if(e&&Array.isArray(e)){for(var n=e.length;n--;)if(e[n]===t)return!0}return!1},o._interceptions=function(e,t){if(!e)return[];if(!t)return[];var n=[];if(Array.isArray(e)&&Array.isArray(t))for(var r in e)for(var i in t)e[r]==t[i]&&n.push(e[r]);else if(Array.isArray(e)&&!Array.isArray(t))for(var r in e)for(var i in t)e[r]==i&&n.push(e[r]);else if(!Array.isArray(e)&&Array.isArray(t))for(var r in e)for(var i in t)r==t[i]&&n.push(t[i]);return n},o._getTags=function(e){return e.tags&&!Array.isArray(e.tags)?e.tags.split(","):e.tags&&Array.isArray(e.tags)?e.tags:[]},o._centerPointInPercent=function(e,t,n){var r=e.getBoundingClientRect(),i=t-r.left,s=n-r.top;return[i/(r.width/100),s/(r.height/100)]},o._trim=function(e){return e.replace(/^\s+|\s+$/g,"")},o._getTransform=function(e){var t=e.getAttribute("transform");return t=t.replace("matrix","").replace("(","").replace(")",""),o._browser().msie&&(t=t.replace(/ /g,",")),t="["+(t=o._trim(t))+"]",t=JSON.parse(t)},o.getScale=function(e,t,n,r,i,s,a,c){var l=1;if(e||r!==o.match.boundary)if(e||r!==o.match.width)if(e||r!==o.match.height)if(e){var d,u;l=(d=t/e[2])>(u=n/e[3])?u:d}else l=r;else l=n/c;else l=t/a;else l=(d=t/a)>(u=n/c)?u:d;return l&&l>i&&(l=i),l&&l<s&&(l=s),l},o.isObject=function(e){return e&&typeof e=="object"&&!Array.isArray(e)&&e!==null},o.fileUploadDialog=function(e){var t=document.createElement("INPUT");t.setAttribute("type","file"),t.style.display="none",t.onchange=function(){var n=this.files[0];e(n)},document.body.appendChild(t),t.click()},o.mergeDeep=function(e,t){if(o.isObject(e)&&o.isObject(t))for(var n in t)o.isObject(t[n])?(e[n]||Object.assign(e,{[n]:{}}),o.mergeDeep(e[n],t[n])):Object.assign(e,{[n]:t[n]});return e},o._lblIsImg=function(e,t){return!(!e.nodeBinding||typeof t!="string"||t.indexOf("img")==-1||!e.nodeBinding[t])},o._getFistImgField=function(e){if(e.nodeBinding){for(var t in e.nodeBinding)if(t.indexOf("img")!=-1)return e.nodeBinding[t]}return!1},o._fieldIsImg=function(e,t){if(e.nodeBinding){for(var n in e.nodeBinding)if(e.nodeBinding[n]==t)return o._lblIsImg(e,n)}return!1},o._guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},o.htmlRipple=function(e){var t=document.createElement("style");t.type="text/css",t.innerHTML=" .bft-ripple-container {position: absolute; top: 0; right: 0; bottom: 0; left: 0; } .bft-ripple-container span {transform: scale(0);border-radius:100%;position:absolute;opacity:0.75;background-color:#fff;animation: bft-ripple 1000ms; }@-moz-keyframes bft-ripple {to {opacity: 0;transform: scale(2);}}@-webkit-keyframes bft-ripple {to {opacity: 0;transform: scale(2);}}@-o-keyframes bft-ripple {to {opacity: 0;transform: scale(2);}}@keyframes bft-ripple {to {opacity: 0;transform: scale(2);}}",document.head.appendChild(t);var n,r,i,s=document.createElement("div");s.className="bft-ripple-container",e.addEventListener("mousedown",function(a){var c,l,d,u,f;return l=document.createElement("span"),d=this.offsetWidth,c=this.getBoundingClientRect(),f=a.pageX-c.left-d/2,u="top:"+(a.pageY-c.top-d/2)+"px; left: "+f+"px; height: "+d+"px; width: "+d+"px;",e.rippleContainer.appendChild(l),l.setAttribute("style",u)}),e.addEventListener("mouseup",(n=function(){for(;this.rippleContainer.firstChild;)this.rippleContainer.removeChild(this.rippleContainer.firstChild)},r=2e3,i=void 0,function(){var a,c;return c=this,a=arguments,clearTimeout(i),i=setTimeout(function(){return n.apply(c,a)},r)})),e.rippleContainer=s,e.appendChild(s)},o._moveToBoundaryArea=function(e,t,n,r){var i=t.slice(0);t[0]<n.left&&t[0]<n.right&&(i[0]=n.left>n.right?n.right:n.left),t[0]>n.right&&t[0]>n.left&&(i[0]=n.left>n.right?n.left:n.right),t[1]<n.top&&t[1]<n.bottom&&(i[1]=n.top>n.bottom?n.bottom:n.top),t[1]>n.bottom&&t[1]>n.top&&(i[1]=n.top>n.bottom?n.top:n.bottom),t[0]!==i[0]||t[1]!==i[1]?o.animate(e,{viewBox:t},{viewBox:i},300,o.anim.outPow,function(){r&&r()}):r&&r()},o.randomId=function(){return"_"+("0000"+(Math.random()*Math.pow(36,4)|0).toString(36)).slice(-4)},o._getClientXY=function(e){return e.type.indexOf("touch")==-1?{x:e.clientX,y:e.clientY}:e.changedTouches.length?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:void 0},o._getClientTouchesXY=function(e,t){return e.type.indexOf("touch")!=-1?e.touches.length<t+1?{x:null,y:null}:{x:e.touches[t].clientX,y:e.touches[t].clientY}:{x:e.clientX,y:e.clientY}},o._getOffset=function(e,t){e&&(t.x+=e.offsetLeft,t.y+=e.offsetTop,o._getOffset(e.offsetParent,t))},o._getTopLeft=function(e){var t={x:0,y:0};return o._getOffset(e,t),t},o._getOffsetXY=function(e,t){if(t.type.indexOf("touch")==-1)return{x:t.offsetX,y:t.offsetY};if(t.touches.length){var n=o._getTopLeft(e);return{x:t.touches[0].pageX-n.x,y:t.touches[0].pageY-n.y}}if(t.changedTouches.length)return n=o._getTopLeft(e),isNaN(n.x)||isNaN(n.y)?{x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY}:{x:t.changedTouches[0].pageX-n.x,y:t.changedTouches[0].pageY-n.y}},o._pinchMiddlePointInPercent=function(e,t,n,r){var i=o._getTopLeft(e),s=r.touches[0].pageX-i.x,a=r.touches[0].pageY-i.y,c=r.touches[1].pageX-i.x,l=r.touches[1].pageY-i.y;return[((s-c)/2+c)/(t/100),((a-l)/2+l)/(n/100)]},o._browser=function(){var e=!!window.opr&&!!window.opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t=typeof InstallTrigger<"u",n=/constructor/i.test(window.HTMLElement)||(!window.safari||window.safari!==void 0&&safari.pushNotification).toString()==="[object SafariRemoteNotification]",r=!!document.documentMode,i=!r&&!!window.StyleMedia,s=!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime);return{opera:e,firefox:t,safari:n,msie:r,edge:i,chrome:s,blink:(s||e)&&!!window.CSS}},o._menuPosition=function(e,t,n){var r=e.getBoundingClientRect(),i=n.getBoundingClientRect(),s=t.getBoundingClientRect(),a=r.left-i.left,c=r.top-i.top;return r.top+s.height>i.top+i.height&&(c-=s.height),r.left-s.width<i.left&&(a+=s.width),{x:a,y:c}},o._getTemplate=function(e,t,n){if(Array.isArray(e))for(var r=0;r<e.length;r++){var i=t[e[r]];if(i&&i.template)return i.template}return n},o._getMin=function(e,t){if(e.tags&&e.tags.length&&t.tags)for(var n=0;n<e.tags.length;n++){var r=t.tags[e.tags[n]];if(r&&r.min===!0)return!0}return t.min},o._getSubLevels=function(e,t){if(e&&e.length)for(var n=0;n<e.length;n++){var r=t[e[n]];if(r&&r.subLevels)return r.subLevels}return 0},o._isHTML=function(e){var t=new DOMParser().parseFromString(e,"text/html");return Array.from(t.body.childNodes).some(n=>n.nodeType===1)},o._getTestDiv=function(){var e=document.getElementById("orgfamily_js_test_div");return e||((e=document.createElement("div")).id="orgfamily_js_test_div",e.style.position="fixed",e.style.top="-10000px",e.style.left="-10000px",document.body.appendChild(e)),e},o._getLabelSize=function(e){var t=o._getTestDiv();return t.innerHTML="<svg>"+e+"</svg>",t.querySelector("text").getBoundingClientRect()},o.wrapText=function(e,t){var n=t.toLowerCase();if(n.indexOf("<text")==-1||n.indexOf(o.attr.width)==-1||n.indexOf("foreignobject")!=-1||t.indexOf(o.attr.width)==-1||o.ESCAPE_HTML&&typeof str=="string"&&o._isHTML(e))return o._escapeHtml(e);if(!o.ESCAPE_HTML&&o._isHTML(e))return e;var r=o._getTestDiv();t=t.replaceAll("{cw}",0),r.innerHTML="<svg>"+t+"</svg>";var i,s,a=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("text")[0],c=parseFloat(a.getAttribute("x")),l=parseFloat(a.getAttribute("y")),d=a.getAttribute("text-anchor"),u=a.getAttribute(o.attr.width),f=a.getAttribute(o.attr.text_overflow),p="http://www.w3.org/2000/svg",h=r.getElementsByTagName("svg")[0].getElementsByTagName("text")[0];f||(f="ellipsis");var m=f.split("-");if(m.length>1&&(i=parseInt(f.split("-")[1]),m.length>2&&m[2]=="ellipsis"&&(s=!0)),!u)return o._escapeHtml(e);if(u=parseFloat(u),c||(c=0),l||(l=0),c||(d="start"),f=="ellipsis"){h.removeChild(h.firstChild),h.textContent=e;for(var b=h.getComputedTextLength(),_=2;b>u;)h.textContent=e.substring(0,e.length-_),h.textContent+="...",b=h.getComputedTextLength(),_++;return _>2?`<title>${o._escapeHtml(e)}</title>${h.textContent}`:o._escapeHtml(e)}if(f.indexOf("multiline")!=-1){var g=e.split(" "),w=h.getBBox().height;h.textContent="";var y=document.createElementNS(p,"tspan"),v=document.createTextNode(g[0]);y.setAttributeNS(null,"x",c),y.setAttributeNS(null,"y",l),y.setAttributeNS(null,"text-anchor",d),y.appendChild(v),h.appendChild(y),_=1;for(var x=1,C=!1,I=1;I<g.length;I++){var E=y.firstChild.data.length;if(y.firstChild.data+=" "+g[I],y.getComputedTextLength()>u){if(y.firstChild.data=y.firstChild.data.slice(0,E),x++,i&&x>i){if(s&&h.children.length==i){var D=h.children[i-1].textContent;h.children[i-1].textContent=D.substring(0,D.length-3)+"...",C=!0}break}(y=document.createElementNS(p,"tspan")).setAttributeNS(null,"x",c),y.setAttributeNS(null,"y",l+w*_),y.setAttributeNS(null,"text-anchor",d),v=document.createTextNode(g[I]),y.appendChild(v),h.appendChild(y),_++}}var R="";if(h.innerHTML!=null)R=h.innerHTML,h.innerHTML="";else{var M="";for(I=h.childNodes.length-1;I>=0;I--)M=XMLSerializer().serializeToString(h.childNodes[I])+M,h.removeChild(h.childNodes[I]);R=M}return C?`<title>${o._escapeHtml(e)}</title>${R}`:R}},o._downloadFile=function(e,t,n,r,i){var s=new Blob([t],{type:e});if(r==1){var a=URL.createObjectURL(s);window.open(a,"_blank").focus()}else if(navigator.msSaveBlob)navigator.msSaveBlob(s,n);else{var c=document.createElement("a");if(c.download!==void 0){a=URL.createObjectURL(s),c.setAttribute("href",a);var l=n;l.toLowerCase().endsWith(i.toLowerCase())||(l=l+"."+i),c.setAttribute("download",l),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c)}}},o._getPosition=function(e,t,n,r){var i={x:t.x,y:t.y};if(n!=null&&(i.x=n),r!=null&&(i.y=n),e&&e.length==3){var s=e[0].indexOf(t.id);s!=-1&&e[1][s].transform!=null&&(n==null&&(i.x=e[1][s].transform[4]),r==null&&(i.y=e[1][s].transform[5]))}return i},o._getOpacity=function(e,t){var n=1;if(e&&e.length==3){var r=e[0].indexOf(t.id);r!=-1&&e[1][r].opacity!=null&&(n=e[1][r].opacity)}return n},o.t=function(e,t,n){var r=o.templates[e];r==null&&console.error(`Template "${e}" does not exist!`);var i=null;if(n!=null&&r.scaleLessThen){var s=[];for(var a in r.scaleLessThen){var c=parseFloat(a);n<c&&s.push(c)}if(s.length>0){s.sort(function(u,f){return u-f});var l=r.scaleLessThen[s[0]];for(var d in l)i==null&&(i=Object.assign({},r)),i[d]=l[d]}}return t?i==null?r.min?r.min:r:i.min?i.min:i:i??r},o.setNodeSize=function(e){var t=o.t(e.templateName,e.min);e.w=t&&t.size?t.size[0]:0,e.h=t&&t.size?t.size[1]:0},o._imgs2base64=function(e,t,n,r){var i=e.getElementsByTagName(t),s=i.length;s==0&&r();for(var a=0;a<s;a++)(function(){var c=a,l=i[c];o._getDataUri(l.getAttribute(n),function(d){d.success&&l.setAttribute(n,d.result),c==s-1&&r()})})()},o._getDataUri=function(e,t){if(e.indexOf("base64")!=-1)t({success:!1});else{var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){n.status===200?r.readAsDataURL(n.response):n.status===404&&t({success:!1,result:n.status})};var r=new FileReader;r.onloadend=function(){t({success:!0,result:r.result})},n.send()}},o._convertStringToArray=function(e,t){return o.ARRAY_FIELDS.indexOf(e)!=-1?o.isNEU(t)?[]:t.split(","):t},o._convertArrayToString=function(e){return!o.isNEU(e)&&Array.isArray(e)?e.join():e},o._csvToArray=function(e,t){t=t||o.CSV_DELIMITER;for(var n=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),r=[[]],i=null;i=n.exec(e);){var s,a=i[1];a.length&&a!==t&&r.push([]),s=i[2]?i[2].replace(new RegExp('""',"g"),'"'):i[3],r[r.length-1].push(s)}return r},o._json2xml=function(e){for(var t=document.implementation.createDocument("","",null),n=t.createElement("nodes"),r=0;r<e.length;r++){var i=t.createElement("node"),s=e[r];for(var a in s){var c=s[a];i.setAttribute(a,o._convertArrayToString(c))}n.appendChild(i)}return t.appendChild(n),'<?xml version="1.0" encoding="utf-8" ?>'+new XMLSerializer().serializeToString(t.documentElement)},o._xml2json=function(e){for(var t=new DOMParser().parseFromString(e,"text/xml").getElementsByTagName("node"),n=[],r=0;r<t.length;r++){for(var i=t[r],s={},a=0;a<i.attributes.length;a++){var c=i.attributes[a];s[c.name]=o._convertStringToArray(c.name,c.value)}n.push(s)}return n},o.convertNodesToCsv=function(e){return o._json2csv(e)},o._json2csv=function(e){for(var t=[],n=function(a){for(var c="",l=0;l<t.length;l++){var d;(d=t[l]=="reportsTo"?null:a[t[l]]==null?"":a[t[l]])instanceof Date&&(d=d.toLocaleString());var u=(d=d===null?"":d.toString()).replace(/"/g,'""'),f=new RegExp(`("|;|
)`,"g");u.search(f)>=0&&(u='"'+u+'"'),l>0&&(c+=o.CSV_DELIMITER),c+=u}return c+`
`},r="",i=0;i<e.length;i++)for(var s in e[i])o._arrayContains(t,s)||(t.push(s),r+=s+o.CSV_DELIMITER);for(r=r.substring(0,r.length-1),r+=`
`,i=0;i<e.length;i++)r+=n(e[i]);return r=r.substring(0,r.length-1)},o.accentFold=function(e){return(e=e.toString().toLowerCase()).replace(/([])|([])|([])|([])|([])|([])|([])|([])|([])|([])/g,function(t,n,r,i,s,a,c,l,d,u,f){return n?"a":r?"c":i?"e":s?"i":a?"n":c?"o":l?"s":d?"u":u?"y":f?"ae":void 0})},o.copy=function(e){if(e===null||typeof e!="object"||"isActiveClone"in e)return e;if(e instanceof Date)var t=new e.constructor;else t=e.constructor();for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e.isActiveClone=null,t[n]=o.copy(e[n]),delete e.isActiveClone);return t},o._getScrollSensitivity=function(){var e=o._browser();return e.msie&&o.scroll.ie?o.scroll.ie:e.edge&&o.scroll.edge?o.scroll.edge:e.safari&&o.scroll.safari?o.scroll.safari:e.chrome&&o.scroll.chrome?o.scroll.chrome:e.firefox&&o.scroll.firefox?o.scroll.firefox:e.opera&&o.scroll.opera?o.scroll.opera:{smooth:o.scroll.smooth,speed:o.scroll.speed}},o.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},o.isTrial=function(){return o.remote!==void 0},o.childrenCount=function(e,t){for(var n=0,r=0;r<t.childrenIds.length;r++)e.nodes[t.childrenIds[r]]&&n++;return n},o.childrenTotalCount=function(e,t){for(var n=0,r=0;r<t.childrenIds.length;r++){var i=e.nodes[t.childrenIds[r]];i&&(n++,n+=o.childrenTotalCount(e,i))}return n},o.collapsedChildrenCount=function(e,t){for(var n=0,r=0;r<t.childrenIds.length;r++){var i=e.nodes[t.childrenIds[r]];i&&i.collapsed===!0&&n++}return n},o.collapsedChildrenTotalCount=function(e,t,n){for(var r=0,i=0;i<t.childrenIds.length;i++){var s=e.nodes[t.childrenIds[i]];s&&((n||s.collapsed===!0)&&r++,r+=o.collapsedChildrenTotalCount(e,s,!0))}return r},o._setMinMaxXY=function(e,t){(t.minX==null||e.x!=null&&e.x<t.minX)&&(t.minX=e.x),(t.minY==null||e.y!=null&&e.y<t.minY)&&(t.minY=e.y),(t.maxX==null||e.x!=null&&e.x+e.w>t.maxX)&&(t.maxX=e.x+e.w),(t.maxY==null||e.y!=null&&e.y+e.h>t.maxY)&&(t.maxY=e.y+e.h)},o.getStParentNodes=function(e,t){for(t||(t=[]);e.parent;)e=e.parent;return e.stParent&&(t.push(e.stParent),o.getStParentNodes(e.stParent,t)),t},o.getRootOf=function(e){for(;e&&e.parent;)e=e.parent;return e},o._getViewBox=function(e){var t=null;return e?(t=(t="["+(t=e.getAttribute("viewBox"))+"]").replace(/\ /g,","),t=JSON.parse(t)):null},o.isNEU=function(e){return e==null||e===""},o.gradientCircleForDefs=function(e,t,n,r){function i(a,c,l,d){var u=(d-90)*Math.PI/180;return{x:a+l*Math.cos(u),y:c+l*Math.sin(u)}}function s(a,c,l,d,u){var f=i(a,c,l,u),p=i(a,c,l,d),h=u-d<=180?"0":"1";return["M",f.x,f.y,"A",l,l,0,h,0,p.x,p.y].join(" ")}return Array.isArray(t)||(t=[t,t,t,t,t,t]),`<linearGradient id="${e}_linearColors1" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="${t[0]}"></stop>
            <stop offset="100%" stop-color="${t[1]}"></stop>
        </linearGradient>
        <linearGradient id="${e}_linearColors2" x1="0.5" y1="0" x2="0.5" y2="1">
            <stop offset="0%" stop-color="${t[1]}"></stop>
            <stop offset="100%" stop-color="${t[2]}"></stop>
        </linearGradient>
        <linearGradient id="${e}_linearColors3" x1="1" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="${t[2]}"></stop>
            <stop offset="100%" stop-color="${t[3]}"></stop>
        </linearGradient>
        <linearGradient id="${e}_linearColors4" x1="1" y1="1" x2="0" y2="0">
            <stop offset="0%" stop-color="${t[3]}"></stop>
            <stop offset="100%" stop-color="${t[4]}"></stop>
        </linearGradient>
        <linearGradient id="${e}_linearColors5" x1="0.5" y1="1" x2="0.5" y2="0">
            <stop offset="0%" stop-color="${t[4]}"></stop>
            <stop offset="100%" stop-color="${t[5]}"></stop>
        </linearGradient>
        <linearGradient id="${e}_linearColors6" x1="0" y1="1" x2="1" y2="0">
            <stop offset="0%" stop-color="${t[5]}"></stop>
            <stop offset="100%" stop-color="${t[0]}"></stop>
        </linearGradient>        
        <g id="${e}">
            <path stroke-width="${r}" fill="none" stroke="url(#${e}_linearColors1)" d="${s(n,n,n,1,60)}"  />
            <path stroke-width="${r}" fill="none" stroke="url(#${e}_linearColors2)" d="${s(n,n,n,60,120)}"/>
            <path stroke-width="${r}" fill="none" stroke="url(#${e}_linearColors3)" d="${s(n,n,n,120,180)}" />
            <path stroke-width="${r}" fill="none" stroke="url(#${e}_linearColors4)" d="${s(n,n,n,180,240)}" />
            <path stroke-width="${r}" fill="none" stroke="url(#${e}_linearColors5)" d="${s(n,n,n,240,300)}" />
            <path stroke-width="${r}" fill="none" stroke="url(#${e}_linearColors6)" d="${s(n,n,n,300,1)}"/>
        </g>`},o._intersectionObserver=function(e,t){typeof IntersectionObserver=="function"?new IntersectionObserver(function(n,r){n.forEach(function(i){var s=i.intersectionRatio>0;i.intersectionRatio==0&&(s=i.isIntersecting),t(s)})}).observe(e):t(!0)},o.convertCsvToNodes=function(e){for(var t=o._csvToArray(e),n=t[0],r=[],i=1;i<t.length;i++){for(var s={},a=0;a<t[i].length;a++){var c=n[a],l=t[i][a];s[n[a]]=o._convertStringToArray(c,l)}s.id.trim()!=""&&r.push(s)}return r},o._escapeHtml=function(e){return o.ESCAPE_HTML&&typeof e=="string"?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):e},o._escapeDoubleQuotes=function(e){return typeof e=="string"?e.replace(/"/g,"&quot;"):e},o._escapeGreaterLessSign=function(e){return typeof e=="string"?e.replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},o.roundPathCorners=function(e,t,n){function r(I,E,D){var R=E.x-I.x,M=E.y-I.y,N=Math.sqrt(R*R+M*M);return i(I,E,Math.min(1,D/N))}function i(I,E,D){return{x:I.x+(E.x-I.x)*D,y:I.y+(E.y-I.y)*D}}function s(I,E){I.length>2&&(I[I.length-2]=E.x,I[I.length-1]=E.y)}function a(I){return{x:parseFloat(I[I.length-2]),y:parseFloat(I[I.length-1])}}Array.isArray(e)||(e=(e=e.split(/[,\s]/).reduce(function(I,E){var D=E.match("([a-zA-Z])(.+)");return D?(I.push(D[1]),I.push(D[2])):I.push(E),I},[])).reduce(function(I,E){return parseFloat(E)==E&&I.length?I[I.length-1].push(E):I.push([E]),I},[]));var c=[];if(e.length>1){var l=a(e[0]),d=null;e[e.length-1][0]=="Z"&&e[0].length>2&&(d=["L",l.x,l.y],e[e.length-1]=d),c.push(e[0]);for(var u=1;u<e.length;u++){var f=c[c.length-1],p=e[u],h=p==d?e[1]:e[u+1];if(h&&f&&f.length>2&&p[0]=="L"&&h.length>2&&h[0]=="L"){var m,b,_=a(f),g=a(p),w=a(h);n?(m=i(g,f.origPoint||_,t),b=i(g,h.origPoint||w,t)):(m=r(g,_,t),b=r(g,w,t)),s(p,m),p.origPoint=g,c.push(p);var y=i(m,g,.5),v=i(g,b,.5),x=["C",y.x,y.y,v.x,v.y,b.x,b.y];x.origPoint=g,c.push(x)}else c.push(p)}if(d){var C=a(c[c.length-1]);c.push(["Z"]),s(c[0],C)}}else c=e;return c.reduce(function(I,E){return I+E.join(" ")+" "},"")},o._isMoved=function(e){return e.movex!=null||e.movey!=null},o._getDynamicGridCoulumns=function(e){for(var t=1;t<e&&(e/t,!(e/t-t<=0));t++);return t%2!=0&&t>2&&t--,t},o._changeRootOption=function(e,t,n){for(var r=[],i=0;i<t.length;i++)for(var s=0;s<n.length;s++)if(n[s].has(t[i])){r=n[s];break}for(i=0;i<r.length;i++){var a=e.indexOf(r[i]);a!=-1&&e.splice(a,1)}t.length&&e.push(t[0])},o._convertStringToArrayOnImport=function(e,t){return e=="tags"||e=="pids"?o.isNEU(t)?[]:t.split(","):t},o.isObject=function(e){return e&&typeof e=="object"&&!Array.isArray(e)&&e!==null&&e.constructor&&e.constructor.name.toLowerCase()=="object"},o===void 0&&(o={}),o.icon={},o.icon.png=function(e,t,n){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 550.801 550.801"><path fill="'+n+'" d="M146.747,276.708c0-13.998-9.711-22.352-26.887-22.352c-6.99,0-11.726,0.675-14.204,1.355v44.927 c2.932,0.676,6.539,0.896,11.52,0.896C135.449,301.546,146.747,292.28,146.747,276.708z"/><path fill="'+n+'" d="M488.426,197.019H475.2v-63.816c0-0.398-0.063-0.799-0.116-1.202c-0.021-2.534-0.827-5.023-2.562-6.995L366.325,3.694 c-0.032-0.031-0.063-0.042-0.085-0.076c-0.633-0.707-1.371-1.295-2.151-1.804c-0.231-0.155-0.464-0.285-0.706-0.419 c-0.676-0.369-1.393-0.675-2.131-0.896c-0.2-0.056-0.38-0.138-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.873v160.545 c0,17.043,13.824,30.87,30.873,30.87h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87v-160.54C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.513c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M234.344,335.86v45.831h-31.601V229.524h40.184 l31.611,55.759c9.025,16.031,18.064,34.983,24.825,52.154h0.675c-2.257-20.103-2.933-40.643-2.933-63.44v-44.473h31.614v152.167 h-36.117l-32.516-58.703c-9.049-16.253-18.971-35.892-26.438-53.727l-0.665,0.222C233.906,289.58,234.344,311.027,234.344,335.86z M71.556,381.691V231.56c10.613-1.804,25.516-3.159,46.506-3.159c21.215,0,36.353,4.061,46.509,12.192 c9.698,7.673,16.255,20.313,16.255,35.219c0,14.897-4.959,27.549-13.999,36.123c-11.738,11.063-29.123,16.031-49.441,16.031 c-4.522,0-8.593-0.231-11.736-0.675v54.411H71.556V381.691z M453.601,523.353H97.2V419.302h356.4V523.353z M485.652,374.688 c-10.61,3.607-30.713,8.585-50.805,8.585c-27.759,0-47.872-7.003-61.857-20.545c-13.995-13.1-21.684-32.97-21.452-55.318 c0.222-50.569,37.03-79.463,86.917-79.463c19.644,0,34.783,3.829,42.219,7.446l-7.214,27.543c-8.369-3.617-18.752-6.55-35.458-6.55 c-28.656,0-50.341,16.256-50.341,49.22c0,31.382,19.649,49.892,47.872,49.892c7.895,0,14.218-0.901,16.934-2.257v-31.835h-23.493 v-26.869h56.679V374.688z"/></svg>'},o.icon.pdf=function(e,t,n){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 550.801 550.801"><path fill="'+n+'" d="M160.381,282.225c0-14.832-10.299-23.684-28.474-23.684c-7.414,0-12.437,0.715-15.071,1.432V307.6 c3.114,0.707,6.942,0.949,12.192,0.949C148.419,308.549,160.381,298.74,160.381,282.225z"/><path fill="'+n+'" d="M272.875,259.019c-8.145,0-13.397,0.717-16.519,1.435v105.523c3.116,0.729,8.142,0.729,12.69,0.729 c33.017,0.231,54.554-17.946,54.554-56.474C323.842,276.719,304.215,259.019,272.875,259.019z"/><path fill="'+n+'" d="M488.426,197.019H475.2v-63.816c0-0.398-0.063-0.799-0.116-1.202c-0.021-2.534-0.827-5.023-2.562-6.995L366.325,3.694 c-0.032-0.031-0.063-0.042-0.085-0.076c-0.633-0.707-1.371-1.295-2.151-1.804c-0.231-0.155-0.464-0.285-0.706-0.419 c-0.676-0.369-1.393-0.675-2.131-0.896c-0.2-0.056-0.38-0.138-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.873v160.545 c0,17.043,13.824,30.87,30.873,30.87h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87v-160.54C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.513c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M362.359,309.023c0,30.876-11.243,52.165-26.82,65.333 c-16.971,14.117-42.82,20.814-74.396,20.814c-18.9,0-32.297-1.197-41.401-2.389V234.365c13.399-2.149,30.878-3.346,49.304-3.346 c30.612,0,50.478,5.508,66.039,17.226C351.828,260.69,362.359,280.547,362.359,309.023z M80.7,393.499V234.365 c11.241-1.904,27.042-3.346,49.296-3.346c22.491,0,38.527,4.308,49.291,12.928c10.292,8.131,17.215,21.534,17.215,37.328 c0,15.799-5.25,29.198-14.829,38.285c-12.442,11.728-30.865,16.996-52.407,16.996c-4.778,0-9.1-0.243-12.435-0.723v57.67H80.7 V393.499z M453.601,523.353H97.2V419.302h356.4V523.353z M484.898,262.127h-61.989v36.851h57.913v29.674h-57.913v64.848h-36.593 V232.216h98.582V262.127z"/></svg>'},o.icon.svg=function(e,t,n){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 550.801 550.801"><path fill="'+n+'" d="M488.426,197.019H475.2v-63.816c0-0.398-0.063-0.799-0.116-1.202c-0.021-2.534-0.827-5.023-2.562-6.995L366.325,3.694 c-0.032-0.031-0.063-0.042-0.085-0.076c-0.633-0.707-1.371-1.295-2.151-1.804c-0.231-0.155-0.464-0.285-0.706-0.419 c-0.676-0.369-1.393-0.675-2.131-0.896c-0.2-0.056-0.38-0.138-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.873v160.545 c0,17.043,13.824,30.87,30.873,30.87h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87v-160.54C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.513c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M338.871,225.672L284.545,386.96h-42.591 l-51.69-161.288h39.967l19.617,68.196c5.508,19.143,10.531,37.567,14.36,57.67h0.717c4.061-19.385,9.089-38.527,14.592-56.953 l20.585-68.918h38.77V225.672z M68.458,379.54l7.415-30.153c9.811,5.021,24.888,10.051,40.439,10.051 c16.751,0,25.607-6.935,25.607-17.465c0-10.052-7.662-15.795-27.05-22.734c-26.8-9.328-44.263-24.168-44.263-47.611 c0-27.524,22.971-48.579,61.014-48.579c18.188,0,31.591,3.823,41.159,8.131l-8.126,29.437c-6.465-3.116-17.945-7.657-33.745-7.657 c-15.791,0-23.454,7.183-23.454,15.552c0,10.296,9.089,14.842,29.917,22.731c28.468,10.536,41.871,25.365,41.871,48.094 c0,27.042-20.812,50.013-65.09,50.013C95.731,389.349,77.538,384.571,68.458,379.54z M453.601,523.353H97.2V419.302h356.4V523.353z M488.911,379.54c-11.243,3.823-32.537,9.103-53.831,9.103c-29.437,0-50.73-7.426-65.57-21.779 c-14.839-13.875-22.971-34.942-22.738-58.625c0.253-53.604,39.255-84.235,92.137-84.235c20.81,0,36.852,4.073,44.74,7.896 l-7.657,29.202c-8.859-3.829-19.849-6.95-37.567-6.95c-30.396,0-53.357,17.233-53.357,52.173c0,33.265,20.81,52.882,50.73,52.882 c8.375,0,15.072-0.96,17.94-2.395v-33.745h-24.875v-28.471h60.049V379.54L488.911,379.54z" /></svg>'},o.icon.csv=function(e,t,n){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 548.29 548.291" ><path fill="'+n+'" d="M486.2,196.121h-13.164V132.59c0-0.399-0.064-0.795-0.116-1.2c-0.021-2.52-0.824-5-2.551-6.96L364.656,3.677 c-0.031-0.034-0.064-0.044-0.085-0.075c-0.629-0.707-1.364-1.292-2.141-1.796c-0.231-0.157-0.462-0.286-0.704-0.419 c-0.672-0.365-1.386-0.672-2.121-0.893c-0.199-0.052-0.377-0.134-0.576-0.188C358.229,0.118,357.4,0,356.562,0H96.757 C84.893,0,75.256,9.649,75.256,21.502v174.613H62.093c-16.972,0-30.733,13.756-30.733,30.73v159.81 c0,16.966,13.761,30.736,30.733,30.736h13.163V526.79c0,11.854,9.637,21.501,21.501,21.501h354.777 c11.853,0,21.502-9.647,21.502-21.501V417.392H486.2c16.966,0,30.729-13.764,30.729-30.731v-159.81 C516.93,209.872,503.166,196.121,486.2,196.121z M96.757,21.502h249.053v110.006c0,5.94,4.818,10.751,10.751,10.751h94.973v53.861 H96.757V21.502z M258.618,313.18c-26.68-9.291-44.063-24.053-44.063-47.389c0-27.404,22.861-48.368,60.733-48.368 c18.107,0,31.447,3.811,40.968,8.107l-8.09,29.3c-6.43-3.107-17.862-7.632-33.59-7.632c-15.717,0-23.339,7.149-23.339,15.485 c0,10.247,9.047,14.769,29.78,22.632c28.341,10.479,41.681,25.239,41.681,47.874c0,26.909-20.721,49.786-64.792,49.786 c-18.338,0-36.449-4.776-45.497-9.77l7.38-30.016c9.772,5.014,24.775,10.006,40.264,10.006c16.671,0,25.488-6.908,25.488-17.396 C285.536,325.789,277.909,320.078,258.618,313.18z M69.474,302.692c0-54.781,39.074-85.269,87.654-85.269 c18.822,0,33.113,3.811,39.549,7.149l-7.392,28.816c-7.38-3.084-17.632-5.939-30.491-5.939c-28.822,0-51.206,17.375-51.206,53.099 c0,32.158,19.051,52.4,51.456,52.4c10.947,0,23.097-2.378,30.241-5.238l5.483,28.346c-6.672,3.34-21.674,6.919-41.208,6.919 C98.06,382.976,69.474,348.424,69.474,302.692z M451.534,520.962H96.757v-103.57h354.777V520.962z M427.518,380.583h-42.399 l-51.45-160.536h39.787l19.526,67.894c5.479,19.046,10.479,37.386,14.299,57.397h0.709c4.048-19.298,9.045-38.352,14.526-56.693 l20.487-68.598h38.599L427.518,380.583z" /></svg>'},o.icon.json=function(e,t,n){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 32 32" ><polygon fill="'+n+'"  points="31 11 31 21 29 21 27 15 27 21 25 21 25 11 27 11 29 17 29 11 31 11"/><path fill="'+n+'"  d="M21.3335,21h-2.667A1.6684,1.6684,0,0,1,17,19.3335v-6.667A1.6684,1.6684,0,0,1,18.6665,11h2.667A1.6684,1.6684,0,0,1,23,12.6665v6.667A1.6684,1.6684,0,0,1,21.3335,21ZM19,19h2V13H19Z"/><path fill="'+n+'"  d="M13.3335,21H9V19h4V17H11a2.002,2.002,0,0,1-2-2V12.6665A1.6684,1.6684,0,0,1,10.6665,11H15v2H11v2h2a2.002,2.002,0,0,1,2,2v2.3335A1.6684,1.6684,0,0,1,13.3335,21Z"/><path fill="'+n+'"  d="M5.3335,21H2.6665A1.6684,1.6684,0,0,1,1,19.3335V17H3v2H5V11H7v8.3335A1.6684,1.6684,0,0,1,5.3335,21Z"/><rect fill="'+n+'"  id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" style="fill: none;" width="32" height="32"/></svg>'},o.icon.excel=function(e,t,n){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 512 512"><path fill="#ECEFF1" d="M496,432.011H272c-8.832,0-16-7.168-16-16s0-311.168,0-320s7.168-16,16-16h224 c8.832,0,16,7.168,16,16v320C512,424.843,504.832,432.011,496,432.011z" /><path fill="'+n+'" d="M336,176.011h-64c-8.832,0-16-7.168-16-16s7.168-16,16-16h64c8.832,0,16,7.168,16,16 S344.832,176.011,336,176.011z" /><path fill="'+n+'" d="M336,240.011h-64c-8.832,0-16-7.168-16-16s7.168-16,16-16h64c8.832,0,16,7.168,16,16 S344.832,240.011,336,240.011z" /><path fill="'+n+'" d="M336,304.011h-64c-8.832,0-16-7.168-16-16s7.168-16,16-16h64c8.832,0,16,7.168,16,16 S344.832,304.011,336,304.011z" /><path fill="'+n+'" d="M336,368.011h-64c-8.832,0-16-7.168-16-16s7.168-16,16-16h64c8.832,0,16,7.168,16,16 S344.832,368.011,336,368.011z" /><path fill="'+n+'" d="M432,176.011h-32c-8.832,0-16-7.168-16-16s7.168-16,16-16h32c8.832,0,16,7.168,16,16 S440.832,176.011,432,176.011z" /><path fill="'+n+'" d="M432,240.011h-32c-8.832,0-16-7.168-16-16s7.168-16,16-16h32c8.832,0,16,7.168,16,16 S440.832,240.011,432,240.011z" /><path fill="'+n+'" d="M432,304.011h-32c-8.832,0-16-7.168-16-16s7.168-16,16-16h32c8.832,0,16,7.168,16,16 S440.832,304.011,432,304.011z" /><path fill="'+n+'" d="M432,368.011h-32c-8.832,0-16-7.168-16-16s7.168-16,16-16h32c8.832,0,16,7.168,16,16 S440.832,368.011,432,368.011z" /><path fill="'+n+'"  d="M282.208,19.691c-3.648-3.04-8.544-4.352-13.152-3.392l-256,48C5.472,65.707,0,72.299,0,80.011v352 c0,7.68,5.472,14.304,13.056,15.712l256,48c0.96,0.192,1.952,0.288,2.944,0.288c3.712,0,7.328-1.28,10.208-3.68 c3.68-3.04,5.792-7.584,5.792-12.32v-448C288,27.243,285.888,22.731,282.208,19.691z" /><path fill="#FAFAFA" d="M220.032,309.483l-50.592-57.824l51.168-65.792c5.44-6.976,4.16-17.024-2.784-22.464 c-6.944-5.44-16.992-4.16-22.464,2.784l-47.392,60.928l-39.936-45.632c-5.856-6.72-15.968-7.328-22.56-1.504 c-6.656,5.824-7.328,15.936-1.504,22.56l44,50.304L83.36,310.187c-5.44,6.976-4.16,17.024,2.784,22.464 c2.944,2.272,6.432,3.36,9.856,3.36c4.768,0,9.472-2.112,12.64-6.176l40.8-52.48l46.528,53.152 c3.168,3.648,7.584,5.504,12.032,5.504c3.744,0,7.488-1.312,10.528-3.968C225.184,326.219,225.856,316.107,220.032,309.483z" /></svg>'},o.icon.edit=function(e,t,n){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 528.899 528.899"><path fill="'+n+'" d="M328.883,89.125l107.59,107.589l-272.34,272.34L56.604,361.465L328.883,89.125z M518.113,63.177l-47.981-47.981 c-18.543-18.543-48.653-18.543-67.259,0l-45.961,45.961l107.59,107.59l53.611-53.611 C532.495,100.753,532.495,77.559,518.113,63.177z M0.3,512.69c-1.958,8.812,5.998,16.708,14.811,14.565l119.891-29.069 L27.473,390.597L0.3,512.69z" /></svg>'},o.icon.details=function(e,t,n){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 512 512"><path fill="'+n+'" d="M447.933,103.629c-0.034-3.076-1.224-6.09-3.485-8.352L352.683,3.511c-0.004-0.004-0.007-0.005-0.011-0.008 C350.505,1.338,347.511,0,344.206,0H89.278C75.361,0,64.04,11.32,64.04,25.237v461.525c0,13.916,11.32,25.237,25.237,25.237 h333.444c13.916,0,25.237-11.32,25.237-25.237V103.753C447.96,103.709,447.937,103.672,447.933,103.629z M356.194,40.931 l50.834,50.834h-49.572c-0.695,0-1.262-0.567-1.262-1.262V40.931z M423.983,486.763c0,0.695-0.566,1.261-1.261,1.261H89.278 c-0.695,0-1.261-0.566-1.261-1.261V25.237c0-0.695,0.566-1.261,1.261-1.261h242.94v66.527c0,13.916,11.322,25.239,25.239,25.239 h66.527V486.763z"/><path fill="'+n+'" d="M362.088,164.014H149.912c-6.62,0-11.988,5.367-11.988,11.988c0,6.62,5.368,11.988,11.988,11.988h212.175 c6.62,0,11.988-5.368,11.988-11.988C374.076,169.381,368.707,164.014,362.088,164.014z"/><path fill="'+n+'" d="M362.088,236.353H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.62,5.368,11.988,11.988,11.988h212.175 c6.62,0,11.988-5.368,11.988-11.988C374.076,241.721,368.707,236.353,362.088,236.353z"/><path fill="'+n+'" d="M362.088,308.691H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.621,5.368,11.988,11.988,11.988h212.175 c6.62,0,11.988-5.367,11.988-11.988C374.076,314.06,368.707,308.691,362.088,308.691z"/><path fill="'+n+'" d="M256,381.031H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.621,5.368,11.988,11.988,11.988H256 c6.62,0,11.988-5.367,11.988-11.988C267.988,386.398,262.62,381.031,256,381.031z"/></svg>'},o.icon.remove=function(e,t,n){return'<svg width="'+e+'" height="'+t+'"  viewBox="0 0 900.5 900.5"><path fill="'+n+'" d="M176.415,880.5c0,11.046,8.954,20,20,20h507.67c11.046,0,20-8.954,20-20V232.487h-547.67V880.5L176.415,880.5z M562.75,342.766h75v436.029h-75V342.766z M412.75,342.766h75v436.029h-75V342.766z M262.75,342.766h75v436.029h-75V342.766z"/><path fill="'+n+'" d="M618.825,91.911V20c0-11.046-8.954-20-20-20h-297.15c-11.046,0-20,8.954-20,20v71.911v12.5v12.5H141.874 c-11.046,0-20,8.954-20,20v50.576c0,11.045,8.954,20,20,20h34.541h547.67h34.541c11.046,0,20-8.955,20-20v-50.576 c0-11.046-8.954-20-20-20H618.825v-12.5V91.911z M543.825,112.799h-187.15v-8.389v-12.5V75h187.15v16.911v12.5V112.799z"/></svg>'},o.icon.add=function(e,t,n){return'<svg width="'+e+'" height="'+t+'"   viewBox="0 0 922 922"><path fill="'+n+'" d="M922,453V81c0-11.046-8.954-20-20-20H410c-11.045,0-20,8.954-20,20v149h318c24.812,0,45,20.187,45,45v198h149 C913.046,473.001,922,464.046,922,453z" /><path fill="'+n+'" d="M557,667.001h151c11.046,0,20-8.954,20-20v-174v-198c0-11.046-8.954-20-20-20H390H216c-11.045,0-20,8.954-20,20v149h194 h122c24.812,0,45,20.187,45,45v4V667.001z" /><path fill="'+n+'" d="M0,469v372c0,11.046,8.955,20,20,20h492c11.046,0,20-8.954,20-20V692v-12.501V667V473v-4c0-11.046-8.954-20-20-20H390H196 h-12.5H171H20C8.955,449,0,457.955,0,469z" /></svg>'},o.icon.search=function(e,t,n){return'<svg width="'+e+'" height="'+t+'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 485.213 485.213"><path fill="'+n+'" d="M471.882,407.567L360.567,296.243c-16.586,25.795-38.536,47.734-64.331,64.321l111.324,111.324 c17.772,17.768,46.587,17.768,64.321,0C489.654,454.149,489.654,425.334,471.882,407.567z" /><path fill="'+n+'" d="M363.909,181.955C363.909,81.473,282.44,0,181.956,0C81.474,0,0.001,81.473,0.001,181.955s81.473,181.951,181.955,181.951 C282.44,363.906,363.909,282.437,363.909,181.955z M181.956,318.416c-75.252,0-136.465-61.208-136.465-136.46 c0-75.252,61.213-136.465,136.465-136.465c75.25,0,136.468,61.213,136.468,136.465 C318.424,257.208,257.206,318.416,181.956,318.416z" /><path fill="'+n+'" d="M75.817,181.955h30.322c0-41.803,34.014-75.814,75.816-75.814V75.816C123.438,75.816,75.817,123.437,75.817,181.955z" /></svg>'},o.icon.xml=function(e,t,n){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 550.801 550.801"><path fill="'+n+'"  d="M488.426,197.019H475.2v-63.816c0-0.401-0.063-0.799-0.116-1.205c-0.021-2.534-0.827-5.023-2.562-6.992L366.325,3.691 c-0.032-0.031-0.063-0.042-0.085-0.073c-0.633-0.707-1.371-1.298-2.151-1.804c-0.231-0.158-0.464-0.287-0.706-0.422 c-0.676-0.366-1.393-0.675-2.131-0.896c-0.2-0.053-0.38-0.135-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.87v160.542 c0,17.044,13.824,30.876,30.873,30.876h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87V227.89C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.51c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M369.531,374.53h-32.058l-2.156-55.519 c-0.644-17.434-1.298-38.518-1.298-59.611h-0.633c-4.514,18.516-10.547,39.166-16.137,56.162l-17.645,56.601h-25.618 l-15.494-56.157c-4.725-16.996-9.671-37.658-13.123-56.6h-0.43c-0.854,19.585-1.508,41.961-2.586,60.038l-2.576,55.086h-30.343 l9.26-145.035h43.677l14.207,48.421c4.517,16.774,9.041,34.847,12.258,51.843h0.654c4.081-16.77,9.038-35.923,13.774-52.064 l15.493-48.199h42.82L369.531,374.53z M69.992,374.53l41.955-73.385l-40.444-71.65h37.655l12.688,26.465 c4.316,8.828,7.533,15.928,10.99,24.092h0.422c3.438-9.242,6.23-15.694,9.893-24.092l12.274-26.465h37.434l-40.89,70.796 l43.044,74.239h-37.866l-13.134-26.257c-5.376-10.108-8.817-17.639-12.909-26.04h-0.433c-3.009,8.401-6.674,15.932-11.19,26.04 l-12.042,26.257H69.992z M453.601,523.353H97.2V419.302h356.4V523.353z M485.325,374.53h-90.608V229.495h32.933v117.497h57.682 v27.538H485.325z"/></svg>'},o.icon.link=function(e,t,n){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 512.092 512.092"  ><path fill="'+n+'" d="M312.453,199.601c-6.066-6.102-12.792-11.511-20.053-16.128c-19.232-12.315-41.59-18.859-64.427-18.859 c-31.697-0.059-62.106,12.535-84.48,34.987L34.949,308.23c-22.336,22.379-34.89,52.7-34.91,84.318 c-0.042,65.98,53.41,119.501,119.39,119.543c31.648,0.11,62.029-12.424,84.395-34.816l89.6-89.6 c1.628-1.614,2.537-3.816,2.524-6.108c-0.027-4.713-3.87-8.511-8.583-8.484h-3.413c-18.72,0.066-37.273-3.529-54.613-10.581 c-3.195-1.315-6.867-0.573-9.301,1.877l-64.427,64.512c-20.006,20.006-52.442,20.006-72.448,0 c-20.006-20.006-20.006-52.442,0-72.448l108.971-108.885c19.99-19.965,52.373-19.965,72.363,0 c13.472,12.679,34.486,12.679,47.957,0c5.796-5.801,9.31-13.495,9.899-21.675C322.976,216.108,319.371,206.535,312.453,199.601z" /><path fill="'+n+'" d="M477.061,34.993c-46.657-46.657-122.303-46.657-168.96,0l-89.515,89.429c-2.458,2.47-3.167,6.185-1.792,9.387 c1.359,3.211,4.535,5.272,8.021,5.205h3.157c18.698-0.034,37.221,3.589,54.528,10.667c3.195,1.315,6.867,0.573,9.301-1.877 l64.256-64.171c20.006-20.006,52.442-20.006,72.448,0c20.006,20.006,20.006,52.442,0,72.448l-80.043,79.957l-0.683,0.768 l-27.989,27.819c-19.99,19.965-52.373,19.965-72.363,0c-13.472-12.679-34.486-12.679-47.957,0 c-5.833,5.845-9.35,13.606-9.899,21.845c-0.624,9.775,2.981,19.348,9.899,26.283c9.877,9.919,21.433,18.008,34.133,23.893 c1.792,0.853,3.584,1.536,5.376,2.304c1.792,0.768,3.669,1.365,5.461,2.048c1.792,0.683,3.669,1.28,5.461,1.792l5.035,1.365 c3.413,0.853,6.827,1.536,10.325,2.133c4.214,0.626,8.458,1.025,12.715,1.195h5.973h0.512l5.12-0.597 c1.877-0.085,3.84-0.512,6.059-0.512h2.901l5.888-0.853l2.731-0.512l4.949-1.024h0.939c20.961-5.265,40.101-16.118,55.381-31.403 l108.629-108.629C523.718,157.296,523.718,81.65,477.061,34.993z" /></svg>'},o.icon.happy=function(e,t,n){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 512 512"><path fill="'+n+'" d="M256,0C114.615,0,0,114.615,0,256s114.615,256,256,256s256-114.615,256-256S397.385,0,256,0z M256,480 C132.288,480,32,379.712,32,256S132.288,32,256,32s224,100.288,224,224S379.712,480,256,480z"/><path fill="'+n+'" d="M176,176c17.673,0,32,14.327,32,32h32c0-35.346-28.654-64-64-64c-35.346,0-64,28.654-64,64h32 C144,190.327,158.327,176,176,176z"/><path fill="'+n+'" d="M336,144c-35.346,0-64,28.654-64,64h32c0-17.673,14.327-32,32-32c17.673,0,32,14.327,32,32h32 C400,172.654,371.346,144,336,144z"/><path fill="'+n+'" d="M256,368c-53.019,0-96-42.981-96-96h-32c0,70.692,57.308,128,128,128s128-57.308,128-128h-32 C352,325.019,309.019,368,256,368z"/></svg>'},o.icon.sad=function(e,t,n){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 512 512"><path fill="'+n+'" d="M256,0C114.615,0,0,114.615,0,256s114.615,256,256,256s256-114.615,256-256S397.385,0,256,0z M256,480 C132.288,480,32,379.712,32,256S132.288,32,256,32s224,100.288,224,224S379.712,480,256,480z"/><path fill="'+n+'" d="M336,192c-17.673,0-32-14.327-32-32h-32c0,35.346,28.654,64,64,64c35.346,0,64-28.654,64-64h-32 C368,177.673,353.673,192,336,192z"/><path fill="'+n+'" d="M176,224c35.346,0,64-28.654,64-64h-32c0,17.673-14.327,32-32,32s-32-14.327-32-32h-32C112,195.346,140.654,224,176,224z "/><path fill="'+n+'" d="M256,256c-70.692,0-128,57.308-128,128h32c0-53.019,42.981-96,96-96s96,42.981,96,96h32C384,313.308,326.692,256,256,256 z"/></svg>'},o.icon.share=function(e,t,n,r,i){return r==null&&(r=0),i==null&&(i=0),`<svg width="${e}" height="${t}" x="${r}" y="${i}" viewBox="0 0 512 512">
                <path fill="${n}" d="M406,332c-29.641,0-55.761,14.581-72.167,36.755L191.99,296.124c2.355-8.027,4.01-16.346,4.01-25.124
                    c0-11.906-2.441-23.225-6.658-33.636l148.445-89.328C354.307,167.424,378.589,180,406,180c49.629,0,90-40.371,90-90
                    c0-49.629-40.371-90-90-90c-49.629,0-90,40.371-90,90c0,11.437,2.355,22.286,6.262,32.358l-148.887,89.59
                    C156.869,193.136,132.937,181,106,181c-49.629,0-90,40.371-90,90c0,49.629,40.371,90,90,90c30.13,0,56.691-15.009,73.035-37.806
                    l141.376,72.395C317.807,403.995,316,412.75,316,422c0,49.629,40.371,90,90,90c49.629,0,90-40.371,90-90
                    C496,372.371,455.629,332,406,332z"/>
                </svg>`},o.icon.user=function(e,t,n,r,i){return o.isNEU(r)&&(r=0),o.isNEU(i)&&(i=0),`<svg width="${e}" height="${t}" x="${r}" y="${i}" viewBox="0 0 24 24">
                <path fill="${n}" d="M12 11.796C14.7189 11.796 16.9231 9.60308 16.9231 6.89801C16.9231 4.19294 14.7189 2.00005 12 2.00005C9.28106 2.00005 7.07692 4.19294 7.07692 6.89801C7.07692 9.60308 9.28106 11.796 12 11.796Z" fill="#030D45"/>
                <path fill="${n}" d="M14.5641 13.8369H9.4359C6.46154 13.8369 4 16.2859 4 19.245C4 19.9593 4.30769 20.5716 4.92308 20.8777C5.84615 21.3879 7.89744 22.0001 12 22.0001C16.1026 22.0001 18.1538 21.3879 19.0769 20.8777C19.5897 20.5716 20 19.9593 20 19.245C20 16.1838 17.5385 13.8369 14.5641 13.8369Z" fill="#030D45"/>
            </svg>`},o.icon.close=function(e,t,n,r,i){return r==null&&(r=0),i==null&&(i=0),`<svg width="${e}" height="${t}" x="${r}" y="${i}" viewBox="0 0 512 512">
    <path fill="${n}" d="m256 0c-141.49 0-256 114.5-256 256 0 141.49 114.5 256 256 256 141.49 0 256-114.5 256-256 0-141.49-114.5-256-256-256zm-12.284 317.397-58.121 58.132c-6.565 6.553-15.283 10.166-24.557 10.166-19.196 0-34.734-15.526-34.734-34.734 0-9.274 3.612-17.992 10.166-24.557l58.132-58.121c6.785-6.784 6.785-17.783 0-24.568l-58.132-58.121c-6.553-6.565-10.166-15.283-10.166-24.557 0-19.196 15.526-34.734 34.734-34.734 9.274 0 17.992 3.613 24.557 10.166l58.121 58.132c6.785 6.773 17.784 6.773 24.568 0l58.121-58.132c6.565-6.553 15.283-10.166 24.557-10.166 19.196 0 34.734 15.526 34.734 34.734 0 9.274-3.612 17.992-10.166 24.557l-58.132 58.121c-6.785 6.784-6.785 17.783 0 24.568l58.132 58.121c6.553 6.565 10.166 15.283 10.166 24.557 0 19.196-15.526 34.734-34.734 34.734-9.274 0-17.992-3.613-24.557-10.166l-58.121-58.132c-6.784-6.784-17.784-6.773-24.568 0z"/>
    </svg>`},o.icon.undo=function(e,t,n,r,i){return r==null&&(r=0),i==null&&(i=0),`<svg width="${e}" height="${t}" x="${r}" y="${i}" viewBox="0 0 24 24">
    <path fill-rule="evenodd" clip-rule="evenodd" fill="${n}" d="M3.46447 3.46447C2 4.92893 2 7.28595 2 12C2 16.714 2 19.0711 3.46447 20.5355C4.92893 22 7.28595 22 12 22C16.714 22 19.0711 22 20.5355 20.5355C22 19.0711 22 16.7141 22 12C22 7.28598 22 4.92893 20.5355 3.46447C19.0711 2 16.714 2 12 2C7.28595 2 4.92893 2 3.46447 3.46447ZM9.25871 7.97395C9.56308 7.693 9.58205 7.21851 9.3011 6.91414C9.02015 6.60978 8.54565 6.5908 8.24129 6.87175L5.99129 8.94867C5.83748 9.09065 5.75 9.29045 5.75 9.49977C5.75 9.7091 5.83748 9.9089 5.99129 10.0509L8.24129 12.1278C8.54565 12.4088 9.02015 12.3898 9.3011 12.0854C9.58205 11.781 9.56308 11.3065 9.25871 11.0256L8.41824 10.2498H14.0385C14.7376 10.2498 15.2069 10.2506 15.5652 10.2862C15.9116 10.3205 16.0724 10.3813 16.1787 10.4501C16.3272 10.5461 16.4537 10.6726 16.5497 10.8211C16.6184 10.9274 16.6793 11.0882 16.7136 11.4345C16.7491 11.7929 16.75 12.2622 16.75 12.9613C16.75 13.6604 16.7491 14.1298 16.7136 14.4881C16.6793 14.8344 16.6185 14.9952 16.5497 15.1015C16.4537 15.2501 16.3272 15.3765 16.1787 15.4726C16.0724 15.5413 15.9116 15.6021 15.5652 15.6365C15.2069 15.672 14.7376 15.6729 14.0385 15.6729H9.5C9.08579 15.6729 8.75 16.0086 8.75 16.4229C8.75 16.8371 9.08579 17.1729 9.5 17.1729H14.0758C14.7279 17.1729 15.2721 17.1729 15.7133 17.1291C16.1748 17.0834 16.6038 16.9839 16.9931 16.7322C17.3199 16.5209 17.5981 16.2427 17.8094 15.916C18.0611 15.5266 18.1605 15.0976 18.2063 14.6361C18.25 14.195 18.25 13.6508 18.25 12.9987V12.924C18.25 12.2718 18.25 11.7276 18.2063 11.2865C18.1605 10.825 18.0611 10.396 17.8093 10.0067C17.5981 9.6799 17.3199 9.40169 16.9931 9.19042C16.6038 8.9387 16.1748 8.83927 15.7133 8.7935C15.2721 8.74975 14.7279 8.74976 14.0758 8.74977L8.41824 8.74977L9.25871 7.97395Z" />
    <rect style="opacity: 0" x="2" y="2" width="20" height="20"></rect>
    </svg>`},o.icon.redo=function(e,t,n,r,i){return r==null&&(r=0),i==null&&(i=0),`<svg width="${e}" height="${t}" x="${r}" y="${i}" viewBox="0 0 24 24" >
    <path fill="#f9f9f9" fill-rule="evenodd" clip-rule="evenodd" fill="${n}" d="M3.46447 3.46447C2 4.92893 2 7.28595 2 12C2 16.714 2 19.0711 3.46447 20.5355C4.92893 22 7.28595 22 12 22C16.714 22 19.0711 22 20.5355 20.5355C22 19.0711 22 16.7141 22 12C22 7.28598 22 4.92893 20.5355 3.46447C19.0711 2 16.714 2 12 2C7.28595 2 4.92893 2 3.46447 3.46447ZM15.7587 6.87273C15.4543 6.59177 14.9799 6.61075 14.6989 6.91512C14.4179 7.21948 14.4369 7.69398 14.7413 7.97493L15.5818 8.75075H9.96155C7.63558 8.75075 5.75 10.6363 5.75 12.9623C5.75 15.2883 7.63557 17.1738 9.96154 17.1738H14.5C14.9142 17.1738 15.25 16.838 15.25 16.4238C15.25 16.0096 14.9142 15.6738 14.5 15.6738H9.96154C8.464 15.6738 7.25 14.4598 7.25 12.9623C7.25 11.4647 8.464 10.2508 9.96155 10.2508H15.5818L14.7413 11.0266C14.4369 11.3075 14.4179 11.782 14.6989 12.0864C14.9799 12.3908 15.4543 12.4097 15.7587 12.1288L18.0087 10.0519C18.1625 9.90987 18.25 9.71007 18.25 9.50075C18.25 9.29143 18.1625 9.09163 18.0087 8.94965L15.7587 6.87273Z"/>
    <rect style="opacity: 0" x="2" y="2" width="20" height="20"></rect>    
    </svg>`},o.icon.ft=function(e,t,n,r,i){return`<svg width="${e}" height="${t}" x="${r}" y="${i}" viewBox="0 0 512 512"  >
                <path fill="${n}" d="m336.061 377.731c-5.086-6.54-14.511-7.717-21.049-2.631l-44.012 34.231v-200.331c0-8.284-6.716-15-15-15s-15 6.716-15 15v200.331l-44.011-34.231c-6.538-5.086-15.962-3.908-21.049 2.631-5.086 6.539-3.908 15.963 2.631 21.049l62.429 48.556v49.664c0 8.284 6.716 15 15 15s15-6.716 15-15v-49.664l62.429-48.556c6.54-5.086 7.717-14.51 2.632-21.049z" />
                <path fill="${n}" d="m271 497v-49.664l62.429-48.556c6.54-5.086 7.717-14.51 2.631-21.049-5.086-6.54-14.511-7.717-21.049-2.631l-44.011 34.231v-200.331c0-8.284-6.716-15-15-15v318c8.284 0 15-6.716 15-15z" />
                <path fill="${n}" d="m320 512h-128c-8.284 0-15-6.716-15-15s6.716-15 15-15h128c8.284 0 15 6.716 15 15s-6.716 15-15 15z" />
                <path fill="${n}" d="m320 482h-64v30h64c8.284 0 15-6.716 15-15s-6.716-15-15-15z" />
                <path fill="${n}" d="m400 439c-61.206 0-111-49.794-111-111s49.794-111 111-111 111 49.794 111 111-49.794 111-111 111z" />
                <path fill="${n}" d="m112 439c-61.206 0-111-49.794-111-111s49.794-111 111-111 111 49.794 111 111-49.794 111-111 111z" />
                <path fill="${n}" d="m256 222c-61.206 0-111-49.794-111-111s49.794-111 111-111 111 49.794 111 111-49.794 111-111 111z" />
                <path fill="${n}" d="m367 111c0-61.206-49.794-111-111-111v222c61.206 0 111-49.794 111-111z" />
            </svg>`},o.icon.addUser=function(e,t,n,r,i){return o.isNEU(r)&&(r=0),o.isNEU(i)&&(i=0),`<svg width="${e}" height="${t}" x="${r}" y="${i}" viewBox="0 0 512 512" >
                <path fill="${n}" d="M300.434,257.599c-25.945,27.304-60.622,43.875-98.602,43.875c-37.979,0-72.656-16.571-98.602-43.875 c-45.617,28.738-77.826,76.818-85.092,132.736c-1.659,12.77,8.291,24.107,21.201,24.107h225.846 c0-53.371,32.011-99.402,77.838-119.914C330.812,280.165,316.452,267.69,300.434,257.599z"/>
                <ellipse fill="${n}" cx="201.828" cy="133.868" rx="112.229" ry="133.868"/>
                <path fill="${n}" d="M396.486,316.885c-53.794,0-97.558,43.764-97.558,97.558S342.693,512,396.486,512c53.792,0,97.557-43.764,97.557-97.558 S450.279,316.885,396.486,316.885z M435.199,431.315h-21.841v21.841c0,9.318-7.554,16.872-16.872,16.872 c-9.318,0-16.872-7.554-16.872-16.872v-21.841h-21.842c-9.318,0-16.872-7.554-16.872-16.872c0-9.319,7.554-16.872,16.872-16.872 h21.842v-21.841c0-9.318,7.554-16.872,16.872-16.872c9.318,0,16.872,7.554,16.872,16.872v21.841h21.841 c9.318,0,16.872,7.554,16.872,16.872C452.072,423.761,444.518,431.315,435.199,431.315z"/>
            </svg>`},o.icon.daughter=function(e,t,n,r,i){return o.isNEU(r)&&(r=0),o.isNEU(i)&&(i=0),`<svg width="${e}" height="${t}" x="${r}" y="${i}" viewBox="0 0 512.879 512.879">
                <path fill="${n}" d="M213.773,238.933c4.71,0,8.533-3.823,8.533-8.533v-5.615c0.546,0.529,0.922,0.964,0.964,1.024 c1.519,2.918,4.497,4.591,7.578,4.591c1.323,0,2.671-0.307,3.934-0.964c4.181-2.176,5.803-7.33,3.627-11.511 c-2.534-4.872-10.581-13.124-24.636-13.124c-14.054,0-22.101,8.252-24.636,13.124c-2.125,4.087-0.555,8.969,3.456,11.23 c4.011,2.287,9.156,0.811,11.563-3.123c0.077-0.128,0.495-0.623,1.084-1.195v5.564 C205.239,235.11,209.062,238.933,213.773,238.933z"/>
                <path fill="${n}" d="M256.439,332.8c20.028,0,30.507-9.907,31.633-11.034c3.294-3.294,3.285-8.568,0.043-11.913 c-3.234-3.354-8.61-3.439-12.015-0.247c-0.265,0.247-6.699,6.127-19.661,6.127c-12.774,0-19.209-5.709-19.652-6.118 c-3.336-3.251-8.678-3.217-11.981,0.085c-3.337,3.337-3.337,8.73,0,12.066C225.933,322.893,236.412,332.8,256.439,332.8z"/>
                <path fill="${n}" d="M365.666,293.547c-49.826-66.441-75.093-133.623-75.093-199.68c0-4.71-3.823-8.533-8.533-8.533s-8.533,3.823-8.533,8.533 c0,68.369,25.31,137.489,75.255,205.542c-12.228,21.623-50.483,76.058-92.322,76.058c-45.218,0-86.255-63.59-94.763-80.614 c-8.388-16.768-24.704-66.765-24.704-98.586v-25.754c20.378-0.572,73.404-3.405,121.813-17.246 c4.531-1.289,7.151-6.016,5.854-10.547c-1.289-4.531-6.008-7.159-10.547-5.854C196.254,153.387,129.114,153.6,128.439,153.6 c-4.71,0-8.533,3.823-8.533,8.533v34.133c0,34.935,17.254,87.723,26.496,106.214c0.452,0.905,46.797,90.052,110.037,90.052 s109.585-89.148,110.037-90.052C367.919,299.588,367.603,296.132,365.666,293.547z"/>
                <path fill="${n}" d="M316.173,392.533c-4.71,0-8.533,3.823-8.533,8.533v17.067c0,0.06,0.034,0.111,0.034,0.171 c0,0.051-0.034,0.094-0.034,0.154c-0.034,5.205-1.749,50.876-51.2,50.876s-51.166-45.986-51.2-51.2v-17.067 c0-4.71-3.823-8.533-8.533-8.533s-8.533,3.823-8.533,8.533v8.687c-116.028,1.638-168.917,35.9-178.765,65.417l-8.533,25.6 c-1.493,4.471,0.93,9.301,5.402,10.795C7.172,511.863,8.085,512,8.973,512c3.575,0,6.903-2.261,8.098-5.837l8.533-25.6 c6.076-18.227,48.034-52.335,163.132-53.845c3.106,24.422,19.721,59.682,67.704,59.682c53.999,0,68.267-44.425,68.267-67.917 c0-0.06-0.034-0.111-0.034-0.171c0-0.068,0.034-0.119,0.034-0.179v-17.067C324.706,396.356,320.883,392.533,316.173,392.533z"/>
                <path fill="${n}" d="M256.695,273.067h-0.085c-4.71,0-8.491,3.823-8.491,8.533c0,4.71,3.866,8.533,8.576,8.533 c4.719,0,8.533-3.823,8.533-8.533C265.229,276.89,261.414,273.067,256.695,273.067z"/>
                <path fill="${n}" d="M512.004,501.641l-8.533-25.591c-4.659-13.978-22.34-28.228-49.792-40.141c-4.318-1.877-9.352,0.102-11.23,4.429 c-1.869,4.318,0.111,9.353,4.437,11.221c26.266,11.401,38.178,23.219,40.388,29.884l8.533,25.6 c1.195,3.575,4.523,5.837,8.098,5.837c0.887,0,1.801-0.145,2.697-0.444C511.074,510.942,513.498,506.112,512.004,501.641z"/>
                <path fill="${n}" d="M256.439,0c-115.558,0-179.2,63.642-179.2,179.2V256c0,66.039-24.909,141.611-25.165,142.37 c-1.485,4.471,0.93,9.301,5.402,10.795c4.48,1.476,9.301-0.93,10.795-5.402c1.058-3.191,26.035-78.908,26.035-147.763v-76.8 c0-134.008,88.175-162.133,162.133-162.133c100.454,0,162.133,94.43,162.133,162.133v17.067 c0,34.458-21.111,74.163-41.532,112.572c-18.133,34.116-35.268,66.338-35.268,92.228c0,54.11,35.14,89.873,36.634,91.366 c1.596,1.604,3.772,2.5,6.033,2.5c2.261,0,4.437-0.896,6.033-2.5c1.493-1.493,36.634-37.257,36.634-91.366 c0-53.197-17.562-72.303-19.567-74.3c-3.285-3.285-8.559-3.285-11.904-0.051c-3.354,3.234-3.439,8.61-0.265,12.015 c0.145,0.154,14.669,16.256,14.669,62.336c0,33.937-16.444,60.16-25.617,72.149c-9.19-11.947-25.583-38.05-25.583-72.149 c0-21.632,16.162-52.036,33.271-84.215c21.402-40.252,43.529-81.869,43.529-120.585V179.2C435.639,94.438,362.04,0,256.439,0z"/>
            </svg>`},o.icon.son=function(e,t,n,r,i){return o.isNEU(r)&&(r=0),o.isNEU(i)&&(i=0),`<svg width="${e}" height="${t}" x="${r}" y="${i}"  viewBox="0 0 512.002 512.002">
                <path fill="${n}" d="M238.934,213.334c0-4.71-3.823-8.533-8.533-8.533h-34.133c-4.71,0-8.533,3.823-8.533,8.533 c0,4.71,3.823,8.533,8.533,8.533h8.533c0,4.71,3.823,8.533,8.533,8.533c4.71,0,8.533-3.823,8.533-8.533h8.533 C235.111,221.867,238.934,218.044,238.934,213.334z"/>
                <path fill="${n}" d="M121.601,255.19c4.565,13.466,17.178,49.98,24.371,64.358c13.551,27.11,51.977,72.986,110.029,72.986 s96.478-45.875,110.037-72.986c7.185-14.379,19.797-50.893,24.371-64.358c11.025-2.85,19.191-12.885,19.191-24.789v-34.133 c0-11.127-7.134-20.617-17.067-24.141v-44.126c0-33.69-17.741-95.923-83.354-101.931c-0.137-4.028-1.476-7.27-2.953-9.668 c-8.38-13.559-31.94-16.401-50.227-16.401c-151.842,0-153.6,143.616-153.6,145.067c0,4.71,3.814,8.525,8.525,8.525h0.009 c4.702,0,8.525-3.806,8.533-8.516c0.017-5.222,1.937-128.009,136.533-128.009c24.132,0,33.801,5.222,35.703,8.311 c0.282,0.435,0.998,1.604-0.666,4.941c-1.323,2.645-1.178,5.786,0.375,8.303c1.553,2.509,4.301,4.045,7.253,4.045 c75.656,0,76.791,81.86,76.8,85.333v51.2c0,4.71,3.823,8.533,8.533,8.533c4.702,0,8.533,3.831,8.533,8.533v34.133 c0,4.702-3.831,8.533-8.533,8.533c-3.669,0-6.929,2.347-8.098,5.837c-0.162,0.503-16.964,50.816-25.131,67.149 c-1.297,2.594-32.495,63.548-94.771,63.548s-93.466-60.954-94.763-63.548c-8.166-16.333-24.977-66.645-25.139-67.149 c-1.161-3.49-4.42-5.837-8.098-5.837c-4.702,0-8.533-3.831-8.533-8.533v-34.133c0-2.313,0.93-4.412,2.423-5.948 c3.396,7.62,10.607,14.481,23.177,14.481c3.234,0,6.187-1.826,7.637-4.719c7.535-15.061,15.283-30.575,17.399-46.652 c43.665-1.758,108.979-17.323,139.742-41.105c8.201,29.764,32.742,54.596,33.988,55.842c3.337,3.337,8.738,3.337,12.066,0 c3.337-3.336,3.337-8.73,0-12.066c-0.316-0.316-31.633-31.983-31.633-62.234c0-3.831-2.56-7.202-6.255-8.226 c-3.703-1.024-7.62,0.546-9.591,3.831c-14.549,24.243-94.746,47.061-146.287,47.061c-4.71,0-8.533,3.823-8.533,8.533 c0,13.295-6.127,27.102-13.286,41.6c-2.901-1.604-3.703-4.753-3.78-7.467c0-4.71-3.823-8.533-8.533-8.533 c-14.114,0-25.6,11.486-25.6,25.6v34.133C102.401,242.305,110.576,252.34,121.601,255.19z"/>
                <path fill="${n}" d="M256.001,332.801c20.028,0,30.507-9.907,31.633-11.034c3.294-3.294,3.285-8.567,0.051-11.913 c-3.243-3.354-8.619-3.439-12.023-0.247c-0.265,0.247-6.699,6.127-19.661,6.127c-12.774,0-19.209-5.709-19.652-6.118 c-3.336-3.251-8.678-3.217-11.981,0.085c-3.328,3.337-3.328,8.73,0,12.066C225.503,322.893,235.982,332.801,256.001,332.801z"/>
                <path fill="${n}" d="M264.79,281.601c0-4.71-3.814-8.533-8.533-8.533h-0.085c-4.71,0-8.491,3.823-8.491,8.533c0,4.71,3.866,8.533,8.576,8.533 C260.976,290.134,264.79,286.311,264.79,281.601z"/>
                <path fill="${n}" d="M511.745,501.394l-8.713-34.756c-4.386-13.158-30.285-55.484-178.765-56.636v-8.934c0-4.71-3.823-8.533-8.533-8.533 s-8.533,3.823-8.533,8.533v17.067c0,0.06,0.034,0.111,0.034,0.171c0,0.051-0.034,0.094-0.034,0.154 c-0.034,5.205-1.749,50.876-51.2,50.876s-51.166-45.986-51.2-51.2v-17.067c0-4.71-3.823-8.533-8.533-8.533 s-8.533,3.823-8.533,8.533v8.619C77.168,410.556,21.786,428.203,8.79,467.26l-8.533,34.133 c-1.143,4.574,1.638,9.207,6.212,10.351c4.557,1.143,9.199-1.638,10.342-6.204l8.354-33.51 c9.916-29.739,63.309-44.595,163.132-45.338c3.098,24.431,19.712,59.708,67.704,59.708c47.983,0,64.597-35.063,67.703-59.366 c116.958,0.862,157.628,28.467,162.953,44.373l8.533,34.133c0.973,3.874,4.446,6.46,8.269,6.46c0.691,0,1.382-0.077,2.082-0.256 C510.115,510.601,512.888,505.968,511.745,501.394z"/>
                <path fill="${n}" d="M298.668,230.401c4.71,0,8.533-3.823,8.533-8.533h8.533c4.71,0,8.533-3.823,8.533-8.533c0-4.71-3.823-8.533-8.533-8.533 h-34.133c-4.71,0-8.533,3.823-8.533,8.533c0,4.71,3.823,8.533,8.533,8.533h8.533 C290.134,226.578,293.957,230.401,298.668,230.401z"/>
            </svg>`},o.icon.wife=function(e,t,n,r,i){return o.isNEU(r)&&(r=0),o.isNEU(i)&&(i=0),`<svg width="${e}" height="${t}" x="${r}" y="${i}" viewBox="0 0 512 512" >
                <path fill="${n}" d="M128,307.2c4.719,0,8.533-3.823,8.533-8.533V281.6c0-4.71-3.814-8.533-8.533-8.533c-4.719,0-8.533,3.823-8.533,8.533 v17.067C119.467,303.377,123.281,307.2,128,307.2z"/>
                <path fill="${n}" d="M384,273.067c-4.719,0-8.533,3.823-8.533,8.533v17.067c0,4.71,3.814,8.533,8.533,8.533c4.719,0,8.533-3.823,8.533-8.533 V281.6C392.533,276.89,388.719,273.067,384,273.067z"/>
                <path fill="${n}" d="M392.183,433.109c-0.162-0.606-0.418-1.152-0.7-1.715c-0.162-0.299-0.196-0.64-0.384-0.93 c-0.094-0.128-0.23-0.196-0.324-0.324c-0.358-0.469-0.802-0.845-1.254-1.246c-0.418-0.375-0.819-0.742-1.306-1.016 c-0.145-0.094-0.23-0.23-0.392-0.316l-34.133-17.067c-2.748-1.357-6.008-1.161-8.55,0.538l-51.209,34.133 c-2.372,1.587-3.797,4.25-3.797,7.1v30.259c-5.077,4.062-17.545,12.407-34.133,12.407c-16.427,0-29.013-8.388-34.133-12.433 v-30.234c0-2.85-1.425-5.513-3.797-7.1l-51.2-34.133c-2.543-1.698-5.803-1.894-8.55-0.538l-34.133,17.067 c-0.154,0.077-0.239,0.213-0.375,0.299c-0.512,0.29-0.939,0.674-1.374,1.075c-0.435,0.384-0.853,0.734-1.186,1.178 c-0.102,0.137-0.256,0.213-0.35,0.35c-0.205,0.307-0.239,0.657-0.401,0.99c-0.265,0.529-0.521,1.05-0.674,1.63 c-0.137,0.529-0.179,1.05-0.205,1.596c-0.034,0.538-0.06,1.058,0.008,1.604c0.068,0.597,0.265,1.143,0.461,1.707 c0.119,0.341,0.111,0.7,0.273,1.024c0.077,0.154,0.222,0.247,0.307,0.393c0.282,0.495,0.666,0.913,1.058,1.348 c0.384,0.427,0.742,0.853,1.186,1.195c0.137,0.102,0.213,0.256,0.35,0.35l51.2,34.133c1.459,0.973,3.106,1.434,4.727,1.434 c2.756,0,5.47-1.331,7.108-3.797c2.62-3.925,1.562-9.225-2.364-11.836l-38.972-25.975l16.555-8.277l43.281,28.851V486.4 c0,2.261,0.896,4.437,2.5,6.033C208.102,493.235,227.2,512,256,512s47.898-18.765,48.7-19.567c1.604-1.596,2.5-3.772,2.5-6.033 v-29.568l43.29-28.851l16.546,8.277l-38.972,25.975c-3.925,2.611-4.983,7.91-2.364,11.836c1.638,2.466,4.352,3.797,7.108,3.797 c1.621,0,3.268-0.461,4.727-1.434l51.2-34.133c0.137-0.094,0.205-0.239,0.333-0.341c0.478-0.35,0.853-0.794,1.254-1.246 c0.358-0.427,0.725-0.811,0.998-1.289c0.085-0.154,0.239-0.247,0.324-0.41c0.171-0.35,0.171-0.725,0.29-1.084 c0.179-0.538,0.367-1.05,0.435-1.613c0.077-0.58,0.051-1.126,0.009-1.698C392.354,434.108,392.32,433.613,392.183,433.109z"/>
                <path fill="${n}" d="M57.037,409.165c0.896,0.29,1.809,0.435,2.697,0.435c3.575,0,6.903-2.261,8.09-5.837 C68.89,400.572,93.867,324.855,93.867,256v-76.8C93.867,45.193,182.033,17.067,256,17.067c25.199,0,77.636,0,85.649,11.128 c0.333,0.452,0.828,1.135,0.128,3.243c-0.956,2.842-0.341,5.965,1.604,8.235c1.946,2.278,4.932,3.362,7.885,2.876 c10.863-1.792,20.412,0.93,29.184,8.354c22.895,19.396,37.683,69.76,37.683,128.299V256c0,77.457,25.071,145.22,26.138,148.062 c1.656,4.412,6.571,6.639,10.991,5.001c4.412-1.655,6.647-6.571,5.001-10.991C460.006,397.406,435.2,330.257,435.2,256v-76.8 c0-50.415-11.486-114.014-43.716-141.321c-9.745-8.243-20.932-12.621-32.836-12.902c-0.683-2.773-1.903-5.035-3.149-6.767 C343.356,1.374,303.258,0,256,0C140.442,0,76.8,63.642,76.8,179.2V256c0,66.039-24.909,141.611-25.156,142.37 C50.15,402.842,52.565,407.672,57.037,409.165z"/>
                <path fill="${n}" d="M91.802,426.923C19.814,444.919,1.195,498.492,0.444,500.77c-1.493,4.471,0.922,9.301,5.393,10.795 C6.733,511.864,7.646,512,8.533,512c3.576,0,6.904-2.261,8.09-5.837c0.162-0.469,16.316-46.942,79.309-62.686 c4.574-1.143,7.356-5.777,6.212-10.351C101.001,428.561,96.367,425.771,91.802,426.923z"/>
                <path fill="${n}" d="M213.333,238.933c4.719,0,8.533-3.823,8.533-8.533v-5.615c0.546,0.529,0.922,0.964,0.964,1.024 c1.519,2.918,4.497,4.591,7.578,4.591c1.323,0,2.671-0.307,3.934-0.964c4.173-2.176,5.803-7.33,3.627-11.511 c-2.534-4.873-10.59-13.124-24.636-13.124c-14.046,0-22.101,8.252-24.636,13.124c-2.125,4.087-0.546,8.969,3.456,11.23 c3.985,2.261,9.148,0.819,11.554-3.123c0.085-0.128,0.503-0.623,1.092-1.195v5.564C204.8,235.11,208.614,238.933,213.333,238.933 z"/>
                <path fill="${n}" d="M511.556,500.77c-0.751-2.278-19.371-55.851-91.358-73.847c-4.574-1.161-9.199,1.638-10.342,6.204 c-1.143,4.574,1.638,9.207,6.212,10.351c62.524,15.633,78.66,60.809,79.309,62.686c1.186,3.576,4.514,5.837,8.09,5.837 c0.888,0,1.801-0.137,2.697-0.435C510.635,510.071,513.05,505.242,511.556,500.77z"/>
                <path fill="${n}" d="M256,332.8c20.028,0,30.507-9.907,31.633-11.034c3.294-3.294,3.285-8.567,0.051-11.913 c-3.251-3.345-8.61-3.439-12.015-0.247c-0.273,0.247-6.707,6.127-19.669,6.127c-12.774,0-19.208-5.709-19.652-6.118 c-3.32-3.251-8.67-3.226-11.981,0.085c-3.337,3.337-3.337,8.73,0,12.066C225.493,322.893,235.972,332.8,256,332.8z"/>
                <path fill="${n}" d="M298.667,238.933c4.719,0,8.533-3.823,8.533-8.533v-5.615c0.546,0.529,0.922,0.964,0.964,1.024 c1.519,2.918,4.497,4.591,7.578,4.591c1.323,0,2.671-0.307,3.934-0.964c4.173-2.176,5.803-7.33,3.627-11.511 c-2.534-4.873-10.59-13.124-24.636-13.124c-14.046,0-22.101,8.252-24.636,13.124c-2.125,4.087-0.546,8.969,3.456,11.23 c3.994,2.261,9.156,0.819,11.554-3.123c0.085-0.128,0.503-0.623,1.092-1.195v5.564 C290.133,235.11,293.948,238.933,298.667,238.933z"/>
                <path fill="${n}" d="M389.129,189.449c-8.542-6.443-30.729-26.957-30.729-44.382c0-4.71-3.814-8.533-8.533-8.533s-8.533,3.823-8.533,8.533 c0,24.678,24.354,47.249,34.014,55.228c-1.835,33.476-24.917,95.223-33.118,111.625c-7.654,15.317-48.154,63.548-86.229,63.548 s-78.575-48.23-86.229-63.548c-8.542-17.084-33.237-83.379-33.237-115.652v-25.728c33.835-0.802,157.321-6.929,218.453-52.779 c3.772-2.825,4.54-8.175,1.707-11.947c-2.825-3.772-8.175-4.54-11.947-1.707C279.561,152.994,129.51,153.6,128,153.6 c-4.719,0-8.533,3.823-8.533,8.533v34.133c0,36.625,26.871,106.965,35.029,123.281c10.385,20.77,55.834,72.986,101.504,72.986 s91.119-52.216,101.504-72.986c8.158-16.316,35.029-86.656,35.029-123.281C392.533,193.587,391.27,191.061,389.129,189.449z"/>
            </svg>`},o.icon.husband=function(e,t,n,r,i){return o.isNEU(r)&&(r=0),o.isNEU(i)&&(i=0),`<svg width="${e}" height="${t}" x="${r}" y="${i}" viewBox="0 0 512.007 512.007" >
                <path fill="${n}" d="M121.835,255.249c6.229,16.196,26.803,68.42,41.737,90.82l1.348,2.039c10.957,16.614,29.295,44.425,91.085,44.425 c61.79,0,80.128-27.81,91.085-44.425l1.348-2.039c14.933-22.4,35.507-74.624,41.737-90.82c11.145-2.773,19.43-12.86,19.43-24.849 v-34.133c0-11.127-7.134-20.617-17.067-24.141V128c0-33.69-17.741-95.923-83.362-101.931c-0.128-4.028-1.459-7.27-2.944-9.668 C297.844,2.85,274.292,0,256.005,0c-151.842,0-153.6,143.616-153.6,145.067c0,4.71,3.814,8.525,8.516,8.525h0.017 c4.702,0,8.516-3.806,8.533-8.508c0.017-5.231,1.937-128.017,136.533-128.017c24.132,0,33.801,5.222,35.712,8.311 c0.265,0.435,0.99,1.604-0.683,4.941c-1.323,2.645-1.178,5.786,0.375,8.303c1.562,2.509,4.301,4.045,7.262,4.045 c75.657,0,76.791,81.86,76.8,85.333v51.2c0,4.71,3.814,8.533,8.533,8.533c4.71,0,8.533,3.831,8.533,8.533V230.4 c0,4.702-3.823,8.533-8.533,8.533c-3.558,0-6.741,2.21-7.996,5.538c-0.247,0.674-25.446,67.644-41.771,92.126l-1.399,2.116 c-10.223,15.514-24.235,36.753-76.834,36.753c-52.599,0-66.611-21.239-76.834-36.753l-1.399-2.116 c-16.324-24.482-41.523-91.452-41.771-92.126c-1.254-3.328-4.437-5.538-7.996-5.538c-4.71,0-8.533-3.831-8.533-8.533v-34.133 c0-2.313,0.922-4.412,2.423-5.948c3.089,6.955,9.421,13.21,20.053,14.268l29.193,21.897c2.27,16.623,16.418,29.517,33.664,29.517 h17.067c18.825,0,34.133-15.309,34.133-34.133c0,18.825,15.309,34.133,34.133,34.133h17.067 c17.237,0,31.394-12.894,33.664-29.517l31.189-23.39c3.772-2.825,4.54-8.175,1.707-11.947c-2.825-3.772-8.175-4.548-11.947-1.707 l-21.751,16.316c-3.251-10.402-12.86-18.022-24.329-18.022h-34.133c-14.114,0-25.6,11.486-25.6,25.6 c0-14.114-11.486-25.6-25.6-25.6h-34.133c-11.469,0-21.077,7.62-24.328,18.022l-16.282-12.211 c6.716-16.23,12.8-40.235,14.524-57.088c26.897-0.478,104.713-3.763,139.332-25.37c7.851,30.31,33.058,55.817,34.321,57.08 c3.336,3.336,8.73,3.336,12.066,0c3.336-3.337,3.336-8.73,0-12.066c-0.316-0.316-31.633-31.983-31.633-62.234 c0-3.831-2.56-7.202-6.255-8.226c-3.661-1.016-7.629,0.546-9.591,3.831c-12.425,20.693-93.022,29.995-146.287,29.995 c-4.719,0-8.533,3.823-8.533,8.533c0,13.858-6.554,41.515-13.508,58.539c-2.722-1.638-3.49-4.693-3.558-7.339 c0-4.71-3.814-8.533-8.533-8.533c-14.114,0-25.6,11.486-25.6,25.6V230.4C102.405,242.389,110.691,252.476,121.835,255.249z M273.071,213.333c0-4.702,3.823-8.533,8.533-8.533h34.133c4.71,0,8.533,3.831,8.533,8.533v8.533 c0,9.412-7.654,17.067-17.067,17.067h-17.067c-9.412,0-17.067-7.654-17.067-17.067V213.333z M187.738,213.333 c0-4.702,3.823-8.533,8.533-8.533h34.133c4.71,0,8.533,3.831,8.533,8.533v8.533c0,9.412-7.654,17.067-17.067,17.067h-17.067 c-9.412,0-17.067-7.654-17.067-17.067V213.333z"/>
                <path fill="${n}" d="M298.663,307.226c0.009-4.702-3.797-8.533-8.499-8.559c-0.162,0-15.42-0.171-30.345-7.629 c-2.398-1.203-5.231-1.203-7.629,0c-14.925,7.458-30.182,7.629-30.319,7.629c-4.719,0-8.533,3.823-8.533,8.533 s3.814,8.533,8.533,8.533c0.725,0,16.853-0.094,34.133-7.646c17.28,7.552,33.408,7.646,34.133,7.646 C294.84,315.733,298.646,311.927,298.663,307.226z"/>
                <path fill="${n}" d="M247.471,324.267c-4.719,0-8.533,3.823-8.533,8.533c0,4.71,3.814,8.533,8.533,8.533h17.067 c4.719,0,8.533-3.823,8.533-8.533c0-4.71-3.814-8.533-8.533-8.533H247.471z"/>
                <path fill="${n}" d="M511.749,501.393l-8.721-34.756c-12.706-38.135-73.114-56.687-184.67-56.687c-0.879,0-1.758,0-2.645,0.009 c-4.053,0.009-7.544,2.867-8.337,6.852l-17.067,84.975c-0.93,4.625,2.065,9.122,6.682,10.052 c4.608,0.896,9.114-2.074,10.044-6.69l15.693-78.114c97.724,0.452,154.436,15.957,163.934,44.373l8.533,34.133 c0.973,3.874,4.446,6.468,8.269,6.46c0.683,0,1.382-0.077,2.074-0.256C510.11,510.601,512.892,505.976,511.749,501.393z"/>
                <path fill="${n}" d="M204.634,416.461c-0.794-3.994-4.292-6.861-8.363-6.861c-116.386,0-174.148,17.596-187.477,57.66l-8.533,34.133 c-1.152,4.582,1.638,9.207,6.212,10.351C7.164,511.923,7.864,512,8.547,512c3.823,0,7.296-2.586,8.269-6.46l8.346-33.51 c9.95-29.841,63.667-44.689,164.122-45.338l15.693,78.447c0.913,4.617,5.367,7.629,10.035,6.699 c4.617-0.93,7.62-5.427,6.69-10.044L204.634,416.461z"/>
                <path fill="${n}" d="M256.005,409.6c-14.114,0-25.6,11.486-25.6,25.6c0,11.11,7.159,20.489,17.067,24.021v44.245 c0,4.71,3.814,8.533,8.533,8.533c4.719,0,8.533-3.823,8.533-8.533V459.23c9.907-3.541,17.067-12.919,17.067-24.03 C281.605,421.086,270.119,409.6,256.005,409.6z M256.005,443.733c-4.71,0-8.533-3.831-8.533-8.533 c0-4.702,3.823-8.533,8.533-8.533c4.71,0,8.533,3.831,8.533,8.533C264.538,439.902,260.715,443.733,256.005,443.733z"/>
            </svg>`},o.icon.father=function(e,t,n,r,i){return o.isNEU(r)&&(r=0),o.isNEU(i)&&(i=0),`<svg width="${e}" height="${t}" x="${r}" y="${i}" viewBox="0 0 512.002 512.002" >
                <path fill="${n}" d="M366.934,128.001c0-4.71-3.814-8.533-8.533-8.533c-2.091,0-51.2-0.683-51.2-59.733c0-4.71-3.814-8.533-8.533-8.533 s-8.533,3.823-8.533,8.533c0,75.921,67.584,76.8,68.267,76.8C363.12,136.534,366.934,132.711,366.934,128.001z"/>
                <path fill="${n}" d="M256.001,196.268c0-14.114-11.486-25.6-25.6-25.6h-34.133c-11.46,0-21.069,7.62-24.329,18.022l-21.751-16.316 c-3.772-2.825-9.114-2.048-11.947,1.707c-2.825,3.772-2.065,9.122,1.707,11.947l31.189,23.39 c2.278,16.623,16.418,29.517,33.664,29.517h17.067c18.825,0,34.133-15.309,34.133-34.133c0,18.825,15.309,34.133,34.133,34.133 h17.067c17.237,0,31.394-12.894,33.664-29.517l31.189-23.39c3.772-2.825,4.54-8.175,1.707-11.947 c-2.825-3.772-8.175-4.548-11.947-1.707l-21.751,16.316c-3.251-10.402-12.86-18.022-24.329-18.022h-34.133 C267.487,170.668,256.001,182.153,256.001,196.268z M238.934,204.801c0,9.412-7.654,17.067-17.067,17.067h-17.067 c-9.412,0-17.067-7.654-17.067-17.067v-8.533c0-4.702,3.831-8.533,8.533-8.533h34.133c4.702,0,8.533,3.831,8.533,8.533V204.801z M324.268,196.268v8.533c0,9.412-7.654,17.067-17.067,17.067h-17.067c-9.412,0-17.067-7.654-17.067-17.067v-8.533 c0-4.702,3.823-8.533,8.533-8.533h34.133C320.445,187.734,324.268,191.566,324.268,196.268z"/>
                <path fill="${n}" d="M298.659,307.226c0.009-4.702-3.797-8.533-8.499-8.559c-0.162,0-15.42-0.171-30.345-7.629 c-2.398-1.203-5.231-1.203-7.629,0c-14.925,7.458-30.191,7.629-30.319,7.629c-4.71,0-8.533,3.823-8.533,8.533 s3.823,8.533,8.533,8.533c0.725,0,16.845-0.094,34.133-7.646c17.28,7.552,33.408,7.646,34.133,7.646 C294.836,315.734,298.642,311.928,298.659,307.226z"/>
                <path fill="${n}" d="M120.986,237.953c4.378,18.611,18.91,76.877,34.048,99.584c10.974,16.452,36.668,54.997,100.966,54.997 s89.993-38.545,100.966-54.997c15.138-22.707,29.67-80.973,34.048-99.584c10.718-3.055,18.586-12.937,18.586-24.619v-34.133 c0-11.127-7.134-20.617-17.067-24.141v-44.126c0-1.109-1.562-110.933-136.533-110.933c-151.842,0-153.6,126.72-153.6,128 c0,4.702,3.806,8.516,8.516,8.525h0.017c4.693,0,8.516-3.806,8.533-8.499c0.017-4.54,2.048-110.959,136.533-110.959 c117.581,0,119.441,90.061,119.467,93.867v51.2c0,4.71,3.814,8.533,8.533,8.533c4.71,0,8.533,3.831,8.533,8.533v34.133 c0,4.702-3.823,8.533-8.533,8.533c-4.002,0-7.458,2.782-8.337,6.682c-0.162,0.751-16.896,75.52-32.896,99.516 c-10.257,15.386-31.599,47.403-86.767,47.403s-76.51-32.017-86.767-47.403c-15.992-23.979-32.734-98.765-32.905-99.516 c-0.87-3.9-4.326-6.682-8.329-6.682c-4.702,0-8.533-3.831-8.533-8.533v-34.133c0-4.702,3.831-8.533,8.533-8.533 c1.323,0,2.637-0.307,3.814-0.896c2.978-1.493,72.986-37.333,72.986-110.037c0-4.71-3.823-8.533-8.533-8.533 s-8.533,3.823-8.533,8.533c0,56.678-52.523,88.636-62.08,93.978c-13.022,1.186-23.253,12.169-23.253,25.489v34.133 C102.401,225.016,110.269,234.898,120.986,237.953z"/>
                <path fill="${n}" d="M196.097,416.462c-0.794-3.994-4.292-6.861-8.363-6.861c-140.399,0-168.892,27.409-178.944,57.66l-8.533,34.133 c-1.143,4.582,1.638,9.207,6.204,10.351c0.7,0.179,1.391,0.256,2.082,0.256c3.823,0,7.296-2.586,8.269-6.46l8.354-33.51 c7.339-22.025,31.718-44.527,155.58-45.338l15.693,78.447c0.913,4.617,5.393,7.603,10.035,6.699 c4.625-0.93,7.62-5.427,6.69-10.044L196.097,416.462z"/>
                <path fill="${n}" d="M511.745,501.394l-8.721-34.756c-7.117-21.342-39.689-57.216-178.782-56.678c-4.062,0.009-7.544,2.867-8.337,6.852 l-17.067,84.975c-0.93,4.625,2.065,9.122,6.682,10.052c4.591,0.896,9.114-2.074,10.044-6.69l15.693-78.114 c103.714,0.674,148.412,23.484,155.401,44.373l8.533,34.133c0.973,3.874,4.446,6.468,8.269,6.46c0.683,0,1.382-0.077,2.074-0.256 C510.106,510.601,512.888,505.976,511.745,501.394z"/>
                <path fill="${n}" d="M256.257,426.668h-0.085c-4.71,0-8.491,3.823-8.491,8.533s3.866,8.533,8.576,8.533c4.71,0,8.533-3.823,8.533-8.533 S260.967,426.668,256.257,426.668z"/>
                <path fill="${n}" d="M256.257,494.934h-0.085c-4.71,0-8.491,3.823-8.491,8.533s3.866,8.533,8.576,8.533c4.71,0,8.533-3.823,8.533-8.533 S260.967,494.934,256.257,494.934z"/>
                <path fill="${n}" d="M247.468,324.268c-4.71,0-8.533,3.823-8.533,8.533c0,4.71,3.823,8.533,8.533,8.533h17.067 c4.719,0,8.533-3.823,8.533-8.533c0-4.71-3.814-8.533-8.533-8.533H247.468z"/>
                <path fill="${n}" d="M256.257,460.801h-0.085c-4.71,0-8.491,3.823-8.491,8.533c0,4.71,3.866,8.533,8.576,8.533 c4.71,0,8.533-3.823,8.533-8.533C264.79,464.624,260.967,460.801,256.257,460.801z"/>
            </svg>`},o.icon.mother=function(e,t,n,r,i){return o.isNEU(r)&&(r=0),o.isNEU(i)&&(i=0),`<svg width="${e}" height="${t}" x="${r}" y="${i}" viewBox="0 0 512.011 512.011" >
                <path fill="${n}" d="M299.355,445.356c-1.621,1.536-2.56,3.755-2.56,5.973c0,2.304,0.939,4.437,2.56,6.059 c1.536,1.621,3.755,2.475,5.973,2.475c2.304,0,4.523-0.853,6.059-2.475c1.621-1.536,2.475-3.755,2.475-6.059 c0-2.219-0.853-4.437-2.475-5.973C308.23,442.113,302.512,442.199,299.355,445.356z"/>
                <path fill="${n}" d="M276.23,458.668c-1.621,1.621-2.475,3.755-2.475,6.059c0,2.219,0.939,4.437,2.475,5.973 c1.621,1.621,3.84,2.56,6.059,2.56c2.219,0,4.437-0.939,5.973-2.56c1.621-1.536,2.56-3.755,2.56-5.973 c0-2.304-0.939-4.437-2.56-6.059C285.104,455.511,279.387,455.511,276.23,458.668z"/>
                <path fill="${n}" d="M392.539,196.268c0-2.68-1.263-5.205-3.405-6.818c-8.55-6.443-30.729-26.957-30.729-44.382 c0-4.71-3.823-8.533-8.533-8.533s-8.533,3.823-8.533,8.533c0,24.678,24.354,47.249,34.014,55.228 c-1.835,33.476-24.917,95.223-33.118,111.625c-7.654,15.317-48.154,63.548-86.229,63.548s-78.575-48.23-86.229-63.548 c-8.542-17.084-33.237-83.379-33.237-115.652V170.54c33.835-0.802,157.321-6.929,218.453-52.779 c3.772-2.825,4.531-8.175,1.707-11.947c-2.825-3.763-8.166-4.531-11.947-1.707c-65.186,48.887-215.236,49.493-216.747,49.493 c-4.71,0-8.533,3.823-8.533,8.533v34.133c0,36.625,26.871,106.965,35.029,123.281c10.394,20.77,55.834,72.986,101.504,72.986 s91.11-52.215,101.504-72.986C365.668,303.233,392.539,232.893,392.539,196.268z"/>
                <path fill="${n}" d="M249.947,463.276c-1.536,1.621-2.475,3.84-2.475,6.059c0,2.219,0.939,4.437,2.475,6.059 c1.621,1.536,3.84,2.475,6.059,2.475s4.437-0.939,6.059-2.475c1.536-1.621,2.475-3.84,2.475-6.059 c0-2.219-0.939-4.437-2.475-6.059C258.907,460.119,253.104,460.119,249.947,463.276z"/>
                <path fill="${n}" d="M34.139,230.401c0,18.85,6.75,36.659,19.098,50.688c-1.348,5.76-2.031,11.648-2.031,17.579 c0,42.342,34.458,76.8,76.8,76.8c6.494,0,12.954-0.819,19.191-2.432c4.565-1.178,7.305-5.828,6.127-10.394 c-1.178-4.565-5.828-7.305-10.394-6.127c-4.847,1.254-9.865,1.886-14.925,1.886c-32.939,0-59.733-26.795-59.733-59.733 c0-5.922,0.879-11.793,2.603-17.459c0.922-3.021,0.102-6.298-2.133-8.525c-11.307-11.298-17.536-26.308-17.536-42.283 c0-19.251,9.421-37.453,25.199-48.674c3.78-2.688,4.719-7.893,2.116-11.742c-6.707-9.89-10.249-21.461-10.249-33.451 c0-28.843,20.591-53.53,48.947-58.701c2.432-0.452,4.557-1.929,5.811-4.053c18.987-32.137,40.892-56.713,133.888-56.713 c71.714,0,128.947,23.484,142.413,58.436c0.888,2.304,2.731,4.105,5.052,4.949c23.535,8.559,39.356,31.095,39.356,56.081 c0,11.989-3.541,23.561-10.249,33.451c-2.603,3.849-1.664,9.054,2.116,11.742c15.778,11.221,25.199,29.423,25.199,48.674 c0,15.974-6.229,30.984-17.536,42.283c-2.236,2.227-3.055,5.504-2.133,8.525c1.724,5.666,2.603,11.537,2.603,17.459 c0,32.939-26.795,59.733-59.733,59.733c-5.018,0-10.001-0.623-14.814-1.852c-4.574-1.186-9.207,1.579-10.377,6.144 c-1.169,4.574,1.587,9.216,6.153,10.385c6.195,1.587,12.595,2.389,19.038,2.389c42.342,0,76.8-34.458,76.8-76.8 c0-5.931-0.683-11.819-2.031-17.579c12.348-14.029,19.098-31.838,19.098-50.688c0-22.11-9.643-43.128-26.138-57.643 c5.956-11.102,9.071-23.475,9.071-36.224c0-30.865-18.748-58.82-47.044-70.733C395.475,25.704,334.598,0.001,256.919,0.001 c-90.172,0-121.984,21.7-146.62,61.85c-34.475,8.115-59.093,38.921-59.093,74.684c0,12.749,3.115,25.122,9.071,36.224 C43.782,187.274,34.139,208.291,34.139,230.401z"/>
                <path fill="${n}" d="M316.507,424.876c-1.621,1.621-2.475,3.84-2.475,6.059c0,2.304,0.853,4.437,2.475,6.059 c1.621,1.536,3.755,2.475,5.973,2.475c2.304,0,4.437-0.939,6.059-2.475c1.621-1.621,2.475-3.755,2.475-6.059 c0-2.219-0.853-4.437-2.475-6.059C325.382,421.719,319.664,421.719,316.507,424.876z"/>
                <path fill="${n}" d="M223.664,458.668c-1.536,1.621-2.475,3.755-2.475,6.059c0,2.219,0.939,4.437,2.475,6.059 c1.621,1.536,3.84,2.475,6.059,2.475c2.304,0,4.437-0.939,6.059-2.475c1.621-1.621,2.475-3.84,2.475-6.059 c0-2.219-0.853-4.437-2.475-6.059C232.624,455.511,226.907,455.511,223.664,458.668z"/>
                <path fill="${n}" d="M337.67,411.905c1.621-1.621,2.475-3.755,2.475-6.059c0-2.219-0.853-4.437-2.475-6.059 c-3.157-3.157-8.875-3.072-12.032,0.085c-1.621,1.536-2.56,3.755-2.56,5.973c0,2.304,0.939,4.437,2.56,6.059 c1.536,1.621,3.755,2.475,5.973,2.475C333.915,414.38,336.048,413.527,337.67,411.905z"/>
                <path fill="${n}" d="M213.339,238.935c4.71,0,8.533-3.823,8.533-8.533v-5.615c0.546,0.529,0.922,0.964,0.964,1.024 c1.519,2.918,4.497,4.591,7.578,4.591c1.323,0,2.671-0.307,3.934-0.964c4.181-2.176,5.803-7.33,3.627-11.511 c-2.534-4.873-10.581-13.124-24.636-13.124c-14.054,0-22.101,8.252-24.636,13.124c-2.125,4.087-0.555,8.969,3.456,11.23 c4.011,2.287,9.156,0.811,11.563-3.123c0.077-0.128,0.495-0.623,1.084-1.195v5.564 C204.806,235.112,208.629,238.935,213.339,238.935z"/>
                <path fill="${n}" d="M256.006,332.801c20.028,0,30.507-9.907,31.633-11.034c3.294-3.294,3.285-8.567,0.043-11.913 c-3.234-3.345-8.61-3.439-12.015-0.247c-0.265,0.247-6.699,6.127-19.661,6.127c-12.774,0-19.208-5.709-19.652-6.118 c-3.336-3.251-8.678-3.217-11.981,0.085c-3.337,3.336-3.337,8.73,0,12.066C225.499,322.894,235.978,332.801,256.006,332.801z"/>
                <path fill="${n}" d="M298.672,238.935c4.71,0,8.533-3.823,8.533-8.533v-5.615c0.546,0.529,0.922,0.964,0.964,1.024 c1.519,2.918,4.497,4.591,7.578,4.591c1.323,0,2.671-0.307,3.934-0.964c4.181-2.176,5.803-7.33,3.627-11.511 c-2.534-4.873-10.581-13.124-24.636-13.124s-22.101,8.252-24.636,13.124c-2.125,4.087-0.555,8.969,3.456,11.23 c4.011,2.287,9.165,0.811,11.563-3.123c0.077-0.128,0.495-0.623,1.084-1.195v5.564 C290.139,235.112,293.962,238.935,298.672,238.935z"/>
                <path fill="${n}" d="M511.571,500.771l-8.533-25.6c-8.883-26.658-62.464-65.212-136.098-65.212c-3.482,0-6.613,2.116-7.919,5.333 c-0.316,0.802-33.015,79.642-103.014,79.642c-69.99,0-102.69-79.181-103.014-79.983c-1.306-3.226-4.437-5.35-7.919-5.35 c-106.001,0-130.97,50.185-136.098,65.57l-8.533,25.6c-1.493,4.471,0.93,9.301,5.402,10.795c4.48,1.502,9.301-0.93,10.795-5.402 l8.533-25.6c8.465-25.412,42.974-52.514,114.381-53.845c9.293,19.703,45.577,85.282,116.454,85.282 c70.827,0,107.102-65.229,116.437-84.898c64.051,1.835,108.339,35.294,114.398,53.461l8.533,25.6 c1.195,3.576,4.523,5.837,8.098,5.837c0.887,0,1.801-0.137,2.697-0.435C510.64,510.073,513.064,505.243,511.571,500.771z"/>
                <path fill="${n}" d="M375.472,281.601v17.067c0,4.71,3.823,8.533,8.533,8.533c4.71,0,8.533-3.823,8.533-8.533v-17.067 c0-4.71-3.823-8.533-8.533-8.533C379.295,273.068,375.472,276.891,375.472,281.601z"/>
                <path fill="${n}" d="M188.934,405.847c0-2.219-0.939-4.437-2.56-5.973c-3.157-3.243-8.875-3.243-12.032,0 c-1.621,1.536-2.475,3.755-2.475,5.973c0,2.304,0.853,4.437,2.475,6.059s3.755,2.475,6.059,2.475 c2.219,0,4.437-0.853,5.973-2.475C187.995,410.284,188.934,408.151,188.934,405.847z"/>
                <path fill="${n}" d="M189.531,439.468c2.219,0,4.437-0.939,5.973-2.475c1.621-1.621,2.475-3.755,2.475-6.059c0-2.219-0.853-4.437-2.475-6.059 c-3.157-3.157-8.875-3.157-12.032,0c-1.621,1.621-2.475,3.84-2.475,6.059c0,2.304,0.853,4.437,2.475,6.059 C185.008,438.529,187.227,439.468,189.531,439.468z"/>
                <path fill="${n}" d="M200.624,445.356c-1.621,1.621-2.56,3.755-2.56,6.059c0,2.219,0.939,4.437,2.56,5.973c1.621,1.621,3.755,2.56,6.059,2.56 c2.219,0,4.437-0.939,5.973-2.56c1.621-1.536,2.475-3.755,2.475-5.973c0-2.304-0.853-4.523-2.475-6.059 C209.499,442.199,203.782,442.199,200.624,445.356z"/>
                <path fill="${n}" d="M119.472,281.601v17.067c0,4.71,3.823,8.533,8.533,8.533s8.533-3.823,8.533-8.533v-17.067 c0-4.71-3.823-8.533-8.533-8.533S119.472,276.891,119.472,281.601z"/>
            </svg>`},o.icon.teddy=function(e,t,n,r,i){return o.isNEU(r)&&(r=0),o.isNEU(i)&&(i=0),`<svg width="${e}" height="${t}" x="${r}" y="${i}" viewBox="0 0 512 512">
                <path fill="${n}" d="M234.513,246.613c9.378-1.929,16.555-9.02,21.487-15.863c4.932,6.844,12.109,13.935,21.487,15.863 c1.459,0.299,3.089,0.486,4.873,0.486c6.118,0,13.978-2.304,22.34-10.667c3.337-3.337,3.337-8.73,0-12.066s-8.73-3.337-12.066,0 c-4.361,4.369-8.337,6.212-11.699,5.53c-6.912-1.408-13.611-12.203-16.401-18.364c9.523-3.866,17.067-13.577,17.067-23.799 c0-9.353-9.566-14.933-25.6-14.933c-16.026,0-25.6,5.581-25.6,14.933c0,10.223,7.535,19.934,17.067,23.799 c-2.807,6.178-9.498,16.956-16.401,18.364c-3.405,0.666-7.339-1.178-11.699-5.53c-3.336-3.337-8.73-3.337-12.066,0 s-3.337,8.73,0,12.066C218.104,247.236,228.062,247.91,234.513,246.613z M263.748,190.669c-1.502,2.944-4.873,5.598-7.748,5.598	s-6.246-2.654-7.748-5.598C251.793,189.833,260.207,189.833,263.748,190.669z"/>
                <path fill="${n}" d="M390.033,53.7c1.621,1.613,2.5,3.755,2.5,6.033s-0.879,4.42-2.5,6.025c-3.337,3.337-3.337,8.738,0,12.075 c1.664,1.664,3.849,2.5,6.033,2.5s4.369-0.836,6.033-2.492c4.838-4.838,7.501-11.273,7.501-18.108s-2.662-13.269-7.501-18.099 c-9.984-9.984-26.214-9.984-36.198,0c-3.337,3.328-3.337,8.73,0,12.066s8.73,3.337,12.066,0 C381.303,50.372,386.697,50.372,390.033,53.7z"/>
                <path fill="${n}" d="M311.467,136.533c7.057,0,12.8-5.743,12.8-12.8c0-7.057-5.743-12.8-12.8-12.8s-12.8,5.743-12.8,12.8 C298.667,130.79,304.41,136.533,311.467,136.533z"/>
                <path fill="${n}" d="M200.533,136.533c7.057,0,12.8-5.743,12.8-12.8c0-7.057-5.743-12.8-12.8-12.8s-12.8,5.743-12.8,12.8 C187.733,130.79,193.476,136.533,200.533,136.533z"/>
                <path fill="${n}" d="M115.934,80.333c2.185,0,4.369-0.836,6.042-2.5c3.328-3.337,3.328-8.738-0.009-12.075c-1.613-1.604-2.5-3.746-2.5-6.025 s0.887-4.42,2.509-6.033c3.209-3.226,8.841-3.226,12.058,0c3.328,3.337,8.738,3.328,12.066,0 c3.337-3.328,3.337-8.738,0.009-12.066c-9.677-9.677-26.539-9.668-36.207-0.009c-4.838,4.838-7.501,11.273-7.501,18.108 s2.662,13.269,7.501,18.108C111.565,79.497,113.749,80.333,115.934,80.333z"/>
                <path fill="${n}" d="M498.552,286.191c-28.262-23.945-91.742-14.2-98.884-13.005c-4.651,0.768-7.791,5.171-7.014,9.813 c0.777,4.651,5.171,7.799,9.813,7.014c17.246-2.867,66.133-6.827,85.052,9.199c5.06,4.284,7.415,9.54,7.415,16.521 c0,3.977-1.476,6.946-4.779,9.626c-24.098,19.567-114.33,5.982-147.063-0.913c-3.703-0.776-7.441,0.981-9.242,4.275 c-1.801,3.311-1.212,7.424,1.434,10.095c0.12,0.119,8.499,8.755,12.493,19.951c-2.125-0.222-4.267-0.367-6.443-0.367 c-37.641,0-68.267,34.458-68.267,76.8c0,7.629,1.024,14.993,2.884,21.956c-3.823,1.715-10.197,3.644-19.951,3.644 c-10.052,0-16.367-2.082-19.908-3.814c1.826-6.912,2.842-14.217,2.842-21.786c0-42.342-30.626-76.8-68.267-76.8 c-2.176,0-4.318,0.145-6.443,0.367c3.994-11.196,12.373-19.831,12.476-19.934c2.671-2.671,3.268-6.775,1.468-10.095 c-1.792-3.319-5.521-5.069-9.259-4.292c-32.725,6.895-122.974,20.48-147.063,0.913c-3.302-2.68-4.779-5.649-4.779-9.626 c0-6.98,2.355-12.228,7.407-16.512c18.867-15.991,67.806-12.066,85.06-9.208c4.651,0.794,9.045-2.364,9.813-7.014 c0.776-4.651-2.364-9.045-7.006-9.813c-7.151-1.195-70.613-10.957-98.884,13.005C4.651,293.649,0,303.863,0,315.733 c0,9.079,3.831,16.998,11.093,22.886c27.179,22.05,102.818,12.783,140.535,6.426c-2.825,5.47-5.188,11.896-6.11,18.825 c-25.216,11.29-43.119,38.98-43.119,71.33c0,42.342,30.626,76.8,68.267,76.8c25.446,0,47.642-15.778,59.383-39.057 c5.743,2.56,14.174,4.924,25.95,4.924c11.674,0,20.164-2.287,26.035-4.77C293.794,496.29,315.938,512,341.333,512 c37.641,0,68.267-34.458,68.267-76.8c0-32.35-17.903-60.041-43.119-71.33c-0.922-6.929-3.277-13.355-6.101-18.825 c37.717,6.357,113.365,15.633,140.527-6.426c7.262-5.888,11.093-13.807,11.093-22.886 C512,303.863,507.349,293.649,498.552,286.191z M170.667,494.933c-28.237,0-51.2-26.795-51.2-59.733s22.963-59.733,51.2-59.733 s51.2,26.795,51.2,59.733S198.904,494.933,170.667,494.933z M392.533,435.2c0,32.939-22.963,59.733-51.2,59.733 c-20.983,0-39.04-14.814-46.942-35.942c-0.145-0.614-0.324-1.186-0.606-1.766c-2.338-6.818-3.652-14.242-3.652-22.025 c0-32.939,22.963-59.733,51.2-59.733C369.57,375.467,392.533,402.261,392.533,435.2z"/>
                <path fill="${n}" d="M307.2,443.733c0,18.825,15.309,34.133,34.133,34.133c18.825,0,34.133-15.309,34.133-34.133 c0-18.825-15.309-34.133-34.133-34.133C322.509,409.6,307.2,424.909,307.2,443.733z M358.4,443.733 c0,9.412-7.654,17.067-17.067,17.067c-9.404,0-17.067-7.654-17.067-17.067c0-9.412,7.663-17.067,17.067-17.067 C350.746,426.667,358.4,434.321,358.4,443.733z"/>
                <path fill="${n}" d="M115.541,118.161c-8.619,21.709-13.141,45.525-13.141,69.572c0,67.849,52.762,136.533,153.6,136.533 s153.6-68.685,153.6-136.533c0-24.491-4.412-47.846-13.107-69.581c26.957-5.76,47.24-29.764,47.24-58.419 C443.733,26.795,416.93,0,384,0c-24.67,0-46.14,14.916-55.108,36.745C307.115,23.859,282.368,17.067,256,17.067 c-26.615,0-51.2,6.716-73.259,19.925C174.08,14.754,153.088,0,128,0C95.061,0,68.267,26.795,68.267,59.733 C68.267,88.397,88.559,112.41,115.541,118.161z M128,17.067c19.226,0,35.021,12.177,40.115,30.054 c-11.085,8.61-21.163,18.816-29.901,30.592c-2.807,3.789-2.014,9.131,1.775,11.938c3.789,2.816,9.139,2.022,11.938-1.766 c8.9-12.006,19.26-22.281,30.788-30.507C204.288,41.95,228.949,34.133,256,34.133c41.429,0,78.396,19.098,104.098,53.786 c1.681,2.253,4.25,3.447,6.869,3.447c1.766,0,3.55-0.546,5.077-1.681c3.78-2.799,4.574-8.149,1.775-11.938 c-8.969-12.092-19.157-22.485-30.345-31.104c5.427-17.374,21.632-29.577,40.525-29.577c23.526,0,42.667,19.14,42.667,42.667 S407.526,102.4,384,102.4c-2.935,0-5.658,1.502-7.228,3.985c-1.553,2.483-1.732,5.589-0.461,8.243 c10.761,22.443,16.222,47.044,16.222,73.105C392.533,247.1,345.634,307.2,256,307.2s-136.533-60.1-136.533-119.467 c0-25.617,5.615-50.901,16.23-73.122c1.263-2.637,1.084-5.751-0.478-8.226c-1.562-2.483-4.292-3.985-7.219-3.985 c-23.526,0-42.667-19.14-42.667-42.667S104.474,17.067,128,17.067z"/>
                <path fill="${n}" d="M256,290.133c47.053,0,85.333-30.626,85.333-68.267c0-36.258-36.489-76.8-85.333-76.8s-85.333,40.542-85.333,76.8 C170.667,259.507,208.947,290.133,256,290.133z M256,162.133c38.451,0,68.267,32.111,68.267,59.733 c0,28.237-30.626,51.2-68.267,51.2c-37.641,0-68.267-22.963-68.267-51.2C187.733,194.244,217.557,162.133,256,162.133z"/>
                <path fill="${n}" d="M170.667,409.6c-18.825,0-34.133,15.309-34.133,34.133c0,18.825,15.309,34.133,34.133,34.133 s34.133-15.309,34.133-34.133C204.8,424.909,189.491,409.6,170.667,409.6z M170.667,460.8c-9.412,0-17.067-7.654-17.067-17.067 c0-9.412,7.654-17.067,17.067-17.067c9.412,0,17.067,7.654,17.067,17.067C187.733,453.146,180.079,460.8,170.667,460.8z"/>
            </svg>`},o.prototype.exportPDFProfile=function(e,t){e=this._defaultExportProfileOptions(e,"pdf"),this._exportProfile(e,t)},o.prototype.exportPDFPreview=function(e){o.pdfPrevUI.show(this,e)},o.prototype.exportPNGProfile=function(e,t){e=this._defaultExportProfileOptions(e,"png"),this._exportProfile(e,t)},o.prototype.shareProfile=function(e){var t;typeof e=="object"?e=(t=e).focusId:t=this.editUI.content(e,!0,!0,"100%",!0);var n=new URL(window.location.href);n.searchParams.append("nodeId",e);var r={title:t.title,text:t.shareText,url:n.href};try{navigator.share(r)}catch(i){console.error("error: "+i)}},o.prototype.exportPDF=function(e,t){e=this._defaultExportOptions(e,"pdf"),this._export(e,t)},o.prototype.exportPNG=function(e,t){e=this._defaultExportOptions(e,"png"),this._export(e,t)},o.prototype.exportSVG=function(e,t){e=this._defaultExportOptions(e,"svg"),this._export(e,t)},o.prototype._defaultExportOptions=function(e,t){return e==null&&(e={}),t=="svg"?(e.ext="svg",e.mime="image/svg+xml"):t=="pdf"?(e.mime="application/pdf",e.ext="pdf"):t=="png"&&(e.mime="image/png",e.ext="png"),e.margin==null&&(e.margin=[50,40,50,40]),e.padding==null&&(e.padding=0),e.landscape==null&&(e.landscape=!1),e.filename==null&&(e.filename="FamilyTree."+e.ext),e.scale==null&&(e.scale="fit"),e.format==null&&(e.format="fit"),e.header==null&&(e.header=""),t=="pdf"&&e.footer==null?e.footer="Page {current-page} of {total-pages}":e.footer==null&&(e.footer=""),e.openInNewTab==null&&(e.openInNewTab=!1),e.mode==null&&(e.mode="bft-"+this.config.mode),e},o.prototype._export=function(e,t){var n=this,r={id:e.nodeId,expandChildren:e.expandChildren,min:e.min};e.margin&&e.margin[0]<2&&(e.margin[0]=2),e.margin&&e.margin[1]<2&&(e.margin[1]=2),e.margin&&e.margin[2]<2&&(e.margin[2]=2),e.margin&&e.margin[3]<2&&(e.margin[3]=2),this._draw(!1,o.action.exporting,r,function(i,s){var a=document.createElement("div");if(a.innerHTML=i,e.padding>0){var c=a.querySelector("svg"),l=o._getViewBox(c);l[0]-=e.padding,l[1]-=e.padding,l[2]+=2*e.padding,l[3]+=2*e.padding,c.setAttribute("viewBox",l.join()),c.setAttribute("width",l[2]),c.setAttribute("height",l[3])}if(e.ext=="svg")if(t)t(e,a.innerHTML);else{(c=a.querySelector("svg")).classList.add("bft-"+n.config.mode);var d={content:a.innerHTML,options:e,styles:""},u=o.events.publish("exportstart",[n,d]),f=n.element.querySelector("[data-bft-styles]");if(f&&(d.styles+=f.outerHTML),d.styles&&(a.childNodes[0].insertAdjacentHTML("afterbegin",d.styles),d.content=a.innerHTML),u===!1||(u=o.events.publish("exportend",[n,d]))===!1)return!1;o._downloadFile(e.mime,d.content,d.options.filename,d.options.openInNewTab,d.options.ext)}else n._pages(e,a.querySelector("svg"),s,function(p){var h={content:a.innerHTML,options:e,pages:p,styles:""},m=o.events.publish("exportstart",[n,h]),b=n.element.querySelector("[data-bft-styles]");if(b&&(h.styles+=b.outerHTML),m===!1)return!1;t||o.loading.show(n),t?t(n,h,a.querySelector("svg")):(h=JSON.stringify(h),o._ajax(n.config.exportUrl+"/v3","POST",h,"arraybuffer",function(_){var g=o.events.publish("exportend",[n,_]);if(o.loading.hide(n),g===!1)return!1;o._downloadFile(e.mime,_,e.filename,e.openInNewTab,e.ext)}))})})},o.prototype.exportCSV=function(e){var t=o._defaultExportProfileOptionsForCSV_SVG_JSON(e,"csv"),n=this.getNode(t.nodeId),r=null;n?(r=[],o._exportIterateForJSON_XML_CSV(this,n,t,r)):t.min===!1||t.expandChildren===!1?o._exportIterateForJSON_XML_CSV(this,this.roots,t,r):r=JSON.parse(JSON.stringify(this.config.nodes));var i={ext:"csv",filename:e,options:t,nodes:r};if(o.events.publish("exportstart",[this,i])===!1)return!1;var s=o._json2csv(i.nodes),a={ext:i.ext,filename:i.filename,options:t,nodes:i.nodes,content:s};if(o.events.publish("exportend",[this,a])===!1)return!1;o._downloadFile("text/csv;charset=utf-8;","\uFEFF"+a.content,a.options.filename,a.options.openInNewTab,a.ext)},o.prototype.exportXML=function(e){var t=o._defaultExportProfileOptionsForCSV_SVG_JSON(e,"xml"),n=this.getNode(t.nodeId),r=null;n?(r=[],o._exportIterateForJSON_XML_CSV(this,n,t,r)):t.min===!1||t.expandChildren===!1?o._exportIterateForJSON_XML_CSV(this,this.roots,t,r):r=JSON.parse(JSON.stringify(this.config.nodes));var i={ext:"xml",filename:e,options:t,nodes:r};if(o.events.publish("exportstart",[this,i])===!1)return!1;var s=o._json2xml(i.nodes),a={ext:i.ext,filename:i.filename,options:t,nodes:i.nodes,content:s};if(o.events.publish("exportend",[this,a])===!1)return!1;o._downloadFile("application/xml",a.content,a.options.filename,a.options.openInNewTab,a.ext)},o.prototype.exportJSON=function(e){var t=o._defaultExportProfileOptionsForCSV_SVG_JSON(e,"json"),n=this.getNode(t.nodeId),r=null;n?(r=[],o._exportIterateForJSON_XML_CSV(this,n,t,r)):t.min===!1||t.expandChildren===!1?o._exportIterateForJSON_XML_CSV(this,this.roots,t,r):r=JSON.parse(JSON.stringify(this.config.nodes));var i={ext:"json",filename:t.filename,options:t,nodes:r};if(o.events.publish("exportstart",[this,i])===!1)return!1;var s={ext:i.ext,filename:i.filename,options:t,nodes:i.nodes,content:JSON.stringify(i.nodes)};if(o.events.publish("exportend",[this,s])===!1)return!1;o._downloadFile("application/json",s.content,s.options.filename,s.options.openInNewTab,s.ext)},o._exportIterateForJSON_XML_CSV=function(e,t,n,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)o._exportIterateForJSON_XML_CSV(e,t[i],n,r);else{var s=e.get(t.id);if(r.push(s),n.min)for(i=0;i<t.stChildrenIds.length;i++)o._exportIterateForJSON_XML_CSV(e,e.getNode(t.stChildrenIds[i]),n,r);else for(i=0;i<t.stChildren.length;i++)o._exportIterateForJSON_XML_CSV(e,t.stChildren[i],n,r);if(n.expandChildren)for(i=0;i<t.childrenIds.length;i++)o._exportIterateForJSON_XML_CSV(e,e.getNode(t.childrenIds[i]),n,r);else for(i=0;i<t.children.length;i++)o._exportIterateForJSON_XML_CSV(e,t.children[i],n,r)}},o.prototype._pages=function(e,t,n,r){e.format=="A5"&&e.scale!="fit"||e.format=="A4"&&e.scale!="fit"||e.format=="A3"&&e.scale!="fit"||e.format=="A2"&&e.scale!="fit"||e.format=="A1"&&e.scale!="fit"||e.format=="Letter"&&e.scale!="fit"||e.format=="Legal"&&e.scale!="fit"?r(this._pagesA100(e,t,e.scale)):e.format=="A5"&&e.scale=="fit"||e.format=="A4"&&e.scale=="fit"||e.format=="A3"&&e.scale=="fit"||e.format=="A2"&&e.scale=="fit"||e.format=="A1"&&e.scale=="fit"||e.format=="Letter"&&e.scale=="fit"||e.format=="Legal"&&e.scale=="fit"?r(this._pagesAfit(e,t,n)):e.format=="fit"&&r(this._pagesFit(e,t))},o.prototype._pagesFit=function(e,t){var n=t.getAttribute("width"),r=t.getAttribute("height"),i=o._getViewBox(t),s={w:parseFloat(n),h:parseFloat(r)};return[{vb:i,size:{w:s.w+(e.margin[1]+e.margin[3]),h:s.h+(e.margin[0]+e.margin[2])},innerSize:s}]},o.prototype._pagesAfit=function(e,t,n){var r=t.getAttribute("width"),i=0,s=0;switch(e.format){case"A5":i=o.A5w,s=o.A5h;break;case"A4":i=o.A4w,s=o.A4h;break;case"A3":i=o.A3w,s=o.A3h;break;case"A2":i=o.A2w,s=o.A2h;break;case"A1":i=o.A1w,s=o.A1h;break;case"Letter":i=o.Letterw,s=o.Letterh;break;case"Legal":i=o.Legalw,s=o.Legalh}var a=e.landscape?s-(e.margin[1]+e.margin[3]):i-(e.margin[1]+e.margin[3]),c=(e.landscape,e.margin[0],e.margin[2],a/r);return this._pagesA100(e,t,100*c,n)},o.prototype._pagesA100=function(e,t,n,r){var i=o._getViewBox(t),s=0,a=0;switch(e.format){case"A5":s=o.A5w,a=o.A5h;break;case"A4":s=o.A4w,a=o.A4h;break;case"A3":s=o.A3w,a=o.A3h;break;case"A2":s=o.A2w,a=o.A2h;break;case"A1":s=o.A1w,a=o.A1h;break;case"Letter":s=o.Letterw,a=o.Letterh;break;case"Legal":s=o.Legalw,a=o.Legalh}var c=i[0],l=i[1],d=i[2],u=i[3],f={w:e.landscape?a-(e.margin[1]+e.margin[3]):s-(e.margin[1]+e.margin[3]),h:e.landscape?s-(e.margin[0]+e.margin[2]):a-(e.margin[0]+e.margin[2])},p={w:e.landscape?a:s,h:e.landscape?s:a};t.setAttribute("width",f.w),t.setAttribute("height",f.h);var h=f.w*(100/n),m=f.h*(100/n),b=c,_=l,g=[],w=!0;if(!o.EXPORT_PAGES_CUT_NODES&&e.scale=="fit"){t.setAttribute("preserveAspectRatio","xMinYMin");for(var y=Object.keys(r.bordersByRootIdAndLevel),v=r.bordersByRootIdAndLevel[y[0]],x=Object.keys(v).length,C=1;C<y.length;C++)x<Object.keys(r.bordersByRootIdAndLevel[y[C]]).length&&(v=r.bordersByRootIdAndLevel[y[C]],x=Object.keys(v).length);for(var I=0,E=0;;){for(E=I;!(x<=I);){if((v[I].maxY-v[I].minY)/(100/n)>f.h){w=!1;break}var D=(v[I].minY-v[E].minY)/(100/n);if(I==x-1&&(D=(v[I].maxY-v[E].minY)/(100/n)),D>f.h)break;I++}if(!w)break;var R=(I==x?v[I-1].maxY:v[I-1].minY)-v[E].minY;if(R==0){w=!1;break}if(M=(M=[b,v[E].minY,h,R]).join(),g.push({vb:M,innerSize:{w:f.x,h:R/(100/n)-1},size:p}),I==x)break;I--}g.length&&(g[g.length-1].innerSize.h+=1)}if(!w||o.EXPORT_PAGES_CUT_NODES||e.scale!="fit")for(t.setAttribute("preserveAspectRatio","xMinYMin slice"),g=[];b<d+c;){for(;_<u+l;){var M;M=(M=[b,_,h,m]).join(),g.push({vb:M,innerSize:f,size:p}),_+=m}b+=h,_=l}return g},o.prototype._defaultExportProfileOptions=function(e,t){return o.isNEU(e)||e.id==null||e.nodeId!=null||(e.nodeId=e.id),(o.isNEU(e)||o.isNEU(e.nodeId))&&console.error("options.nodeId is not defilned"),t=="svg"?(e.ext="svg",e.mime="image/svg+xml"):t=="pdf"?(e.mime="application/pdf",e.ext="pdf"):t=="png"&&(e.mime="image/png",e.ext="png"),e.margin==null&&(e.margin=[50,40,50,40]),e.padding==null&&(e.padding=0),e.landscape==null&&(e.landscape=!1),e.filename==null&&(e.filename="Profile."+e.ext),e.scale==null&&(e.scale="fit"),e.format==null&&(e.format="A4"),e.header==null&&(e.header=""),e.footer==null&&(e.footer=""),e.openInNewTab==null&&(e.openInNewTab=!1),e.mode==null&&(e.mode="bft-"+this.config.mode),e},o._defaultExportProfileOptionsForCSV_SVG_JSON=function(e,t){return o.isNEU(e)&&(e={}),typeof e=="string"&&(e={filename:e}),o.isNEU(e.filename)&&(e.filename=`FamilyTree.${t}`),o.isNEU(e.expandChildren)&&(e.expandChildren=!0),o.isNEU(e.min)&&(e.min=!0),o.isNEU(e.openInNewTab)&&(e.openInNewTab=!1),e},o.prototype._exportProfile=function(e,t){var n=this,r=0,i=0;switch(e.format){case"A5":r=o.A5w,i=o.A5h;break;case"A4":r=o.A4w,i=o.A4h;break;case"A3":r=o.A3w,i=o.A3h;break;case"A2":r=o.A2w,i=o.A2h;break;case"A1":r=o.A1w,i=o.A1h;break;case"Letter":r=o.Letterw,i=o.Letterh;break;case"Legal":r=o.Legalw,i=o.Legalh}var s={w:e.landscape?i-(e.margin[1]+e.margin[3]):r-(e.margin[1]+e.margin[3]),h:e.landscape?r-(e.margin[0]+e.margin[2]):i-(e.margin[0]+e.margin[2])},a={w:e.landscape?i:r,h:e.landscape?r:i},c=this.editUI.content(e.nodeId,!0,!0,"100%",!0).element;o.input.init(c);var l={content:c.outerHTML,options:e,pages:[{vb:"",innerSize:s,size:a}],styles:""};if(!t){if(o.events.publish("exportstart",[n,l])===!1)return!1;o.loading.show(n)}var d=this.element.querySelector("[data-bft-styles]");d&&(l.styles+=d.outerHTML);var u=this.getSvg().querySelector("defs");if(u)for(var f=0;f<u.children.length;f++)u.children[f].nodeName.toLowerCase()=="style"&&(l.styles+=u.children[f].outerHTML);l=JSON.stringify(l),o._ajax(this.config.exportUrl+"/v3","POST",l,"arraybuffer",function(p){if(t)t(n,p);else{var h=o.events.publish("exportend",[n,p]);if(o.loading.hide(n),h===!1)return!1;o._downloadFile(e.mime,p,e.filename,e.openInNewTab,e.ext)}})},o===void 0&&(o={}),o.events=function(){var e={};return{on:function(t,n,r){Array.isArray(e[t])||(e[t]=[]),e[t].push({listener:n,event_id:r})},removeAll:function(t){Array.isArray(e[t])||(e[t]=[]),e[t]=[]},remove:function(t,n,r){var i=!1;if(e[t]&&Array.isArray(e[t])&&e[t].length>0)for(var s=e[t].length-1;s>=0;s--)(!o.isNEU(r)&&!o.isNEU(n)&&e[t][s].event_id==r&&e[t][s].listener==n||!o.isNEU(r)&&o.isNEU(n)&&e[t][s].event_id==r||o.isNEU(r)&&!o.isNEU(n)&&e[t][s].listener==n||o.isNEU(r)&&o.isNEU(n))&&(e[t].splice(s,1),i=!0);return i},has:function(t,n){if(e[t]&&Array.isArray(e[t])&&e[t].length>0){if(o.isNEU(n))return!0;for(var r=0;r<e[t].length;r++)if(e[t][r].event_id==n)return!0}return!1},removeForEventId:function(t){for(var n in e)if(Array.isArray(e[n]))for(var r=e[n].length-1;r>=0;r--)e[n][r].event_id==t&&e[n].splice(r,1)},publish:function(t,n){if(e[t]){for(var r=[],i=0;i<e[t].length;i++){var s=e[t][i];s.event_id!=null&&s.event_id!=n[0]._event_id||r.push(s.listener)}if(r.length>0){var a=!0;for(i=0;i<r.length&&(n.length==1?a=r[i](n[0])&&a:n.length==2?a=r[i](n[0],n[1])&&a:n.length==3?a=r[i](n[0],n[1],n[2])&&a:n.length==4?a=r[i](n[0],n[1],n[2],n[3])&&a:n.length==5&&(a=r[i](n[0],n[1],n[2],n[3],n[4])&&a),a!==!1);i++);return a}}}}}(),o.prototype.importCSV=function(){var e=this,t=document.createElement("INPUT");t.setAttribute("type","file"),t.setAttribute("accept",".csv"),t.style.display="none",t.onchange=function(n){var r=n.target,i=new FileReader;i.onload=function(){var s=i.result,a=o._csvToArray(s),c=[],l=a[0];o._importSetColumnNames(l,function(d){for(var u=1;u<a.length;u++){for(var f={},p=0;p<a[u].length;p++){var h=d[p],m=a[u][p];f[h]=o._convertStringToArray(h,m)}f.id.trim()!=""&&c.push(f)}var b={nodes:c,columnNames:a[0]};o.events.publish("import",[e,b])!=0&&(e._putInUndoStack(),e.clearRedo(),e.config.nodes=b.nodes,o.events.publish("updated",[e]),e.filterUI.update(),e.draw())})},i.readAsText(r.files[0])},t.click()},o._importSetColumnNames=function(e,t){if(e.indexOf("id")==-1||e.indexOf("pid")==-1){var n=document.createElement("DIV"),r=document.createElement("P");r.style.padding="5px",r.style.color="rgb(122, 122, 122)",r.innerHTML=o.IMPORT_MESSAGE,n.appendChild(r);var i=document.createElement("div"),s=document.createElement("div"),a=document.createElement("div"),c=document.createElement("span");i.setAttribute("id","bft-sampleDialog"),i.style.height="260px",i.style.width="400px",i.style.background="white",i.style.border="0.5px solid grey",i.style.position="fixed",i.style.overflow="hidden",i.style.zIndex="99",s.setAttribute("id","title"),s.style.backgroundColor="#e5e5e5",s.style.fontWeight="bold",s.style.color="rgb(122, 122, 122)",s.style.height="20px",s.style.padding="3px 0 0 7px",c.setAttribute("id","close"),c.style.cursor="pointer",c.style.position="absolute",c.style.color="rgb(122, 122, 122)",c.style.fontWeight="bold",c.style.top="2px",c.style.zIndex=100,a.setAttribute("id","content"),a.style.padding="2px",s.innerHTML="Import Organizational Chart Data",c.innerHTML="&times;";var l=document.createElement("HR");l.style.height="0.1px",l.style.backgroundColor="#aeaeae",l.style.border="none",l.style.margin="0",i.appendChild(s),i.appendChild(l),a.appendChild(n),i.appendChild(a),i.appendChild(c),document.body.appendChild(i),o._importCenter(i),c.style.left=i.offsetWidth-20+"px";var d=document.createElement("div");d.setAttribute("id","overlay"),d.style.width="100%",d.style.height="100%",d.style.left=0,d.style.top=0,d.style.position="fixed",d.style.background="grey",d.style.opacity="0.5",d.style.zIndex=98,document.body.appendChild(d),i._overlay=d;var u=document.createElement("LABEL"),f=document.createTextNode("Name:");u.setAttribute("for","bft-id-select"),u.appendChild(f),u.style.fontSize="16px",u.style.color="rgb(122, 122, 122)",u.style.padding="5px",u.style.margin="5px",u.style.width="30%",u.style.textAlign="right",u.style.display="inline-block",n.appendChild(u);var p=document.createElement("SELECT");p.id="bft-id-select",p.style.fontSize="16px",p.style.color="rgb(122, 122, 122)",p.style.padding="5px",p.style.margin="5px",p.style.width="60%",p.style.border="1px solid #aeaeae",n.appendChild(p);var h=document.createElement("BR");n.appendChild(h);for(var m=0;m<e.length;m++){(y=document.createElement("option")).setAttribute("value",e[m]);var b=document.createTextNode(e[m]);y.appendChild(b),p.appendChild(y)}var _=document.createElement("LABEL"),g=document.createTextNode("Reports to:");_.setAttribute("for","pid-select"),_.appendChild(g),_.style.fontSize="16px",_.style.color="rgb(122, 122, 122)",_.style.padding="5px",_.style.margin="5px",_.style.width="30%",_.style.textAlign="right",_.style.display="inline-block",n.appendChild(_);var w=document.createElement("SELECT");for(w.id="pid-select",w.style.fontSize="16px",w.style.color="rgb(122, 122, 122)",w.style.padding="5px",w.style.margin="5px",w.style.width="60%",w.style.border="1px solid #aeaeae",n.appendChild(w),m=0;m<e.length;m++){var y;(y=document.createElement("option")).setAttribute("value",e[m]),b=document.createTextNode(e[m]),y.appendChild(b),w.appendChild(y)}var v=document.createElement("BUTTON");v.innerHTML="Import",v.style.fontSize="16px",v.style.color="rgb(122, 122, 122)",v.style.padding="5px 20px",v.style.margin="20px auto",v.style.display="block",v.onclick=function(){i.style.display="none",i._overlay&&i._overlay.parentNode.removeChild(i._overlay);var C=p.options[p.selectedIndex].value,I=e.indexOf(C);e[I]="id";var E=w.options[w.selectedIndex].value,D=e.indexOf(E);e[D]="pid",t(e)};var x=document.createElement("DIV");return x.appendChild(v),n.appendChild(x),c.onclick=function(C){i._overlay&&i._overlay.parentNode.removeChild(i._overlay),i.parentNode.removeChild(i),C.stopPropagation()},s.onmousedown=function(C){C=C||window.event,i._dragging=!0,i._originalLeft=i.offsetLeft,i._originalTop=i.offsetTop,i._mouseLeft=C.clientX,i._mouseTop=C.clientY},document.onmousemove=function(C){C=C||window.event,i._dragging&&(i.style.left=i._originalLeft+C.clientX-i._mouseLeft+"px",i.style.top=i._originalTop+C.clientY-i._mouseTop+"px")},document.onmouseup=function(C){C=C||window.event,i._dragging&&(i.style.left=i._originalLeft+C.clientX-i._mouseLeft+"px",i.style.top=i._originalTop+C.clientY-i._mouseTop+"px",i._dragging=!1)},i}t(e)},o._importCenter=function(e){e&&(e.style.left=(window.innerWidth-e.offsetWidth)/2+"px",e.style.top=(window.innerHeight-e.offsetHeight)/2+"px")},o.prototype.importXML=function(){var e=this,t=document.createElement("INPUT");t.setAttribute("type","file"),t.setAttribute("accept",".xml"),t.style.display="none",t.onchange=function(n){var r=n.target,i=new FileReader;i.onload=function(){var s=i.result,a=o._xml2json(s);o.events.publish("import",[e,a])!=0&&(e._putInUndoStack(),e.clearRedo(),e.config.nodes=a,o.events.publish("updated",[e]),e.filterUI.update(),e.draw())},i.readAsText(r.files[0])},t.click()},o.prototype.importJSON=function(){var e=this,t=document.createElement("INPUT");t.setAttribute("type","file"),t.setAttribute("accept",".json"),t.style.display="none",t.onchange=function(n){var r=n.target,i=new FileReader;i.onload=function(){var s=i.result,a=JSON.parse(s);o.events.publish("import",[e,a])!=0&&(e._putInUndoStack(),e.clearRedo(),e.config.nodes=a,o.events.publish("updated",[e]),e.filterUI.update(),e.draw())},i.readAsText(r.files[0])},t.click()},o.prototype.__importJSON=o.prototype.importJSON,o.prototype.importJSON=function(){this.config.roots=[],this.__importJSON()},o.prototype.__importCSV=o.prototype.importCSV,o.prototype.importCSV=function(){this.config.roots=[],this.__importCSV()},o.prototype.__importXML=o.prototype.importXML,o.prototype.importXML=function(){this.config.roots=[],this.__importXML()},o._importSetColumnNames=function(e,t){t(e)},o.prototype.expand=function(e,t,n){this._resetMovableNodes();var r={id:e,ids:t};this._draw(!1,o.action.expand,r,n)},o.prototype.collapse=function(e,t,n){this._resetMovableNodes();var r={id:e,ids:t};this._draw(!1,o.action.collapse,r,n)},o.prototype.expandCollapse=function(e,t,n,r){this._resetMovableNodes(),Array.isArray(t)||(t=[]),Array.isArray(n)||(n=[]);var i={id:e,expandIds:t,collapseIds:n,ids:t.concat(n)};this._draw(!1,o.action.collapse,i,r)},o.prototype.changeRoots=function(e,t,n){this.config.roots=t;var r={id:e,changeRoots:t};this._draw(!1,o.action.update,r,n)},o.prototype._resetMovableNodes=function(){if(o.RESET_MOVABLE_ONEXPANDCOLLAPSE&&this.config.movable!=null){for(var e=!1,t=0;t<this.config.nodes.length;t++){var n=this.config.nodes[t];n.movex!=null&&(n.movex=0,e=!0),n.movey!=null&&(n.movey=0,e=!0)}e&&o.events.publish("updated",[this])}},o.prototype.maximize=function(e,t,n,r){var i=this,s={id:e,options:{}};o.isNEU(s.id)&&(s.id=this.roots[0].id,s.all=!0),s.options.horizontal=!1,s.options.vertical=!1,t&&(s.options.horizontal=t),n&&(s.options.vertical=n),this._draw(!1,o.action.maximize,s,function(){i.ripple(e),r&&r()})},o.prototype.minimize=function(e,t){var n=this,r={id:e};o.isNEU(r.id)&&(r.id=this.roots[0].id,r.all=!0),this._draw(!1,o.action.minimize,r,function(){n.ripple(e),t&&t()})},o.prototype._expCollHandler=function(e){this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var t=this.getNode(e),n=this.getCollapsedIds(t);if(n.length){if(o.events.publish("expcollclick",[this,!1,e,n])===!1)return!1;this.expand(e,n,!1)}else{if(o.events.publish("expcollclick",[this,!0,e,t.childrenIds])===!1)return!1;this.collapse(e,t.childrenIds,!1)}},o.prototype._upHandler=function(e){this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var t=this._upHandlerCreateArgs(e);if(o.events.publish("up-click",[this,t])===!1)return!1;this.changeRoots(t.id,t.roots,!1)},o.prototype._upHandlerCreateArgs=function(e){var t,n=this.getNode(e),r=Object.assign([],this.config.roots),i=this.getNode(n.pid);if(i&&(t=i),t){if(Array.isArray(r)){var s=r.indexOf(n.id);s!=-1&&r.splice(s,1)}else r=[];r.push(t.id)}return{id:n.id,roots:r}},o.prototype._upHandlerCreateArgs=function(e){var t=this.getNode(e),n=Object.assign([],this.config.roots),r=this.getRecentRootsByNodeId(e);return Array.isArray(n)||(n=[]),o._changeRootOption(n,r,this.manager.rootList),{id:t.id,roots:n}},String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"g"),t)}),String.prototype.endsWith||(String.prototype.endsWith=function(e){return this.indexOf(e,this.length-e.length)!==-1}),String.prototype.splice||(String.prototype.splice=function(e,t,n){return this.slice(0,e)+n+this.slice(e+Math.abs(t))}),String.prototype.insert||(String.prototype.insert=function(e,t){return e>0?this.substring(0,e)+t+this.substr(e):t+this}),Array.prototype.unique||Object.defineProperty(Array.prototype,"unique",{value:function(){for(var e=this.concat(),t=0;t<e.length;++t)for(var n=t+1;n<e.length;++n)e[t]===e[n]&&e.splice(n--,1);return e},writable:!0,configurable:!0,enumerable:!1}),Array.prototype.has||Object.defineProperty(Array.prototype,"has",{value:function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return!0;return!1},writable:!0,configurable:!0,enumerable:!1}),Array.prototype.compare||Object.defineProperty(Array.prototype,"compare",{value:function(e){if(this.length!=e.length)return!1;for(var t=0;t<this.length;t++)if(!e.has(this[t]))return!1;return!0},writable:!0,configurable:!0,enumerable:!1}),Object.assign||Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(i!=null)for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])}return n},writable:!0,configurable:!0}),o.prototype._globalMouseDownHandler=function(e,t){var n={move:"mousemove",up:"mouseup",leave:"mouseleave"};if(t.type.indexOf("touch")!=-1&&(t.touches.length==1?this._touch={x:t.touches[0].clientX,y:t.touches[0].clientY}:this._touch=null,n={move:"touchmove",up:"touchend",touchstart:"touchstart"}),e==t.target)return t.stopPropagation(),t.preventDefault(),void this._mouseDownHandler(e,t,n);if(this.config.nodeMouseClick==o.action.pan){for(var r=t.target;r!=e&&!r.hasAttribute(o.attr.control_expcoll_id)&&!r.hasAttribute(o.attr.control_up_id);)r=r.parentNode;if(!r.hasAttribute(o.attr.control_expcoll_id)&&!r.hasAttribute(o.attr.control_up_id))return t.stopPropagation(),t.preventDefault(),void this._mouseDownHandler(e,t,n)}for(var i=t.target;i!=e;){if(i.hasAttribute(o.attr.node_id))return void this._nodeMouseDownHandler(i,t,n);if(i.hasAttribute(o.attr.control_node_circle_menu_name))return t.stopPropagation(),t.preventDefault(),void this._nodeCircleNodeMenuItemMouseDownHandler(i,t,n);i=i.parentNode}},o.prototype._globalClickHandler=function(e,t){if(t.type.indexOf("touch")!=-1&&this._touch&&t.changedTouches.length==1){if(t.changedTouches.length){var n={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY},r=o.t(this.config.template,!1,this.getScale()).size,i=this.getScale(),s=Math.abs(n.x-this._touch.x)/i,a=Math.abs(n.y-this._touch.y)/i;if(this._touch=null,s>r[0]/10||a>r[1]/10)return}}else if(t.type.indexOf("touch")!=-1&&this._touch==null)return;for(var c=t.target;c!=e;){if(c.hasAttribute(o.attr.control_expcoll_id)){var l=c.getAttribute(o.attr.control_expcoll_id),d=this.getNode(l);return void this._expCollHandler(d.id)}if(c.hasAttribute(o.attr.node_id))return l=c.getAttribute(o.attr.node_id),d=this.getNode(l),void this._nodeClickHandler(d.id,t);if(c.hasAttribute(o.attr.control_node_menu_id))return t.stopPropagation(),t.preventDefault(),l=c.getAttribute(o.attr.control_node_menu_id),d=this.getNode(l),void this._nodeMenuClickHandler(d.id,c,t);if(c.hasAttribute(o.attr.control_node_circle_menu_id))return t.stopPropagation(),t.preventDefault(),l=c.getAttribute(o.attr.control_node_circle_menu_id),void this._nodeCircleMenuClickHandler(l);if(c.hasAttribute(o.attr.control_node_circle_menu_name))return t.stopPropagation(),t.preventDefault(),void this._nodeCircleMenuItemClickHandler(c,t);if(c.hasAttribute(o.attr.control_add))return void this._lonelyButtonHandler();if(c.hasAttribute(o.attr.control_up_id))return l=c.getAttribute(o.attr.control_up_id),t.stopPropagation(),t.preventDefault(),void this._upHandler(l);if(c.hasAttribute(o.attr.c_link_from))return void o.events.publish("clink-click",[this,{from:c.getAttribute(o.attr.c_link_from),to:c.getAttribute(o.attr.c_link_to),event:t}]);if(c.hasAttribute(o.attr.s_link_from))return void o.events.publish("slink-click",[this,{from:c.getAttribute(o.attr.s_link_from),to:c.getAttribute(o.attr.s_link_to),event:t}]);c=c.parentNode}},o.prototype._globalContextHandler=function(e,t){for(var n=t.target;n!=e;){if(n.hasAttribute(o.attr.node_id)){var r=n.getAttribute(o.attr.node_id),i=this.getNode(r);return void this._nodeContextHandler(i.id,t)}n=n.parentNode}},o.prototype._nodeContextHandler=function(e,t){t.preventDefault(),o.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var n=this.get(e),r=null;if(n!=null&&Array.isArray(n.tags))for(var i=0;i<n.tags.length;i++){var s=n.tags[i];this.config.tags[s]&&this.config.tags[s].nodeContextMenu&&(r=this.config.tags[s].nodeContextMenu)}var a=this.element.getBoundingClientRect(),c=t.clientX-a.left,l=t.clientY-a.top;this.nodeContextMenuUI.show(c,l,e,null,r)},o.prototype._globalDbClickHandler=function(e,t){for(var n=t.target;n!=e;){if(n.hasAttribute(o.attr.node_id)){var r=n.getAttribute(o.attr.node_id),i=this.getNode(r);return void this._nodeDbClickHandler(i.id,t)}n=n.parentNode}},o.prototype._mouseScrollHandler=function(e,t){this.__mouseScrollHandler(this.getSvg(),t)},o.prototype.__mouseScrollHandler=function(e,t){if(t.ctrlKey){if(this.config.mouseScrool==o.action.zoom)return}else if(this.config.mouseScrool==o.action.ctrlZoom||this.config.mouseScrool!=o.action.zoom)return;var n=this,r=!1,i=this.config.zoom.speed,s=this.config.zoom.smooth,a=0,c=this.getScale(),l=o._centerPointInPercent(e,t.pageX,t.pageY),d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(f){setTimeout(f,20)};t.preventDefault();var u=t.delta||t.wheelDelta;u===void 0&&(u=-t.detail),u=Math.max(-1,Math.min(1,u)),a+=-u*i,r||function f(){r=!0;var p=(a-c)/s;p>0?p++:p--,c+=p,n.zoom(1-p/12/50,l),parseInt(c)==parseInt(a)?r=!1:d(f)}()},o.prototype._nodeCircleNodeMenuItemMouseDownHandler=function(e,t,n){var r=e.parentNode.getAttribute(o.attr.control_node_circle_menu_wrraper_id),i=e.getAttribute(o.attr.control_node_circle_menu_name),s=this.nodeCircleMenuUI._menu[i];if(s.draggable){var a=this,c=o._getClientXY(t),l=this.getNode(r);e._dragEventFired=!1;var d=a.getScale(),u=null,f=null;this._gragStartedId=r,document.body.style.mozUserSelect=document.body.style.webkitUserSelect=document.body.style.userSelect="none";var p=this.getSvg(),h={x:c.x,y:c.y},m=e.cloneNode(!0);p.insertBefore(m,p.firstChild);var b=o._getTransform(m),_=b[4],g=b[5],w=function(C){for(;C&&!C.hasAttribute(o.attr.control_node_circle_menu_wrraper_id);)C=C.parentNode;if(C){var I=o._getTransform(C);return{x:I[4],y:I[5]}}console.error("cannot find parent"+o.attr.control_node_circle_menu_wrraper_id)}(e);m.setAttribute("transform","matrix(1,0,0,1,"+(_+w.x)+","+(g+w.y)+")"),m.style.opacity=.7;var y=function(C,I){if(C!=null){I.classList.remove("bft-drag-over");for(var E=o.getStParentNodes(a.getNode(u)),D=0;D<E.length;D++){var R=a.getNodeElement(E[D].id);R&&(R.style.opacity=1)}}},v=function(C){if(h){var I=o._getClientXY(C),E=C.target;o.isMobile()&&(E=document.elementFromPoint(I.x,I.y)),I.x+=w.x*d,I.y+=w.y*d;var D=o._getOffsetXY(a.element,C),R={left:a.width()-(D.x+a.config.padding)<0,right:D.x-a.config.padding<0,up:a.height()-(D.y+a.config.padding)<0,down:D.y-a.config.padding<0};if(R.left||R.right||R.up||R.down){p.classList&&(p.classList.remove("bft-cursor-grab"),p.classList.add("bft-cursor-move"),p.classList.remove("bft-cursor-nodrop"),p.classList.remove("bft-cursor-copy"));var M=b[4],N=b[5],P=h.x,V=h.y,G=I.x,O=I.y;a.moveStart(R,function(re){b[4]=M+re.x,b[5]=N+re.y,h.x=P-re.xWithoutScale,h.y=V-re.yWithoutScale,I.x=G-re.xWithoutScale,I.y=O-re.yWithoutScale,m.setAttribute("transform","matrix("+b.toString()+")")})}else{for(a.moveEnd(),p.classList&&(p.classList.add("bft-cursor-grab"),p.classList.remove("bft-cursor-move"),p.classList.remove("bft-cursor-nodrop"),p.classList.remove("bft-cursor-copy")),y(u,f),u=null,f=null;E!=null&&E!=p;){if(E.hasAttribute&&E.hasAttribute(o.attr.node_id)){var T=E.getAttribute(o.attr.node_id);u=T,f=E;break}E=E.parentNode}if(u!=null){f.classList.add("bft-drag-over");for(var L=a.getNode(u),Z=o.getStParentNodes(L),U=0;U<Z.length;U++){var W=a.getNodeElement(Z[U].id);W&&(W.style.opacity=.1)}p.classList.remove("bft-cursor-grab"),p.classList.remove("bft-cursor-move"),p.classList.add("bft-cursor-copy"),p.classList.remove("bft-cursor-nodrop")}var de=(I.x-h.x)/d,S=(I.y-h.y)/d;b[4]=_+de,b[5]=g+S,!e._dragEventFired&&(Math.abs(I.x-h.x)>o.FIRE_DRAG_NOT_CLICK_IF_MOVE||Math.abs(I.y-h.y)>o.FIRE_DRAG_NOT_CLICK_IF_MOVE)&&(o.events.publish("drag",[a.nodeCircleMenuUI,{from:T,menuItem:s,menuItemName:i}])===!1&&x(),e._dragEventFired=!0),m.setAttribute("transform","matrix("+b.toString()+")")}}},x=function(C){if(a.moveEnd(),p.classList&&(p.classList.remove("bft-cursor-grab"),p.classList.remove("bft-cursor-move"),p.classList.remove("bft-cursor-nodrop"),p.classList.remove("bft-cursor-copy")),p.removeEventListener(n.move,v),p.removeEventListener(n.up,x),n.leave&&p.removeEventListener(n.leave,x),l.id==u||u==null)return p.removeChild(m),a._gragStartedId=null,void(e._dragEventFired&&o.events.publish("drop",[a.nodeCircleMenuUI,{from:l.id,menuItemName:i,menuItem:s,event:C}]));var I=a.getNode(u);o.events.publish("drop",[a.nodeCircleMenuUI,{from:l.id,to:I.id,menuItem:s,menuItemName:i,event:C}]),y(u,f),p.removeChild(m),a._gragStartedId=null};p.addEventListener(n.move,v),p.addEventListener(n.up,x),n.leave&&p.addEventListener(n.leave,x)}},o.prototype._nodeMouseDownHandler=function(e,t,n){var r=e.getAttribute(o.attr.node_id),i=this.getNode(r);this.config.movable&&!o.getRootOf(i).stParent?this._movableHandler(e,t,n):this.config.enableDragDrop&&this._dragDropHandler(e,t,n)},o.prototype._movableHandler=function(e,t,n){var r=this,i=e.getAttribute(o.attr.node_id),s=[],a=function(O,T){if(Array.isArray(O))for(var L=0;L<O.length;L++)a(O[L],T);else{for(T.push(O.id),L=0;L<O.stChildren.length;L++)a(O.stChildren[L],T);for(L=0;L<O.children.length;L++)a(O.children[L],T)}},c=function(O,T){if(Array.isArray(O))for(var L=0;L<O.length;L++)a(O[L],T);else{for(T.push(O.id),L=0;L<O.stChildrenIds.length;L++)c(r.getNode(O.stChildrenIds[L]),T);for(L=0;L<O.childrenIds.length;L++)c(r.getNode(O.childrenIds[L]),T)}},l=this.getNode(i);a(l,s);for(var d=this.getSvg(),u=o._getClientXY(t),f=[],p=[],h=[],m=[],b=[],_=[],g=[],w=[],y=0;y<s.length;y++){var v=this.getNode(s[y]);f.push(v),h.push({x:v.x,y:v.y});var x=this.getNodeElement(s[y]);if(x){b.push(x);var C=o._getTransform(x);m.push({x:C[4],y:C[5]}),p.push(C);var I=this.element.querySelector(`[data-ctrl-ec-id="${s[y]}"]`);if(I){_.push(I);var E=o._getTransform(I);g.push(E),w.push({x:E[4],y:E[5]})}else _.push(null),g.push(null),w.push(null);if(this.config.movable==o.movable.node)break}}e._dragEventFired=!1;var D=null,R=null;this._gragStartedId=s[0],document.body.style.mozUserSelect=document.body.style.webkitUserSelect=document.body.style.userSelect="none";var M={x:u.x,y:u.y},N=r.getScale(),P=function(O,T){if(O!=null){T.classList.remove("bft-drag-over");for(var L=r.getNode(D),Z=o.getStParentNodes(L),U=0;U<Z.length;U++){var W=r.getNodeElement(Z[U].id);W&&(W.style.opacity=1)}}},V=function(O){if(M){var T=o._getClientXY(O),L=O.target;o.isMobile()&&(L=document.elementFromPoint(T.x,T.y));var Z=o._getOffsetXY(r.element,O),U={left:r.width()-(Z.x+r.config.padding)<0,right:Z.x-r.config.padding<0,up:r.height()-(Z.y+r.config.padding)<0,down:Z.y-r.config.padding<0};if(U.left||U.right||U.up||U.down){d.classList&&(d.classList.remove("bft-cursor-grab"),d.classList.add("bft-cursor-move"),d.classList.remove("bft-cursor-nodrop"),d.classList.remove("bft-cursor-copy"));for(var W=[],de=[],S=[],re=[],k=0;k<p.length;k++)W.push(p[k][4]),de.push(p[k][5]),g[k]?(S.push(g[k][4]),re.push(g[k][5])):(S.push(null),re.push(null));var ge=M.x,Ie=M.y,bn=T.x,wt=T.y;r.moveStart(U,function(Me){for(var ie=0;ie<p.length;ie++){var _t=W[ie],xt=de[ie],ai=S[ie],ur=re[ie];p[ie][4]=_t+Me.x,p[ie][5]=xt+Me.y,M.x=ge-Me.xWithoutScale,M.y=Ie-Me.yWithoutScale,T.x=bn-Me.xWithoutScale,T.y=wt-Me.yWithoutScale,f[ie].x=_t+Me.x,f[ie].y=xt+Me.y,f[ie].movex=Me.x,f[ie].movey=Me.y,g[ie]&&(g[ie][4]=ai+Me.x,g[ie][5]=ur+Me.y);for(var ke=o.ui.link(f[ie],r,N,r.response.bordersByRootIdAndLevel,r.nodes,o.action.update,!0),Ee=0;Ee<ke.length;Ee++){var nt=ke[Ee];(pe=r.element.querySelector(`[data-l-id="[${nt.id}][${nt.childId}]"]`))&&(pe.innerHTML=nt.html)}if(f[ie].parent)for(ke=o.ui.link(f[ie].parent,r,N,r.response.bordersByRootIdAndLevel,r.nodes,o.action.update,!0),Ee=0;Ee<ke.length;Ee++){var pe;nt=ke[Ee],(pe=r.element.querySelector(`[data-l-id="[${nt.id}][${nt.childId}]"]`))&&(pe.innerHTML=nt.html)}b[ie].setAttribute("transform","matrix("+p[ie].toString()+")"),_[ie]&&_[ie].setAttribute("transform","matrix("+g[ie].toString()+")")}})}else{if(r.moveEnd(),d.classList&&(d.classList.add("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.remove("bft-cursor-nodrop"),d.classList.remove("bft-cursor-copy")),P(D,R),D=null,R=null,r.config.enableDragDrop)for(;L!=null&&L!=d;){if(L.hasAttribute&&L.hasAttribute(o.attr.node_id)){var kt=L.getAttribute(o.attr.node_id);if(r._gragStartedId&&kt!=r._gragStartedId){D=kt,R=L;break}}L=L.parentNode}if(D!=null){R.classList.add("bft-drag-over");for(var qe=r.getNode(D),he=o.getStParentNodes(qe),Ce=0;Ce<he.length;Ce++){var ct=r.getNodeElement(he[Ce].id);ct&&(ct.style.opacity=.1)}!r.canUpdateLink(f[0].id,D)&&d.classList?(d.classList.remove("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.remove("bft-cursor-copy"),d.classList.add("bft-cursor-nodrop")):d.classList&&(d.classList.remove("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.add("bft-cursor-copy"),d.classList.remove("bft-cursor-nodrop"))}var tt=(T.x-M.x)/N,Gt=(T.y-M.y)/N;for(k=0;k<p.length;k++){p[k][4]=m[k].x+tt,p[k][5]=m[k].y+Gt,g[k]&&(g[k][4]=w[k].x+tt,g[k][5]=w[k].y+Gt),f[k].x=h[k].x+tt,f[k].y=h[k].y+Gt,f[k].movex=tt,f[k].movey=Gt;var Wt=o.ui.link(f[k],r,N,r.response.bordersByRootIdAndLevel,r.nodes,o.action.update,!0);for(Ce=0;Ce<Wt.length;Ce++){var ut=Wt[Ce];(se=r.element.querySelector(`[data-l-id="[${ut.id}][${ut.childId}]"]`))&&(se.innerHTML=ut.html)}}if(l.parent)if(r.config.movable==o.movable.detachTree)(se=r.element.querySelector(`[data-l-id="[${l.parent.id}][${l.id}]"]`))&&se.parentElement.removeChild(se);else for(Wt=o.ui.link(l.parent,r,N,r.response.bordersByRootIdAndLevel,r.nodes,o.action.update,!0),Ce=0;Ce<Wt.length;Ce++){var se;ut=Wt[Ce],(se=r.element.querySelector(`[data-l-id="[${ut.id}][${ut.childId}]"]`))&&(se.innerHTML=ut.html)}if(!e._dragEventFired&&(Math.abs(T.x-M.x)>o.FIRE_DRAG_NOT_CLICK_IF_MOVE||Math.abs(T.y-M.y)>o.FIRE_DRAG_NOT_CLICK_IF_MOVE)){if(o.events.publish("drag",[r,i,O,s])===!1&&G(),r.config.enableDragDrop)for(k=0;k<b.length;k++)d.insertBefore(b[k],d.firstChild);e._dragEventFired=!0}for(k=0;k<p.length;k++)b[k].setAttribute("transform","matrix("+p[k].toString()+")"),_[k]&&_[k].setAttribute("transform","matrix("+g[k].toString()+")")}}},G=function(O){for(var T=0;T<f.length;T++)f[T].x=h[T].x,f[T].y=h[T].y;if(r.moveEnd(),d.classList&&(d.classList.remove("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.remove("bft-cursor-nodrop"),d.classList.remove("bft-cursor-copy")),d.removeEventListener(n.move,V),d.removeEventListener(n.up,G),n.leave&&d.removeEventListener(n.leave,G),f[0].id!=D&&D!=null){var L=r.getNode(D);if((Z=o.events.publish("drop",[r,f[0].id,L.id,b[0],O]))===!1)return P(D,R),void(r._gragStartedId=null);r.canUpdateLink(f[0].id,D)?((re=r.get(f[0].id)).pid=D,re.stpid=null,r.updateNode(re,null,!0)):P(D,R),r._gragStartedId=null}else{if(e._dragEventFired){var Z=o.events.publish("drop",[r,f[0].id,void 0,b[0],O]);if(r.config.movable&&Z!==!1)if(r.config.movable==o.movable.detachTree){var U=o._getTransform(r.getNodeElement(l.id));(re=r.get(l.id)).pid=null,re.stpid=null,r.updateNode(re,null,!0)}else{var W=[];r.config.movable==o.movable.node?W.push(l.id):c(l,W);var de=(U=o._getTransform(r.getNodeElement(l.id)))[4]-l.x,S=U[5]-l.y;for(T=0;T<W.length;T++){var re;(re=r.get(W[T]))&&(re.movex!=null?re.movex+=de:re.movex=de,re.movey!=null?re.movey+=S:re.movey=S,r.update(re))}o.events.publish("updated",[r]),r.draw(o.action.update,{dragNodeIdList:W})}}r._gragStartedId=null}};d.addEventListener(n.move,V),d.addEventListener(n.up,G),n.leave&&d.addEventListener(n.leave,G)},o.prototype._dragDropHandler=function(e,t,n){var r=o._getClientXY(t),i=e.getAttribute(o.attr.node_id),s=this.getNode(i);e._dragEventFired=!1;var a=null,c=null;this._gragStartedId=i,this.element.style.mozUserSelect=this.element.style.webkitUserSelect=this.element.style.userSelect="none";var l=this,d=this.getSvg(),u={x:r.x,y:r.y},f=o._getTransform(e),p=f[4],h=f[5],m=l.getScale(),b=e.cloneNode(!0);b.setAttribute("data-n-id","draging"),d.insertBefore(b,d.firstChild),b.style.opacity=.7;var _=function(y,v){if(y!=null){v.classList.remove("bft-drag-over");for(var x=l.getNode(a),C=o.getStParentNodes(x),I=0;I<C.length;I++){var E=l.getNodeElement(C[I].id);E&&(E.style.opacity=1)}}},g=function(y){if(u){var v=o._getClientXY(y),x=y.target;o.isMobile()&&(x=document.elementFromPoint(v.x,v.y));var C=o._getOffsetXY(l.element,y),I={left:l.width()-(C.x+l.config.padding)<0,right:C.x-l.config.padding<0,up:l.height()-(C.y+l.config.padding)<0,down:C.y-l.config.padding<0};if(I.left||I.right||I.up||I.down){d.classList&&(d.classList.remove("bft-cursor-grab"),d.classList.add("bft-cursor-move"),d.classList.remove("bft-cursor-nodrop"),d.classList.remove("bft-cursor-copy"));var E=f[4],D=f[5],R=u.x,M=u.y,N=v.x,P=v.y;l.moveStart(I,function(W){f[4]=E+W.x,f[5]=D+W.y,u.x=R-W.xWithoutScale,u.y=M-W.yWithoutScale,v.x=N-W.xWithoutScale,v.y=P-W.yWithoutScale,b.setAttribute("transform","matrix("+f.toString()+")")})}else{if(l.moveEnd(),d.classList&&(d.classList.add("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.remove("bft-cursor-nodrop"),d.classList.remove("bft-cursor-copy")),_(a,c),a=null,c=null,l.config.enableDragDrop)for(;x!=null&&x!=d;){if(x.hasAttribute&&x.hasAttribute(o.attr.node_id)){var V=x.getAttribute(o.attr.node_id);if(l._gragStartedId&&V!=l._gragStartedId){a=V,c=x;break}}x=x.parentNode}if(a=="draging"&&(a=null,c=null),a!=null){c.classList.add("bft-drag-over");for(var G=l.getNode(a),O=o.getStParentNodes(G),T=0;T<O.length;T++){var L=l.getNodeElement(O[T].id);L&&(L.style.opacity=.1)}!l.canUpdateLink(s.id,a)&&d.classList?(d.classList.remove("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.remove("bft-cursor-copy"),d.classList.add("bft-cursor-nodrop")):d.classList&&(d.classList.remove("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.add("bft-cursor-copy"),d.classList.remove("bft-cursor-nodrop"))}var Z=(v.x-u.x)/m,U=(v.y-u.y)/m;f[4]=p+Z,f[5]=h+U,!e._dragEventFired&&(Math.abs(v.x-u.x)>o.FIRE_DRAG_NOT_CLICK_IF_MOVE||Math.abs(v.y-u.y)>o.FIRE_DRAG_NOT_CLICK_IF_MOVE)&&(o.events.publish("drag",[l,V,y])===!1&&w(),e._dragEventFired=!0),b.setAttribute("transform","matrix("+f.toString()+")")}}},w=function(y){if(l.moveEnd(),d.classList&&(d.classList.remove("bft-cursor-grab"),d.classList.remove("bft-cursor-move"),d.classList.remove("bft-cursor-nodrop"),d.classList.remove("bft-cursor-copy")),d.removeEventListener(n.move,g),d.removeEventListener(n.up,w),n.leave&&d.removeEventListener(n.leave,w),s.id==a||a==null)return e._dragEventFired&&o.events.publish("drop",[l,s.id,void 0,b,y]),d.removeChild(b),void(l._gragStartedId=null);var v=l.getNode(a);if(o.events.publish("drop",[l,s.id,v.id,b,y])===!1)return _(a,c),d.removeChild(b),void(l._gragStartedId=null);if(l.canUpdateLink(s.id,a)){var x=l.get(s.id);x.pid=a,x.stpid=null,x.movex!=null&&(x.movex=void 0),x.movey!=null&&(x.movey=void 0),l.updateNode(x,null,!0)}else d.removeChild(b),_(a,c);l._gragStartedId=null};d.addEventListener(n.move,g),d.addEventListener(n.up,w),n.leave&&d.addEventListener(n.leave,w)},o.prototype._resizeHandler=function(e,t){if(this.isVisible){var n=this.getViewBox(),r=this.getSvg(),i=r.getAttribute("width"),s=r.getAttribute("height"),a=i/n[2],c=s/n[3],l=a>c?c:a;r.setAttribute("width",this.width()),r.setAttribute("height",this.height()),n[2]=this.width()/l,n[3]=this.height()/l,this.setViewBox(n),this.xScrollUI.create(this.width()),this.yScrollUI.create(this.height()),this._draw(!1,o.action.resize)}},o.prototype._nodeDbClickHandler=function(e,t){if(o.events.publish("dbclick",[this,this.get(e)])===!1)return!1;this._commonClickHandler(e,t,this.config.nodeMouseDbClick)},o.prototype._nodeClickHandler=function(e,t){var n=this.getNodeElement(e);if(n&&n._dragEventFired)n._dragEventFired=!1;else{if(o.events.publish("click",[this,{node:this.getNode(e),event:t}])===!1)return!1;this._commonClickHandler(e,t,this.config.nodeMouseClick)}},o.prototype._nodeCircleMenuItemClickHandler=function(e,t){var n=e.parentNode.getAttribute(o.attr.control_node_circle_menu_wrraper_id),r=e.getAttribute(o.attr.control_node_circle_menu_name),i=this.nodeCircleMenuUI._menu[r];o.events.publish("click",[this.nodeCircleMenuUI,{nodeId:n,menuItemName:r,menuItem:i,event:t}])},o.prototype._nodeCircleMenuClickHandler=function(e){o.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide();var t=this.getNode(e),n=null;if(Array.isArray(t.tags))for(var r=0;r<t.tags.length;r++){var i=t.tags[r];this.config.tags[i]&&this.config.tags[i].nodeCircleMenu&&(n=this.config.tags[i].nodeCircleMenu)}this.nodeCircleMenuUI.show(e,n)},o.prototype._commonClickHandler=function(e,t,n){var r;o.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide(),n==o.action.expandCollapse&&this.toggleExpandCollapse(e,t),n==o.action.edit&&(r=this.getNode(e))&&(this.editUI.show(r.id),this.ripple(r.id,t.clientX,t.clientY)),n==o.action.details&&(r=this.getNode(e))&&(this.editUI.show(r.id,!0),this.ripple(r.id,t.clientX,t.clientY))},o.prototype._menuHandlerMouseDownHandler=function(e,t){t.stopPropagation(),t.preventDefault()},o.prototype._nodeMenuClickHandler=function(e,t,n){o.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var r=this.getNode(e),i=null;if(Array.isArray(r.tags))for(var s=0;s<r.tags.length;s++){var a=r.tags[s];this.config.tags[a]&&this.config.tags[a].nodeMenu&&(i=this.config.tags[a].nodeMenu)}this.nodeMenuUI.showStickIn(t,e,null,i)},o.prototype._menuClickHandler=function(e,t){t.stopPropagation(),t.preventDefault(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.show(e.offsetLeft,e.offsetTop)},o.prototype._lonelyButtonHandler=function(){var e={id:this.generateId()};this.addNode(e,null,!0)!==!1&&this.center(e.id)},o.prototype.toggleExpandCollapse=function(e,t){var n=this.getNode(e),r=this.getCollapsedIds(n);if(r.length){if(o.events.publish("expcollclick",[this,!1,e,r])===!1)return!1;this.expand(e,r,!1)}else{if(o.events.publish("expcollclick",[this,!0,e,n.childrenIds])===!1)return!1;this.collapse(e,n.childrenIds,!1)}t&&this.ripple(n.id,t.clientX,t.clientY)},o.prototype._move=function(e,t,n){n[0]=t,n[1]=e,this.setViewBox(n),this.xScrollUI.setPosition(),this.yScrollUI.setPosition()},o.prototype.moveStart=function(e,t,n,r){if(e){if(!this._moveInterval){var i=this,s=this.getViewBox().slice(0),a=this.getScale(),c=0,l=0,d=1;o.isNEU(n)&&(n=o.anim.inSin),o.isNEU(r)&&(r=3e3),this._moveInterval=setInterval(function(){var u={x:0,y:0,xWithoutScale:0,yWithoutScale:0};e.left?(c++,u.x=c*o.MOVE_STEP/a,u.xWithoutScale=c*o.MOVE_STEP):e.right&&(c++,u.x=-c*o.MOVE_STEP/a,u.xWithoutScale=-c*o.MOVE_STEP),e.up?(l++,u.y=l*o.MOVE_STEP/a,u.yWithoutScale=l*o.MOVE_STEP):e.down&&(l++,u.y=-l*o.MOVE_STEP/a,u.yWithoutScale=-l*o.MOVE_STEP);var f=n((10*d-10)/r);u.x=u.x*f,u.xWithoutScale=u.xWithoutScale*f,u.y=u.y*f,u.yWithoutScale=u.yWithoutScale*f,i.setViewBox([s[0]+u.x,s[1]+u.y,s[2],s[3]]),t&&t(u),d+=1},10)}}else console.error("movePosition parameter not defined")},o.prototype.moveEnd=function(){this._moveInterval&&(clearInterval(this._moveInterval),this._moveInterval=null)},o===void 0&&(o={}),o.node=function(e,t,n,r){this.templateName=r,this.id=e,this.pid=t,this.children=[],this.childrenIds=[],this.parent=null,this.stpid=null,this.stParent=null,this.stChildren=[],this.stChildrenIds=[],this.tags=n,this.tags||(this.tags=[])},o.prototype._mouseDownHandler=function(e,t,n){var r=this;o.HIDE_EDIT_FORM_ON_PAN&&this.editUI.hide(),o.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var i=this.getViewBox(),s=this.getScale(),a=o._getClientTouchesXY(t,0),c=o._getClientTouchesXY(t,1),l={diffX:0,diffY:0,x0:a.x,y0:a.y,type:"pan",viewBoxLeft:i[0],viewBoxTop:i[1]};t.touches&&t.touches.length>1&&(l.type="pinch",l.dist=Math.sqrt((a.x-c.x)*(a.x-c.x)+(a.y-c.y)*(a.y-c.y))),l.type=="pan"&&(this._hideBeforeAnimation(),this._changeCursorOnPanStart(i,s,t));var d=function(f){var p=o._getClientTouchesXY(f,0);if(l&&l.type=="pan"){r._hideBeforeAnimation(),l.diffX=p.x-l.x0,l.diffY=p.y-l.y0;var h=-l.diffY/s+l.viewBoxTop,m=-l.diffX/s+l.viewBoxLeft;r._move(h,m,i)}else if(l&&l.type=="pinch"){var b=o._getClientTouchesXY(f,1),_=Math.sqrt((p.x-b.x)*(p.x-b.x)+(p.y-b.y)*(p.y-b.y)),g=1+(_-l.dist)/(l.dist/100)/100;l.dist=_;var w=o._pinchMiddlePointInPercent(r.element,r.width(),r.height(),f);r.zoom(g,w)}},u=function(){l.type=="pan"&&r.config.sticky?setTimeout(function(){o._moveToBoundaryArea(e,r.getViewBox(),r.response.boundary,function(){r._draw(!0,o.action.pan)})},0):l.type!="pan"||r.config.sticky||setTimeout(function(){r._draw(!0,o.action.pan)},0),l.type=="pan"&&r._changeCursorOnPanEnd(),l=null,e.removeEventListener(n.move,d),e.removeEventListener(n.up,u),n.leave&&e.removeEventListener(n.leave,u),n.touchstart&&e.removeEventListener(n.touchstart,u)};this.config.enablePan&&(e.addEventListener(n.move,d),e.addEventListener(n.up,u),n.leave&&e.addEventListener(n.leave,u),n.touchstart&&e.addEventListener(n.touchstart,u))},o.prototype._changeCursorOnPanStart=function(e,t,n){var r=this.getPointerElement(),i=o._getOffsetXY(this.element,n),s=i.x/t+e[0]-16/t,a=i.y/t+e[1]-16/t;r.style.display="inherit",r.setAttribute("transform","matrix(0,0,0,0,"+s+","+a+")"),o.animate(r,{transform:[0,0,0,0,s,a],opacity:0},{transform:[1/t,0,0,1/t,s,a],opacity:1},300,o.anim.outBack)},o.prototype._changeCursorOnPanEnd=function(){this.getPointerElement().style.display="none"},o.searchUI=function(){this.lastSearch=[],this._searchAfterEnterPress=!1,this._event_id=o._guid(),this.instance=null},o.searchUI.prototype.init=function(e){this.instance=e,this.obj=this.instance,this._initSearchFields();var t=this,n=this.instance.config.padding-10,r=this.instance.config.padding-10,i=this.instance.getMenuButton();if(i){var s=i.getBoundingClientRect(),a=this.instance.getSvg().getBoundingClientRect();n=a.right-s.left+10,r=s.top-a.top-10}var c=document.createElement("div");c.classList.add("bft-search"),c.style.right=n+"px",c.style.top=r+"px";var l=o.elements.textbox({},{label:o.SEARCH_PLACEHOLDER,btn:"X"},"320px");c.innerHTML+=l.html,this.xBtn=c.querySelector("[data-input-btn]"),this.xBtn.style.display="none",this.searchTableWrapper=document.createElement("div"),c.appendChild(this.searchTableWrapper);var d=this.instance.getSvg().nextSibling;this.instance.element.insertBefore(c,d),o.input.init(c),this.input=document.getElementById(l.id),this.xBtn.addEventListener("click",function(p){p.preventDefault(),t.hide()}),this.input.addEventListener("keypress",function(p){p.key=="Enter"&&p.preventDefault()}),this.input.addEventListener("focus",function(p){t.xBtn.style.display="",t._search()}),this.input.addEventListener("blur",function(p){o.isNEU(t.input.value)&&o.SEARCH_HELP_SYMBOL!=t.input.value&&(t.xBtn.style.display="none")}),this.input.addEventListener("keydown",function(p){(p.key=="ArrowDown"||p.key=="ArrowUp")&&p.preventDefault()}),this.input.addEventListener("keyup",function(p){p.key=="ArrowDown"?u():p.key=="ArrowUp"?f():p.key=="Enter"?t._enterHandler():p.key=="Escape"?t.hide():this.value.length>=o.MINIMUM_SYMBOLS_IN_SEARCH_INPUT&&t._search()});var u=function(){var p=t.instance.element.querySelectorAll("[data-search-item-id]"),h=t.instance.element.querySelector('[data-selected="yes"]');h==null&&p.length>0?p[0].setAttribute("data-selected","yes"):p.length>0&&h.nextSibling&&h.nextSibling.setAttribute&&(h.removeAttribute("data-selected"),h.nextSibling.setAttribute("data-selected","yes"))},f=function(){var p=t.instance.element.querySelectorAll("[data-search-item-id]"),h=t.instance.element.querySelector('[data-selected="yes"]');h==null&&p.length>0?p[p.length-1].setAttribute("data-selected","yes"):p.length>0&&h.previousSibling&&h.previousSibling.setAttribute&&(h.removeAttribute("data-selected"),h.previousSibling.setAttribute("data-selected","yes"))}},o.searchUI.prototype._enterHandler=function(){var e=this.instance.element.querySelector('[data-selected="yes"]');if(e){if(e.hasAttribute("data-search-item-id")){var t=e.getAttribute("data-search-item-id");if(this.input.value!=o.SEARCH_HELP_SYMBOL){var n=o.events.publish("",[this.instance,t]),r=o.events.publish("searchclick",[this,{nodeId:t}]);n===!1&&(r=!1),r!=0&&this.instance.center(t)}else this.input.value=t+" ",this.searchTableWrapper.innerHTML=""}}else this._searchAfterEnterPress=!0,this.__search(),this.searchTableWrapper.innerHTML="",this.instance.draw()},o.searchUI.prototype._initSearchFields=function(){if(this.instance.config.searchFields==null){this._searchFields=[];for(var e=0;e<this.instance.response.allFields.length;e++){var t=this.instance.response.allFields[e];t=="tags"||o._fieldIsImg(this.instance.config,t)||this._searchFields.indexOf(t)==-1&&this._searchFields.push(t)}}else this._searchFields=this.instance.config.searchFields;if(this.instance.config.searchFieldsAbbreviation==null)for(this.searchFieldsAbbreviation={},e=0;e<this._searchFields.length;e++){for(var n=this._searchFields[e],r=0,i=n.slice(0,r+1).toLowerCase();this.searchFieldsAbbreviation[i];)r++,i=n.slice(0,r+1).toLowerCase();this.searchFieldsAbbreviation[i]=n}else this.searchFieldsAbbreviation=this.instance.config.searchFieldsAbbreviation;this._searchFieldsAbbreviation=this.searchFieldsAbbreviation},o.searchUI.prototype.find=function(e){this.input&&(this.input.value=e,document.activeElement==this.input?this._search(e):this.input.focus())},o.searchUI.prototype.addMatchTag=function(e){if(this._searchAfterEnterPress){for(var t=0;t<this.lastSearch.length;t++)if(this.lastSearch[t].id==e)return!0;return!1}return null},o.searchUI.prototype.__search=function(){this.lastSearch=o._search.search(this.instance.config.nodes,this.input.value,this._searchFields,this._searchFields,this.instance.config.searchDisplayField,this.instance.config.searchFieldsWeight,this.searchFieldsAbbreviation)},o.searchUI.prototype._search=function(){var e,t=this;if(this._searchAfterEnterPress=!1,this.input.value==o.SEARCH_HELP_SYMBOL)e=this.helpView();else{this.__search();var n=o._getFistImgField(this.instance.config);e=`<table border="0" cellspacing="0" cellpadding="0">
                        <tbody>
                            ${function(){for(var s="",a=0;a<t.lastSearch.length&&!(a>=o.SEARCH_RESULT_LIMIT);a++){var c=t.lastSearch[a],l="";if(n){var d=t.instance._get(c.id);typeof n=="function"?l=n(t.instance,t.instance.getNode(c.id),d):d[n]&&(l=d[n])}var u="",f="";t.instance.config.searchDisplayField==c.__searchField?u=c.__searchMarks:t.instance.config.searchDisplayField?(u=c[t.instance.config.searchDisplayField],o.isNEU(u)&&(u=""),f=c.__searchMarks):u=c.__searchMarks;var p={img:l,nodeId:c.id,first:u,second:f,searchItem:c,html:o.searchUI.createItem(l,c.id,u,f)};o.events.publish("add-item",[t,p]),s+=p.html}return s}()}  
                        </tbody>
                    </table>`}this.searchTableWrapper.innerHTML=e;for(var r=this.instance.element.querySelectorAll("[data-search-item-id]"),i=0;i<r.length;i++)r[i].addEventListener("click",function(){if(this.hasAttribute("data-search-item-id")){var s=this.getAttribute("data-search-item-id");if(t.input.value!=o.SEARCH_HELP_SYMBOL){var a=o.events.publish("searchclick",[t.instance,s]),c=o.events.publish("searchclick",[t,{nodeId:s}]);if(a===!1&&(c=!1),c!==!1){t.instance.center(this.getAttribute("data-search-item-id"));var l=t.instance.element.querySelector('[data-selected="yes"]');l&&l.removeAttribute("data-selected"),this.setAttribute("data-selected","yes"),t.input.focus()}}else t.input.value=s+" ",t.searchTableWrapper.innerHTML="",t.input.focus()}});o.events.publish("show-items",[this,{}])},o.searchUI.prototype.helpView=function(){var e='<table border="0" cellspacing="0" cellpadding="0">';for(var t in this.searchFieldsAbbreviation)e+=`<tr data-search-item-id="${t}" style="height: 50px;"><td class="bft-search-image-td" style="text-align: center;">${t}</td><td class="bft-search-text-td">${this.searchFieldsAbbreviation[t]}</td></tr>`;return e+="</table>"},o.searchUI.createItem=function(e,t,n,r){return n&&(n="<b>"+n+"</b>"),`<tr data-search-item-id="${t}">
                <td class="bft-search-image-td">
                    ${e=e?`<div class="bft-search-photo" style="background-image: url(${e})"></div>`:`<div class="bft-search-photo">${o.icon.user(32,32,"#aeaeae")}</div>`}
                </td>
                <td class="bft-search-text-td">${n} <br/>${r}</td>
            </tr>`},o.searchUI.prototype.hide=function(){if(o.events.publish("hide",[this])===!1)return!1;this._searchAfterEnterPress&&(this._searchAfterEnterPress=!1,this.instance.draw()),this.lastSearch=[],this.xBtn&&(this.xBtn.style.display="none"),this.searchTableWrapper&&(this.searchTableWrapper.innerHTML=""),this.input&&(this.input.value="",document.activeElement==this.input&&this.input.blur(),document.activeElement==this.xBtn&&o.input.blurHandler(this.input))},o.searchUI.prototype.on=function(e,t){return o.events.on(e,t,this._event_id),this},o===void 0&&(o={}),o.manager=function(e){this.config=e.config,this.layoutConfigs=e._layoutConfigs,this.visibleNodeIds=[],this.viewBox=null,this.action=null,this.actionParams=null,this.nodes={},this.oldNodes={},this.maxX=null,this.maxY=null,this.minX=null,this.minY=null,this.bordersByRootIdAndLevel=null,this.roots=null,this.state=null,this.vbIsInitializedFromState=!1,this.rootList=[],this.instance=e,this._fixAdjustForExport={x:0,y:0}},o.manager.prototype.read=function(e,t,n,r,i,s,a,c){var l=this;o.state._get(this.config.state,t,n,function(d){l.state=d,l.action=i,l.actionParams=s,i!=o.action.init||!l.state||s&&s.method&&s.method=="fit"?(l.viewBox=r,l.vbIsInitializedFromState=!1):(l.viewBox=l.state.vb,l.vbIsInitializedFromState=!0,Array.isArray(l.state.roots)&&(l.config.roots=l.state.roots));var u=l.maxX,f=l.maxY,p=l.minX,h=l.minY,m=l.bordersByRootIdAndLevel,b=l.roots,_=l.nodes;if(e){var g=o.manager._getResponse(t,n,l.visibleNodeIds,l.config,u,f,p,h,l.viewBox,b,l.action,l.actionParams,_,l.oldNodes,l.vbIsInitializedFromState);i!=o.action.exporting&&(l.maxX=u,l.maxY=f,l.minX=p,l.minY=h,l.roots=b,l.nodes=_,l.visibleNodeIds=g.visibleNodeIds),g.bordersByRootIdAndLevel=m,g.roots=b,g.adjustify={x:0,y:0},l.state&&(g.adjustify=l.state.adjustify),a(g)}else l.oldNodes=_||null,l._read(function(w){u=w.maxX,f=w.maxY,p=w.minX,h=w.minY,m=w.bordersByRootIdAndLevel,b=w.roots,_=w.nodes;var y=o.manager._getResponse(t,n,l.visibleNodeIds,l.config,u,f,p,h,l.viewBox,b,l.action,l.actionParams,_,l.oldNodes,l.vbIsInitializedFromState);y.notif=w.limit,y.roots=b,y.bordersByRootIdAndLevel=m,y.adjustify=w.adjustify,i!=o.action.exporting&&(l.maxX=u,l.maxY=f,l.minX=p,l.minY=h,l.roots=b,l.nodes=_,l.visibleNodeIds=y.visibleNodeIds,l.bordersByRootIdAndLevel=m,l.rootList=w.rootList),a(y)},c)})},o.manager.prototype._read=function(e,t){var n=this,r=o.manager._createNodes(this.instance);t(r);var i=r.nodes,s=r.roots,a=o.remote;a==null&&(a=o.local),a._setPositions(s,n.layoutConfigs,function(c){var l=o.manager._doNotChangePositionOfClickedNodeIfAny(s,i,n.action,n.actionParams,n.oldNodes,n.config.orientation);n.state&&n.action==o.action.init&&(l=n.state.adjustify),n.action==o.action.exporting?l=n._fixAdjustForExport:n._fixAdjustForExport=l;for(var d={minX:null,minY:null,maxX:null,maxY:null},u={},f=[],p=0;p<s.length;p++)o.manager._setMinMaxXYAdjustifyIterate(s[p],s[p],d,0,u,l,n.config.orientation,f);for(var h in f)for(var m in f[h]){var b=u[h][m],_=f[h][m];b.minX==null&&b.minY==null&&b.maxX==null&&b.maxY==null&&o._setMinMaxXY(_,b)}e({minX:d.minX,minY:d.minY,maxX:d.maxX,maxY:d.maxY,bordersByRootIdAndLevel:u,nodes:i,roots:s,rootList:r.rootList,limit:c,adjustify:l})},i)},o===void 0&&(o={}),o.manager._initDinamicNode=function(e,t,n){t&&(e.lcn=t),n&&(e.isAssistant=!0);var r=o.t(e.templateName);e.w=r&&r.size?r.size[0]:0,e.h=r&&r.size?r.size[1]:0,e.isSplit=e.templateName=="split",e.isMirror=e.templateName=="mirror",e.isSubLevel=e.templateName=="subLevel"},o.manager._setCollpasedProperty=function(e,t,n,r,i,s,a){e.collapsed==null&&t.collapse&&t.collapse.allChildren?e.collapsed=!0:e.collapsed==null&&(e.collapsed=!1),i==o.action.expand&&n.ids.indexOf(e.id)!=-1&&(e.collapsed=!1),i==o.action.collapse&&(n.expandIds||n.collapseIds)?n.expandIds&&n.expandIds.indexOf(e.id)!=-1?e.collapsed=!1:n.collapseIds&&n.collapseIds.indexOf(e.id)!=-1&&(e.collapsed=!0):i==o.action.collapse&&n.ids.indexOf(e.id)!=-1&&(e.collapsed=!0),i==o.action.expand&&n.ids=="all"&&(e.collapsed=!1),i==o.action.exporting&&n.expandChildren&&(e.collapsed=!1),i==o.action.init&&a!=null?e.collapsed=!a.exp.has(e.id):i==o.action.init?e.tags.indexOf("left-partner")!=-1||e.tags.indexOf("right-partner")!=-1||e.tags.indexOf("partner")!=-1||e.parentPartner?e.collapsed=t.collapse&&s>=t.collapse.level&&r.indexOf(e.id)==-1:e.collapsed=t.collapse&&s>=t.collapse.level-1&&r.indexOf(e.id)==-1:i==o.action.centerNode||i==o.action.insert||i==o.action.expand||i==o.action.collapse?r.has(e.id)&&(e.collapsed=!1):i==o.action.update&&n&&n.changeRoots&&n.changeRoots.has(e.id)&&(e.collapsed=!1)},o.manager._initNode=function(e,t,n,r,i,s,a){var c=a.manager.config,l=a.manager.layoutConfigs,d=a.manager.action,u=a.manager.actionParams,f=a.manager.state,p=l[n||"base"];e.parent==null&&o.manager._setCollpasedProperty(e,p,u,i,d,r-1,f);for(var h=0;h<e.childrenIds.length;h++){var m=t[e.childrenIds[h]];if(o.manager._setCollpasedProperty(m,p,u,i,d,r,f),!m.collapsed){if(m.parent=e,m.ppid!=null){var b=t[m.ppid];b&&(m.parentPartner=b)}(m.tags.indexOf("left-partner")!=-1||m.tags.indexOf("right-partner")!=-1||m.tags.indexOf("partner")!=-1||m.parentPartner)&&s.indexOf(e.id)==-1&&s.push(e.id),e.children.push(m)}}if(d!=o.action.minimize||e.min?d==o.action.maximize&&e.min===!0?(u.all||u.id==e.id)&&(e.min=!1):d==o.action.exporting&&u.min===!1?e.min=!1:d==o.action.init&&f!=null&&(e.min=f.min.has(e.id)):(u.all||u.id==e.id)&&(e.min=!0),!e.min)for(h=0;h<e.stChildrenIds.length;h++)m=t[e.stChildrenIds[h]],e.tags&&e.tags.has("filter")||(m.stParent=e,e.stChildren.push(m));r!=null&&(e.level=r),n&&(e.lcn=n);var _=o._getSubLevels(e.tags,c.tags);_>0&&(e.subLevels=_),e.tags.indexOf("assistant")!=-1&&e.parent!=null&&(e.isAssistant=!0);var g=o.t(e.templateName,e.min);e.w=g&&g.size?g.size[0]:0,e.h=g&&g.size?g.size[1]:0,e.padding=g&&g.padding?g.padding:[0,0,0,0];var w={node:e};o.events.publish("node-initialized",[a,w])},o.manager._iterate=function(e,t,n,r,i,s,a,c,l,d,u,f){var p=f.manager.layoutConfigs;if(o.manager._initNode(t,n,l,r,d,u,f),t.isAssistant&&(s[t.pid]||(s[t.pid]=[]),s[t.pid].push(t.id)),t.subLevels>0&&a.push(t.id),o.MIXED_LAYOUT_FOR_NODES_WITH_COLLAPSED_CHILDREN&&!t.isAssistant&&t.parent){if(t.parent&&t.parent.children.length&&t.parent.children[t.parent.children.length-1]==t){for(var h=[],m=0,b=0,_=0;_<t.parent.children.length;_++)(g=t.parent.children[_]).tags.indexOf("partner")==-1&&g.tags.indexOf("left-partner")==-1&&g.tags.indexOf("right-partner")==-1&&g.tags.indexOf("assistant")==-1&&g.children.length==0?h.push(g.id):g.tags.indexOf("assistant")!=-1?m++:g.tags.indexOf("partner")==-1&&g.tags.indexOf("left-partner")==-1&&g.tags.indexOf("right-partner")==-1||b++;(o.MIXED_LAYOUT_ALL_NODES&&h.length>1&&h.length==t.parent.children.length-m-b||!o.MIXED_LAYOUT_ALL_NODES&&h.length>1)&&(c[t.pid]=h)}}else if(!t.isAssistant&&t.childrenIds.length==0&&t.parent&&!c[t.pid]){for(h=[],m=0,b=0,_=0;_<t.parent.children.length;_++){var g;(g=t.parent.children[_]).tags.indexOf("partner")==-1&&g.tags.indexOf("left-partner")==-1&&g.tags.indexOf("right-partner")==-1&&g.tags.indexOf("assistant")==-1&&g.childrenIds.length==0?h.push(g.id):g.tags.indexOf("assistant")!=-1?m++:g.tags.indexOf("partner")==-1&&g.tags.indexOf("left-partner")==-1&&g.tags.indexOf("right-partner")==-1||b++}(o.MIXED_LAYOUT_ALL_NODES&&h.length>o.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN&&h.length==t.parent.childrenIds.length-m-b||!o.MIXED_LAYOUT_ALL_NODES&&h.length>o.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN)&&(c[t.pid]=h)}t.stChildren.length&&(e.stContainerNodes||(e.stContainerNodes=[]),e.stContainerNodes.push(t));for(var w=0;w<t.stChildren.length;w++){var y="";for(_=0;_<t.tags.length;_++)if(p[t.tags[_]]){y=t.tags[_];break}i.push(t.stChildren[w].id),o.manager._iterate(e,t.stChildren[w],n,0,i,s,a,c,y,d,u,f)}for(r++,w=0;w<t.children.length;w++)o.manager._iterate(e,t.children[w],n,r,i,s,a,c,l,d,u,f)},o.manager.__createNodes=function(e,t,n,r,i,s,a,c){for(var l=[],d=o._addDottedLines(n),u=0;u<d.length;u++){var f,p=d[u];f=o.STRING_TAGS?p.tags?p.tags.split(","):[]:Array.isArray(p.tags)?p.tags.slice(0):[],c.filterUI.addFilterTag(p)&&f.unshift("filter");var h=c.searchUI.addMatchTag(p.id);h===!0?f.unshift("match"):h===!1&&f.unshift("no-match");var m=o._getTemplate(f,n.tags,n.template),b=new o.node(p.id,p.pid,f,m);o.isNEU(p.ppid)||(b.ppid=p.ppid),o.isNEU(p.stpid)||(b.stpid=p.stpid),n.orderBy!=null&&(b.order=o.manager._getOrderFieldValue(p,n.orderBy)),p.movex!=null&&(b.movex=p.movex),p.movey!=null&&(b.movey=p.movey),e[p.id]=b,l.push(p.id)}for(n.orderBy!=null&&l.sort(function(x,C){var I=e[x].order,E=e[C].order;return typeof I=="number"||typeof E=="number"?(I==null&&(I=-1),E==null&&(E=-1),n.orderBy.desc?E-I:I-E):typeof I=="string"||typeof E=="string"?(I==null&&(I=""),E==null&&(E=""),n.orderBy.desc?E.localeCompare(I):I.localeCompare(E)):void 0}),u=0;u<l.length;u++){var _=l[u],g=(b=e[_],s?s[_]:null),w=e[b.stpid],y=e[b.pid];if(w||(b.stpid=null),y||(b.pid=null),w){var v=s?s[w.id]:null;v&&(w.min=v.min),w.stChildrenIds.push(b.id)}else y?(g&&(b.collapsed=g.collapsed,b.min=g.min),y.childrenIds.push(b.id)):(g&&(b.collapsed=g.collapsed,b.min=g.min),t.push(b),a.push(b.id));r==o.action.init&&(b.min=o._getMin(b,n))}},o.manager._createNodes=function(e){var t=e.manager.config,n=e.manager.layoutConfigs,r=e.manager.action,i=e.manager.actionParams,s=e.manager.oldNodes,a=e.manager.state,c={},l=[],d=[];if(o.manager.__createNodes(c,l,t,r,i,s,d,e),t.roots!=null){l=[];for(var u=0;u<t.roots.length;u++){var f=c[t.roots[u]];if(f&&r==o.action.centerNode){for(var p=f;p.pid!=null||p.stpid!=null;)p=p.pid==null&&p.stpid!=null?c[p.stpid]:c[p.pid];for(var h=c[i.id];(h.pid!=null||h.stpid!=null)&&h!=f;)h=h.pid==null&&h.stpid!=null?c[h.stpid]:c[h.pid];p==h&&(f=p)}if(f){for(var m=!1,b=0;b<l.length;b++)if(l[b].id==f.id){m=!0;break}m||(o.isNEU(f.pid)||(Xt=(w=c[f.pid]).childrenIds.indexOf(f.id))>-1&&w.childrenIds.splice(Xt,1),l.push(f))}}for(t.roots=[],u=0;u<l.length;u++)t.roots.push(l[u].id)}r==o.action.exporting&&i.id!=null&&(g=c[i.id])&&(g.pid=null,l=[g]);var _=[];if(r==o.action.init&&t.expand&&t.expand.nodes&&a==null)for(u=0;u<t.expand.nodes.length;u++){var g=c[t.expand.nodes[u]];for(t.expand.allChildren===!0&&o.manager._addExpandedNodeIdsIterate(g,c,_);g;)_.push(g.id),g.pid==null&&g.stpid!=null?(g=c[g.stpid]).min=!1:g=c[g.pid]}else if(r==o.action.expand&&i.ids&&i.ids!="all"||r==o.action.collapse&&i&&i.expandIds)for(ie=r==o.action.expand?i.ids:i.expandIds,u=0;u<ie.length;u++)for(var w=c[(g=c[ie[u]]).pid];w;)_.push(w.id),w.pid==null&&w.stpid!=null?(w=c[w.stpid]).min=!1:w=c[w.pid];else if(r==o.action.centerNode){for(var y=c[i.id];y;){if(_.push(y.id),i.options.parentState===o.COLLAPSE_PARENT_NEIGHBORS&&y)for(u=0;u<y.childrenIds.length;u++)(S=c[y.childrenIds[u]]).collapsed=!0;y.pid==null&&y.stpid!=null?(y=c[y.stpid]).min=!1:y=c[y.pid]}if(y=c[i.id],i.options.childrenState===o.COLLAPSE_SUB_CHILDRENS)for(u=0;u<y.childrenIds.length;u++){(x=c[y.childrenIds[u]]).collapsed=!1;for(var v=0;v<x.childrenIds.length;v++)c[x.childrenIds[v]].collapsed=!0}if(i.options.parentState===o.COLLAPSE_PARENT_SUB_CHILDREN_EXCEPT_CLICKED&&(w=c[y.pid]))for(u=0;u<w.childrenIds.length;u++){var x;if((x=c[w.childrenIds[u]])!=y)for(x.collapsed=!1,v=0;v<x.childrenIds.length;v++)c[x.childrenIds[v]].collapsed=!0}}else if(r==o.action.insert)for(g=c[i.insertedNodeId];g;)_.push(g.id),g.pid==null&&g.stpid!=null?(g=c[g.stpid]).min=!1:g=c[g.pid];var C=[],I={},E=[],D={},R=[];for(u=0;u<l.length;u++)o.manager._iterate(l[u],l[u],c,0,C,I,E,D,"",_,R,e);if(r==o.action.collapse&&i&&Array.isArray(i.expandIds)&&Array.isArray(i.collapseIds))for(u=0;u<i.ids.length;u++)i.expandIds.has(i.collapseIds[u])?console.error(`id ${i.collapseIds[u]} exist in both collapseIds and expandIds`):(g=c[i.collapseIds[u]])&&(g.collapsed=!0);for(u=l.length-1;u>=0;u--)l[u].collapsed&&l.splice(u,1);for(u=0;u<R.length;u++){g=c[R[u]];var M=[],N=[],P=[],V={},G=0,O=0,T=0,L=[],Z=[];for(v=0;v<g.children.length;v++)(S=g.children[v]).isAssistant?M.push(S.id):S.tags.indexOf("right-partner")!=-1?(S.isPartner=1,S.children=[],N.push(S.id)):S.tags.indexOf("left-partner")!=-1?(S.isPartner=2,S.children=[],P.push(S.id)):S.tags.indexOf("partner")==-1||G%2?S.tags.indexOf("partner")!=-1&&G%2?(S.isPartner=2,S.children=[],P.push(S.id),G++):S.parentPartner?(V[S.parentPartner.id]||(V[S.parentPartner.id]=[]),V[S.parentPartner.id].push(S.id)):M.push(S.id):(S.isPartner=1,S.children=[],N.push(S.id),G++);g.children=[];var U=[];for(v=0;v<N.length;v++){V[(S=c[N[v]]).id]?g.children.push(S):g.children.splice(0,0,S);for(var W=0;W<S.childrenIds.length;W++)U.push(S.childrenIds[W])}var de=[];for(v=0;v<P.length;v++)for(V[(S=c[P[v]]).id]?g.children.push(S):g.children.splice(0,0,S),W=0;W<S.childrenIds.length;W++)de.push(S.childrenIds[W]);for(v=0;v<de.length;v++)(S=c[de[v]]).collapsed||(S.parentPartner=S.parent,S.parent=g,S.isChildOfPartner=!0,g.children.push(S));for(v=P.length-1;v>=0;v--)if(V[P[v]])for(b=0;b<V[P[v]].length;b++)g.children.push(c[V[P[v]][b]]),O++,Z.indexOf(P[v])==-1&&Z.push(P[v]);for(v=0;v<M.length;v++){var S=c[M[v]];g.children.push(S)}for(v=0;v<N.length;v++)if(V[N[v]])for(b=0;b<V[N[v]].length;b++)g.children.push(c[V[N[v]][b]]),T++,L.indexOf(N[v])==-1&&L.push(N[v]);for(v=0;v<U.length;v++)(S=c[U[v]]).collapsed||(S.parentPartner=S.parent,S.parent=g,S.isChildOfPartner=!0,g.children.push(S));g.partnerSeparation=Math.max(Z.length,L.length)*t.partnerChildrenSplitSeparation+t.minPartnerSeparation,M.length||!O||T?M.length||O||!T?M.length||O!=1||T!=1?M.length||O||T?!M.length||O||T?M.length&&(O||T)?g.hasPartners=7:g.hasPartners=1:g.hasPartners=6:g.hasPartners=5:g.hasPartners=4:g.hasPartners=3:g.hasPartners=2}for(u=0;u<E.length;u++){var re=n[(g=c[E[u]]).lcn?g.lcn:"base"];for(v=0;v<g.subLevels;v++){var k=new o.node(g.id+"_sub_level_index_"+v,g.pid,[],"subLevel");o.manager._initDinamicNode(k,g.lcn),(w=g.parent)&&((Xt=w.children.indexOf(g))>-1&&(w.children.splice(Xt,1),w.children.splice(Xt,0,k)),k.children.push(g),k.parent=w,g.parent=k,c[k.id]=k)}}for(var ge in I){(w=c[ge]).hasAssistants=!0,k=new o.node(w.id+"_split_assitant_0",w.id,["assistant"],"split"),o.manager._initDinamicNode(k,w.lcn,!0),c[k.id]=k;var Ie=[];for(v=w.children.length-1;v>=0;v--)(S=w.children[v]).isAssistant?(S.parent=null,w.children.splice(v,1),Ie.splice(0,0,S.id)):S.isPartner||(S.parent&&D[S.parent.id]&&k&&S.parent.id!=k.id&&(Object.defineProperty(D,k.id,Object.getOwnPropertyDescriptor(D,S.parent.id)),delete D[S.parent.id]),S.parent=k,k.children.unshift(S),w.children.splice(v,1));if(Ie.length%2){var bn=c[Ie[Ie.length-1]],wt=new o.node(bn.id+"_mirror",w.pid,[],"mirror");o.manager._initDinamicNode(wt,bn.lcn,!0),wt.isAssistant=!0,wt.w=bn.w,wt.h=bn.h,c[wt.id]=wt,Ie.splice(Ie.length-1,0,wt.id)}var kt=1;for(v=Ie.length-1;v>=0;v--)if(v%2&&v!=Ie.length-1){var qe=new o.node(w.id+"_split_assitant_"+kt,w.pid,[],"split");o.manager._initDinamicNode(qe,w.lcn,!0),c[qe.id]=qe,Ie.splice(v,0,qe.id),kt++}else v%2&&Ie.splice(v,0,k.id);for(v=0;v<Ie.length;v+=3){var he=null;he=v==0?w:c[Ie[v-2]];var Ce=c[Ie[v]],ct=c[Ie[v+1]],tt=c[Ie[v+2]];Ce.parent=he,ct.parent=he,tt.parent=he,he.children.push(Ce),he.children.push(ct),he.children.push(tt)}}var Gt=!1;for(var Wt in n)if((re=n[Wt]).layout!=0){Gt=!0;break}var ut=o.events.has("node-layout",e._event_id);if(Gt||ut){var se={nodes:c,config:t,action:r,actionParams:i};if(E.length){var Me=!1;for(var ge in D){var ie=D[ge];for(u=0;u<ie.length;u++)if((g=c[ie[u]]).subLevels){Me=!0;break}if(Me)break}if(Me){var _t={},xt={},ai={};for(var ge in D){ie=D[ge];var ur=!1,ke=null;for(u=0;u<ie.length;u++){var Ee=ie[u];(ke===null||E.has(Ee))&&(ke=c[Ee].parent.id,ur||o.isNEU(c[Ee].subLevels)||(ur=c[Ee].subLevels>0)),_t[ke]||(_t[ke]=[]),_t[ke].push(Ee),ur&&(ai[ke]=ge,xt[ke]||(xt[ke]=[]),xt[ke].push(Ee))}}for(var ge in D={},xt)if(xt[ge].length>o.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN){var nt=ai[ge];for(u=c[nt].children.length-1;u>=0;u--)S=c[nt].children[u],xt[ge].has(S.id)&&c[nt].children.splice(u,1)}for(var ge in _t)_t[ge].length>o.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN&&(D[ge]=_t[ge])}}for(var ge in D){for(var pe=w=c[ge];pe.isSplit;)pe=c[pe.pid];for(;pe.isSubLevel;)pe=c[pe.pid];if((re=n[w.lcn?w.lcn:"base"]).layout!=0||ut){se.pnode=w,se.layout=re.layout,se.layoutGridColumns=t.layoutGridColumns,se.childrenIds=D[ge],se.lastChildrenPidIds=D,se.subLevels=0,se.layouts=[],o.events.publish("node-layout",[e,se]),o.events.publish("layout",[se]),se.layouts.length||se.layouts.push({layout:se.layout,childrenIds:se.childrenIds,subLevels:se.subLevels,layoutGridColumns:se.layoutGridColumns});for(var Yt=0;Yt<se.layouts.length;Yt++){var Q=se.layouts[Yt];for(o.isNEU(Q.subLevels)&&(Q.subLevels=0),o.isNEU(Q.layout)&&(Q.layout=re.layout),pe=w=c[ge];pe.isSplit;)pe=c[pe.pid];for(;pe.isSubLevel;)pe=c[pe.pid];var Rt=w;for(v=0;v<Q.subLevels;v++)k=new o.node(Yt+"_sublevel_layout_"+v,Rt.id,[],"subLevel"),o.manager._initDinamicNode(k,Rt.lcn),k.parent=Rt,Rt.children.push(k),c[k.id]=k,Rt=k;if(Q.subLevels){for(v=0;v<Q.childrenIds.length;v++){var Xt;S=c[Q.childrenIds[v]],(Xt=w.children.indexOf(S))!=-1&&w.children.splice(Xt,1),S.parent=Rt,Rt.children.push(S)}w=Rt}if(Q.layout==o.layout.grid&&Q.childrenIds.length>2){Q.layoutGridColumns=="dynamic"&&(Q.layoutGridColumns=o._getDynamicGridCoulumns(Q.childrenIds.length));var wn=w.id;for(u=w.children.length-1;u>=0;u--)for(v=0;v<Q.childrenIds.length;v++)if(Ee=Q.childrenIds[v],w.children[u].id==Ee){w.children.splice(u,1);break}var Ot=Q.layoutGridColumns;for(Ot%2!=0&&Ot>2&&Ot--,u=0;u<Q.childrenIds.length;u+=Ot){var Zt=null;for(v=0;v<Ot;v++){var ip=u+Ot>=Q.childrenIds.length;if(Q.childrenIds.length-1<u+v)break;(S=c[Ee=Q.childrenIds[u+v]]).parent=c[wn],c[wn].children.push(S),ip||(Ot/2-1==v&&(Zt=new o.node(Q.childrenIds[u+v-1]+"_grid_pseudo_node_"+Q.childrenIds[u+v+1],wn,[],"subLevel"),o.manager._initDinamicNode(Zt,w.lcn),Zt.parent=c[wn],c[wn].children.push(Zt),c[Zt.id]=Zt),Ot-1==v&&(wn=Zt.id))}}}if(Q.layout==o.layout.mixed){var Jo=Q.childrenIds;for(u=Jo.length-1;u>=0;u--){for(w=(S=c[Jo[u]]).parent,S.layout=o.layout.mixed,v=w.children.length-1;v>=0;v--)if(S.id==w.children[v].id){w.children.splice(v,1);break}if(u>0){var Fl=c[Jo[u-1]];S.parent=Fl,S.layout=o.layout.mixed,Fl.children.push(S)}else w.children.push(S)}}else if(Q.layout>1){k=new o.node(Yt+"_"+w.id+"_split_0",pe.id,[],"split"),o.manager._initDinamicNode(k,w.lcn),c[k.id]=k,k.layout=Q.layout;var Re=[];for(u=Q.childrenIds.length-1;u>=0;u--){for(S=c[Q.childrenIds[u]],v=0;v<w.children.length;v++)w.children[v].id==S.id&&w.children.splice(v,1);if(S.parent=null,S.layout=Q.layout,Q.layout!=o.layout.treeRightOffset&&Q.layout!=o.layout.treeRight||Re.splice(0,0,S.id),Q.layout>2){var dr=new o.node(Yt+"_"+S.id+"_mirror",pe.id,[],"mirror");o.manager._initDinamicNode(dr,S.lcn),dr.layout=Q.layout,c[dr.id]=dr,Re.splice(0,0,dr.id)}Q.layout!=o.layout.treeRightOffset&&Q.layout!=o.layout.treeRight&&Re.splice(0,0,S.id)}for(kt=1,v=Re.length-1;v>=0;v--)v%2&&v!=Re.length-1?(qe=new o.node(Yt+"_"+w.id+"_split_"+kt,pe.id,[],"split"),o.manager._initDinamicNode(qe,w.lcn),qe.layout=Q.layout,c[qe.id]=qe,Re.splice(v,0,qe.id),kt++):v%2&&Re.splice(v,0,k.id);for(v=0;v<Re.length;v+=3)he=null,v==0&&(he=w),Ce=c[Re[v]],ct=c[Re[v+1]],tt=c[Re[v+2]],v!=0&&(he=c[Re[v-3]]),v==0||ct||(he=c[Re[v-2]]),Ce.parent=he,he.children.push(Ce),ct&&(v!=0&&(he=c[Re[v-2]]),ct.parent=he,he.children.push(ct)),tt&&(v!=0&&(he=c[Re[v-1]]),tt.parent=he,he.children.push(tt))}}}}}if(o.VERTICAL_CHILDREN_ASSISTANT)for(u=0;u<l.length;u++)o.manager._verticalAssistantIterate(l[u],c);return se={nodes:c,roots:l},o.events.publish("nodes-initialized",[e,se]),{nodes:se.nodes,roots:se.roots,rootList:d}},o.manager._getOrderFieldValue=function(e,t){var n=t;return t.field&&(n=t.field),e[n]},o.manager._getNodeWidth=function(e,t){switch(t.orientation){case o.orientation.top:case o.orientation.top_left:case o.orientation.bottom:case o.orientation.bottom_left:return e.w;case o.orientation.right:case o.orientation.right_top:case o.orientation.left:case o.orientation.left_top:return e.h}return 0},o.manager._isVisible=function(e,t,n,r){if(e.x!=null&&e.y!=null){if(t.lazyLoading&&r!==o.action.exporting){let a=function(c,l){var d=c.x,u=c.y,f=c.w,p=c.h,h=l[0]-o.LAZY_LOADING_FACTOR,m=l[2]+o.LAZY_LOADING_FACTOR+l[0],b=l[1]-o.LAZY_LOADING_FACTOR,_=l[3]+o.LAZY_LOADING_FACTOR+l[1],g=d+f>h&&m>d;return g&&(g=u+p>b&&_>u),g};var s=a;if(a(e,n))return!0;for(var i=0;i<e.children.length;i++)if(a(e.children[i],n))return!0;return!1}return!0}},o.manager.getAllFields=function(e){var t=[o.TAGS];for(var n in e.nodeBinding)t.push(e.nodeBinding[n]);for(n=0;n<e.nodes.length;n++)for(var r in e.nodes[n])r!==o.ID&&r!==o.TAGS&&r!==o.NODES&&r!==o.PID&&r!==o.STPID&&r!=="movex"&&r!=="movey"&&(e.nodeBinding[r]||t.has(r)||t.push(r));return t},o.manager._getMostDeepChild=function(e){if(e){var t=e;return function n(r){r.sl>t.sl&&(t=r);for(var i=0;i<r.children.length;i++)n(r.children[i])}(e),t}},o.manager._getResponse=function(e,t,n,r,i,s,a,c,l,d,u,f,p,h,m){var b=d[0],_=[],g={top:null,left:null,bottom:null,right:null,minX:null,maxX:null,minY:null,maxY:null},w=[[],[],[]],y=i-a+2*r.padding,v=s-c+2*r.padding,x=o.getScale(l,e,t,r.scaleInitial,r.scaleMax,r.scaleMin,y,v);if(g.top=c-r.padding,g.left=a-r.padding,g.bottom=s+r.padding-t/x,g.right=i+r.padding-e/x,g.maxX=i,g.minX=a,g.maxY=s,g.minY=c,d.length==0||l==null&&!m&&r.align==o.CENTER){var C=Math.ceil(e/x),I=Math.ceil(t/x),E=0,D=0;if(C-2*r.padding>=i-a)switch(E=(i+a)/2-C/2,r.orientation){case o.orientation.right:case o.orientation.right_top:E=(a-i)/2-C/2}else switch(E=b.x-C/2+o.manager._getNodeWidth(b,r)/2,r.orientation){case o.orientation.right:case o.orientation.right_top:(E=-(C/2-(a-i)/2))<r.padding-C&&(E=r.padding-C);break;case o.orientation.left:case o.orientation.bottom_left:case o.orientation.top_left:case o.orientation.left_top:(E=-(C/2-(i-a)/2))>-r.padding&&(E=-r.padding)}if(I-2*r.padding>=s-c)switch(D=(s+c)/2-I/2,r.orientation){case o.orientation.bottom:case o.orientation.bottom_left:D=(c-s)/2-I/2}else switch((D=-(I/2-(s-c)/2))>-r.padding&&(D=-r.padding),r.orientation){case o.orientation.bottom:case o.orientation.bottom_left:(D=-(I/2-(c-s)/2))<r.padding-I&&(D=r.padding-I);break;case o.orientation.left:case o.orientation.right:D=b.y-I/2+o.manager._getNodeWidth(b,r)/2}l=[E,D,C,I]}else if(l==null&&!m&&r.align==o.ORIENTATION){switch(C=Math.ceil(e/x),I=Math.ceil(t/x),E=0,D=0,r.orientation){case o.orientation.top:E=b.x-C/2+o.manager._getNodeWidth(b,r)/2,D=-r.padding;break;case o.orientation.bottom:E=b.x-C/2+o.manager._getNodeWidth(b,r)/2,D=r.padding-I;break;case o.orientation.left:E=-r.padding,D=b.y-I/2+o.manager._getNodeWidth(b,r)/2;break;case o.orientation.right:E=r.padding-C,D=b.y-I/2+o.manager._getNodeWidth(b,r)/2;break;case o.orientation.top_left:E=-r.padding,D=-r.padding;break;case o.orientation.right_top:E=r.padding-C,D=-r.padding;break;case o.orientation.left_top:E=-r.padding,D=-r.padding;break;case o.orientation.bottom_left:E=-r.padding,D=r.padding-I}l=[E,D,C,I],r.sticky&&(l[0]<g.left&&l[0]<g.right&&(l[0]=g.left>g.right?g.right:g.left),l[0]>g.right&&l[0]>g.left&&(l[0]=g.left>g.right?g.left:g.right),l[1]<g.top&&l[1]<g.bottom&&(l[1]=g.top>g.bottom?g.bottom:g.top),l[1]>g.bottom&&l[1]>g.top&&(l[1]=g.top>g.bottom?g.top:g.bottom))}if(u==o.action.centerNode||u==o.action.maximize){var R=p[f.id];f.options.horizontal==1&&(l[0]=R.x+R.w/2-l[2]/2),f.options.vertical==1&&(l[1]=R.y+R.h/2-l[3]/2),r.sticky&&(l[0]<g.left&&l[0]<g.right&&(l[0]=g.left>g.right?g.right:g.left),l[0]>g.right&&l[0]>g.left&&(l[0]=g.left>g.right?g.left:g.right),l[1]<g.top&&l[1]<g.bottom&&(l[1]=g.top>g.bottom?g.bottom:g.top),l[1]>g.bottom&&l[1]>g.top&&(l[1]=g.top>g.bottom?g.top:g.bottom))}if(u==o.action.insert||u==o.action.expand||u==o.action.collapse||u==o.action.update||u==o.action.centerNode){var M=null;if(u==o.action.insert&&f&&f.insertedNodeId!=null&&f.insertedNodeId!=null)M=p[f.insertedNodeId];else if(u==o.action.update&&f&&f.visId!=null&&f.visId!=null)M=p[f.visId];else if(u!=o.action.expand&&u!=o.action.collapse||!f||f.id==null||f.id==null){if(u==o.action.centerNode){switch(r.orientation){case o.orientation.top:case o.orientation.top_left:case o.orientation.bottom:case o.orientation.bottom_left:f.options.vertical||(M=p[f.id]);break;case o.orientation.right:case o.orientation.right_top:case o.orientation.left:case o.orientation.left_top:f.options.horizontal||(M=p[f.id])}M&&(M=o.manager._getMostDeepChild(M,p))}}else M=p[f.id],M=o.manager._getMostDeepChild(M,p);if(!o.FIXED_POSITION_ON_CLICK&&M)switch(r.orientation){case o.orientation.top:case o.orientation.top_left:var N=M.y+M.h-l[3]+r.padding;l[1]<N&&(l[1]=N);break;case o.orientation.bottom:case o.orientation.bottom_left:N=M.y-r.padding,l[1]>N&&(l[1]=N);break;case o.orientation.right:case o.orientation.right_top:N=M.x-r.padding,l[0]>N&&(l[0]=N);break;case o.orientation.left:case o.orientation.left_top:N=M.x+M.w-l[2]+r.padding,l[0]<N&&(l[0]=N)}}for(var P=0;P<d.length;P++)o.manager._iterate2(d[P],p,r,l,u,f,_,h,n,w);return{animations:w,boundary:g,viewBox:l,visibleNodeIds:_,nodes:p,allFields:o.manager.getAllFields(r)}},o.manager._iterate2=function(e,t,n,r,i,s,a,c,l,d){if(o.manager._isVisible(e,n,r,i)){a.push(e.id);var u=null;if((i==o.action.expand||i==o.action.collapse||i==o.action.maximize)&&c&&c[e.id]&&s.method=="expandCollapseToLevel"){if(u={x:(m=c[e.id]).x,y:m.y},m){u={x:m.x,y:m.y};for(var f=e,p=null;f!=null;)c[f.id]&&c[f.id].collapsed&&(p=f),f=f.parent;p&&p.parent&&(u={x:p.parent.x,y:p.parent.y})}if(b=t[s.id]){for(f=e.parent;f!=null;)f=f.parent;f&&(u={x:b.x+b.w/2-e.w/2,y:b.y+b.h/2-e.h/2})}}else if((i==o.action.expand||i==o.action.collapse)&&c&&c[e.id]){if(u={x:(m=c[e.id]).x,y:m.y},s.ids=="all"&&m){for(u={x:m.x,y:m.y},f=e,p=null;f!=null;)c[f.id]&&c[f.id].collapsed&&(p=f),f=f.parent;p&&p.parent&&(u={x:p.parent.x,y:p.parent.y})}if(b=t[s.id]){for(f=e.parent;f!=null&&s.ids.indexOf(e.id)==-1&&s.ids.indexOf(f.id)==-1;)f=f.parent;f&&(u={x:b.x+b.w/2-e.w/2,y:b.y+b.h/2-e.h/2})}}else if(i==o.action.centerNode&&c&&c[e.id])(m=c[e.id]).x!=null&&m.y!=null&&(u={x:m.x,y:m.y}),(h=t[s.id])&&h==e&&(f=e.parent)&&f.id==s.id&&(u={x:h.x+h.w/2-e.w/2,y:h.y+h.h/2-e.h/2});else if(i==o.action.maximize&&c&&c[e.id]){var h;(m=c[e.id]).x!=null&&m.y!=null&&(u={x:m.x,y:m.y}),(h=t[s.id])&&h==e&&(f=e.parent)&&f.id==s.id&&(u={x:h.x+h.w/2-e.w/2,y:h.y+h.h/2-e.h/2})}else if(i==o.action.minimize&&c&&c[e.id])u={x:(m=c[e.id]).x,y:m.y};else if(i==o.action.insert&&s&&s.insertedNodeId==e.id&&e.parent)u={x:e.parent.x,y:e.parent.y};else if(i!=o.action.update&&i!=o.action.insert||!c)i!==o.action.exporting&&i!==o.action.init&&l.indexOf(e.id)==-1&&(d[0].push(e.id),d[1].push({opacity:0}),d[2].push({opacity:1}));else{var m,b;if((!(m=c[e.id])||o.isNEU(m.x)&&o.isNEU(m.y))&&s){if(b=t[s.id]){for(f=b;f&&f.id==e.id;)f=f.parent;f&&(u={x:b.x,y:b.y})}}else m&&(u={x:m.x,y:m.y})}u!=null&&u.x!=null&&u.y!=null&&(u.x!=e.x||u.y!=e.y)&&(s&&s.dragNodeIdList&&s.dragNodeIdList.indexOf(e.id)!=-1||(d[0].push(e.id),d[1].push({transform:[1,0,0,1,u.x,u.y]}),d[2].push({transform:[1,0,0,1,e.x,e.y]})))}for(var _=0;_<e.stChildren.length;_++)o.manager._iterate2(e.stChildren[_],t,n,r,i,s,a,c,l,d);for(_=0;_<e.children.length;_++)o.manager._iterate2(e.children[_],t,n,r,i,s,a,c,l,d)},o.manager._addExpandedNodeIdsIterate=function(e,t,n){for(var r=0;r<e.childrenIds.length;r++)n.push(e.childrenIds[r]),o.manager._addExpandedNodeIdsIterate(t[e.childrenIds[r]],t,n)},o.manager._setMinMaxXYAdjustifyIterate=function(e,t,n,r,i,s,a,c){e.x+=s.x,e.y+=s.y;for(var l=0;l<e.stChildren.length;l++)o.manager._setMinMaxXYAdjustifyIterate(e.stChildren[l],e.stChildren[l],n,0,i,s,a,c);for(e.isPartner?e.sl=r-1:e.sl=r,i[t.id]==null&&(i[t.id]={}),i[t.id][e.sl]==null&&(i[t.id][e.sl]={minX:null,minY:null,maxX:null,maxY:null}),e.layout?(c[t.id]==null&&(c[t.id]={}),c[t.id][e.sl]==null&&(c[t.id][e.sl]=e)):o._setMinMaxXY(e,i[t.id][e.sl]),e.movex!=null&&(e.x+=e.movex),e.movey!=null&&(e.y+=e.movey),o._setMinMaxXY(e,n),r++,l=0;l<e.children.length;l++)o.manager._setMinMaxXYAdjustifyIterate(e.children[l],t,n,r,i,s,a,c)},o.manager._doNotChangePositionOfClickedNodeIfAny=function(e,t,n,r,i,s){if(n!=o.action.expand&&n!=o.action.collapse&&n!=o.action.minimize&&n!=o.action.maximize&&n!=o.action.centerNode&&n!=o.action.update&&n!=o.action.insert)return{x:0,y:0};if(n==o.action.update&&(!r||r.id==null)){if(!e||!e.length)return{x:0,y:0};r={id:e[0].id}}if(r.id==null)return{x:0,y:0};var a=r.id;(n==o.action.minimize&&t[a].parent||n==o.action.maximize&&t[a].parent)&&(a=t[a].pid);var c=t[a],l=i[a];if(!l)return{x:0,y:0};var d=l.movex!=null?l.movex:0,u=l.movey!=null?l.movey:0;return{x:(l.x?l.x-d:0)-c.x,y:(l.y?l.y-u:0)-c.y}},o.manager._verticalAssistantIterate=function(e,t){for(var n=0;n<e.stChildren.length;n++)o.manager._verticalAssistantIterate(e.stChildren[n],t);if(e.children.length==3)o.manager._verticalAssistantIterate(e.children[0],t),o.manager._verticalAssistantIterate(e.children[2],t),o.manager._verticalAssistantIterate(e.children[1],t);else for(n=0;n<e.children.length;n++)o.manager._verticalAssistantIterate(e.children[n],t);if(e.isAssistant&&e.isSplit&&e.children.length){for(var r=e.parent.children[0],i=e.parent.children[2],s=e.parent;!s.hasAssistants;)s=s.parent;var a={max:0},c={max:0};o.manager._verticalAssistantLevelCountIterate(r,0,a),o.manager._verticalAssistantLevelCountIterate(i,0,c);var l=Math.max(a.max,c.max),d=[];for(n=0;n<l;n++){var u=new o.node(e.parent.id+"_split_assitant_level_"+n,e.pid,[],"subLevel");o.manager._initDinamicNode(u,e.lcn,!0),n>0&&(d[n-1].children.push(u),u.parent=d[n-1]),t[u.id]=u,d.push(u)}if(d.length){for(var f=d[d.length-1],p=d[0],h=e.children.length-1;h>=0;h--){var m=e.children[h];f.children.unshift(m),m.parent=f,e.children.splice(h,1)}e.children.push(p),p.parent=e}}},o.manager._verticalAssistantLevelCountIterate=function(e,t,n){n.max<t&&(n.max=t),t++;for(var r=0;r<e.children.length;r++)o.manager._verticalAssistantLevelCountIterate(e.children[r],t,n)},o._addDottedLines=function(e){var t=e.nodes;if((e.groupDottedLines.length||e.dottedLines.length)&&(t=JSON.parse(JSON.stringify(t))),e.groupDottedLines.length)for(var n=[],r=0;r<e.groupDottedLines.length;r++){var i=e.groupDottedLines[r];i.rootId==null&&(i.rootId=i.to);var s=`balkan_group_dotted_${i.rootId}`;if(!n.has(s)){for(var a=0;a<t.length;a++)if(t[a].id==i.rootId){(u=JSON.parse(JSON.stringify(t[a]))).id=`balkan_group_dotted_${i.rootId}_balkan_id_${t[a].id}`,u.pid=void 0,u.stpid=t[a].id,t.push(u),n.push(s),t[a].tags||(t[a].tags=[]),t[a].tags.push("group-dotted-lines"),t[a].tags.push("group-dotted-lines-"+s);break}}for(a=0;a<t.length;a++)if(t[a].id==i.from){if((u=JSON.parse(JSON.stringify(t[a]))).id=`balkan_group_dotted_${i.rootId}_balkan_id_${t[a].id}`,u.pid=`balkan_group_dotted_${i.rootId}_balkan_id_${i.to}`,u.tags){var c=u.tags.indexOf("group-dotted-lines");c!=-1&&u.tags.splice(c,1)}if(u.tags||(u.tags=[]),u.tags.push("bft-dotted-connector"),i.tags)for(var l=0;l<i.tags.length;l++)u.tags.push(i.tags[l]);t.push(u);break}}if(e.dottedLines.length)for(r=0;r<e.dottedLines.length;r++){var d=e.dottedLines[r];for(d.rootId==null&&(d.rootId=d.to),a=0;a<t.length;a++)if(t[a].id==d.from){var u;if((u=JSON.parse(JSON.stringify(t[a]))).id=`balkan_dotted_${d.rootId}_balkan_id_${t[a].id}`,d.rootId==d.to?u.pid=d.to:u.pid=`balkan_dotted_${d.rootId}_balkan_id_${d.to}`,u.tags||(u.tags=[]),u.tags.push("bft-dotted-connector"),d.tags)for(l=0;l<d.tags.length;l++)u.tags.push(d.tags[l]);t.push(u);break}}return t},o.manager.__createNodes=function(e,t,n,r,i,s,a,c){for(var l=n.nodes,d=[],u={},f={},p=0;p<l.length;p++){var h,m=l[p];h=o.STRING_TAGS?m.tags?m.tags.split(","):[]:Array.isArray(m.tags)?m.tags.slice(0):[],c.filterUI.addFilterTag(m)&&h.push("filter");var b=c.searchUI.addMatchTag(m.id);b===!0?h.unshift("match"):b===!1&&h.unshift("no-match"),m.gender&&h.push(m.gender);var _=o._getTemplate(h,n.tags,n.template);m.templateName&&(_=m.templateName);var g=new o.node(m.id,m.pid,h,_);g.ftChildrenIds=[],g.rids=[],o.isNEU(m.ppid)||(g.ppid=m.ppid),o.isNEU(m.stpid)||(g.stpid=m.stpid),o.isNEU(m.mid)||(g.mid=m.mid),o.isNEU(m.fid)||(g.fid=m.fid),o.isNEU(m.gender)||(g.gender=m.gender),Array.isArray(m.pids)?g.pids=m.pids:g.pids=[],n.orderBy!=null&&(g.order=o.manager._getOrderFieldValue(m,n.orderBy)),e[m.id]=g,o.isNEU(g.stpid)?(o.isNEU(g.mid)||(u[g.mid]||(u[g.mid]=[]),u[g.mid].push(g.id)),o.isNEU(g.fid)||(u[g.fid]||(u[g.fid]=[]),u[g.fid].push(g.id)),o.isNEU(g.mid)&&o.isNEU(g.fid)&&o.isNEU(g.stpid)&&(d.has(g.id)||d.push(g.id))):(f[g.stpid]||(f[g.stpid]=[]),f[g.stpid].push(g.id))}if(n.orderBy!=null&&u)for(var w in u)u[w].sort(function(R,M){var N=e[R].order,P=e[M].order;return typeof N=="number"||typeof P=="number"?(N==null&&(N=-1),P==null&&(P=-1),n.orderBy.desc?P-N:N-P):typeof N=="string"||typeof P=="string"?(N==null&&(N=""),P==null&&(P=""),n.orderBy.desc?P.localeCompare(N):N.localeCompare(P)):void 0});for(p=0;p<d.length;p++){var y=e[d[p]];if(y){var v=[];o.manager._iterateSetRootIds(y.id,y.id,f,u,e,v),a.push(v)}}for(p=0;p<a.length;p++)for(var x=0;x<a.length;x++)if(x!=p){for(var C=a[p],I=a[x],E=!1,D=0;D<C.length;D++)if(I.has(C[D])){E=!0;break}E&&(a[p]=C.concat(I).unique(),a[x]=[])}for(p=a.length-1;p>=0;p--)a[p].length||a.splice(p,1);if(!n.roots||!n.roots.length)for(n.roots=[],p=a.length-1;p>=0;p--)n.roots.push(a[p][0]);for(p=0;p<n.roots.length;p++)o.manager._iterateFT(n.roots[p],f,u,e,s,t,r,i,n)},o.manager._iterateSetRootIds=function(e,t,n,r,i,s){var a=i[e];if(a){a.rids.has(t)||a.rids.push(t);for(var c=0;c<a.rids.length;c++)s.has(a.rids[c])||s.push(a.rids[c]);for(c=0;c<a.pids.length;c++){var l=i[a.pids[c]];if(l)for(var d=0;d<l.rids.length;d++)s.has(l.rids[d])||s.push(l.rids[d])}if(n[a.id])for(c=0;c<n[a.id].length;c++)o.manager._iterateSetRootIds(n[a.id][c],t,n,r,i,s);if(r[a.id])for(c=0;c<r[a.id].length;c++)o.manager._iterateSetRootIds(r[a.id][c],t,n,r,i,s)}},o.manager._iterateFT=function(e,t,n,r,i,s,a,c,l){var d,u=r[e],f=i?i[e]:null,p=r[u.stpid],h=r[u.mid],m=r[u.fid];if(p||(u.stpid=null),h?m&&(h.tags.has("partner")||h.tags.has("left-partner")||h.tags.has("right-partner"))?(u.pid=m.id,d=m,u.ppid=h.id):(u.pid=h.id,d=h,m&&(u.ppid=m.id)):m?h&&(m.tags.has("partner")||m.tags.has("left-partner")||m.tags.has("right-partner"))?(u.pid=h.id,d=h,u.ppid=m.id):(u.pid=m.id,d=m,h&&(u.ppid=h.id)):u.pid,p){var b=i?i[p.id]:null;b&&(p.min=b.min),p.stChildrenIds.push(u.id)}else h||m?(f&&(u.collapsed=f.collapsed,u.min=f.min),d&&!d.childrenIds.has(u.id)&&d.childrenIds.push(u.id),h&&!h.ftChildrenIds.has(u.id)&&h.ftChildrenIds.push(u.id),m&&!m.ftChildrenIds.has(u.id)&&m.ftChildrenIds.push(u.id)):(f&&(u.collapsed=f.collapsed,u.min=f.min),s.push(u));a==o.action.init&&(u.min=o._getMin(u,l));for(var _=0;_<u.pids.length;_++){var g=r[u.pids[_]];if(g){g.pid=u.id;var w=i?i[g.id]:null;if(w&&(g.collapsed=w.collapsed,g.min=w.min),a==o.action.init&&(g.min=o._getMin(g,l)),c&&f&&w&&c.id==u.id?w.hasPartners&&f.isPartner==1?g.tags.push("left-partner"):w.hasPartners&&f.isPartner==2||f.isPartner==1?g.tags.push("right-partner"):f.isPartner==2?g.tags.push("left-partner"):g.tags.push("partner"):w&&w.isPartner==2?g.tags.push("left-partner"):w&&w.isPartner==1?g.tags.push("right-partner"):g.tags.push("partner"),!o.isNEU(g)&&n[g.id])for(var y=0;y<n[g.id].length;y++){var v=r[n[g.id][y]];v&&(o.isNEU(v.fid)||o.isNEU(v.mid))&&o.manager._iterateFT(n[g.id][y],t,n,r,i,s,a,c,l)}u.childrenIds.push(g.id)}}if(t[e])for(y=0;y<t[e].length;y++)o.manager._iterateFT(t[e][y],t,n,r,i,s,a,c,l);if(n[e])for(y=0;y<n[e].length;y++)o.manager._iterateFT(n[e][y],t,n,r,i,s,a,c,l)},o.manager.getAllFields=function(e){var t=[o.TAGS];for(var n in e.nodeBinding)t.push(e.nodeBinding[n]);for(n=0;n<e.nodes.length;n++)for(var r in e.nodes[n])r!==o.ID&&r!==o.TAGS&&r!==o.NODES&&r!==o.PID&&r!==o.STPID&&r!=="mid"&&r!=="fid"&&r!=="pids"&&(e.nodeBinding[r]||t.has(r)||t.push(r));return t},o.templates={},o.templates.base={defs:`<g transform="matrix(1,0,0,1,0,0)" id="dot"><circle class="bft-fill" cx="0" cy="0" r="5" stroke="#aeaeae" stroke-width="1"></circle></g>
            <g id="base_node_menu" style="cursor:pointer;"><rect x="0" y="0" fill="transparent" width="22" height="22"></rect><circle cx="4" cy="11" r="2" fill="#aeaeae"></circle><circle cx="11" cy="11" r="2" fill="#aeaeae"></circle><circle cx="18" cy="11" r="2" fill="#aeaeae"></circle></g>
            <g style="cursor: pointer;" id="base_tree_menu">
                <rect x="0" y="0" width="25" height="25" fill="transparent"></rect>
                ${o.icon.addUser(25,25,"#fff",0,0)}
            </g>
            <g style="cursor: pointer;" id="base_tree_menu_close">
                <circle cx="12.5" cy="12.5" r="12" fill="#F57C00"></circle>
                ${o.icon.close(25,25,"#fff",0,0)}
            </g>            
            <g id="base_up">
                <circle cx="15" cy="15" r="15" fill="#fff" stroke="#aeaeae" stroke-width="1"></circle>
                ${o.icon.ft(20,20,"#aeaeae",5,5)}
            </g>
            <clipPath id="base_img_0"><rect id="base_img_0_stroke" stroke-width="3" stroke="#fff" x="170" y="-5" rx="25" ry="25" width="70" height="70"></rect></clipPath>`,size:[250,120],linkAdjuster:{fromX:0,fromY:0,toX:0,toY:0},ripple:{radius:0,color:"#e6e6e6",rect:null},expandCollapseSize:0,svg:'<svg class="{randId} {template}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  style="display:block;" width="{w}" height="{h}" viewBox="{viewBox}">{content}</svg>',link:'<path stroke-linejoin="round" stroke="#aeaeae" stroke-width="1px" fill="none" d="{rounded}" />',assistanseLink:'<path stroke-linejoin="round" stroke="#aeaeae" stroke-width="2px" fill="none" d="M{xa},{ya} {xb},{yb} {xc},{yc} {xd},{yd} L{xe},{ye}"/>',pointer:'<g data-pointer="pointer" transform="matrix(0,0,0,0,100,100)"><radialGradient id="pointerGradient"><stop stop-color="#ffffff" offset="0" /><stop stop-color="#C1C1C1" offset="1" /></radialGradient><circle cx="16" cy="16" r="16" stroke-width="1" stroke="#acacac" fill="url(#pointerGradient)"></circle></g>',node:'<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" stroke="#aeaeae" rx="7" ry="7"></rect>',menuButton:'<div style="position:absolute;right:{p}px;top:{p}px; width:40px;height:50px;cursor:pointer;" '+o.attr.control_export_menu+'=""><hr style="background-color: #7A7A7A; height: 3px; border: none;"><hr style="background-color: #7A7A7A; height: 3px; border: none;"><hr style="background-color: #7A7A7A; height: 3px; border: none;"></div>',padding:[50,20,35,20],nodeMenuButton:`<use ${o.attr.control_node_menu_id}="{id}" x="220" y="95" xlink:href="#base_node_menu"/>`,nodeTreeMenuButton:'<use data-ctrl-n-t-menu-id="{id}" x="10" y="10" xlink:href="#base_tree_menu"/>',nodeTreeMenuCloseButton:'<use data-ctrl-n-t-menu-c="" x="10" y="10" xlink:href="#base_tree_menu_close"/>',up:'<use x="110" y="-10" xlink:href="#base_up"/>',img_0:'<use xlink:href="#base_img_0_stroke" /><image preserveAspectRatio="xMidYMid slice" clip-path="url(#base_img_0)" xlink:href="{val}"  x="170" y="-5"  width="70" height="70"></image>',link_field_0:'<text text-anchor="middle" fill="#aeaeae" '+o.attr.width+'="290" x="0" y="0" style="font-size:10px;">{val}</text>'},o.templates.dot=Object.assign({},o.templates.base),o.templates.dot.node='<circle cx="5" cy="5" r="5" fill="none" stroke-width="1" stroke="#aeaeae"></circle>',o.templates.dot.size=[10,10],o.templates.dot.nodeMenuButton="",o.templates.dot.nodeTreeMenuButton="",o.templates.dot.nodeTreeMenuCloseButton="",o.templates.dot.up="",o.templates.john=Object.assign({},o.templates.base),o.templates.john.nodeMenuButton=`<use ${o.attr.control_node_menu_id}="{id}" x="90" y="50" xlink:href="#base_node_menu"/>`,o.templates.john.defs=`<style>                          
                                        .{randId} .bft-edit-form-header, .{randId} .bft-img-button{
                                            background-color: #aeaeae;
                                        }
                                        .{randId}.male .bft-edit-form-header, .{randId}.male .bft-img-button{
                                            background-color: #039BE5;
                                        }        
                                        .{randId}.male div.bft-img-button:hover{
                                            background-color: #F57C00;
                                        }
                                        .{randId}.female .bft-edit-form-header, .{randId}.female .bft-img-button{
                                            background-color: #F57C00;
                                        }        
                                        .{randId}.female div.bft-img-button:hover{
                                            background-color: #039BE5;
                                        }
                                    </style>
                                    <clipPath id="john_img_0"><rect  x="6" y="6" rx="54" ry="54" width="108" height="108"></rect></clipPath>
                                    ${o.gradientCircleForDefs("circle","#aeaeae",60,5)}
                                    ${o.gradientCircleForDefs("male_circle","#039BE5",60,5)}
                                    ${o.gradientCircleForDefs("female_circle","#F57C00",60,5)}`,o.templates.john.field_0="<text "+o.attr.width+'="230" style="font-size: 16px;font-weight:bold;" fill="#aeaeae" x="60" y="135" text-anchor="middle">{val}</text>',o.templates.john.field_1="<text "+o.attr.width+'="150" style="font-size: 13px;" fill="#aeaeae" x="60" y="150" text-anchor="middle">{val}</text>',o.templates.john.node='<use x="0" y="0" xlink:href="#circle" />',o.templates.john.img_0='<image preserveAspectRatio="xMidYMid slice" clip-path="url(#john_img_0)" xlink:href="{val}"  x="6" y="6"  width="108" height="108"></image>',o.templates.john.ripple={radius:60,color:"#e6e6e6",rect:null},o.templates.john.size=[120,120],o.templates.john_male=Object.assign({},o.templates.john),o.templates.john_male.node+='<use x="0" y="0" xlink:href="#male_circle" />',o.templates.john_male.ripple={radius:60,color:"#039BE5",rect:null},o.templates.john_female=Object.assign({},o.templates.john),o.templates.john_female.node+='<use x="0" y="0" xlink:href="#female_circle" />',o.templates.john_female.ripple={radius:60,color:"#F57C00",rect:null},o.templates.tommy=Object.assign({},o.templates.base),o.templates.tommy.defs=`<style>                          
                                        .{randId} .bft-edit-form-header, .{randId} .bft-img-button{
                                            background-color: #aeaeae;
                                        }
                                        .{randId}.male .bft-edit-form-header, .{randId}.male .bft-img-button{
                                            background-color: #039BE5;
                                        }        
                                        .{randId}.male div.bft-img-button:hover{
                                            background-color: #F57C00;
                                        }
                                        .{randId}.female .bft-edit-form-header, .{randId}.female .bft-img-button{
                                            background-color: #F57C00;
                                        }        
                                        .{randId}.female div.bft-img-button:hover{
                                            background-color: #039BE5;
                                        }
                                    </style>`,o.templates.tommy.field_0="<text "+o.attr.width+'="230" style="font-size: 18px;font-weight:bold;" fill="#ffffff" x="10" y="90" text-anchor="start">{val}</text>',o.templates.tommy.field_1="<text "+o.attr.width+'="150" style="font-size: 14px;" fill="#ffffff" x="10" y="65" text-anchor="start">{val}</text>',o.templates.tommy.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill="#aeaeae" stroke="#aeaeae" rx="7" ry="7"></rect>',o.templates.tommy_male=Object.assign({},o.templates.tommy),o.templates.tommy_male.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill="#039BE5" stroke="#aeaeae" rx="7" ry="7"></rect>',o.templates.tommy_female=Object.assign({},o.templates.tommy),o.templates.tommy_female.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill="#F57C00" stroke="#aeaeae" rx="7" ry="7"></rect>',o.templates.hugo=Object.assign({},o.templates.base),o.templates.hugo.up='<use x="200" y="10" xlink:href="#hugo_up"/>',o.templates.hugo.nodeMenuButton=`<use x="225" y="10" ${o.attr.control_node_menu_id}="{id}" xlink:href="#hugo_node_menu"/>`,o.templates.hugo.defs=`<clipPath id="hugo_img_0"><rect id="hugo_img_0_stroke" stroke-width="2" stroke="#fff" x="90" y="-5" rx="25" ry="25" width="70" height="70"></rect></clipPath>
                                    <linearGradient id="hugo_grad_female" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" style="stop-color:#FF8024;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#FF46A3;stop-opacity:1" />
                                    </linearGradient>
                                    <linearGradient id="hugo_grad_male" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" style="stop-color:#00D3A5;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#00A7D4;stop-opacity:1" />
                                    </linearGradient>
                                    <linearGradient id="hugo_grad" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" style="stop-color:#D0D0D0;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#909090;stop-opacity:1" />
                                    </linearGradient>
                                    <g id="hugo_up">
                                        <circle cx="12" cy="12" r="15" fill="transparent" ></circle>
                                        ${o.icon.ft(24,24,"#fff",0,0)}
                                    </g>
                                    <g id="hugo_node_menu" style="cursor:pointer;"><rect x="0" y="0" fill="transparent" width="22" height="22"></rect><circle cx="11" cy="4" r="2" fill="#ffffff"></circle><circle cx="11" cy="11" r="2" fill="#ffffff"></circle><circle cx="11" cy="18" r="2" fill="#ffffff"></circle></g>
                                    <style>
                                        .{randId} .bft-edit-form-header{
                                            background: linear-gradient(90deg, #D0D0D0 0%, #909090 100%);
                                        }
                                        .{randId}.male .bft-edit-form-header{
                                            background: linear-gradient(90deg, #00D3A5 0%, #00A7D4 100%);
                                        }
                                        .{randId}.female .bft-edit-form-header{
                                            background: linear-gradient(90deg, #FF8024 0%, #FF46A3 100%);
                                        }  
                                        .{randId} .bft-img-button{
                                            background-color: #909090;
                                        }      
                                        .{randId} .bft-img-button:hover{
                                            background-color: #D0D0D0;
                                        }
                                        .{randId}.male .bft-img-button{
                                            background-color: #00A7D4;
                                        }      
                                        .{randId}.male .bft-img-button:hover{
                                            background-color: #00D3A5;
                                        }
                                        .{randId}.female .bft-img-button{
                                            background-color: #FF46A3;
                                        }      
                                        .{randId}.female .bft-img-button:hover{
                                            background-color: #FF8024;
                                        }
                                        
                                    </style>`,o.templates.hugo.img_0='<use xlink:href="#hugo_img_0_stroke" /><image preserveAspectRatio="xMidYMid slice" clip-path="url(#hugo_img_0)" xlink:href="{val}"  x="90" y="-5"  width="70" height="70"></image>',o.templates.hugo.field_0="<text "+o.attr.width+'="230" style="font-size: 18px;font-weight:bold;" fill="#ffffff" x="125" y="85" text-anchor="middle">{val}</text>',o.templates.hugo.field_1="<text "+o.attr.width+'="230" style="font-size: 14px;" fill="#ffffff" x="125" y="105" text-anchor="middle">{val}</text>',o.templates.hugo.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill=url(#hugo_grad) stroke="#aeaeae" rx="7" ry="7"></rect>',o.templates.hugo_male=Object.assign({},o.templates.hugo),o.templates.hugo_male.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill=url(#hugo_grad_male) stroke="#aeaeae" rx="7" ry="7"></rect>',o.templates.hugo_female=Object.assign({},o.templates.hugo),o.templates.hugo_female.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill=url(#hugo_grad_female) stroke="#aeaeae" rx="7" ry="7"></rect>',o.templates.mother=Object.assign({},o.templates.base),o.templates.mother.up="",o.templates.mother.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;"  stroke-width="1" stroke="#F57C00" rx="5" ry="5"></rect><text style="font-size: 18px;" fill="#F57C00" x="240" y="30" text-anchor="end">Add mother</text>'+o.icon.mother(70,70,"#F57C00",10,40),o.templates.mother.field_0="",o.templates.mother.field_1="",o.templates.father=Object.assign({},o.templates.mother),o.templates.father.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#039BE5;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#039BE5" x="240" y="30" text-anchor="end">Add father</text>'+o.icon.father(70,70,"#039BE5",10,40),o.templates.partner=Object.assign({},o.templates.mother),o.templates.partner.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#aeaeae;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#aeaeae" x="240" y="30" text-anchor="end">Add partner</text>',o.templates.son=Object.assign({},o.templates.mother),o.templates.son.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#039BE5;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#039BE5" x="240" y="30" text-anchor="end">Add son</text>'+o.icon.son(70,70,"#039BE5",10,40),o.templates.daughter=Object.assign({},o.templates.mother),o.templates.daughter.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#F57C00;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#F57C00" x="240" y="30" text-anchor="end">Add daughter</text>'+o.icon.daughter(70,70,"#F57C00",10,40),o.templates.husband=Object.assign({},o.templates.mother),o.templates.husband.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#039BE5;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#039BE5" x="240" y="30" text-anchor="end">Add husband</text>'+o.icon.husband(70,70,"#039BE5",10,40),o.templates.wife=Object.assign({},o.templates.mother),o.templates.wife.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#F57C00;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#F57C00" x="240" y="30" text-anchor="end">Add wife</text>'+o.icon.wife(70,70,"#F57C00",10,40),o.templates.pet=Object.assign({},o.templates.mother),o.templates.pet.node='<rect x="0" y="0" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#F57C00;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#F57C00" x="240" y="30" text-anchor="end">Add pet</text>'+o.icon.teddy(70,70,"#F57C00",10,40),o.templates.cgroup=Object.assign({},o.templates.base),o.templates.cgroup.defs="",o.templates.cgroup.size=[250,120],o.templates.cgroup.padding=[0,0,0,0],o.templates.cgroup.node="",o.templates.split=Object.assign({},o.templates.base),o.templates.split.size=[10,10],o.templates.split.node='<circle cx="5" cy="5" r="5" fill="none" stroke-width="1" stroke="#aeaeae"></circle>',o.templates.mirror={linkAdjuster:{},link:"",node:"",nodeMenuButton:"",size:[0,0]},o.ui={_defsIds:{},defs:function(e){var t="";for(var n in o.templates){var r=o.templates[n];r.defs&&(o.ui._defsIds[n]=o.randomId(),t+=r.defs.replaceAll("{randId}",o.ui._defsIds[n]))}return"<defs>"+t+e+"</defs>"},lonely:function(e){return e.nodes&&e.nodes.length?"":o.IT_IS_LONELY_HERE.replace("{link}",o.RES.IT_IS_LONELY_HERE_LINK)},pointer:function(e,t,n){return t===o.action.exporting?"":o.t(e.template,!1,n).pointer},node:function(e,t,n,r,i,s,a,c,l,d){var u=o.t(e.templateName,e.min,l),f=u.node.replaceAll("{w}",e.w).replaceAll("{h}",e.h);u.defs&&(f=f.replaceAll("{randId}",o.ui._defsIds[e.templateName])),a==null&&(a=r.nodeBinding);var p={node:e,data:t};for(var h in a){var m,b=a[h];t&&(m=t[b]);var _=o._lblIsImg(r,h);if(p.value=m,p.element=u[h],p.name=b,p.field=h,o.events.publish("field",[d,p])!==!1&&p.value!=null&&p.value!=null&&p.element!=null&&(!_||_&&!o.isNEU(p.value))){if(!_&&typeof p.value=="string"){var g=p.element;g&&(g=g.replaceAll("{ew}",e.w-(e.padding?e.padding[1]:0)).replaceAll("{cw}",e.w/2)),p.value=o.wrapText(p.value,g)}var w=p.element.replace("{val}",p.value);f+=w=w.replaceAll("{ew}",e.w-(e.padding?e.padding[1]:0)).replaceAll("{cw}",e.w/2).replaceAll("{randId}",o.randomId()).replaceAll("{randId2}",o.randomId())}}var y=o._getPosition(n,e,i,s),v="node";Array.isArray(e.tags)&&e.tags.length&&(v+=" "+e.tags.join(" ")),e.layout&&(v+=" tree-layout");var x="";e.lcn&&(x='lcn="'+e.lcn+'"');var C=o.nodeOpenTag.replace("{lcn}",x).replace("{id}",e.id).replace("{class}",v).replace("{sl}",e.sl).replace("{level}",e.level).replace("{x}",y.x).replace("{y}",y.y),I=o._getOpacity(n,e);return f=(C=C.replace("{opacity}",I))+(f+=o.ui.nodeBtns(r,e,c,u,d))+o.grCloseTag},nodeBtns:function(e,t,n,r,i){var s="";return e.nodeMenu==null||t.isSplit||n===o.action.exporting||(s+=r.nodeMenuButton.replace("{id}",t.id).replace("{cw}",t.w/2).replace("{ch}",t.h/2).replace("{ew}",t.w-(t.padding?t.padding[1]:0)).replace("{eh}",t.h-(t.padding?t.padding[2]:0))),e.nodeCircleMenu==null||t.isSplit||n===o.action.exporting||o.isNEU(r.nodeCircleMenuButton)||(s+='<g style="cursor:pointer;" transform="matrix(1,0,0,1,'+r.nodeCircleMenuButton.x+","+r.nodeCircleMenuButton.y+')" '+o.attr.control_node_circle_menu_id+'="'+t.id+'"><circle cx="0" cy="0" fill="'+r.nodeCircleMenuButton.color+'" r="'+r.nodeCircleMenuButton.radius+'" stroke-width="1" stroke="'+r.nodeCircleMenuButton.stroke+'"></circle><line x1="-'+r.nodeCircleMenuButton.radius/2+'" y1="-6" x2="'+r.nodeCircleMenuButton.radius/2+'" y2="-6" stroke-width="2" stroke="'+r.nodeCircleMenuButton.stroke+'"></line><line x1="-'+r.nodeCircleMenuButton.radius/2+'" y1="0" x2="'+r.nodeCircleMenuButton.radius/2+'" y2="0" stroke-width="2" stroke="'+r.nodeCircleMenuButton.stroke+'"></line><line x1="-'+r.nodeCircleMenuButton.radius/2+'" y1="6" x2="'+r.nodeCircleMenuButton.radius/2+'" y2="6" stroke-width="2" stroke="'+r.nodeCircleMenuButton.stroke+'"></line></g>'),s},expandCollapseBtn:function(e,t,n,r,i){var s="";if(r!==o.action.exporting&&!t.isSplit){var a=n[t.lcn?t.lcn:"base"],c=0,l=0,d=o.t(t.templateName,t.min,i);if(t.childrenIds.length>0){if(t.hasPartners){for(var u=!1,f=0;f<t.childrenIds.length;f++){var p=e.getNode(t.childrenIds[f]);!p||p.parentPartner||p.isPartner||(u=!0)}if(!u)return""}switch(a.orientation){case o.orientation.top:case o.orientation.top_left:c=t.x+t.w/2,l=t.y+t.h;break;case o.orientation.bottom:case o.orientation.bottom_left:c=t.x+t.w/2,l=t.y;break;case o.orientation.right:case o.orientation.right_top:c=t.x,l=t.y+t.h/2;break;case o.orientation.left:case o.orientation.left_top:c=t.x+t.w,l=t.y+t.h/2}if(c-=d.expandCollapseSize/2,l-=d.expandCollapseSize/2,e.getCollapsedIds(t).length?(s+=o.expcollOpenTag.replace("{id}",t.id).replace("{x}",c).replace("{y}",l),s+=d.plus,s+=o.grCloseTag):(s+=o.expcollOpenTag.replace("{id}",t.id).replace("{x}",c).replace("{y}",l),s+=d.minus,s+=o.grCloseTag),s.indexOf("{collapsed-children-count}")!=-1){var h=o.collapsedChildrenCount(e,t);s=s.replace("{collapsed-children-count}",h)}if(s.indexOf("{collapsed-children-total-count}")!=-1){var m=o.collapsedChildrenTotalCount(e,t);s=s.replace("{collapsed-children-total-count}",m)}if(s.indexOf("{children-count}")!=-1){var b=o.childrenCount(e,t);s=s.replace("{children-count}",b)}if(s.indexOf("{children-total-count}")!=-1){var _=o.childrenTotalCount(e,t);s=s.replace("{children-total-count}",_)}}e._nodeHasHiddenParent(t)&&(s+=o.upOpenTag.replace("{id}",t.id).replace("{x}",t.x).replace("{y}",t.y),s+=d.up,s+=o.grCloseTag)}var g={html:s,node:t};return o.events.publish("renderbuttons",[e,g]),g.html},link:function(e,t,n,r,i,s,a){var c=e.lcn?e.lcn:"base",l=t._layoutConfigs[c],d=o.t(e.templateName,e.min,n),u=[],f=[],p=l.levelSeparation/2;e.layout>0&&(p=l.mixedHierarchyNodesSeparation/2);var h=0,m=o.getRootOf(e).id,b=r[m][e.sl],_=void 0;if(e.hasPartners){_={ids:[],indexes:{},ppnodes:{},lastLeft:null,firstRight:null,maxSidePartnersWithChildren:0,rightIds:[],leftIds:[],partnerChildrenSplitSeparation:t.config.partnerChildrenSplitSeparation};for(var g=0;g<e.children.length;g++)(y=e.children[g]).parentPartner?(_.ppnodes[y.id]=y.parentPartner,_.ids.push(y.id),y.parentPartner.isPartner==1?(_.rightIds.indexOf(y.parentPartner.id)==-1&&_.rightIds.push(y.parentPartner.id),_.indexes[y.id]=_.rightIds.indexOf(y.parentPartner.id),_.firstRight||(_.firstRight=y)):y.parentPartner.isPartner==2&&(_.leftIds.indexOf(y.parentPartner.id)==-1&&_.leftIds.push(y.parentPartner.id),_.indexes[y.id]=_.leftIds.indexOf(y.parentPartner.id),_.lastLeft=y)):y.isPartner||(_.lastLeft=y,_.firstRight||(_.firstRight=y));_.maxSidePartnersWithChildren=Math.max(_.leftIds.length,_.rightIds.length),h=_.maxSidePartnersWithChildren==0?t.config.minPartnerSeparation/2:t.config.minPartnerSeparation/2+_.partnerChildrenSplitSeparation*_.maxSidePartnersWithChildren+_.partnerChildrenSplitSeparation/2}for(g=0;g<e.children.length;g++){var w,y=e.children[g],v=r[m][y.sl],x={xa:0,ya:0,xb:0,yb:0,xc:0,yc:0,xd:0,yd:0,x:0,y:0,rotate:0},C=(d=o.t(y.templateName,y.min,n)).link;if(y.isChildOfPartner)switch(l.orientation){case o.orientation.top:case o.orientation.top_left:var I=y.layout==1?void 0:v.minY-(v.minY-b.maxY)/2;x=o.ui._linkTopToBottom(y.parentPartner,y,d,p,I);break;case o.orientation.bottom:case o.orientation.bottom_left:I=y.layout==1?void 0:v.maxY-(v.maxY-b.minY)/2,x=o.ui._linkBottomToTop(y.parentPartner,y,d,p,I);break;case o.orientation.right:case o.orientation.right_top:I=y.layout==1?void 0:v.maxX-(v.maxX-b.minX)/2,x=o.ui._linkRightToLeft(y.parentPartner,y,d,p,I);break;case o.orientation.left:case o.orientation.left_top:I=y.layout==1?void 0:v.minX-(v.minX-b.maxX)/2,x=o.ui._linkLeftToRight(y.parentPartner,y,d,p,I)}else if(_&&_.ids.indexOf(y.id)!=-1)switch(l.orientation){case o.orientation.top:case o.orientation.top_left:x=o.ui._linkPpTop(_,e,y,v,b,d);break;case o.orientation.bottom:case o.orientation.bottom_left:x=o.ui._linkPpBottom(_,e,y,v,b,d);break;case o.orientation.right:case o.orientation.right_top:x=o.ui._linkPpRight(_,e,y,v,b,d);break;case o.orientation.left:case o.orientation.left_top:x=o.ui._linkPpLeft(_,e,y,v,b,d)}else{var E=y.isAssistant&&y.rightNeighbor&&y.rightNeighbor.isAssistant&&y.parent==y.rightNeighbor.parent,D=y.isAssistant&&y.leftNeighbor&&y.leftNeighbor.isAssistant&&y.parent==y.leftNeighbor.parent;if((E||y.layout>1)&&y.rightNeighbor&&y.rightNeighbor.isSplit)switch(l.orientation){case o.orientation.top:case o.orientation.top_left:case o.orientation.bottom:case o.orientation.bottom_left:x=o.ui._linkRightToLeft(y.rightNeighbor,y,d,p);break;case o.orientation.right:case o.orientation.right_top:case o.orientation.left:case o.orientation.left_top:x=o.ui._linkBottomToTop(y.rightNeighbor,y,d,p)}else if((D||y.layout>1)&&y.leftNeighbor&&y.leftNeighbor.isSplit)switch(l.orientation){case o.orientation.top:case o.orientation.top_left:case o.orientation.bottom:case o.orientation.bottom_left:x=o.ui._linkLeftToRight(y.leftNeighbor,y,d,p);break;case o.orientation.right:case o.orientation.right_top:case o.orientation.left:case o.orientation.left_top:x=o.ui._linkTopToBottom(y.leftNeighbor,y,d,p)}else switch(l.orientation){case o.orientation.top:case o.orientation.top_left:y.isPartner==1?x=o.ui._linkLeftToRight(e,y,d,h):y.isPartner==2?x=o.ui._linkRightToLeft(e,y,d,h):(I=y.layout==1?void 0:v.minY-(v.minY-b.maxY)/2,x=o.ui._linkTopToBottom(e,y,d,p,I));break;case o.orientation.bottom:case o.orientation.bottom_left:y.isPartner==1?x=o.ui._linkLeftToRight(e,y,d,h):y.isPartner==2?x=o.ui._linkRightToLeft(e,y,d,h):(I=y.layout==1?void 0:v.maxY-(v.maxY-b.minY)/2,x=o.ui._linkBottomToTop(e,y,d,p,I));break;case o.orientation.right:case o.orientation.right_top:y.isPartner==1?x=o.ui._linkTopToBottom(e,y,d,h):y.isPartner==2?x=o.ui._linkBottomToTop(e,y,d,h):(I=y.layout==1?void 0:v.maxX-(v.maxX-b.minX)/2,x=o.ui._linkRightToLeft(e,y,d,p,I));break;case o.orientation.left:case o.orientation.left_top:y.isPartner==1?x=o.ui._linkTopToBottom(e,y,d,h):y.isPartner==2?x=o.ui._linkBottomToTop(e,y,d,h):(I=y.layout==1?void 0:v.minX-(v.minX-b.maxX)/2,x=o.ui._linkLeftToRight(e,y,d,p,I))}}var R=o.ui._draggableLinkPath(t,e,y,x,p,l.orientation);if(R)w=R,C=C.replaceAll("{rounded}",R).replaceAll("{edge}",R).replaceAll("{curve}",w);else if(C.indexOf("{rounded}")!=-1)if(x.xa==x.xb&&x.xa==x.xc&&x.xa==x.xd||x.ya==x.yb&&x.ya==x.yc&&x.ya==x.yd)w="M"+x.xa+","+x.ya+" L"+x.xd+","+x.yd,C=C.replaceAll("{rounded}",w);else if(Math.abs(x.xa-x.xd)<=o.LINK_ROUNDED_CORNERS&&Math.abs(x.xa-x.xc)<=o.LINK_ROUNDED_CORNERS&&Math.abs(x.xa-x.xb)<=o.LINK_ROUNDED_CORNERS)w="M"+x.xa+","+x.ya+" L"+x.xa+","+x.yd,C=C.replaceAll("{rounded}",w);else if(Math.abs(x.ya-x.yd)<=o.LINK_ROUNDED_CORNERS&&Math.abs(x.ya-x.yc)<=o.LINK_ROUNDED_CORNERS&&Math.abs(x.ya-x.yb)<=o.LINK_ROUNDED_CORNERS)w="M"+x.xa+","+x.ya+" L"+x.xd+","+x.ya,C=C.replaceAll("{rounded}",w);else{var M=o.ui._roundedEdge(x.xa,x.ya,x.xb,x.yb,x.xc,x.yc),N=o.ui._roundedEdge(x.xb,x.yb,x.xc,x.yc,x.xd,x.yd);w="M"+M.x1+","+M.y1+" "+M.x2+","+M.y2+" Q"+M.qx1+","+M.qy1+" "+M.qx2+","+M.qy2+" L"+N.x2+","+N.y2+" Q"+N.qx1+","+N.qy1+" "+N.qx2+","+N.qy2+" L"+N.x3+","+N.y3,C=C.replaceAll("{rounded}",w)}else C.indexOf("{edge}")!=-1?(w="M"+x.xa+","+x.ya+" "+x.xb+","+x.yb+" "+x.xc+","+x.yc+" L"+x.xd+","+x.yd,C=C.replaceAll("{edge}",w)):C.indexOf("{curve}")!=-1?(w="M"+x.xa+","+x.ya+" C"+x.xb+","+x.yb+" "+x.xc+","+x.yc+" "+x.xd+","+x.yd,C=C.replaceAll("{curve}",w)):(w=C.replaceAll("{xa}",x.xa).replaceAll("{ya}",x.ya).replaceAll("{xb}",x.xb).replaceAll("{yb}",x.yb).replaceAll("{xc}",x.xc).replaceAll("{yc}",x.yc).replaceAll("{xd}",x.xd).replaceAll("{yd}",x.yd),C=w);u.push(o.linkOpenTag.replaceAll("{id}",e.id).replaceAll("{class}","link "+y.tags.join(" ")).replaceAll("{child-id}",y.id));var P={node:e,cnode:y,p:x,html:C,action:s};o.events.publish("render-link",[t,P]),u.push(P.html),a&&f.push({id:e.id,childId:y.id,html:P.html});var V="";for(var G in t.config.linkBinding){var O=t.config.linkBinding[G],T=t._get(y.id);if(T){var L=T[O];P.value=L,P.element=d[G],P.name=O,o.events.publish("label",[t,P])!==!1&&(o.isNEU(P.value)||o.isNEU(P.element)||(V+=P.element.replace("{val}",P.value)))}}if(V!=""){var Z=x.x,U=x.y;y.movey!=null&&(U+=y.movey),V=o.linkFieldsOpenTag.replace("{x}",Z).replace("{y}",U).replace("{rotate}",0)+V+o.grCloseTag,u.push(V)}u.push(o.grCloseTag)}return a?f:u.join("")},svg:function(e,t,n,r,i,s){return o.t(r.template,!1,s).svg.replace("{w}",e).replace("{h}",t).replace("{viewBox}",n).replace("{randId}",o.ui._defsIds[r.template]).replace("{mode}",r.mode).replace("{template}",r.template).replace("{content}",function(){return i})},menuButton:function(e){return e.menu==null?"":o.t(e.template,!1).menuButton.replaceAll("{p}",e.padding)},_roundedEdge:function(e,t,n,r,i,s){var a,c,l,d=o.LINK_ROUNDED_CORNERS,u=0;return e==n&&e==i||t==r&&t==s?(a=l=n,c=u=r):(e!=i&&n==i&&(a=l=n,c=r,t<s?u=r+d:t>s&&(u=r-d)),e<i&&n==i?n-=d:e>i&&n==i&&(n+=d),t!=s&&r==s&&(a=n,c=u=r,e<i?l=n+d:e>i&&(l=n-d)),t<s&&r==s?r-=d:t>s&&r==s&&(r+=d)),{x1:e,y1:t,x2:n,y2:r,x3:i,y3:s,qx1:a,qy1:c,qx2:l,qy2:u}},_linkTopToBottom:function(e,t,n,r,i){var s,a,c,l,d,u=0;return s=e.x+e.w/2+n.linkAdjuster.toX,a=e.y+e.h+n.linkAdjuster.toY,l=c=t.x+t.w/2+n.linkAdjuster.fromX,d=t.y+n.linkAdjuster.fromY,{xa:s,ya:a,xb:s,yb:u=e.rightNeighbor&&e.rightNeighbor.isAssistant&&t.templateName=="split"?e.rightNeighbor.y+e.rightNeighbor.h+r:e.templateName=="split"&&(t.isAssistant||t.layout>1)?d:t.templateName=="split"?a+r:i??d-r,xc:c,yc:u,xd:l,yd:d,x:c,y:o.isNEU(t.parentPartner)?u+16:u,rotate:0}},_linkBottomToTop:function(e,t,n,r,i){var s,a,c,l,d,u=0;return s=e.x+e.w/2+n.linkAdjuster.toX,a=e.y+n.linkAdjuster.toY,l=c=t.x+t.w/2+n.linkAdjuster.fromX,d=t.y+t.h+n.linkAdjuster.fromY,{xa:s,ya:a,xb:s,yb:u=e.rightNeighbor&&e.rightNeighbor.isAssistant&&t.templateName=="split"?e.rightNeighbor.y-r:e.templateName=="split"&&(t.isAssistant||t.layout>1)?d:t.templateName=="split"?a-r:i??d+r,xc:c,yc:u,xd:l,yd:d,x:c,y:u-14,rotate:0}},_linkRightToLeft:function(e,t,n,r,i){var s,a,c,l,d,u,f=0;return s=e.x+n.linkAdjuster.toX,a=e.y+e.h/2+n.linkAdjuster.toY,d=t.x+t.w+n.linkAdjuster.fromX,u=l=t.y+t.h/2+n.linkAdjuster.fromY,c=a,{xa:s,ya:a,xb:f=e.rightNeighbor&&e.rightNeighbor.isAssistant&&t.templateName=="split"?e.rightNeighbor.x-r:e.templateName=="split"&&(t.isAssistant||t.layout>1)?d:t.templateName=="split"?s-r:i??d+r,yb:c,xc:f,yc:l,xd:d,yd:u,x:f-16,y:l,rotate:90}},_linkLeftToRight:function(e,t,n,r,i){var s,a,c,l,d,u,f=0;return s=e.x+e.w+n.linkAdjuster.toX,a=e.y+e.h/2+n.linkAdjuster.toY,d=t.x+n.linkAdjuster.fromX,u=l=t.y+t.h/2+n.linkAdjuster.fromY,c=a,{xa:s,ya:a,xb:f=e.rightNeighbor&&e.rightNeighbor.isAssistant&&t.templateName=="split"?e.rightNeighbor.x+e.rightNeighbor.w+r:e.templateName=="split"&&(t.isAssistant||t.layout>1)?d:t.templateName=="split"?s+r:i??d-r,yb:c,xc:f,yc:l,xd:d,yd:u,x:f+14,y:l,rotate:270}},_linkPpTop:function(e,t,n,r,i,s){var a=e.ppnodes[n.id],c=a.y+a.h/2,l=r.minY-(r.minY-i.maxY)/2,d=(r.minY-i.maxY)/e.maxSidePartnersWithChildren/4,u=o.ui.__linkPpBottomTop(e,t,n,l,d,a),f=u.x;return l=u.mid,o.ui._linkTopToBottom({x:f,y:c,w:0,h:0},n,s,0,l)},_linkPpBottom:function(e,t,n,r,i,s){var a=e.ppnodes[n.id],c=a.y+a.h/2,l=r.maxY-(r.maxY-i.minY)/2,d=(r.maxY-i.minY)/e.maxSidePartnersWithChildren/4,u=o.ui.__linkPpBottomTop(e,t,n,l,d,a),f=u.x;return l=u.mid,o.ui._linkBottomToTop({x:f,y:c,w:0,h:0},n,s,0,l)},_linkPpLeft:function(e,t,n,r,i,s){var a=e.ppnodes[n.id],c=r.minX-(r.minX-i.maxX)/2,l=(r.minX-i.maxX)/e.maxSidePartnersWithChildren/4,d=a.x+a.w/2,u=o.ui.__linkPpLeftRight(e,t,n,c,l,a),f=u.y;return c=u.mid,o.ui._linkLeftToRight({x:d,y:f,w:0,h:0},n,s,0,c)},_linkPpRight:function(e,t,n,r,i,s){var a=e.ppnodes[n.id],c=r.maxX-(r.maxX-i.minX)/2,l=(r.maxX-i.minX)/e.maxSidePartnersWithChildren/4,d=a.x+a.w/2,u=o.ui.__linkPpLeftRight(e,t,n,c,l,a),f=u.y;return c=u.mid,o.ui._linkRightToLeft({x:d,y:f,w:0,h:0},n,s,0,c)},__linkPpBottomTop:function(e,t,n,r,i,s){var a=0;return s.isPartner==1?(a=s.x-t.partnerSeparation/2+e.indexes[n.id]*e.partnerChildrenSplitSeparation-(e.rightIds.length-1)*e.partnerChildrenSplitSeparation/2,e.lastLeft&&a<e.lastLeft.x+e.lastLeft.w/2?a<n.x+n.w/2?r-=(e.indexes[n.id]+1)*i:r-=(e.rightIds.length-e.indexes[n.id])*i:a<n.x+n.w/2?r+=(e.rightIds.length-e.indexes[n.id])*i:r+=(e.indexes[n.id]+1)*i):s.isPartner==2&&(a=s.x+s.w+t.partnerSeparation/2+e.indexes[n.id]*e.partnerChildrenSplitSeparation-(e.leftIds.length-1)*e.partnerChildrenSplitSeparation/2,e.firstRight&&a>e.firstRight.x+e.firstRight.w/2?a<n.x+n.w/2?r-=(e.indexes[n.id]+1)*i:r-=(e.leftIds.length-e.indexes[n.id])*i:a<n.x+n.w/2?r+=(e.leftIds.length-e.indexes[n.id])*i:r+=(e.indexes[n.id]+1)*i),{x:a,mid:r}},__linkPpLeftRight:function(e,t,n,r,i,s){var a=0;return s.isPartner==1?(a=s.y-t.partnerSeparation/2+e.indexes[n.id]*e.partnerChildrenSplitSeparation-(e.rightIds.length-1)*e.partnerChildrenSplitSeparation/2,e.lastLeft&&a<e.lastLeft.y+e.lastLeft.h/2?a<n.y+n.h/2?r-=(e.indexes[n.id]+1)*i:r-=(e.rightIds.length-e.indexes[n.id])*i:a<n.y+n.h/2?r+=(e.rightIds.length-e.indexes[n.id])*i:r+=(e.indexes[n.id]+1)*i):s.isPartner==2&&(a=s.y+s.h+t.partnerSeparation/2+e.indexes[n.id]*e.partnerChildrenSplitSeparation-(e.leftIds.length-1)*e.partnerChildrenSplitSeparation/2,e.firstRight&&a>e.firstRight.y+e.firstRight.h/2?a<n.y+n.h/2?r-=(e.indexes[n.id]+1)*i:r-=(e.leftIds.length-e.indexes[n.id])*i:a<n.y+n.h/2?r+=(e.leftIds.length-e.indexes[n.id])*i:r+=(e.indexes[n.id]+1)*i),{y:a,mid:r}},_draggableLinkPath:function(e,t,n,r,i,s){if(n.isPartner||n.isAssistant)return null;if(o._isMoved(n)&&!o._isMoved(t)){var a=[];switch(s){case o.orientation.top:case o.orientation.top_left:if(r.yb+i/2<r.yd)return null;l=r.xa<r.xd?n.x-i/2:n.x+n.w+i/2,d=n.y-i/2;break;case o.orientation.bottom:case o.orientation.bottom_left:if(r.yb-i/2>r.yd)return null;l=r.xa<r.xd?n.x-i/2:n.x+n.w+i/2,d=n.y+n.h+i/2;break;case o.orientation.right:case o.orientation.right_top:if(r.xb-i/2>r.xd)return null;d=r.ya<r.yd?n.y-i/2:n.y+n.h+i/2,l=n.x+n.w+i/2;break;case o.orientation.left:case o.orientation.left_top:if(r.xb+i/2<r.xd)return null;d=r.ya<r.yd?n.y-i/2:n.y+n.h+i/2,l=n.x-i/2}switch(s){case o.orientation.top:case o.orientation.top_left:case o.orientation.bottom:case o.orientation.bottom_left:a.push(["M",r.xa,r.ya]),a.push(["L",r.xb,r.yb]),a.push(["L",l,r.yb]),a.push(["L",l,d]),a.push(["L",r.xd,d]),a.push(["L",r.xd,r.yd]);break;case o.orientation.right:case o.orientation.right_top:case o.orientation.left:case o.orientation.left_top:(a=[]).push(["M",r.xa,r.ya]),a.push(["L",r.xb,r.yb]),a.push(["L",r.xb,d]),a.push(["L",l,d]),a.push(["L",l,r.yd]),a.push(["L",r.xd,r.yd])}return o.roundPathCorners(a,o.LINK_ROUNDED_CORNERS,!1)}if(!o._isMoved(n)&&o._isMoved(t)){var c=!1;switch(a=[],s){case o.orientation.top:case o.orientation.top_left:if(r.ya+i/2>r.yb)c=!0,l=r.xa<r.xd?t.x+t.w+i/2:t.x-i/2,d=t.y+t.h+i;else{if(r.yb+i/2<r.yd)return null;l=r.xa<r.xd?n.x-i/2:n.x+n.w+i/2,d=n.y-i/2}break;case o.orientation.bottom:case o.orientation.bottom_left:if(r.ya-i/2<r.yb)c=!0,l=r.xa<r.xd?t.x+t.w+i/2:t.x-i/2,d=t.y-i;else{if(r.yb-i/2>r.yd)return null;l=r.xa<r.xd?n.x-i/2:n.x+n.w+i/2,d=n.y+n.h+i/2}break;case o.orientation.right:case o.orientation.right_top:if(r.xa-i/2<r.xb)c=!0,d=r.ya<r.yd?t.y+t.h+i/2:t.y-i/2,l=t.x-i;else{if(r.xb-i/2>r.xd)return null;d=r.ya<r.yd?n.y-i/2:n.y+n.h+i/2,l=n.x+n.w+i/2}break;case o.orientation.left:case o.orientation.left_top:if(r.xa+i/2>r.xb)c=!0,d=r.ya<r.yd?t.y+t.h+i/2:t.y-i/2,l=t.x+t.w+i;else{if(r.xb+i/2<r.xd)return null;d=r.ya<r.yd?n.y-i/2:n.y+n.h+i/2,l=n.x-i/2}}if(c)switch(s){case o.orientation.top:case o.orientation.top_left:case o.orientation.bottom:case o.orientation.bottom_left:a.push(["M",r.xa,r.ya]),a.push(["L",r.xa,d]),a.push(["L",l,d]),a.push(["L",l,r.yc]),a.push(["L",r.xc,r.yc]),a.push(["L",r.xd,r.yd]);break;case o.orientation.right:case o.orientation.right_top:case o.orientation.left:case o.orientation.left_top:a.push(["M",r.xa,r.ya]),a.push(["L",l,r.ya]),a.push(["L",l,d]),a.push(["L",r.xc,d]),a.push(["L",r.xc,r.yc]),a.push(["L",r.xd,r.yd])}else switch(s){case o.orientation.top:case o.orientation.top_left:case o.orientation.bottom:case o.orientation.bottom_left:a.push(["M",r.xa,r.ya]),a.push(["L",r.xb,r.yb]),a.push(["L",l,r.yb]),a.push(["L",l,d]),a.push(["L",r.xd,d]),a.push(["L",r.xd,r.yd]);break;case o.orientation.right:case o.orientation.right_top:case o.orientation.left:case o.orientation.left_top:a.push(["M",r.xa,r.ya]),a.push(["L",r.xb,r.yb]),a.push(["L",r.xb,d]),a.push(["L",l,d]),a.push(["L",l,r.yd]),a.push(["L",r.xd,r.yd])}return o.roundPathCorners(a,o.LINK_ROUNDED_CORNERS,!1)}if(o._isMoved(n)&&o._isMoved(t)){switch(a=[],s){case o.orientation.top:case o.orientation.top_left:if(r.ya+i>r.yd){var l=r.xa<r.xd?t.x+t.w+i/2:t.x-i/2,d=t.y+t.h+i,u=n.y-i;a.push(["M",r.xa,r.ya]),a.push(["L",r.xa,d]),a.push(["L",l,d]),a.push(["L",l,u]),a.push(["L",r.xc,u]),a.push(["L",r.xd,r.yd])}else a.push(["M",r.xa,r.ya]),a.push(["L",r.xa,t.y+t.h+i]),a.push(["L",r.xc,t.y+t.h+i]),a.push(["L",r.xd,r.yd]);break;case o.orientation.bottom:case o.orientation.bottom_left:r.ya-i<r.yd?(l=r.xa<r.xd?t.x+t.w+i/2:t.x-i/2,d=t.y-i,u=n.y+n.h+i,a.push(["M",r.xa,r.ya]),a.push(["L",r.xa,d]),a.push(["L",l,d]),a.push(["L",l,u]),a.push(["L",r.xc,u]),a.push(["L",r.xd,r.yd])):(a.push(["M",r.xa,r.ya]),a.push(["L",r.xa,t.y-i]),a.push(["L",r.xc,t.y-i]),a.push(["L",r.xd,r.yd]));break;case o.orientation.right:case o.orientation.right_top:if(r.xa-i<r.xd){d=r.ya<r.yd?t.y+t.h+i/2:t.y-i/2,l=t.x-i;var f=n.x+n.w+i;a.push(["M",r.xa,r.ya]),a.push(["L",l,r.ya]),a.push(["L",l,d]),a.push(["L",f,d]),a.push(["L",f,r.yc]),a.push(["L",r.xd,r.yd])}else a.push(["M",r.xa,r.ya]),a.push(["L",t.x-i,r.ya]),a.push(["L",t.x-i,r.yc]),a.push(["L",r.xd,r.yd]);break;case o.orientation.left:case o.orientation.left_top:r.xa+i>r.xd?(d=r.ya<r.yd?t.y+t.h+i/2:t.y-i/2,l=t.x+t.w+i,f=n.x-i,a.push(["M",r.xa,r.ya]),a.push(["L",l,r.ya]),a.push(["L",l,d]),a.push(["L",f,d]),a.push(["L",f,r.yc]),a.push(["L",r.xd,r.yd])):(a.push(["M",r.xa,r.ya]),a.push(["L",t.x+t.w+i,r.ya]),a.push(["L",t.x+t.w+i,r.yc]),a.push(["L",r.xd,r.yd]))}return o.roundPathCorners(a,o.LINK_ROUNDED_CORNERS,!1)}return null}},o.ui._base_nodeBtns=o.ui.nodeBtns,o.ui.nodeBtns=function(e,t,n,r,i){var s="";return i._tree_menu_temp?!t.isSplit&&n!==o.action.exporting&&r.nodeTreeMenuCloseButton&&i._tree_menu_temp.id==t.id&&(s+=r.nodeTreeMenuCloseButton):(s=o.ui._base_nodeBtns(e,t,n,r,i),e.nodeTreeMenu!=null&&!t.isSplit&&n!==o.action.exporting&&r.nodeTreeMenuButton&&(s+=r.nodeTreeMenuButton.replace("{id}",t.id))),s},o.ui._base_expandCollapseBtn=o.ui.expandCollapseBtn,o.ui.expandCollapseBtn=function(e,t,n,r,i){return e._tree_menu_temp?"":o.ui._base_expandCollapseBtn(e,t,n,r,i)},o.xScrollUI=function(e,t,n,r,i){this.element=e,this.requestParams=n,this.config=t,this.onSetViewBoxCallback=r,this.onDrawCallback=i,this.position=0,this.bar=null,this._event_id=o._guid()},o.xScrollUI.prototype.addListener=function(e){var t=this;if((this.config.mouseScrool==o.action.xScroll||this.config.mouseScrool==o.action.scroll)&&this.bar){var n=navigator.userAgent.indexOf("Mac OS")!==-1,r=o._getScrollSensitivity();(function(i,s,a){var c=!1;function l(){c=!0;var u=(t.position-t.bar.scrollLeft)/a;if(u>0)u++;else{if(u==0)return void(c=!1);u--}Math.ceil(t.bar.scrollLeft)==Math.ceil(t.position)?c=!1:(t.bar.scrollLeft+=u,d(l))}i.addEventListener("wheel",function(u){if(!u.ctrlKey){var f=0;if(t.config.mouseScrool==o.action.xScroll)(f=u.deltaX||u.wheelDeltaX)||(f=u.deltaY||u.wheelDeltaY);else if(t.config.mouseScrool==o.action.scroll&&!(f=n||!u.shiftKey?u.deltaX||u.wheelDeltaX:u.deltaY||u.wheelDeltaY))return;f=-f,f=Math.max(-1,Math.min(1,f)),t.position+=-f*s;var p=parseFloat(t.innerBar.clientWidth)-parseFloat(t.bar.clientWidth);t.position<0&&(t.position=0),t.position>p&&(t.position=p),c||l()}},{passive:!0});var d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(u){setTimeout(u,20)}})(e,r.speed,r.smooth)}},o.xScrollUI.prototype.create=function(e){if(this.config.showXScroll===o.scroll.visible||this.config.mouseScrool===o.action.scroll||this.config.mouseScrool===o.action.xScroll){var t=this;this.bar&&this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.bar=document.createElement("div"),this.innerBar=document.createElement("div"),this.requestParams(),this.innerBar.innerHTML="&nbsp",Object.assign(this.bar.style,{position:"absolute",left:0,bottom:0,width:e+"px","overflow-x":"scroll",height:"20px"}),this.element.appendChild(this.bar),this.bar.appendChild(this.innerBar),this.bar.addEventListener("scroll",function(){if(this.ignore)this.ignore=!1;else{var n=t.requestParams(),r=(parseFloat(t.innerBar.clientWidth)-parseFloat(t.bar.clientWidth))/100,i=this.scrollLeft/r,s=(n.boundary.right-n.boundary.left)/100;n.viewBox[0]=i*s+n.boundary.left,t.onSetViewBoxCallback(n.viewBox),clearTimeout(this._timeout),this._timeout=setTimeout(function(){t.onDrawCallback()},500)}})}},o.xScrollUI.prototype.setPosition=function(){if(this.bar){var e=this.requestParams(),t=(Math.abs(e.boundary.maxX-e.boundary.minX)+2*this.config.padding)*e.scale;switch(this.config.orientation){case o.orientation.right:case o.orientation.right_top:t=Math.abs(e.boundary.minX*e.scale)}this.innerBar.style.width=t+"px";var n=(e.boundary.right-e.boundary.left)/100,r=(e.viewBox[0]-e.boundary.left)/n;r<0?r=0:r>100&&(r=100);var i=(parseFloat(this.innerBar.clientWidth)-parseFloat(this.bar.clientWidth))/100,s=r*i;this.bar.ignore=!0,this.bar.scrollLeft=s,this.position=this.bar.scrollLeft,this.bar.style.visibility=i<=0?"hidden":"",this.config.showXScroll!==o.scroll.visible&&(this.bar.style.visibility="hidden"),o.events.publish("change",[this,{isScrollBarVisible:this.bar.style.visibility!="hidden"}])}},o.xScrollUI.prototype.on=function(e,t){return o.events.on(e,t,this._event_id),this},o.yScrollUI=function(e,t,n,r,i){this.element=e,this.requestParams=n,this.config=t,this.onSetViewBoxCallback=r,this.onDrawCallback=i,this.position=0,this.bar=null,this._event_id=o._guid()},o.yScrollUI.prototype.addListener=function(e){var t=this;if((this.config.mouseScrool==o.action.yScroll||this.config.mouseScrool==o.action.scroll)&&this.bar){var n=navigator.userAgent.indexOf("Mac OS")!==-1,r=o._getScrollSensitivity();(function(i,s,a){var c=!1;function l(){c=!0;var u=(t.position-t.bar.scrollTop)/a;if(u>0)u++;else{if(u==0)return void(c=!1);u--}Math.ceil(t.bar.scrollTop)==Math.ceil(t.position)?c=!1:(t.bar.scrollTop+=u,d(l))}i.addEventListener("wheel",function(u){if(!u.ctrlKey){var f=0;if(t.config.mouseScrool==o.action.yScroll)(f=u.deltaY||u.wheelDeltaY)||(f=u.deltaX||u.wheelDeltaX);else if(t.config.mouseScrool==o.action.scroll&&!(f=n||!u.shiftKey?u.deltaY||u.wheelDeltaY:u.deltaX||u.wheelDeltaX))return;f=-f,f=Math.max(-1,Math.min(1,f)),t.position+=-f*s;var p=parseFloat(t.innerBar.clientHeight)-parseFloat(t.bar.clientHeight);t.position<0&&(t.position=0),t.position>p&&(t.position=p),c||l()}},{passive:!0});var d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(u){setTimeout(u,20)}})(e,r.speed,r.smooth)}},o.yScrollUI.prototype.create=function(e){if(this.config.showYScroll===o.scroll.visible||this.config.mouseScrool===o.action.scroll||this.config.mouseScrool===o.action.yScroll){var t=this;this.bar&&this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.bar=document.createElement("div"),this.innerBar=document.createElement("div"),this.innerBar.innerHTML="&nbsp",Object.assign(this.bar.style,{position:"absolute",right:0,bottom:0,height:e+"px","overflow-y":"scroll",width:"20px"}),this.element.appendChild(this.bar),this.bar.appendChild(this.innerBar),this.bar.addEventListener("scroll",function(){if(this.ignore)this.ignore=!1;else{var n=t.requestParams(),r=(parseFloat(t.innerBar.clientHeight)-parseFloat(t.bar.clientHeight))/100,i=this.scrollTop/r,s=(n.boundary.bottom-n.boundary.top)/100;n.viewBox[1]=i*s+n.boundary.top,t.onSetViewBoxCallback(n.viewBox),clearTimeout(this._timeout),this._timeout=setTimeout(function(){t.onDrawCallback()},500)}})}},o.yScrollUI.prototype.setPosition=function(){if(this.bar){var e=this.requestParams(),t=(Math.abs(e.boundary.maxY-e.boundary.minY)+2*this.config.padding)*e.scale;switch(this.config.orientation){case o.orientation.bottom:case o.orientation.bottom_left:t=Math.abs(e.boundary.minY*e.scale)}this.innerBar.style.height=t+"px";var n=(e.boundary.bottom-e.boundary.top)/100,r=(e.viewBox[1]-e.boundary.top)/Math.abs(n);r<0?r=0:r>100&&(r=100);var i=(parseFloat(this.innerBar.clientHeight)-parseFloat(this.bar.clientHeight))/100,s=r*i;this.bar.ignore=!0,this.bar.scrollTop=s,this.position=this.bar.scrollTop,this.bar.style.visibility=i<=0?"hidden":"",this.config.showYScroll!==o.scroll.visible&&(this.bar.style.visibility="hidden"),o.events.publish("change",[this,{isScrollBarVisible:this.bar.style.visibility!="hidden"}])}},o.yScrollUI.prototype.on=function(e,t){return o.events.on(e,t,this._event_id),this},o.prototype.zoom=function(e,t,n,r){var i=this.getViewBox().slice(0),s=i,a=i[2],c=i[3];e===!0?(i[2]=i[2]/o.SCALE_FACTOR,i[3]=i[3]/o.SCALE_FACTOR):e===!1?(i[2]=i[2]*o.SCALE_FACTOR,i[3]=i[3]*o.SCALE_FACTOR):(i[2]=i[2]/e,i[3]=i[3]/e),t||(t=[50,50]),i[0]=s[0]-(i[2]-a)/(100/t[0]),i[1]=s[1]-(i[3]-c)/(100/t[1]);var l=this.getScale(i);if(i[2]=this.width()/l,i[3]=this.height()/l,e===!0&&l<this.config.scaleMax||e===!1&&l>this.config.scaleMin||e!=0&&e!=1&&l<this.config.scaleMax&&l>this.config.scaleMin){this._hideBeforeAnimation();var d=this;n?(clearTimeout(d._timeout),o.animate(this.getSvg(),{viewbox:this.getViewBox()},{viewbox:i},this.config.anim.duration,this.config.anim.func,function(){clearTimeout(d._timeout),d._timeout=setTimeout(function(){d._draw(!0,o.action.zoom,null,r)},500)})):(this.setViewBox(i),clearTimeout(d._timeout),d._timeout=setTimeout(function(){d._draw(!0,o.action.zoom,null,r)},500))}},o.loading={},o.loading.show=function(e){var t=document.createElement("div");t.id="bft-loading",t.innerHTML='<style>@-webkit-keyframes dot-keyframes {0% { opacity: .4; -webkit-transform: scale(1, 1);transform: scale(1, 1);}50% {opacity: 1;-webkit-transform: scale(1.2, 1.2);transform: scale(1.2, 1.2);}100% {opacity: .4;-webkit-transform: scale(1, 1);transform: scale(1, 1);}}@keyframes dot-keyframes {0% {opacity: .4;-webkit-transform: scale(1, 1);transform: scale(1, 1);}50% {opacity: 1;-webkit-transform: scale(1.2, 1.2);transform: scale(1.2, 1.2);}100% {opacity: .4;-webkit-transform: scale(1, 1);transform: scale(1, 1);}}.bft-loading-dots div {margin: 10px;}      .bft-dot-1 {background-color: #039BE5;}.bft-dot-2 {background-color: #F57C00;}.bft-dot-3 {background-color: #FFCA28;}      .bft-loading-dots {text-align: center;width: 100%; position: absolute; top: 0;}.bft-loading-dots--dot {-webkit-animation: dot-keyframes 1.5s infinite ease-in-out;animation: dot-keyframes 1.5s infinite ease-in-out;        border-radius: 10px;display: inline-block;height: 10px;width: 10px;}.bft-loading-dots--dot:nth-child(2) {-webkit-animation-delay: .5s;animation-delay: .5s;}.bft-loading-dots--dot:nth-child(3) {-webkit-animation-delay: 1s;animation-delay: 1s;}</style><div class="bft-loading-dots"><div class="bft-loading-dots--dot bft-dot-1"></div><div class="bft-loading-dots--dot bft-dot-2"></div><div class="bft-loading-dots--dot bft-dot-3"></div></div>',e.element.appendChild(t)},o.loading.hide=function(e){var t=e.element.querySelector("#bft-loading");t&&t.parentNode.removeChild(t)},o.pdfPrevUI={},o.loc||(o.loc={}),o.loc.ppdfCmdTitle="PDF Preview",o.loc.ppdfSave="Save",o.loc.ppdfCancel="Cancel",o.loc.ppdfFormat="Format",o.loc.ppdfFitToDrwaing="Fit",o.loc.ppdfA4="A4",o.loc.ppdfA3="A3",o.loc.ppdfA2="A2",o.loc.ppdfA1="A1",o.loc.ppdfLetter="Letter",o.loc.ppdfLegal="Legal",o.loc.ppdfLayout="Layout",o.loc.ppdfPortrait="Portrait",o.loc.ppdfLandscape="Landscape",o.loc.ppdfFittopagewidth="Fit to page width",o.loc.ppdfMargin="Margin",o.loc.ppdfHeader="Header",o.loc.ppdfFooter="Footer",o.loc.ppdfScale="Scale",o.pdfPrevUI.show=function(e,t){o.pdfPrevUI.hide(e),t=e._defaultExportOptions(t,"pdf");var n=document.createElement("div");n.classList.add(e.config.mode),n.id="bft-ppdf-btns",Object.assign(n.style,{position:"absolute",top:0,left:0,"background-color":"#fff","z-index":5,margin:"0 0 0 -265px","box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",width:"265px",height:"100%","font-family":"Roboto,Helvetica",color:"#757575","text-align":"right",padding:"10px"}),e.element.appendChild(n),n.innerHTML="<h1>"+o.loc.ppdfCmdTitle+'</h1><div><button type="button" id="bft-prev-save" style="font-size: 14px; width: 90px;">'+o.loc.ppdfSave+'</button>&nbsp;<button type="button" id="bft-prev-cancel" style="width: 90px;font-size: 14px;">'+o.loc.ppdfCancel+'</button></div><div style="margin-top:30px; height:10px;border-bottom:1px solid #eeeeee;"></div><div style="padding-top:30px;"><label for="bft-size">'+o.loc.ppdfFormat+': </label><select id="bft-ppdf-size" style="color: #757575; width: 150px; font-size: 14px;" id="bft-size"><option value="fit">'+o.loc.ppdfFitToDrwaing+'</option><option value="A4">'+o.loc.ppdfA4+'</option><option value="A3">'+o.loc.ppdfA3+'</option><option value="A2">'+o.loc.ppdfA2+'</option><option value="A1">'+o.loc.ppdfA1+'</option><option value="Letter">'+o.loc.ppdfLetter+'</option><option value="Legal">'+o.loc.ppdfLegal+'</option></select></div><div style="padding-top:10px;"><label for="bft-ppdf-layout">'+o.loc.ppdfLayout+': </label><select id="bft-ppdf-layout" style="color: #757575; width: 150px;font-size: 14px;" ><option value="false">'+o.loc.ppdfPortrait+'</option><option value="true">'+o.loc.ppdfLandscape+'</option></select></div><div style="padding-top:10px;"><label for="bft-scale">'+o.loc.ppdfScale+': </label><select id="bft-ppdf-scale" style="color: #757575; width: 150px;font-size: 14px;" id="bft-scale"><option value="fit">'+o.loc.ppdfFittopagewidth+'</option><option value="10">10%</option><option value="20">20%</option><option value="30">30%</option><option value="40">40%</option><option value="50">50%</option><option value="60">60%</option><option value="70">70%</option><option value="80">80%</option><option value="90">90%</option><option value="100">100%</option><option value="110">110%</option><option value="120">120%</option><option value="130">130%</option><option value="140">140%</option><option value="150">150%</option><option value="160">160%</option><option value="170">170%</option><option value="180">180%</option><option value="190">190%</option><option value="200">200%</option></select></div><div style="margin-top:10px;margin-bottom:10px; height:10px;border-bottom:1px solid #eeeeee;"></div><div style="padding-top:10px;"><label for="bft-ppdf-header">'+o.loc.ppdfHeader+': </label><input id="bft-ppdf-header" type="text" style="color: #757575; width: 100px;font-size: 14px;" ></div><div style="padding-top:10px;"><label for="bft-ppdf-footer">'+o.loc.ppdfFooter+': </label><input id="bft-ppdf-footer" type="text" style="color: #757575; width: 100px;font-size: 14px;" ></div><div style="padding-top:10px;"><label for="bft-ppdf-margin">'+o.loc.ppdfMargin+': </label><input id="bft-ppdf-margin" type="text" style="color: #757575; width: 100px;font-size: 14px;" ></div>';var r=document.createElement("div");r.id="bft-ppdf-wrapper",Object.assign(r.style,{"overflow-y":"scroll","z-index":11,position:"absolute",top:0,left:"285px","background-color":"#eee",width:e.width()-270+"px",height:"100%"}),e.element.appendChild(r),r.innerHTML='<div id="bft-ppdf-content" style="width: 100%;margin-top:10px;margin-bottom:10px;opacity:0;"></div>';var i,s,a,c=e.element.querySelector("#bft-ppdf-size"),l=e.element.querySelector("#bft-ppdf-layout"),d=e.element.querySelector("#bft-ppdf-scale"),u=e.element.querySelector("#bft-ppdf-margin"),f=e.element.querySelector("#bft-ppdf-header"),p=e.element.querySelector("#bft-ppdf-footer");c.value=t.format,l.value=t.landscape,d.value=t.scale,u.value=t.margin,f.value=t.header,p.value=t.footer,o.animate(e.element.querySelector("#bft-ppdf-btns"),{margin:[0,0,0,-250]},{margin:[0,0,0,0]},300,o.anim.outSin,function(){e.exportPDF(t,o.pdfPrevUI._handler)}),e.element.querySelector("#bft-prev-cancel").addEventListener("click",function(){o.pdfPrevUI.hide(e)}),e.element.querySelector("#bft-prev-save").addEventListener("click",function(){e.exportPDF(t),o.pdfPrevUI.hide(e)}),o.pdfPrevUI._showHide(c,l,d),c.addEventListener("change",function(){o.animate(e.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,o.anim.inSin,function(){e.element.querySelector("#bft-ppdf-content").innerHTML="",t.format=c.value,e.exportPDF(t,o.pdfPrevUI._handler),o.pdfPrevUI._showHide(c,l,d)})}),l.addEventListener("change",function(){o.animate(e.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,o.anim.inSin,function(){e.element.querySelector("#bft-ppdf-content").innerHTML="",t.landscape=l.value=="true",e.exportPDF(t,o.pdfPrevUI._handler),o.pdfPrevUI._showHide(c,l,d)})}),d.addEventListener("change",function(){o.animate(e.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,o.anim.inSin,function(){e.element.querySelector("#bft-ppdf-content").innerHTML="",t.scale=d.value,e.exportPDF(t,o.pdfPrevUI._handler),o.pdfPrevUI._showHide(c,l,d)})}),u.addEventListener("keyup",function(){clearTimeout(i),i=setTimeout(function(){o.animate(e.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,o.anim.inSin,function(){e.element.querySelector("#bft-ppdf-content").innerHTML="";var h=u.value.split(",");if(h.length==4){for(var m=0;m<h.length;m++)h[m]=parseInt(h[m]);t.margin=h,e.exportPDF(t,o.pdfPrevUI._handler)}})},1e3)}),f.addEventListener("keyup",function(){clearTimeout(s),s=setTimeout(function(){o.animate(e.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,o.anim.inSin,function(){e.element.querySelector("#bft-ppdf-content").innerHTML="",t.header=f.value,e.exportPDF(t,o.pdfPrevUI._handler)})},1e3)}),p.addEventListener("keyup",function(){clearTimeout(a),a=setTimeout(function(){o.animate(e.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,o.anim.inSin,function(){e.element.querySelector("#bft-ppdf-content").innerHTML="",t.footer=p.value,e.exportPDF(t,o.pdfPrevUI._handler)})},1e3)})},o.pdfPrevUI._showHide=function(e,t,n){e.value=="A4"||e.value=="A3"||e.value=="A2"||e.value=="A1"||e.value=="Letter"||e.value=="Legal"?(t.parentNode.style.display="block",n.parentNode.style.display="block"):(t.parentNode.style.display="none",n.parentNode.style.display="none")},o.pdfPrevUI._handler=function(e,t,n){var r=t.options,i=t.pages,s=r.margin[0],a=r.margin[2],c=document.createElement("div");c.classList.add(e.config.mode),c.innerHTML=n.outerHTML,o._browser().msie&&(c.innerHTML=new XMLSerializer().serializeToString(n));for(var l=c.querySelector("svg"),d=e.element.querySelector("#bft-ppdf-content"),u=0;u<i.length;u++){var f=document.createElement("iframe");Object.assign(f.style,{display:"block",margin:"10px auto",border:"1px solid #eeeeee","box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"}),d.appendChild(f),l&&l.style.backgroundColor?f.style.backgroundColor=l.style.backgroundColor:f.style.backgroundColor="#fff";var p=f.contentWindow.document;p.open(),f.style.width=i[u].size.w+"px",f.style.height=i[u].size.h+"px",f.style.margin="10 auto",i[u].backgroundColor&&(f.style.backgroundColor=i[u].backgroundColor);var h=r.header;i[u].header&&(h=i[u].header),h&&(h=h.replace("{current-page}",u+1).replace("{total-pages}",i.length));var m=r.footer;i[u].footer&&(m=i[u].footer),m&&(m=m.replace("{current-page}",u+1).replace("{total-pages}",i.length)),i[u].html?p.write(o._exportHtml(i[u].html,t.styles,r,i[u].innerSize.w,i[u].innerSize.h,h,m,e.config.mode)):(l.setAttribute("viewBox",i[u].vb),p.write(o._exportHtml(c.innerHTML,t.styles,r,i[u].innerSize.w,i[u].innerSize.h,h,m,e.config.mode)));var b=p.getElementById("bft-header"),_=p.getElementById("bft-footer");if(b){var g=s-b.offsetHeight-7;b.style.top=g+"px"}if(_){var w=a-_.offsetHeight-7;_.style.bottom=w+"px"}p.close()}var y=e.element.querySelector("#bft-ppdf-content");o.animate(y,{opacity:0},{opacity:1},300,o.anim.outSin)},o.pdfPrevUI._getViewBox=function(e){var t=null;return e?(t=(t="["+(t=e.getAttribute("viewBox"))+"]").replace(/\ /g,","),t=JSON.parse(t)):null},o._exportHtml=function(e,t,n,r,i,s,a,c){for(var l="",d=0;d<n.margin.length;d++)l+=n.margin[d]+"px ";var u='<!DOCTYPE html><html style="margin:0;padding:0;"><head></head>'+t+'<body class="bft-'+c+'" style="margin:0; padding:0;"><div style="margin: '+l+";overflow:hidden;width:"+r+"px;height:"+i+'px">';return s&&(u+='<div id="bft-header" style="width:'+r+"px;color:#757575;position:absolute;left:"+n.margin[3]+'px;top:0;">'+s+"</div>"),u+=e,a&&(u+='<div id="bft-footer" style="width:'+r+"px;color:#757575;position:absolute;left:"+n.margin[3]+'px;bottom:0;">'+a+"</div>"),u+="</div>",u+="</body></html>"},o.pdfPrevUI.hide=function(e){var t=e.element.querySelector("#bft-ppdf-wrapper");if(t){t.parentNode.removeChild(t),t.style.opacity=0;var n=e.element.querySelector("#bft-ppdf-btns");n.parentNode.removeChild(n)}},o===void 0&&(o={}),o.events.on("renderdefs",function(e,t){for(var n=0;n<e.config.clinks.length;n++){var r=e.config.clinks[n].template;r||(r="orange");var i=o.clinkTemplates[r];t.defs+=i.defs}}),o.events.on("prerender",function(e,t){o.RENDER_CLINKS_BEFORE_NODES&&e._clink(e,t)}),o.events.on("render",function(e,t){o.RENDER_CLINKS_BEFORE_NODES||e._clink(e,t)}),o.events.on("drag",function(e,t,n,r){if(e instanceof o&&e.config.movable&&r)for(var i=0;i<r.length;i++){for(var s=r[i],a=e.element.querySelectorAll(`[data-c-l-from="${s}"]`),c=e.element.querySelectorAll(`[data-c-l-to="${s}"]`),l=0;l<a.length;l++)a[l].parentNode.removeChild(a[l]);for(l=0;l<c.length;l++)c[l].parentNode.removeChild(c[l])}}),o.prototype._clink=function(e,t){for(var n="",r=0;r<this.config.clinks.length;r++){let E=function(D,R,M){M==null&&(M=1);var N=R.x-D.x,P=R.y-D.y,V=Math.sqrt(Math.pow(R.x-D.x,2)+Math.pow(R.y-D.y,2))/3;return V=V/(Math.sqrt(N*N+P*P)*M)*o.clinkCurve(i),{x:D.x+N/2-P*V,y:D.y+P/2+N*V}};var I=E,i=this.config.clinks[r],s=e.getNode(i.from),a=e.getNode(i.to);if(s&&t.res.visibleNodeIds.indexOf(s.id)!=-1&&a&&t.res.visibleNodeIds.indexOf(a.id)!=-1){var c=s.x,l=s.y,d=a.x,u=a.y,f={},p={},h=c+s.w/2,m=d+a.w/2,b=l+s.h/2,_=u+a.h/2,g=1;switch(this.config.orientation){case o.orientation.top:case o.orientation.top_left:h<=m?(g=1,f.x=h+s.w/10,p.x=m-a.w/10):(g=-1,f.x=h-s.w/10,p.x=m+a.w/10),l==u?(g=1,f.y=l,p.y=u):l>u?(f.y=l,p.y=u+a.h):(f.y=l+s.h,p.y=u);break;case o.orientation.bottom:case o.orientation.bottom_left:h<=m?(g=-1,f.x=h+s.w/10,p.x=m+a.w/10):(g=1,f.x=h-s.w/10,p.x=m+a.w/10),l==u?(g=-1,f.y=l+s.h,p.y=u+a.h):l>u?(f.y=l,p.y=u+a.h):(f.y=l+s.h,p.y=u);break;case o.orientation.left:case o.orientation.left_top:b<=_?(g=-1,f.y=b+s.h/5,p.y=_+a.h/5):(g=1,f.y=b-s.h/5,p.y=_+a.h/5),c==d?(g=-1,f.x=c,p.x=d):c>d?(f.x=c,p.x=d+a.w):(f.x=c+s.w,p.x=d);break;case o.orientation.right:case o.orientation.right_top:b<=_?(g=1,f.y=b+s.h/5,p.y=_+a.h/5):(g=-1,f.y=b-s.h/5,p.y=_+a.h/5),c==d?(g=1,f.x=c+s.w,p.x=d+a.w):c>d?(f.x=c,p.x=d+a.w):(f.x=c+s.w,p.x=d)}var w=E(f,p,g),y=i.template;y||(y="orange");var v=o.clinkTemplates[y];if(i.label){var x=o.clinkLabelPosition(i,f,p,w);n+=v.label.replace("{x}",x.x).replace("{y}",x.y).replace("{val}",i.label)}var C="M"+f.x+","+f.y+"C"+f.x+","+f.y+" "+w.x+","+w.y+" "+p.x+","+p.y;n+=("<g "+o.attr.c_link_from+'="{from}" '+o.attr.c_link_to+'="{to}">').replace("{from}",s.id).replace("{to}",a.id)+v.link.replaceAll("{d}",C)+'<path stroke="transparent" stroke-width="15" fill="none" d="'+C+'" />',n+=o.grCloseTag}}t.content+=n},o.clinkLabelPosition=function(e,t,n,r){var i=(n.x-t.x)/2+t.x,s=(n.y-t.y)/2+t.y;return{x:(i-r.x)/2+r.x,y:(s-r.y)/2+r.y}},o.clinkCurve=function(e){return o.CLINK_CURVE},o.prototype.addClink=function(e,t,n,r){this._putInUndoStack(),this.clearRedo();for(var i=this.config.clinks.length-1;i>=0;i--){var s=this.config.clinks[i];s.from==e&&s.to==t&&this.config.clinks.splice(i,1)}return this.config.clinks.push({from:e,to:t,label:n,template:r}),o.events.publish("updated",[this]),this},o.prototype.removeClink=function(e,t){this._putInUndoStack(),this.clearRedo();for(var n=this.config.clinks.length-1;n>=0;n--){var r=this.config.clinks[n];r.from==e&&r.to==t&&this.config.clinks.splice(n,1)}return o.events.publish("updated",[this]),this},o.clinkTemplates={},o.clinkTemplates.orange={defs:'<marker id="arrowOrange" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#F57C00" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotOrange" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#F57C00" /></marker>',link:'<path marker-start="url(#dotOrange)" marker-end="url(#arrowOrange)" stroke="#F57C00" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#F57C00" text-anchor="middle" x="{x}" y="{y}">{val}</text>'},o.clinkTemplates.blue={defs:'<marker id="arrowBlue" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#039BE5" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotBlue" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#039BE5" /></marker>',link:'<path marker-start="url(#dotBlue)" marker-end="url(#arrowBlue)" stroke="#039BE5" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#039BE5"  text-anchor="middle" x="{x}" y="{y}">{val}</text>'},o.clinkTemplates.yellow={defs:'<marker id="arrowYellow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#FFCA28" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotYellow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#FFCA28" /></marker>',link:'<path marker-start="url(#dotYellow)" marker-end="url(#arrowYellow)" stroke="#FFCA28" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#FFCA28"  text-anchor="middle" x="{x}" y="{y}">{val}</text>'},o===void 0&&(o={}),o.events.on("renderdefs",function(e,t){for(var n=0;n<e.config.slinks.length;n++){var r=e.config.slinks[n].template;r||(r="orange");var i=o.slinkTemplates[r];t.defs+=i.defs}}),o.events.on("render",function(e,t){e._slinks(e,t)}),o.events.on("drag",function(e,t,n,r){if(e instanceof o&&e.config.movable&&r)for(var i=0;i<r.length;i++){for(var s=r[i],a=e.element.querySelectorAll(`[data-s-l-from="${s}"]`),c=e.element.querySelectorAll(`[data-s-l-to="${s}"]`),l=0;l<a.length;l++)a[l].parentNode.removeChild(a[l]);for(l=0;l<c.length;l++)c[l].parentNode.removeChild(c[l])}}),o.prototype._slinks=function(e,t){var n="",r=this.getScale(),i=t.res.boundary;function s(u,f,p){var h=[],m=null,b="left",_=u.lcn?u.lcn:"base",g=e._layoutConfigs[_];switch(g.orientation){case o.orientation.top:case o.orientation.top_left:case o.orientation.bottom:case o.orientation.bottom_left:f.x>u.x&&(b="right");break;case o.orientation.left:case o.orientation.left_top:case o.orientation.right:case o.orientation.right_top:b="top",f.y>u.y&&(b="bottom")}var w=o.t(u.templateName,u.min,r),y=g.levelSeparation;u.parent&&u.parent.layout&&(y=g.mixedHierarchyNodesSeparation);var v={p:u.x+u.w/2+w.expandCollapseSize,q:u.y,r:u.x+u.w/2+w.expandCollapseSize,s:i.minY+y};if(u.sl==f.sl)switch(m=f,g.orientation){case o.orientation.top:case o.orientation.top_left:h.push([v.p,v.q]),h.push([v.p,v.q-y/3]),w=o.t(m.templateName,m.min,r),h.push([m.x+m.w/2+w.expandCollapseSize,h[h.length-1][1]]),h.push([h[h.length-1][0],m.y]);break;case o.orientation.bottom:case o.orientation.bottom_left:v.q=u.y+u.h,v.s=i.maxY-y,h.push([v.p,v.q]),h.push([v.r,u.y+u.h+y/3]),w=o.t(m.templateName,m.min,r),h.push([m.x+m.w/2+w.expandCollapseSize,h[h.length-1][1]]),h.push([h[h.length-1][0],m.y+m.h]);break;case o.orientation.left:case o.orientation.left_top:v.p=u.x,v.q=u.y+u.h/2+w.expandCollapseSize,v.r=i.minX-y,v.s=u.y+u.h/2+w.expandCollapseSize,h.push([v.p,v.q]),h.push([u.x-y/3,v.q]),w=o.t(m.templateName,m.min,r),h.push([h[h.length-1][0],m.y+m.h/2+w.expandCollapseSize]),h.push([m.x,h[h.length-1][1]]);break;case o.orientation.right:case o.orientation.right_top:v.p=u.x+u.w,v.q=u.y+u.h/2+w.expandCollapseSize,v.r=i.maxX+y,v.s=u.y+u.h/2+w.expandCollapseSize,h.push([v.p,v.q]),h.push([u.x+u.w+y/3,v.q]),w=o.t(m.templateName,m.min,r),h.push([h[h.length-1][0],m.y+m.h/2+w.expandCollapseSize]),h.push([m.x+m.w,h[h.length-1][1]])}else{switch(g.orientation){case o.orientation.top:case o.orientation.top_left:h.push([v.p,v.q]),h.push([v.r,u.y-y/3]);break;case o.orientation.bottom:case o.orientation.bottom_left:v.q=u.y+u.h,v.s=i.maxY-y,h.push([v.p,v.q]),h.push([v.r,u.y+u.h+y/3]);break;case o.orientation.left:case o.orientation.left_top:v.p=u.x,v.q=u.y+u.h/2+w.expandCollapseSize,v.r=i.minX-y,v.s=u.y+u.h/2+w.expandCollapseSize,h.push([v.p,v.q]),h.push([u.x-y/3,v.q]);break;case o.orientation.right:case o.orientation.right_top:v.p=u.x+u.w,v.q=u.y+u.h/2+w.expandCollapseSize,v.r=i.maxX+y,v.s=u.y+u.h/2+w.expandCollapseSize,h.push([v.p,v.q]),h.push([u.x+u.w+y/3,v.q])}for(var x=u,C=u;C.parent;)C=C.parent;for(;m==null;){var I=!1,E=x.parent,D=E.leftNeighbor,R=E.rightNeighbor;if(E.id==f.id?m=E:o._intersects(E,v,g)&&(v=o._addPoint(E,h,g,v,b),I=!0),E.id!=f.id){for(;D;){if(D.id==f.id){m=D;break}o._intersects(D,v,g)&&(v=o._addPoint(D,h,g,v,b),I=!0),D=D.leftNeighbor}for(;R;){if(R.id==f.id){m=R;break}o._intersects(R,v,g)&&(v=o._addPoint(R,h,g,v,b),I=!0),R=R.rightNeighbor}}if(!I){var M=h[h.length-1][0],N=0;if(E.parent){y=g.levelSeparation,E.parent.layout&&(y=g.mixedHierarchyNodesSeparation);var P=e.manager.bordersByRootIdAndLevel[C.id][E.parent.sl];switch(g.orientation){case o.orientation.top:case o.orientation.top_left:N=P.maxY+y*(2/3);break;case o.orientation.bottom:case o.orientation.bottom_left:N=P.minY-y*(2/3);break;case o.orientation.left:case o.orientation.left_top:M=P.maxX+y*(2/3),N=h[h.length-1][1];break;case o.orientation.right:case o.orientation.right_top:M=P.minX-y*(2/3),N=h[h.length-1][1]}}h.push([M,N])}x=E}switch(w=o.t(m.templateName,m.min,r),h.splice(h.length-1,1),g.orientation){case o.orientation.top:case o.orientation.top_left:h.push([m.x+m.w/2+w.expandCollapseSize,h[h.length-1][1]]),h.push([h[h.length-1][0],m.y+m.h]);break;case o.orientation.bottom:case o.orientation.bottom_left:h.push([m.x+m.w/2+w.expandCollapseSize,h[h.length-1][1]]),h.push([h[h.length-1][0],m.y]);break;case o.orientation.left:case o.orientation.left_top:h.push([h[h.length-1][0],m.y+m.h/2+w.expandCollapseSize]),h.push([m.x+m.w,h[h.length-1][1]]);break;case o.orientation.right:case o.orientation.right_top:h.push([h[h.length-1][0],m.y+m.h/2+w.expandCollapseSize]),h.push([m.x,h[h.length-1][1]])}}var V=c.template;V||(V="orange");var G,O,T=null;switch((w=o.slinkTemplates[V]).labelPosition){case"start":T={x:h[1][0],y:h[1][1]};break;case"middle":var L=Math.ceil(h.length/2);G=h[L],O=h[L-1],T={x:(G[0]+O[0])/2,y:(G[1]+O[1])/2};break;case"end":T={x:h[h.length-2][0],y:h[h.length-2][1]}}p&&(h=h.reverse()),h[0].unshift("M");for(var Z=1;Z<h.length;Z++)h[Z].unshift("L");var U=o.roundPathCorners(h,o.LINK_ROUNDED_CORNERS,!1);if(c.label){var W=w.label.replace("{x}",T.x).replace("{y}",T.y).replace("{val}",c.label),de=o._getLabelSize(W),S=-de.height/2;switch(g.orientation){case o.orientation.bottom:case o.orientation.bottom_left:S=de.height}n+=w.label.replace("{x}",T.x).replace("{y}",T.y+S).replace("{val}",c.label)}var re=u.id,k=f.id;p&&(re=f.id,k=u.id),n+=("<g "+o.attr.s_link_from+'="{from}" '+o.attr.s_link_to+'="{to}">').replace("{from}",re).replace("{to}",k)+w.link.replaceAll("{d}",U)+'<path stroke="transparent" stroke-width="15" fill="none" d="'+U+'" />',n+=o.grCloseTag}for(var a=0;a<this.config.slinks.length;a++){var c=this.config.slinks[a],l=e.getNode(c.from),d=e.getNode(c.to);l&&d&&t.res.visibleNodeIds.indexOf(d.id)!=-1&&t.res.visibleNodeIds.indexOf(l.id)!=-1&&(l.sl>=d.sl?s(l,d,!1):s(d,l,!0))}t.content+=n},o.prototype.addSlink=function(e,t,n,r){this._putInUndoStack(),this.clearRedo();for(var i=this.config.slinks.length-1;i>=0;i--){var s=this.config.slinks[i];s.from==e&&s.to==t&&this.config.slinks.splice(i,1)}return this.config.slinks.push({from:e,to:t,label:n,template:r}),o.events.publish("updated",[this]),this},o.prototype.removeSlink=function(e,t){this._putInUndoStack(),this.clearRedo();for(var n=this.config.slinks.length-1;n>=0;n--){var r=this.config.slinks[n];r.from==e&&r.to==t&&this.config.slinks.splice(n,1)}return o.events.publish("updated",[this]),this},o.slinkTemplates={},o.slinkTemplates.orange={defs:'<marker id="arrowSlinkOrange" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#F57C00" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotSlinkOrange" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#F57C00" /></marker>',link:'<path stroke-dasharray="4, 2" marker-start="url(#dotSlinkOrange)" marker-end="url(#arrowSlinkOrange)" stroke-linejoin="round" stroke="#F57C00" stroke-width="2" fill="none" d="{d}" />',label:'<text dominant-baseline="middle" fill="#F57C00" alignment-baseline="middle" text-anchor="middle" x="{x}" y="{y}">{val}</text>',labelPosition:"middle"},o.slinkTemplates.blue={defs:'<marker id="arrowSlinkBlue" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#039BE5" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotSlinkBlue" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#039BE5" /></marker>',link:'<path stroke-dasharray="4, 2" marker-start="url(#dotSlinkBlue)" marker-end="url(#arrowSlinkBlue)" stroke-linejoin="round" stroke="#039BE5" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#039BE5" text-anchor="middle" x="{x}" y="{y}">{val}</text>',labelPosition:"middle"},o.slinkTemplates.yellow={defs:'<marker id="arrowSlinkYellow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#FFCA28" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotSlinkYellow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#FFCA28" /></marker>',link:'<path stroke-dasharray="4, 2" marker-start="url(#dotSlinkYellow)" marker-end="url(#arrowSlinkYellow)" stroke-linejoin="round" stroke="#FFCA28" stroke-width="2" fill="none" d="{d}" />',label:'<text  fill="#FFCA28" text-anchor="middle" x="{x}" y="{y}">{val}</text>',labelPosition:"middle"},o.events.on("renderbuttons",function(e,t){if(t.node&&t.node.tags&&t.node.tags.has("group-dotted-lines")){var n=e.getScale(),r=o.t(t.node.templateName,t.node.min,n),i="";t.node.min?(r.nodeGroupDottedOpenButton||console.error(`[${t.node.templateName}].nodeGroupDottedOpenButton is not defined`),i+=`<g style="cursor:pointer;"  data-ctrl-n-dotted-open="${t.node.id}" transform="matrix(1,0,0,1,${t.node.x},${t.node.y})">`,i+=r.nodeGroupDottedOpenButton):(r.nodeGroupDottedCloseButton||console.error(`[${t.node.templateName}].nodeGroupDottedCloseButton is not defined`),i+=`<g style="cursor:pointer;" transform="matrix(1,0,0,1,${t.node.x},${t.node.y})" data-ctrl-n-dotted-close="${t.node.id}">`,i+=r.nodeGroupDottedCloseButton),i=(i+="</g>").replaceAll("{cw}",t.node.w/2).replaceAll("{ch}",t.node.h/2).replaceAll("{ew}",t.node.w-(t.node.padding?t.node.padding[1]:0)).replaceAll("{eh}",t.node.h-(t.node.padding?t.node.padding[2]:0));var s=e.getNode(t.node.stChildrenIds[0]);if(i.indexOf("{collapsed-children-count}")!=-1){var a=o.collapsedChildrenCount(e,s);i=i.replace("{collapsed-children-count}",a)}if(i.indexOf("{collapsed-children-total-count}")!=-1){var c=o.collapsedChildrenTotalCount(e,s);i=i.replace("{collapsed-children-total-count}",c)}if(i.indexOf("{children-count}")!=-1){var l=o.childrenCount(e,s);i=i.replace("{children-count}",l)}if(i.indexOf("{children-total-count}")!=-1){var d=o.childrenTotalCount(e,s);i=i.replace("{children-total-count}",d)}t.html+=i}}),o.events.on("redraw",function(e,t){if(e.config.groupDottedLines.length){for(var n=e.element.querySelectorAll("[data-ctrl-n-dotted-close]"),r=0;r<n.length;r++)n[r].addEventListener("click",function(){var s=this.getAttribute("data-ctrl-n-dotted-close");e.minimize(s)});var i=e.element.querySelectorAll("[data-ctrl-n-dotted-open]");for(r=0;r<i.length;r++)i[r].addEventListener("click",function(){var s=this.getAttribute("data-ctrl-n-dotted-open");e.maximize(s)})}}),o===void 0&&(o={}),o.prototype.undo=function(e){if(this.config.undoRedoStorageName){var t=this.undoStepsCount();if(t!=0){this._putInRedoStack();var n=`${this.config.undoRedoStorageName}_undo_`+(t-1),r=sessionStorage.getItem(n);sessionStorage.removeItem(n);var i=JSON.parse(r);this.config.nodes=i.nodes,this.config.clinks=i.clinks,this.config.slinks=i.slinks,this.config.groupDottedLines=i.groupDottedLines,this.config.dottedLines=i.dottedLines,o.events.publish("updated",[this]),this.filterUI.update(),this.draw(o.action.update,void 0,e),this.undoRedoUI.refresh()}}},o.prototype.redo=function(e){if(this.config.undoRedoStorageName){var t=this.redoStepsCount();if(t!=0){this._putInUndoStack();var n=`${this.config.undoRedoStorageName}_redo_`+(t-1),r=sessionStorage.getItem(n);sessionStorage.removeItem(n);var i=JSON.parse(r);this.config.nodes=i.nodes,this.config.clinks=i.clinks,this.config.slinks=i.slinks,this.config.groupDottedLines=i.groupDottedLines,this.config.dottedLines=i.dottedLines,o.events.publish("updated",[this]),this.filterUI.update(),this.draw(o.action.update,void 0,e),this.undoRedoUI.refresh()}}},o.prototype.clearRedo=function(){if(this.config.undoRedoStorageName){for(var e=`${this.config.undoRedoStorageName}_redo_`,t=Object.keys(sessionStorage),n=0;t.indexOf(e+n)!=-1;)sessionStorage.removeItem(e+n),n++;this.undoRedoUI.refresh()}},o.prototype.clearUndo=function(){if(this.config.undoRedoStorageName){for(var e=`${this.config.undoRedoStorageName}_undo_`,t=Object.keys(sessionStorage),n=0;t.indexOf(e+n)!=-1;)sessionStorage.removeItem(e+n),n++;this.undoRedoUI.refresh()}},o.prototype.undoStepsCount=function(){for(var e=`${this.config.undoRedoStorageName}_undo_`,t=Object.keys(sessionStorage),n=0;t.indexOf(e+n)!=-1;)n++;return n},o.prototype.redoStepsCount=function(){for(var e=`${this.config.undoRedoStorageName}_redo_`,t=Object.keys(sessionStorage),n=0;t.indexOf(e+n)!=-1;)n++;return n},o.prototype._putInUndoStack=function(){if(this.config.undoRedoStorageName){var e=`${this.config.undoRedoStorageName}_undo_`+this.undoStepsCount();sessionStorage.setItem(e,JSON.stringify({nodes:this.config.nodes,clinks:this.config.clinks,slinks:this.config.slinks,groupDottedLines:this.config.groupDottedLines,dottedLines:this.config.dottedLines}))}},o.prototype._putInRedoStack=function(){if(this.config.undoRedoStorageName){var e=`${this.config.undoRedoStorageName}_redo_`+this.redoStepsCount();sessionStorage.setItem(e,JSON.stringify({nodes:this.config.nodes,clinks:this.config.clinks,slinks:this.config.slinks,groupDottedLines:this.config.groupDottedLines,dottedLines:this.config.dottedLines}))}},o===void 0&&(o={}),o.undoRedoUI=function(){this.instance=null,this._event_id=o._guid()},o.undoRedoUI.prototype.init=function(e){e.config.undoRedoStorageName&&(this.instance=e,this.refresh())},o.undoRedoUI.prototype.refresh=function(){var e=this;if(this.instance.config.undoRedoStorageName){var t={undoStepsCount:this.instance.undoStepsCount(),redoStepsCount:this.instance.redoStepsCount()};if(o.events.publish("change",[this,t])!==!1){var n=this.instance.element.querySelector("[data-undo]"),r=this.instance.element.querySelector("[data-redo]");if(!n||!r){var i=document.createElement("div");i.classList.add("bft-undo-redo"),i.innerHTML=`<span data-undo>${o.icon.undo(50,50,"")}<span class="bft-undo-i"></span></span>
                            <span data-redo>${o.icon.redo(50,50,"")}<span class="bft-redo-i"></span></span>`,this.instance.element.appendChild(i),n=this.instance.element.querySelector("[data-undo]"),r=this.instance.element.querySelector("[data-redo]"),n.addEventListener("click",function(){e.instance.undo()}),r.addEventListener("click",function(){e.instance.redo()})}t.undoStepsCount>0?(n.classList.add("bft-ur-clickable"),n.querySelector(".bft-undo-i").innerHTML=t.undoStepsCount,n.querySelector(".bft-undo-i").style.display="inline-block"):(n.classList.remove("bft-ur-clickable"),n.querySelector(".bft-undo-i").style.display="none"),t.redoStepsCount>0?(r.classList.add("bft-ur-clickable"),r.querySelector(".bft-redo-i").innerHTML=t.redoStepsCount,r.querySelector(".bft-redo-i").style.display="inline-block"):(r.classList.remove("bft-ur-clickable"),r.querySelector(".bft-redo-i").style.display="none")}}},o.undoRedoUI.prototype.on=function(e,t){return o.events.on(e,t,this._event_id),this},o.undoRedoUI.prototype.onChange=function(e){return this.on("change",function(t,n){return e.call(t,n)})},o.events.on("redraw",function(e,t){if(e.config.miniMap){if(e.manager.action!=o.action.move){o.miniMap._settings._scale=Math.min(o.miniMap.width/(e.response.boundary.maxX-e.response.boundary.minX),o.miniMap.height/(e.response.boundary.maxY-e.response.boundary.minY)),o.miniMap._settings._translateX=-e.response.boundary.minX*o.miniMap._settings._scale+(o.miniMap.width-(e.response.boundary.maxX-e.response.boundary.minX)*o.miniMap._settings._scale)/2,o.miniMap._settings._translateY=-e.response.boundary.minY*o.miniMap._settings._scale+(o.miniMap.height-(e.response.boundary.maxY-e.response.boundary.minY)*o.miniMap._settings._scale)/2;var n=e.getViewBox();o.miniMap._init(e),o.miniMap._drawMainCanvas(e),o.miniMap._drawRectSelectorCanvas(e,n);var r,i,s,a,c=e.element.querySelector('[data-id="mini-map-focus"]'),l=!1,d=null;c.onmousedown=function(f){var p,h,m,b=c.getBoundingClientRect(),_=b.left,g=b.top;if(r=parseInt(f.clientX-_),i=parseInt(f.clientY-g),p=i,h=(r-o.miniMap._settings._translateX)/o.miniMap._settings._scale,m=(p-o.miniMap._settings._translateY)/o.miniMap._settings._scale,h>n[0]&&h<n[0]+n[2]&&m>n[1]&&m<n[1]+n[3])return f.preventDefault(),f.stopPropagation(),void(l=!0)},c.onmousemove=function(f){if(l){f.preventDefault(),f.stopPropagation(),o.miniMap._mouseMove=!0;var p=c.getBoundingClientRect(),h=p.left,m=p.top;s=parseInt(f.clientX-h),a=parseInt(f.clientY-m);var b=(s-r)/o.miniMap._settings._scale,_=(a-i)/o.miniMap._settings._scale;n[0]=b+n[0],n[1]=_+n[1],e.setViewBox(n),d&&(clearTimeout(d),d=null),d=setTimeout(function(){e._draw(!0,o.action.move)},300),o.miniMap._drawRectSelectorCanvas(e,n),r=s,i=a}},c.onmouseup=function(f){l&&(f.preventDefault(),f.stopPropagation(),l=!1)},c.onmouseout=function(f){l&&(f.preventDefault(),f.stopPropagation(),l=!1,o.miniMap._mouseMove=!1)},c.onclick=function(f){if(f.preventDefault(),f.stopPropagation(),o.miniMap._mouseMove)o.miniMap._mouseMove=!1;else{var p=c.getBoundingClientRect(),h=p.left,m=p.top;s=parseInt(f.clientX-h),a=parseInt(f.clientY-m);var b=s/o.miniMap._settings._scale,_=a/o.miniMap._settings._scale;n[0]=b-(n[0]+n[2]-n[0])/2-o.miniMap._settings._translateX/o.miniMap._settings._scale,n[1]=_-(n[1]+n[3]-n[1])/2-o.miniMap._settings._translateY/o.miniMap._settings._scale,e.setViewBox(n),d&&(clearTimeout(d),d=null),d=setTimeout(function(){e._draw(!0,o.action.move)},300),o.miniMap._drawRectSelectorCanvas(e,n)}}}}else{var u=e.element.querySelector('[data-id="mini-map"]');u&&u.parentNode.removeChild(u)}}),o.miniMap={},o.miniMap._settings={_translateX:0,_translateY:0,_scale:1},o.miniMap._drawMainCanvas=function(e){var t=e.element.querySelector('[data-id="mini-map-main"]'),n=t.getContext("2d");o.miniMap._initCtx(e,t,1);var r=0,i=[];(function s(a,c){if(Array.isArray(c))for(var l=0;l<c.length;l++)s(a,c[l]);else{for(n.fillStyle=o.miniMap.colors[3],n.beginPath(),n.lineWidth="0.5",n.fillRect(c.x,c.y,c.w,c.h),n.strokeRect(c.x,c.y,c.w,c.h),l=0;l<c.stChildrenIds.length;l++)r++,i.includes(c.id)||(r==1?n.fillStyle=o.miniMap.colors[0]:r==2?n.fillStyle=o.miniMap.colors[1]:r==3&&(n.fillStyle=o.miniMap.colors[2]),n.beginPath(),n.fillRect(c.x,c.y,c.w,c.h),n.strokeRect(c.x,c.y,c.w,c.h),i.push(c.id)),s(a,a.getNode(c.stChildrenIds[l])),r--;for(l=0;l<c.childrenIds.length;l++)s(a,a.getNode(c.childrenIds[l]))}})(e,e.roots)},o.miniMap._drawRectSelectorCanvas=function(e,t){var n=e.element.querySelector('[data-id="mini-map-focus"]'),r=n.getContext("2d");o.miniMap._initCtx(e,n,o.miniMap.opacity);var i=t[0],s=t[1],a=t[2],c=t[3];r.lineWidth=.5/o.miniMap._settings._scale,r.strokeStyle=o.miniMap.focusStroke,r.globalAlpha=1,r.clearRect(i,s,a,c),r.strokeRect(i,s,a,c)},o.miniMap._initCtx=function(e,t,n){var r=t.getContext("2d");t.width=t.width,t.height=t.height,r.clearRect(0,0,o.miniMap.width,o.miniMap.height),r.globalAlpha=n,n!=1&&(r.fillStyle=o.miniMap.selectorBackgroundColor,r.fillRect(0,0,o.miniMap.width,o.miniMap.height)),r.translate(o.miniMap._settings._translateX,o.miniMap._settings._translateY),r.scale(o.miniMap._settings._scale,o.miniMap._settings._scale)},o.miniMap._init=function(e){if(!e.element.querySelector('[data-id="mini-map"]')){var t=document.createElement("canvas");t.width=o.miniMap.width,t.height=o.miniMap.height,t.setAttribute("data-id","mini-map-main"),t.style.display="inline-block",t.style.backgroundColor=o.miniMap.backgroundColor,t.style.position="absolute",t.style.top=0,t.style.left=0;var n=document.createElement("canvas");n.width=o.miniMap.width,n.height=o.miniMap.height,n.setAttribute("data-id","mini-map-focus"),n.style.display="inline-block",n.style.position="absolute",n.style.top=0,n.style.left=0;var r=document.createElement("div");r.setAttribute("data-id","mini-map"),r.style.position="absolute";for(var i=["top","right","left","bottom"],s=0;s<i.length;s++){var a=i[s];o.isNEU(o.miniMap.position[a])||(o.miniMap.position[a]=="padding"?r.style[a]=e.config.padding+"px":r.style[a]=o.miniMap.position[a]+"px")}r.style.border=o.miniMap.border,r.style.padding=o.miniMap.padding+"px",r.style.backgroundColor=o.miniMap.backgroundColor;var c=document.createElement("div");c.style.position="relative",c.style.width=o.miniMap.width+"px",c.style.height=o.miniMap.height+"px",c.appendChild(t),c.appendChild(n),r.appendChild(c),e.element.appendChild(r);var l=function(h,m){e.__mouseScrollHandler(r,m)};e._addEvent(r,"DOMMouseScroll",l),e._addEvent(r,"mousewheel",l);var d=0,u=0,f=function(h){o.miniMap._mouseMove=!0;var m=h.clientX-d,b=h.clientY-u;if(!o.isNEU(r.style.left)){var _=parseFloat(r.style.left)+m;r.style.left=`${_}px`}if(!o.isNEU(r.style.right)){var g=parseFloat(r.style.right)-m;r.style.right=`${g}px`}if(!o.isNEU(r.style.bottom)){var w=parseFloat(r.style.bottom)-b;r.style.bottom=`${w}px`}if(!o.isNEU(r.style.top)){var y=parseFloat(r.style.top)+b;r.style.top=`${y}px`}d=h.clientX,u=h.clientY},p=function(){document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",p)};o.miniMap.draggable&&r.addEventListener("mousedown",function(h){d=h.clientX,u=h.clientY,document.addEventListener("mousemove",f),document.addEventListener("mouseup",p)})}},o.miniMap.colors=["#E0E0E0","#BDBDBD","#9E9E9E","#757575"],o.miniMap.selectorBackgroundColor="white",o.miniMap.backgroundColor="white",o.miniMap.focusStroke="#f57c00",o.miniMap.opacity=.4,o.miniMap.border="1px solid #aeaeae",o.miniMap.width=250,o.miniMap.height=140,o.miniMap.padding=5,o.miniMap.position={top:void 0,left:"padding",right:void 0,bottom:"padding"},o.miniMap.draggable=!0,o._search={},o._search.search=function(e,t,n,r,i,s,a){var c=[],l=t.toLowerCase(),d=l.split(" ");if(a&&d.length>1){var u=d[0];a[u]&&(n=[a[u]],d=(l=l.replace(u,"").trim()).split(" "))}d=d.filter(function(y,v,x){return x.indexOf(y)===v});for(var f={},p=0;p<e.length;p++)for(var h=e[p],m=0;m<n.length;m++){var b=n[m];if(!o.isNEU(h[b])){var _=h[b];if((t=o._search.searchAndComputeScore(d,_,b,s))!=null){var g=h.id;if(f[g]){if(f[g]&&f[g]<t.__score){f[g]=t.__score;for(var w=c.length-1;w>=0;w--)c[w].id==g&&c.splice(w,1);o._search.addNodeToResult(c,r,h,t,b,i)}}else f[g]=t.__score,o._search.addNodeToResult(c,r,h,t,b,i)}}}return c.sort(function(y,v){return y.__score<v.__score?1:y.__score>v.__score?-1:0}),c},o._search.addNodeToResult=function(e,t,n,r,i,s){var a={};a.id=n.id,o.isNEU(n[s])||(a[s]=n[s]);for(var c=0;c<t.length;c++){var l=t[c];o.isNEU(n[l])||o.isNEU(a[l])&&(a[l]=n[l])}r!=null&&(o.isNEU(a.__score)&&(a.__score=r.__score),o.isNEU(a.__searchField)&&(a.__searchField=i),o.isNEU(a.__searchMarks)&&(a.__searchMarks=r.__searchMarks)),e.push(a)},o._search.searchAndComputeScore=function(e,t,n,r){if(o.isNEU(t)||o.isNEU(e)||!e.length)return null;typeof t!="string"&&(t=t.toString());var i=t.toLowerCase(),s=o._search.searchIndexesOf(i,e);if(!s.length)return null;for(var a=i.length/100,c=0,l=0,d=c>0?100:0,u=0,f=0;f<e.length;f++)for(var p=e[f],h=0;h<s.length;h++)if(p.indexOf(s[h].searchPhrase)!=-1){u++;break}var m=100/(e.length/u);if(s.length){for(l=s[0].start,h=0;h<s.length;h++)if(c+=s[h].length,s[h].start<l&&(l=s[h].start),h>=1&&s[h-1].start>s[h].start){d=0;break}}var b=0;c!=0&&(b=c/a);var _=c>0?100:0;l!=0&&(_=100-l/a);var g=0;r&&r[n]&&(g=r[n]),m&&(m=m/100*50),b>0&&(b=b/100*10),_>0&&(_=_/100*10),d>0&&(d=d/100*10),g>0&&(g=g/100*20);var w=Math.round(1e4*(m+b+_+d+g));for(s.sort(function(v,x){return v.start<x.start?-1:v.start>x.start?1:0}),h=s.length-1;h>=0;h--)for(f=0;f<s.length;f++)f<h&&s[f].start+s[f].length>s[h].start&&s.splice(h,1);var y=t;for(h=s.length-1;h>=0;h--)y=(y=y.insert(s[h].start+s[h].length,"</mark>")).insert(s[h].start,"<mark>");return{__searchMarks:y,__score:w}},o._search.searchIndexesOf=function(e,t){var n=[];if(!o.isNEU(e))for(var r=0;r<t.length;r++){var i=t[r];if(!o.isNEU(i))for(var s=0;(s=e.indexOf(i,s))>-1;)n.push({length:i.length,start:s,searchPhrase:i}),s+=i.length}return n.sort(function(a,c){return a.length<c.length?1:a.length>c.length||a.start<c.start?-1:a.start>c.start?1:0}),n=n.filter(function(a){for(var c=!1,l=0;l<n.length;l++){var d=n[l].start,u=n[l].start+n[l].length-1,f=a.start,p=a.start+a.length-1;if(d==f&&u==p){c=!1;break}if(d>=f&&u<=p){c=!0;break}if(d<=f&&u>=p){c=!0;break}}return!c})},o.events.on("redraw",function(e,t){if(e.config.state){var n=[],r=[];(function i(s){if(Array.isArray(s))for(var a=0;a<s.length;a++)i(s[a]);else{for((typeof s.id!="string"||typeof s.id=="string"&&s.id.indexOf("split")==-1&&s.id.indexOf("mirror")==-1)&&(n.push(s.id),s.min==1&&r.push(s.id)),a=0;a<s.stChildren.length;a++)i(s.stChildren[a]);for(a=0;a<s.children.length;a++)i(s.children[a])}})(e.roots),o.state._put(e.config.roots,e.width(),e.height(),e.response.viewBox,n,r,e.response.adjustify,e.config.state)}}),o.state={},o.state._buildStateNames=function(e){return{paramScale:e+"-scale",paramX:e+"-x",paramY:e+"-y",paramExp:e+"-exp",paramMin:e+"-min",paramRoots:e+"-roots",paramAdjustify:e+"-adjustify"}},o.state._put=function(e,t,n,r,i,s,a,c){if(c&&!o.isNEU(i)&&i.length!=0){var l=o.state._buildStateNames(c.name),d={roots:e,scale:Math.min(t/r[2],n/r[3]),x:r[0],y:r[1],exp:i,min:s,adjustify:a};if(c.writeToUrlParams){var u=new URLSearchParams(window.location.search);u.has(l.paramScale)?u.set(l.paramScale,d.scale):u.append(l.paramScale,d.scale),u.has(l.paramX)?u.set(l.paramX,d.x):u.append(l.paramX,d.x),u.has(l.paramY)?u.set(l.paramY,d.y):u.append(l.paramY,d.y),u.has(l.paramExp)?u.set(l.paramExp,d.exp.join("*")):u.append(l.paramExp,d.exp.join("*")),u.has(l.paramRoots)&&Array.isArray(d.roots)?u.set(l.paramRoots,d.roots.join("*")):Array.isArray(d.roots)&&u.append(l.paramRoots,d.roots.join("*")),u.has(l.paramMin)?u.set(l.paramMin,d.min.join("*")):u.append(l.paramMin,d.min.join("*")),u.has(l.paramAdjustify)?u.set(l.paramAdjustify,d.adjustify.x+"*"+d.adjustify.y):u.append(l.paramAdjustify,d.adjustify.x+"*"+d.adjustify.y),window.history.replaceState(null,null,"?"+u)}c.writeToIndexedDB&&(d.id=c.name,o.idb.put(d,function(f){f==0&&console.error("Cannot write row - "+c.name)})),c.writeToLocalStorage&&o.localStorage.setItem(c.name,JSON.stringify(d))}},o.state._get=function(e,t,n,r){if(e){var i=o.state._buildStateNames(e.name);if(e.readFromUrlParams){var s=new URLSearchParams(window.location.search);if(s.has(i.paramScale)&&s.has(i.paramX)&&s.has(i.paramY)&&s.has(i.paramExp)&&s.has(i.paramMin)&&s.has(i.paramAdjustify)){var a={},c=parseFloat(s.get(i.paramScale)),l=parseFloat(s.get(i.paramX)),d=parseFloat(s.get(i.paramY));(f=[])[0]=l,f[1]=d,f[2]=t/c,f[3]=n/c,a.vb=f,a.scale=c,a.x=l,a.y=d,a.roots=null,s.has(i.paramRoots)&&(a.roots=s.get(i.paramRoots).split("*")),a.exp=s.get(i.paramExp).split("*"),a.min=s.get(i.paramMin).split("*");var u=s.get(i.paramAdjustify).split("*");return a.adjustify={x:parseFloat(u[0]),y:parseFloat(u[1])},void r(a)}if(!e.readFromIndexedDB&&!e.readFromLocalStorage)return void r(null)}if(e.readFromLocalStorage){var f;if((a=o.localStorage.getItem(e.name))!=null)return a=JSON.parse(a),(f=[])[0]=a.x,f[1]=a.y,f[2]=t/a.scale,f[3]=n/a.scale,a.vb=f,void r(a);if(!e.readFromIndexedDB)return void r(null)}e.readFromIndexedDB&&o.idb.read(e.name,function(p,h){if(p==0)console.error("Cannot read from - "+e.name),r(null);else if(p==null)r(null);else{var m=[];m[0]=h.x,m[1]=h.y,m[2]=t/h.scale,m[3]=n/h.scale,h.vb=m,r(h)}})}else r(null)},o.state.clear=function(e){if(!e)return!1;try{localStorage.removeItem(e);var t=o.state._buildStateNames(e),n=new URLSearchParams(window.location.search);n.has(t.paramScale)&&n.delete(t.paramScale),n.has(t.paramX)&&n.delete(t.paramX),n.has(t.paramY)&&n.delete(t.paramY),n.has(t.paramExp)&&n.delete(t.paramExp),n.has(t.paramRoots)&&n.delete(t.paramRoots),n.has(t.paramMin)&&n.delete(t.paramMin),n.has(t.paramAdjustify)&&n.delete(t.paramAdjustify),window.history.replaceState(null,null,"?"+n),o.idb.delete(e,function(r){r==0&&console.error("Cannot delete row - "+e)})}catch{}},o._magnify={},o.prototype.magnify=function(e,t,n,r,i){r||(r=this.config.anim);var s=this.getNode(e),a=this.getNodeElement(e);if(s||a){var c=o._magnify[e];c&&(c.timer!=null&&clearInterval(c.timer),c.timerBack!=null&&clearInterval(c.timerBack),a.setAttribute("transform","matrix("+c.transformStart.toString()+")"),o._magnify[e]=null),n&&(a=a.cloneNode(!0),this.getSvg().appendChild(a));var l=o._getTransform(a),d=JSON.parse(JSON.stringify(l));d[0]=t,d[3]=t;var u=s.w+s.w*(t-1),f=s.h+s.h*(t-1);d[4]+=(s.w-u)/2,d[5]+=(s.h-f)/2;var p=o.animate(a,{transform:l},{transform:d},r.duration,r.func);o._magnify[e]={timer:p,transformStart:l,nodeElement:a,front:n},i&&i(a)}},o.prototype.magnifyBack=function(e,t,n){t||(t=this.config.anim);var r=o._magnify[e];if(r){r.timer!=null&&clearInterval(r.timer),r.timerBack!=null&&clearInterval(r.timerBack);var i=o._getTransform(r.nodeElement);r.timerBack=o.animate(r.nodeElement,{transform:i},{transform:r.transformStart},t.duration,t.func,function(s){var a=s[0].getAttribute(o.attr.node_id);o._magnify[a]&&o._magnify[a].front&&(s[0].parentNode.removeChild(s[0]),o._magnify[a]=null),n&&n(s[0])})}},o===void 0&&(o={}),o.events.on("init",function(e,t){if(e.config.keyNavigation&&(e._addEvent(window,"keydown",e._windowKeyDownHandler),o.isNEU(e._keyNavigationActiveNodeId)&&e.roots&&e.roots.length)){var n=e.roots[0].id;o.isNEU(e.config.keyNavigation.focusId)||(n=e.config.keyNavigation.focusId),e._keyNavigationActiveNodeId=n,e.center(e._keyNavigationActiveNodeId)}}),o.prototype._windowKeyDownHandler=function(e,t){for(var n=t.target,r=null;n&&n!=this.element;){if(n.hasAttribute&&n.hasAttribute(o.attr.node_id)){r=n.getAttribute(o.attr.node_id);break}n=n.parentNode}if(n){var i=r?this.getNode(r):null,s={node:i,data:r?this.get(r):null,event:t};if(o.events.publish("key-down",[this,s])!==!1&&i){if(t.code=="KeyF")this.searchUI.find("");else if(t.code=="ArrowRight"||i.isAssistant&&t.code=="ArrowDown"||i.isPartner&&t.code=="ArrowDown"){if(l=this.getNode(i.pid)){var a=l.childrenIds.indexOf(i.id);if(++a<l.childrenIds.length){var c=l.childrenIds[a];this._keyNavigationActiveNodeId=c,this.center(c)}}}else if(t.code=="ArrowLeft")(l=this.getNode(i.pid))&&(a=l.childrenIds.indexOf(i.id),--a>=0&&(c=l.childrenIds[a],this._keyNavigationActiveNodeId=c,this.center(c)));else if(t.code=="ArrowUp"){var l;(l=this.getNode(i.pid))&&(c=l.id,(i.isAssistant||l.hasAssistants||i.isPartner||l.hasPartners)&&(a=l.childrenIds.indexOf(i.id),--a>=0&&(c=l.childrenIds[a])),this._keyNavigationActiveNodeId=c,this.center(c))}else if(t.code=="ArrowDown")i.childrenIds.length&&(this._keyNavigationActiveNodeId=i.childrenIds[0],this.center(i.childrenIds[0]));else if(t.code=="Space"){var d=n.getAttribute(o.attr.node_id);return void this.toggleExpandCollapse(d,t)}}}},o.events.on("redraw",function(e,t){e.config.keyNavigation&&o._keyNavigation(e)}),o.events.on("click",function(e,t){e.config&&e.config.keyNavigation&&(e._keyNavigationActiveNodeId=t.node.id,e.center(t.node.id))}),o._keyNavigation=function(e){var t=e.element.querySelector(":focus");if(t&&t.parentElement&&t.parentElement.hasAttribute(o.attr.node_id)){var n=t.parentElement;(i=(r=t).querySelector("title"))&&i.parentNode.removeChild(i),r.removeAttribute("tabindex")}if(!o.isNEU(e._keyNavigationActiveNodeId)&&(n=e.getNodeElement(e._keyNavigationActiveNodeId))&&n.children.length){var r;(r=n.children[0]).setAttribute("tabindex",2);var i,s={text:"",id:e._keyNavigationActiveNodeId};o.events.publish("screen-reader-text",[e,s]),!o.isNEU(s.text)&&((i=document.createElementNS("http://www.w3.org/2000/svg","title")).innerHTML=s.text,r.appendChild(i)),o.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&e.searchUI.hide(),r.focus()}},o.elements={},o.elements.textbox=function(e,t,n,r){var i=o.elements._vidrf(e,t,r);if(i.doNotRender)return{html:""};var s="";return t.btn&&(s=`<a href="#" data-input-btn="" class="bft-link bft-link-bft-button">${t.btn}</a>`),{html:`<div class="bft-form-field" style="min-width: ${n};">
                    <div class="bft-input" data-bft-input="" ${i.disabledAttribute} ${i.vlidators}>
                        <label for="${i.id}">${o._escapeGreaterLessSign(i.label)}</label>
                        <input ${i.readOnlyAttribute} data-binding="${o._escapeDoubleQuotes(i.binding)}" maxlength="256" id="${i.id}" name="${i.id}" type="text" value="${o._escapeDoubleQuotes(i.value)}" autocomplete="off">
                        ${s}
                    </div>
                </div>`,id:i.id,value:i.value}},o.elements.checkbox=function(e,t,n,r){var i=o.elements._vidrf(e,t,r);if(i.doNotRender)return{html:""};var s=i.value?"checked":"",a=r?'onclick="return false;"':"";return{html:`<div class="bft-form-field"  style="min-width: ${n};" >
                        <label class="bft-checkbox" data-bft-input="" ${i.disabledAttribute}>
                            <input ${s} ${a} data-binding="${o._escapeDoubleQuotes(i.binding)}" type="checkbox"><span class="bft-checkbox-checkmark" type="checkbox"></span>${o._escapeGreaterLessSign(i.label)}
                        </label>
                    </div>`,id:i.id,value:s}},o.elements.select=function(e,t,n,r){if(r)return o.elements.textbox(e,t,n,r);var i=o.elements._vidrf(e,t,r);return i.doNotRender?{html:""}:{html:`<div class="bft-form-field" style="min-width: ${n};">
                    <div class="bft-input" data-bft-input="" ${i.disabledAttribute} ${i.vlidators}>
                        <label for="${i.id}">${o._escapeGreaterLessSign(i.label)}</label>
                        <select data-binding="${o._escapeDoubleQuotes(i.binding)}" ${i.readOnlyAttribute} id="${i.id}" name="${i.id}">
                            ${function(){for(var s="",a=0;a<i.options.length;a++){var c=i.options[a];s+=`<option ${c.value==i.value?"selected":""} value="${o._escapeDoubleQuotes(c.value)}">${o._escapeGreaterLessSign(c.text)}</option>`}return s}()}                           
                        </select>
                    </div>
                </div>`,id:i.id,value:i.value}},o.elements.multiSelect=function(e,t,n,r){if(r)return o.elements.textbox(e,t,n,r);var i=o.elements._vidrf(e,t,r);return i.doNotRender?{html:""}:{html:`<div class="bft-form-field" style="min-width: ${n};">
                    <div class="bft-input" data-bft-input="" ${i.disabledAttribute} ${i.vlidators}>
                        <label for="${i.id}">${o._escapeGreaterLessSign(i.label)}</label>
                        <select class="multiple" data-binding="${o._escapeDoubleQuotes(i.binding)}" ${i.readOnlyAttribute} id="${i.id}" name="${i.id}" multiple>
                            ${function(){for(var s="",a=0;a<i.options.length;a++){var c=i.options[a];s+=`<option ${i.value.includes(c.value)?"selected":""} value="${o._escapeDoubleQuotes(c.value)}">${o._escapeGreaterLessSign(c.text)}</option>`}return s}()}                           
                        </select>
                    </div>
                </div>`,id:i.id,value:i.value}},o.elements.date=function(e,t,n,r){var i=o.elements._vidrf(e,t,r);return i.doNotRender?{html:""}:{html:`<div class="bft-form-field" style="min-width: ${n};">
                    <div class="bft-input" data-bft-input="" ${i.disabledAttribute} ${i.vlidators}>
                        <label for="${i.id}" class="hasval">${o._escapeGreaterLessSign(i.label)}</label>
                        <input data-binding="${o._escapeDoubleQuotes(i.binding)}" ${i.readOnlyAttribute} maxlength="256" id="${i.id}" name="${i.id}" type="date" value="${o._escapeDoubleQuotes(i.value)}" autocomplete="off">
                    </div>
                </div>`,id:i.id,value:i.value}},o.elements._vidrf=function(e,t,n){var r={};if(t.binding||(t.binding=""),t.label||(t.label=""),t.type!="select"||Array.isArray(t.options)?r.options=t.options:r.options=[],r.value=e&&!o.isNEU(e[t.binding])?e[t.binding]:"",n&&r.options){for(var i=0;i<r.options.length;i++)if(r.options[i].value==r.value){r.value=r.options[i].text;break}}if(r.id=o.elements.generateId(),r.disabledAttribute=n?"data-bft-input-disabled":"",r.readOnlyAttribute=n?"readonly":"",r.id=r.id,n&&o.isNEU(r.value)&&(r.doNotRender=!0),n&&t.binding=="photo"&&(r.id=null,r.doNotRender=!0),r.binding=t.binding,r.label=t.label,r.vlidators="",t.vlidators)for(var s in t.vlidators)r.vlidators+=`data-v-${s}="${t.vlidators[s]}" `;return r},o.elements.ids=[],o.elements.generateId=function(){for(;;){var e="_"+("0000"+(Math.random()*Math.pow(36,4)|0).toString(36)).slice(-4);if(!o.elements.ids.has(e))return o.elements.ids.push(e),e}},o.input={},o.input._timeout=null,o.input.initWithTimeout=function(){o.input._timeout&&(clearTimeout(o.input._timeout),o.input._timeout=null),o.input._timeout=setTimeout(o.input.init,200)},o.input.init=function(e){var t;t=e?e.querySelectorAll("[data-bft-input]"):document.querySelectorAll("[data-bft-input]");for(var n=0;n<t.length;n++){var r=t[n],i=null;r.type&&r.type.toLowerCase()=="hidden"&&(i=r),i||(i=r.querySelector("input")),i||(i=r.querySelector("select"));var s=r.querySelector("label");s&&(i.value||i.type=="select-one"&&i.selectedOptions&&i.selectedOptions.length&&i.selectedOptions[0].value==""&&i.selectedOptions[0].innerHTML)&&s.classList.add("hasval"),i.type.toLowerCase()!="checkbox"&&i.addEventListener("focus",function(){this.classList.remove("bft-validation-error");var a=this.parentNode.querySelector("label");a.classList.add("focused");var c=a.querySelector(".bft-validation-error-message");c&&c.parentNode.removeChild(c)}),i.type.toLowerCase()!="checkbox"&&i.addEventListener("blur",function(){o.input.blurHandler(this)})}},o.input.blurHandler=function(e){var t=e.parentNode.querySelector("label");t.classList.remove("focused"),e.value||e.type=="date"?t.classList.add("hasval"):t.classList.remove("hasval")},o.input.validate=function(e){var t=null;e.type&&e.type.toLowerCase()=="hidden"&&(t=e),t||(t=e.querySelector("input")),t||(t=e.querySelector("select"));var n=e.querySelector("label");if(t.classList.remove("bft-validation-error"),n){var r=n.querySelector(".bft-validation-error-message");r&&r.parentNode.removeChild(r)}!t.selectedOptions&&t.value&&(t.value=t.value.trim());var i=e.getAttribute("data-v-required"),s=e.getAttribute("data-v-password"),a=e.getAttribute("data-v-email"),c=e.getAttribute("data-v-emails");return i&&t.value==""?(n.innerHTML+='<span class="bft-validation-error-message">&nbsp;'+i+"</span>",t.classList.add("bft-validation-error"),!1):s&&!o.input.validatePassword(t.value)?(n.innerHTML+='<span class="bft-validation-error-message">&nbsp;'+s+"</span>",t.classList.add("bft-validation-error"),!1):a&&!o.input.isValidEmail(t.value)?(n.innerHTML+='<span class="bft-validation-error-message">&nbsp;'+a+"</span>",t.classList.add("bft-validation-error"),!1):!(c&&!o.input.isValidEmails(t.value))||(n.innerHTML+='<span class="bft-validation-error-message">&nbsp;'+c+"</span>",t.classList.add("bft-validation-error"),!1)},o.input.validateAndGetData=function(e){for(var t=e.querySelectorAll("[data-bft-input]"),n=!0,r=0;r<t.length;r++){var i=t[r];o.input.validate(i)||(n=!1)}if(!n)return!1;var s=e.querySelectorAll("[data-binding]"),a={};for(r=0;r<s.length;r++){var c=s[r],l=c.getAttribute("data-binding");if(c.type.toLowerCase()=="checkbox")a[l]=c.checked;else if(c.selectedOptions&&c.hasAttribute("multiple")){var d=c.selectedOptions;a[l]=Array.from(d).map(({value:u})=>u)}else a[l]=c.value}return a},o.input.validatePassword=function(e){return e&&(e=e.trim()),!(e.length<5)&&!(e.length>18)&&e.indexOf(" ")==-1},o.input.isValidEmails=function(e){if(e)for(var t=e.split(","),n=0;n<t.length;n++){var r=t[n].trim();if(!o.input.isValidEmail(r))return!1}return!0},o.input.isValidEmail=function(e){return e&&(e=e.trim()),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},o.prototype.hideTreeMenu=function(e,t){if(this._tree_menu_temp){var n=this._tree_menu_temp;if(this.manager.oldNodes=this.nodes,this.nodes=n.nodes,this.manager.maxX=n.maxX,this.manager.maxY=n.maxY,this.manager.minX=n.minX,this.manager.minY=n.minY,this.manager.roots=n.roots,this.manager.nodes=n.nodes,this.manager.rootList=n.rootList,this.manager.visibleNodeIds=n.visibleNodeIds,this.manager.bordersByRootIdAndLevel=n.bordersByRootIdAndLevel,this.config.roots=n.config.roots,this.config.nodes=n.config.nodes,this._tree_menu_temp=null,e){var r={id:n.id,animFromClickedNode:!1};this._draw(!0,o.action.update,r,function(){t&&t()})}}},o.prototype.showTreeMenu=function(e){this.editUI.hide(),e==null&&console.error("Call addNode without id");var t=this.getNode(e);t||console.error("Cannot get node id: "+e);var n=this.getNode(t.fid),r=this.getNode(t.mid),i=null,s=null,a=[],c=[];n&&(i=this.get(n.id)),r&&(s=this.get(r.id));for(var l=0;l<t.pids.length;l++){var d=this.get(t.pids[l]);d&&a.push(d)}for(l=0;l<t.ftChildrenIds.length;l++)c.push(this.get(t.ftChildrenIds[l]));var u=this.get(e);this._tree_menu_temp={maxX:this.manager.maxX,maxY:this.manager.maxY,minX:this.manager.minX,minY:this.manager.minY,roots:this.manager.roots,nodes:this.manager.nodes,rootList:this.manager.rootList,visibleNodeIds:this.manager.visibleNodeIds,bordersByRootIdAndLevel:this.manager.bordersByRootIdAndLevel,id:e,config:{roots:this.config.roots,nodes:this.config.nodes}},this.config.nodes=[];var f=[];if(s)f.push(s);else{var p={id:"_ft_mother",templateName:"mother",_ft_method:"addParentNode",_ft_childId:e,_ft_type:"mid",_ft_data:{gender:"female"}};u.mid=p.id,i?(i.pids=[p.id],p.pids=[i.id],p._ft_data.pids=[i.id]):p.pids=["_ft_father"],f.push(p)}if(i)f.push(i);else{var h={id:"_ft_father",templateName:"father",_ft_method:"addParentNode",_ft_childId:e,_ft_type:"fid",_ft_data:{gender:"male"}};u.fid=h.id,s?(s.pids=[h.id],h.pids=[s.id],h._ft_data.pids=[s.id]):h.pids=["_ft_mother"],f.push(h)}for(l=0;l<a.length;l++)f.push(a[l]);u.pids||(u.pids=[]);var m={id:"_ft_partner",pids:[e],templateName:"partner",_ft_method:"addPartnerNode",_ft_data:{pids:[e]}};if(u.gender=="male"?(m.templateName="wife",m._ft_data.gender="female"):u.gender=="female"&&(m.templateName="husband",m._ft_data.gender="male"),u.pids.push(m.id),f.push(m),u.pids)for(l=0;l<u.pids.length;l++){if(f.push({id:"_ft_child_group_"+l,mid:e,fid:u.pids[l],tags:["children-group"]}),u.pids[l]=="_ft_partner"){var b={id:"_ft_son_"+l,stpid:"_ft_child_group_"+l,templateName:"son",_ft_method:"addChildAndPartnerNodes",_ft_childData:{mid:t.id,fid:m.id,gender:"male"},_ft_partnerData:{pids:[e]},_ft_id:e},_={id:"_ft_daughter_"+l,stpid:"_ft_child_group_"+l,templateName:"daughter",_ft_method:"addChildAndPartnerNodes",_ft_childData:{mid:t.id,fid:m.id,gender:"female"},_ft_partnerData:{pids:[e]},_ft_id:e};u.gender=="male"&&m._ft_data.gender=="female"?(b._ft_childData.mid=m.id,b._ft_childData.fid=u.id,b._ft_partnerData.gender=m._ft_data.gender,_._ft_childData.mid=m.id,_._ft_childData.fid=u.id,_._ft_partnerData.gender=m._ft_data.gender):u.gender=="female"&&m._ft_data.gender=="male"&&(b._ft_childData.mid=u.id,b._ft_childData.fid=m.id,b._ft_partnerData.gender=m._ft_data.gender,_._ft_childData.mid=u.id,_._ft_childData.fid=m.id,_._ft_partnerData.gender=m._ft_data.gender),f.push(b),f.push(_)}else f.push({id:"_ft_son_"+l,stpid:"_ft_child_group_"+l,templateName:"son",_ft_method:"addChildNode",_ft_data:{mid:e,fid:u.pids[l],gender:"male"}}),f.push({id:"_ft_daughter_"+l,stpid:"_ft_child_group_"+l,templateName:"daughter",_ft_method:"addChildNode",_ft_data:{mid:e,fid:u.pids[l],gender:"female"}});for(var g=0;g<c.length;g++)c[g].mid!=u.pids[l]&&c[g].fid!=u.pids[l]||(c[g].mid=void 0,c[g].fid=void 0,c[g].stpid="_ft_child_group_"+l,f.push(c[g]))}var w=[];for(g=0;g<c.length;g++)(c[g].fid==u.id&&o.isNEU(c[g].mid)||c[g].mid==u.id&&o.isNEU(c[g].fid))&&(c[g].fid==u.id?c[g].mid="_ft_partner_for_single_child":c[g].mid==u.id&&(c[g].fid="_ft_partner_for_single_child"),f.push(c[g]),w.push(c[g].id));if(w.length){var y={id:"_ft_partner_for_single_child",pids:[e],templateName:"partner",_ft_method:"addPartnerAndParentNodes",_ft_childIds:w,_ft_partnerData:{pids:[e]},_ft_id:e};u.gender=="male"?(y.templateName="wife",y._ft_partnerData.gender="female"):u.gender=="female"&&(y.templateName="husband",y._ft_partnerData.gender="male"),u.pids.push(y.id),f.push(y)}var v={nodes:f,node:u};o.events.publish("node-tree-menu-show",[this,v]),v.nodes.push(v.node),this.config.nodes=v.nodes,u=this.get(e);var x=this;o.isNEU(u.mid)?o.isNEU(u.fid)||(this.config.roots=[u.fid]):this.config.roots=[u.mid];var C={id:e,treeMenuMode:!0};this._draw(!1,o.action.update,C,function(){o._moveToBoundaryArea(x.getSvg(),x.getViewBox(),x.response.boundary)})},o.ui.css=function(){return'<style data-bft-styles>.bft-button{background-color:#039be5;cursor:pointer;width:calc(100%);height:50px;color:#fff;padding-top:5px;padding-left:7px;padding-right:7px;text-align:center;text-transform:uppercase;border:1px solid #3fc0ff;display:inline-block;border-radius:5px}.bft-button.orange{background-color:#f57c00;border:1px solid #ffa03e}.bft-button.yellow{background-color:#ffca28;border:1px solid #ffdf7c}.bft-button.lower{text-transform:unset}.bft-button.transparent{background-color:transparent}.bft-button:hover{background-color:#35afea}.bft-button.orange:hover{background-color:#f79632}.bft-button.yellow:hover{background-color:#ffd452}.bft-button:active{transform:matrix(.98,0,0,.98,0,0)}.bft-button-icon{text-align:initial;cursor:pointer;margin-bottom:15px;color:#039be5}.bft-dark .bft-button-icon:hover{background-color:#2d2d2d}.bft-light .bft-button-icon:hover{background-color:#ececec}.bft-button-icon>img{height:24px;width:24px;vertical-align:middle;padding:7px}.bft-button:focus{outline:0}.bft-button-icon>img{filter:invert(46%) sepia(66%) saturate(2530%) hue-rotate(171deg) brightness(95%) contrast(98%)}.bft-light .bft-button.transparent{color:#039be5}.bft-light .bft-button.transparent:hover{color:#fff}.bft-button-loading{background-color:transparent;cursor:pointer;width:calc(100% - 2px);height:50px;color:#fff;text-align:center;text-transform:uppercase;border:1px solid #027cb7;display:inline-block;display:flex;justify-content:center;align-items:center;display:none}.bft-button-loading .bft-loading-dots div{margin:0 10px}.bft-link-bft-button{position:absolute;right:10px;top:-1px}@media screen and (max-width:1000px){.bft-link-bft-button{right:50px}}[data-bft-input-disabled] .bft-link-bft-button{display:none}[dir=rtl] .bft-link-bft-button{left:10px;right:unset}.bft-img-button{width:48px;height:48px;cursor:pointer;border-radius:50%;background-color:#039be5;background-repeat:no-repeat;background-size:24px 24px;background-position:center center;margin:3px;display:inline-block}.bft-img-button:hover{background-color:#f57c00}.bft-checkbox{display:block;position:relative;padding-left:35px;margin-bottom:12px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}.bft-checkbox input{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.bft-checkbox-checkmark{position:absolute;top:0;left:0;height:25px;width:25px;border-radius:5px}.bft-dark [data-bft-input-disabled] .bft-checkbox-checkmark,.bft-dark [data-bft-input-disabled].bft-checkbox input:checked~.bft-checkbox-checkmark,.bft-light [data-bft-input-disabled] .bft-checkbox-checkmark,.bft-light [data-bft-input-disabled].bft-checkbox input:checked~.bft-checkbox-checkmark{background-color:#aeaeae!important}[data-bft-input-disabled].bft-checkbox{cursor:default}[dir=rtl] .bft-checkbox-checkmark{right:0}[dir=rtl] .bft-checkbox{padding-left:unset;padding-right:35px}.bft-dark .bft-checkbox-checkmark{background-color:#333;border:1px solid #5b5b5b}.bft-light .bft-checkbox-checkmark{background-color:#fff;border:1px solid #c7c7c7}.bft-dark .bft-checkbox:hover input~.bft-checkbox-checkmark{background-color:#3c3c3c}.bft-light .bft-checkbox:hover input~.bft-checkbox-checkmark{background-color:#f8f9f9}.bft-dark .bft-checkbox input:checked~.bft-checkbox-checkmark{background-color:#039be5}.bft-light .bft-checkbox input:checked~.bft-checkbox-checkmark{background-color:#039be5}.bft-checkbox-checkmark:after{content:"";position:absolute;display:none}.bft-checkbox input:checked~.bft-checkbox-checkmark:after{display:block}.bft-checkbox .bft-checkbox-checkmark:after{left:9px;top:5px;width:5px;height:10px;border:solid #fff;border-width:0 3px 3px 0;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.bft-filter{user-select:none}.bft-light .bft-filter{color:#757575}.bft-dark .bft-filter{color:#ccc}.bft-filter>div>div{display:inline-block;padding:3px 10px;cursor:pointer}.bft-filter-menu fieldset,.bft-filter>div,.filter-field-selected{border-radius:5px}.bft-filter-menu fieldset{overflow-y:auto;max-height:300px}.bft-filter>div.bft-filter-menu{padding:10px}.bft-light .bft-filter>div.bft-filter-menu,.bft-light .filter-field-selected{background-color:#f8f9f9}.bft-dark .bft-filter>div.bft-filter-menu,.bft-dark .filter-field-selected{background-color:#3c3c3c}.bft-light .bft-filter>div{background-color:#eee}.bft-dark .bft-filter>div{background-color:#333}.bft-form-perspective{transform-style:preserve-3d;perspective:500px;position:absolute;top:32px}.bft-form{box-shadow:rgba(0,0,0,.2) 0 6px 6px 0,rgba(0,0,0,.19) 0 13px 20px 0;padding:14px;transform-origin:top center;user-select:none;display:none;position:relative;max-height:calc(100vh - 100px);overflow-y:auto;border-bottom-left-radius:5px;border-bottom-right-radius:5px}.bft-form-bottom{border-bottom-left-radius:unset;border-bottom-right-radius:unset;border-top-left-radius:5px;border-top-right-radius:5px}.bft-form .separator{margin:0 10px}@media screen and (max-width:1000px){.bft-form-perspective{min-width:100%;max-height:calc(100% - 32px);left:unset!important;right:unset!important;transform:none!important}.bft-form .set{max-height:calc(100vh - 74px)}.bft-form-fieldset{max-width:unset!important}}.bft-light .bft-form .separator{border-bottom:1px solid #c7c7c7}.bft-dark .bft-form .separator{border-bottom:1px solid #5b5b5b}.bft-light .bft-form{background-color:#fff}.bft-dark .bft-form{background-color:#252526}.bft-item{padding:6px 12px 6px 12px;display:flex;flex-direction:row}.bft-light .bft-form .bft-item.selected,.bft-light .bft-form .bft-item:hover{background-color:#0074e8;color:#fff}.bft-dark .bft-form .bft-item.selected,.bft-dark .bft-form .bft-item:hover{background-color:#094771;color:#fff}.bft-item.selected img,.bft-item:hover img{filter:invert(100%)}.bft-item.selected img{visibility:visible!important}.bft-form-fieldset{display:flex;flex-wrap:wrap;margin:0!important}.bft-form-field{flex:1 0 21%;margin:3px;min-width:200px}.bft-form-field-100{flex:1 0 96%;margin:3px;min-width:200px}.bft-input{position:relative}.bft-input>input,.bft-input>select{height:50px;padding:18px 10px 2px 9px;width:100%;box-sizing:border-box;border-style:solid;border-width:1px}.bft-input select{height:50px;padding:20px 5px 4px 5px}[data-bft-input-disabled].bft-input>input,[data-bft-input-disabled].bft-input>select{border-color:transparent!important}.bft-light [data-bft-input-disabled]>input,.bft-light [data-bft-input-disabled]>select{background-color:#fff!important}.bft-dark [data-bft-input-disabled]>input,.bft-dark [data-bft-input-disabled]>select{background-color:#252526!important}[data-bft-input-disabled]>select{appearance:none;padding-left:8px}.bft-input>label{display:inline-block;position:absolute;padding-left:10px;padding-right:10px;color:#acacac;cursor:text;-webkit-transition:all .1s ease-out;-moz-transition:all .1s ease-out;-ms-transition:all .1s ease-out;-o-transition:all .1s ease-out;transition:all .1 ease-out;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:initial;text-align:initial;white-space:nowrap}.bft-input>label{top:12px;overflow:hidden;text-overflow:ellipsis;max-width:calc(100% - 14px)}.bft-input>label.focused,.bft-input>label.hasval{top:-1px}.bft-input>input,.bft-input>select{outline:0;border-radius:5px}.bft-dark .bft-input>label.focused,.bft-light .bft-input>label.focused{color:#039be5}.bft-dark .bft-input>input,.bft-dark .bft-input>select{color:#ccc;background-color:#333;border-color:#5b5b5b}.bft-light .bft-input>input,.bft-light .bft-input>select{color:#757575;background-color:#fff;border-color:#c7c7c7}.bft-light .bft-input>input:focus,.bft-light .bft-input>select:focus{border-color:#039be5;background-color:#f8f9f9}.bft-dark .bft-input>input:focus,.bft-dark .bft-input>select:focus{border-color:#039be5;background-color:#3c3c3c}.bft-dark .bft-input>input.bft-validation-error,.bft-dark .bft-input>select.bft-validation-error,.bft-light .bft-input>input.bft-validation-error,.bft-light .bft-input>select.bft-validation-error{border-color:#ca2a2a}.bft-dark .bft-validation-error-message,.bft-light .bft-validation-error-message{color:#ca2a2a}.bft-input select.multiple{height:initial}.bft-link{color:#039be5;cursor:pointer;text-decoration:underline}.bft-link:hover{color:#f57c00}.bft-dark ::-webkit-scrollbar,.bft-light ::-webkit-scrollbar{width:15px;height:15px}.bft-dark ::-webkit-scrollbar-corner{background:#1e1e1e}.bft-dark ::-webkit-scrollbar-track{background:#1e1e1e;border-left:1px solid #333;border-top:1px solid #333}.bft-dark ::-webkit-scrollbar-thumb{background:#424242}.bft-dark ::-webkit-scrollbar-thumb:hover{background:#4f4f4f}.bft-dark ::-webkit-scrollbar-thumb:active{background:#5e5e5e}.bft-light ::-webkit-scrollbar-corner{background:#fff}.bft-light ::-webkit-scrollbar-track{background:#fff;border-left:1px solid #ddd;border-top:1px solid #ddd}.bft-light ::-webkit-scrollbar-thumb{background:#c1c1c1}.bft-light ::-webkit-scrollbar-thumb:hover{background:#929292}.bft-light ::-webkit-scrollbar-thumb:active{background:#666}.bft-edit-form{position:fixed;top:0;right:0;height:100%;width:100%;box-shadow:rgba(0,0,0,.2) 0 6px 6px 0,rgba(0,0,0,.19) 0 13px 20px 0;display:flex;flex-direction:column;height:100%;width:400px}@media screen and (max-width:1000px){.bft-edit-form{width:100%}}.bft-dark .bft-edit-form{background-color:#252526}.bft-light .bft-edit-form{background-color:#fff}.bft-edit-form-header{height:200px;text-align:center;border-radius:10px}.export-service .bft-edit-form-header{border-radius:unset}.bft-edit-form-title{color:#fff;margin:0;padding:14px 17px 7px 17px}.bft-edit-form-avatar{border-radius:50%;width:150px;height:150px;position:absolute;top:75px;border:5px solid #fff;left:50%;transform:translateX(-50%);background-color:#cacaca;box-shadow:rgba(0,0,0,.2) 0 6px 6px 0,rgba(0,0,0,.19) 0 13px 20px 0}.bft-edit-form-close{position:absolute;right:14px;top:14px;width:34px;height:34px;cursor:pointer}.bft-edit-form-fields{flex-grow:1;overflow-y:auto;overflow-x:hidden}.bft-edit-form-fields-inner{margin:0 7px 20px 7px}.bft-family-menu{opacity:0;display:inline-block;position:absolute;text-align:left;user-select:none;min-width:270px;box-shadow:rgba(0,0,0,.2) 0 4px 8px 0,rgba(0,0,0,.19) 0 6px 20px 0;font:13px/28px Helvetica,"Segoe UI",Arial,sans-serif;border-radius:10px}.bft-family-menu>div:hover img{filter:invert(100%)}.bft-family-menu [data-item]{text-align:start;padding:7px 10px}.bft-dark .bft-family-menu [data-item]{background-color:#252526;color:#acacac;border-bottom:1px solid #333}.bft-dark .bft-family-menu [data-item]:hover{background-color:#094771!important;color:#fff!important}.bft-dark .bft-family-menu [data-item]:hover svg{filter:brightness(0) invert(1)}.bft-light .bft-family-menu [data-item]{background-color:#fff;color:#333;border-bottom:1px solid #c7c7c7}.bft-light .bft-family-menu [data-item]:hover{background-color:#0074e8!important;color:#fff!important}.bft-light .bft-family-menu [data-item]:hover svg{filter:brightness(0) invert(1)}.bft-family-menu [data-item] svg{vertical-align:middle}.bft-family-menu [data-item]:first-child{border-top-left-radius:7px;border-top-right-radius:7px}.bft-family-menu [data-item]:last-child{border-bottom-width:0;border-bottom-style:none;border-bottom-left-radius:7px;border-bottom-right-radius:7px}.bft-search{position:absolute}@media screen and (max-width:500px){.bft-search{width:calc(100% - 30px);left:15px}}.bft-search .bft-input{margin-bottom:0}.bft-search-input{color:#7a7a7a;width:100%;border:none;outline:0;padding-top:10px;padding-right:47px}.bft-search-image-td{width:43px}.bft-search-text-td{padding-inline-end:7px;line-height:15px;text-align:start}.bft-search table{box-shadow:rgba(0,0,0,.2) 0 4px 8px 0,rgba(0,0,0,.19) 0 6px 20px 0;margin:0 3.5px 0 3.5px;width:calc(100% - 7px);border-radius:7px}.bft-search table tr:first-child td:first-child{border-top-left-radius:7px}.bft-search table tr:first-child td:last-child{border-top-right-radius:7px}[dir=rtl] .bft-search table tr:first-child td:first-child{border-top-left-radius:unset;border-top-right-radius:7px}[dir=rtl] .bft-search table tr:first-child td:last-child{border-top-right-radius:unset;border-top-left-radius:7px}.bft-search table tr:last-child td:first-child{border-bottom-left-radius:7px}.bft-search table tr:last-child td:last-child{border-bottom-right-radius:7px}[dir=rtl] .bft-search table tr:last-child td:first-child{border-bottom-left-radius:unset;border-bottom-right-radius:7px}[dir=rtl] .bft-search table tr:last-child td:last-child{border-bottom-right-radius:unset;border-bottom-left-radius:7px}.bft-dark .bft-search table{background-color:#252526;color:#acacac}.bft-search [data-search-item-id]{cursor:pointer}.bft-search-photo{margin:7px 7px 0 7px;width:32px;height:32px;background-size:cover;background-position:top center;border-radius:50%;display:inline-block;border:1px solid #8c8c8c}.bft-search [data-search-item-id]:hover .bft-link{color:#ffca28}.bft-search [data-search-item-id]:hover .bft-link:hover{color:#f57c00}.bft-dark .bft-search [data-search-item-id] td{border-top:1px solid #333}.bft-dark .bft-search [data-search-item-id]:hover,.bft-dark .bft-search [data-selected=yes]{background-color:#094771;color:#fff}.bft-light .bft-search table{background-color:#fff;color:#333}.bft-light .bft-search [data-search-item-id] td{border-top:1px solid #c7c7c7}.bft-light .bft-search [data-search-item-id]:hover,.bft-light .bft-search [data-selected=yes]{background-color:#0074e8;color:#fff}.bft-search [data-search-item-id]:first-child td{border-top:unset}.bft-ripple-container{position:absolute;top:0;right:0;bottom:0;left:0}.bft-drag-over rect{opacity:.5}.bft-ripple-container span{transform:scale(0);border-radius:100%;position:absolute;opacity:.75;background-color:#fff;animation:bft-ripple 1s}@-moz-keyframes bft-ripple{to{opacity:0;transform:scale(2)}}@-webkit-keyframes bft-ripple{to{opacity:0;transform:scale(2)}}@-o-keyframes bft-ripple{to{opacity:0;transform:scale(2)}}@keyframes bft-ripple{to{opacity:0;transform:scale(2)}}.bft-slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;-webkit-transition:.4s;transition:.4s}.bft-slider:before{position:absolute;content:"";height:16px;width:16px;left:4px;bottom:4px;background-color:#fff;-webkit-transition:.4s;transition:.4s}.bft-slider.round{border-radius:24px}.bft-slider.round:before{border-radius:50%}svg text:hover{cursor:default}svg.bft-cursor-grab,svg.bft-cursor-grab text:hover{cursor:grab}svg.bft-cursor-nodrop,svg.bft-cursor-nodrop text:hover{cursor:no-drop}svg.bft-cursor-copy,svg.bft-cursor-copy text:hover{cursor:copy}svg.bft-cursor-move,svg.bft-cursor-move text:hover{cursor:move}#bft-close-btn:focus,#bft-close-btn:hover{color:#000;text-decoration:none;cursor:pointer}#bft-id-select:focus{outline:.5px solid #aeaeae}#bft-sampleDialog #title:hover{cursor:default;background:gray}.bft-light{background-color:#fff;font:13px/28px Helvetica,"Segoe UI",Arial,sans-serif}.bft-dark{background-color:#1e1e1e;font:13px/28px Helvetica,"Segoe UI",Arial,sans-serif}.bft-light .bft-fill{fill:#fff}.bft-dark .bft-fill{fill:#1e1e1e}.bft-dark input,.bft-dark select,.bft-light input,.bft-light select{font:16px Helvetica,"Segoe UI",Arial,sans-serif}.bft-dark h1,.bft-light h1{font-size:30px;line-height:1}.bft-edit-form{position:absolute;border-radius:10px}.export-service .bft-edit-form{border-radius:unset}.bft-dark .bft-edit-form{color:#acacac}.bft-light .bft-edit-form{color:#333}.bft-dark ::-webkit-calendar-picker-indicator{filter:invert(70%)}.bft-light ::-webkit-calendar-picker-indicator{filter:invert(50%)}.bft-edit-form-instruments{margin:42px 10px 0 10px;text-align:center;min-height:70px}.bft-img-button svg{position:relative;top:12px}.bft-light .bft-toolbar-container svg circle,.bft-light .bft-toolbar-container svg line,.bft-light .bft-toolbar-container svg path{stroke:#8c8c8c!important}.bft-dark .bft-toolbar-container svg circle,.bft-dark .bft-toolbar-container svg line,.bft-dark .bft-toolbar-container svg path{stroke:#8c8c8c!important}.bft-dark .bft-toolbar-container svg rect{fill:#252526!important}.bft-dark .bft-toolbar-container [data-tlbr=minus] svg{border-left:1px solid #5b5b5b!important;border-right:1px solid #5b5b5b!important;border-bottom:1px solid #5b5b5b!important}.bft-dark .bft-toolbar-container [data-tlbr=plus] svg{border-left:1px solid #5b5b5b!important;border-right:1px solid #5b5b5b!important;border-top:1px solid #5b5b5b!important}.bft-dark .bft-toolbar-container [data-tlbr]>svg{border:1px solid #5b5b5b!important;background-color:#252526!important}.bft-toolbar-layout{height:123px;padding-top:20px;position:absolute;width:100%;left:"0";bottom:"-145px"}.bft-light .bft-toolbar-layout{border-top:1px solid #c7c7c7;background-color:#f9f9f9}.bft-dark .bft-toolbar-layout{border-top:1px solid #5b5b5b;background-color:#2b2b2b}.bft-dotted-connector path{stroke-dasharray:7}.bft-undo-redo{position:absolute;top:23px;left:23px}@media screen and (max-width:500px){.bft-undo-redo{position:absolute;top:83px;left:23px}}.bft-light .bft-undo-redo path{fill:#cacaca}.bft-dark .bft-undo-redo path{fill:#5b5b5b}.bft-light .bft-undo-redo .bft-ur-clickable path{fill:#9c9c9c}.bft-dark .bft-undo-redo .bft-ur-clickable path{fill:#8c8c8c}.bft-undo-redo .bft-ur-clickable rect{cursor:pointer}.bft-undo-redo>span{position:relative;display:inline-block;user-select:none}.bft-undo-redo .bft-undo-i{left:-6px;top:-6px}.bft-undo-redo .bft-redo-i{right:-6px;bottom:6px}.bft-undo-redo>span>span{color:#fff;position:absolute;display:inline-block;min-width:20px;min-height:20px;border-radius:50%;line-height:20px;text-align:center;padding:1px;user-select:none;cursor:pointer}.bft-light .bft-undo-redo>span>span{background-color:#9c9c9c}.bft-dark .bft-undo-redo>span>span{background-color:#8c8c8c}</style>'},o.events.on("render",function(e,t){if(e.recentRoots||(e.recentRoots=[]),e.config.roots)for(var n=0;n<e.config.roots.length;n++){var r=e.recentRoots.indexOf(e.config.roots[n]);r!=-1&&e.recentRoots.splice(r,1),e.recentRoots.unshift(e.config.roots[n])}}),o.events.on("show",function(e,t){if(e instanceof o.editUI&&e.obj._tree_menu_temp)return!1}),o.events.on("render-link",function(e,t){t.cnode.ppid!=null&&t.cnode.layout!=o.mixed&&(t.html+='<use xlink:href="#dot" x="'+t.p.xa+'" y="'+t.p.ya+'"/>')}),o.events.on("click",function(e,t){if(e instanceof o){var n=e._get(t.node.id);if(n._ft_method)return n._ft_method=="addParentNode"?e[n._ft_method](n._ft_childId,n._ft_type,n._ft_data,null,!0):n._ft_method=="addChildAndPartnerNodes"?e[n._ft_method](n._ft_id,n._ft_childData,n._ft_partnerData,null,!0):n._ft_method=="addPartnerAndParentNodes"?e[n._ft_method](n._ft_id,n._ft_childIds,n._ft_partnerData,null,!0):e[n._ft_method](n._ft_data,null,!0),!1;for(var r=t.event.target;r;){if(r.getAttribute&&(r.hasAttribute("data-ctrl-n-t-menu-id")||r.hasAttribute("data-ctrl-n-t-menu-c"))){var i=r.getAttribute("data-ctrl-n-t-menu-id");return o.isNEU(i)?e.hideTreeMenu(!0):e.showTreeMenu(i),t.event.stopPropagation(),t.event.preventDefault(),!1}r=r.parentNode}}}),o===void 0&&(o={}),o.prototype.onField=function(e){return this.on("field",function(t,n){return e.call(t,n)})},o.prototype.onInit=function(e){return this.on("init",function(t){return e.call(t)})},o.prototype.onRedraw=function(e){return this.on("redraw",function(t){return e.call(t)})},o.prototype.onUpdateNode=function(e){return this.on("update",function(t,n,r){var i={oldData:n,newData:r};return e.call(t,i)})},o.prototype.onUpdated=function(e){return this.on("updated",function(t){return e.call(t)})},o.prototype.onRemoveNode=function(e){return this.on("remove",function(t,n,r){var i={id:n,newPidsAndStpidsForIds:r};return e.call(t,i)})},o.prototype.onAddNode=function(e){return this.on("add",function(t,n){var r={data:n};return e.call(t,r)})},o.prototype.onDrop=function(e){return this.on("drop",function(t,n,r,i,s){var a={dragId:n,dropId:r,dragNodeElement:i,event:s};return e.call(t,a)})},o.prototype.onDrag=function(e){return this.on("drag",function(t,n,r,i){var s={dragId:n,event:r,nodeIds:i};return e.call(t,s)})},o.prototype.onExpandCollpaseButtonClick=function(e){return this.on("expcollclick",function(t,n,r,i){var s={collapsing:n,id:r,ids:i};return e.call(t,s)})},o.prototype.onExportStart=function(e){return this.on("exportstart",function(t,n){return e.call(t,n)})},o.prototype.onExportEnd=function(e){return this.on("exportend",function(t,n){return e.call(t,n)})},o.prototype.onNodeClick=function(e){return this.on("click",function(t,n){return e.call(t,n)})},o.prototype.onNodeDoubleClick=function(e){return this.on("dbclick",function(t,n){var r={data:n};return e.call(t,r)})},o.prototype.onUpdateNode=function(e){return this.on("update",function(t,n){return e.call(t,n)})},o.prototype.onNodeTreeMenuShow=function(e){return this.on("node-tree-menu-show",function(t,n){return e.call(t,n)})},o.prototype.onRemoveNode=null,o.prototype.onAddNode=null,o.filterUI=function(){},o.filterUI.prototype.init=function(e){this.instance=e,this.element=null,this.filterBy=null,this._event_id=o._guid()},o.filterUI.prototype.addFilterTag=function(e){if(!this.instance.config.filterBy||o.isNEU(e))return!1;if(this.filterBy!==null||typeof this.instance.config.filterBy!="object"||Array.isArray(this.instance.config.filterBy)||(this.filterBy=JSON.parse(JSON.stringify(this.instance.config.filterBy))),this.filterBy!=null)for(var t in this.filterBy){var n=e[t];if(n!=null){var r=this.filterBy[t];if(r!=null){var i=r[n];if(i!=null&&i.checked===!1)return!0}}}return!1},o.filterUI.prototype.show=function(e){var t=this.element.querySelector('[data-filter-field="'+e+'"]');t&&t.click()},o.filterUI.prototype.hide=function(){var e=this.instance.element.querySelector("[data-filter-close]");e&&e.click()},o.filterUI.prototype.update=function(){if(this.instance.config.filterBy){var e={};if(this.instance.config.filterBy=="all")for(var t=o.manager.getAllFields(this.instance.config),n=0;n<t.length;n++){var r=t[n];r!="tags"&&r!="id"&&r!="pid"&&r!="ppid"&&r!="stpid"&&(e[r]={})}else if(Array.isArray(this.instance.config.filterBy))for(n=0;n<this.instance.config.filterBy.length;n++)e[this.instance.config.filterBy[n]]={};else if(typeof this.instance.config.filterBy=="object")for(var i in this.instance.config.filterBy)e[i]={};for(var s in e){var a=e[s];for(n=0;n<this.instance.config.nodes.length;n++){var c=this.instance.config.nodes[n][s];c!=null&&(a[c]||(a[c]={checked:!0,text:c}))}}if(this.filterBy!=null){for(var l in e)if(this.filterBy[l])for(var d in e[l])this.filterBy[l][d]&&(e[l][d]=this.filterBy[l][d])}if(o.FILTER_ALPHABETICALLY){var u=Object.keys(e).sort(),f=e;for(e={},n=0;n<u.length;n++)e[p=u[n]]=f[p];for(var s in e)for(a=e[s],e[s]={},u=Object.keys(a).sort(),n=0;n<u.length;n++){var p=u[n];e[s][p]=a[p]}}this.filterBy=e;var h=this;this.element=this.instance.element.querySelector("[data-filter]"),this.element&&this.element.parentNode.removeChild(this.element),this.element=document.createElement("div"),this.element.setAttribute("data-filter",""),this.element.style.position="absolute",this.element.setAttribute("class","bft-filter"),this.instance.config.undoRedoStorageName?(this.element.style.top=0,this.element.style.left="50%",this.element.style.transform="translate(-50%)"):(this.element.style.top=this.instance.config.padding+"px",this.element.style.left=this.instance.config.padding+"px");var m="";for(var l in this.filterBy){var b={name:l,html:`<div data-filter-field="${l}">${l}</div>`};o.events.publish("add-filter",[h,b]),m+=b.html}this.element.innerHTML=`<div>${m}</div>`,this.element.addEventListener("click",function(_){if(_.target.hasAttribute("data-filter-close")||_.target.hasAttribute("data-filter-field")){for(var g=_.target.getAttribute("data-filter-field"),w=h.instance.element.querySelectorAll("[data-filter-menu]"),y=0;y<w.length;y++)w[y].style.display="none";var v=h.instance.element.querySelectorAll(".filter-field-selected");for(y=0;y<v.length;y++)v[y].classList.remove("filter-field-selected");var x=h.instance.element.querySelector("[data-filter-close]");if(x&&x.parentNode.removeChild(x),_.target.hasAttribute("data-filter-close")||!_.target.hasAttribute("data-filter-field"))return;var C=h.instance.element.querySelector(`[data-filter-menu="${g}"]`);if(!C){var I={name:g,text:o.filterUI.all,value:g,checked:!0,html:`<div>
                        <input data-all type="checkbox" id="${g}" name="${g}" checked>
                        <label for="${g}">${o.filterUI.all}</label>
                    </div>`};o.events.publish("add-item",[h,I]);var E=I.html;for(var D in h.filterBy[g]){var R=h.filterBy[g][D],M=R.text;M==null&&(M=D),I={name:g,text:M,value:D,checked:R.checked,html:`<div>
                            <input  type="checkbox" id="${g}_${D}" name="${D}" ${R.checked?"checked":""}>
                            <label for="${g}_${D}">${M}</label>
                        </div>`},o.events.publish("add-item",[h,I]),E+=I.html}C=document.createElement("div");var N=o.filterUI.textFilterBy;C.innerHTML=`<fieldset>
                                                    <legend>${N} ${g}:</legend>
                                                    ${E}
                                                </fieldset>`,C.setAttribute("data-filter-menu",g),C.classList.add("bft-filter-menu"),_.target.parentNode.parentNode.appendChild(C);var P=C.querySelectorAll("input");for(y=0;y<P.length;y++)P[y].addEventListener("change",function(V){for(var G=V.target;G&&!G.hasAttribute("data-filter-menu");)G=G.parentNode;if(G){var O=G.getAttribute("data-filter-menu");if(V.target.hasAttribute("data-all")){for(var T=V.target.parentNode.parentNode.querySelectorAll("input"),L=0;L<T.length;L++)if(T[L]!=V.target)for(var Z in T[L].checked=V.target.checked,h.filterBy[O])h.filterBy[O][Z].checked=V.target.checked}else if(h.filterBy[O][this.name]!=null&&(h.filterBy[O][this.name].checked=this.checked),this.checked){for(var U=h.instance.config.nodes,W=0;W<U.length;W++)if(U[W][O]==this.name){for(var de=U[W];de;)if(o.isNEU(de.stpid))de=o.isNEU(de.pid)?null:h.instance._get(de.pid);else if((de=h.instance._get(de.stpid))[O]){var S=V.target.parentNode.parentNode.querySelector('[name="'+de[O]+'"]');S?(S.checked=this.checked,h.filterBy[O][de[O]].checked=this.checked):console.error('Cannot find element with selector: [name="'+de[O]+'"]')}}}h.instance.draw()}})}C.style.display="block",_.target.classList.add("filter-field-selected"),(x=document.createElement("div")).classList.add("close"),x.innerHTML="x",x.setAttribute("data-filter-close",""),_.target.parentNode.appendChild(x),o.events.publish("show-items",[h,{name:g}])}}),this.instance.element.appendChild(this.element),o.events.publish("update",[this,{}])}},o.filterUI.prototype.on=function(e,t){return o.events.on(e,t,this._event_id),this},o.filterUI.textFilterBy="Filter by",o.filterUI.all="[All]",o===void 0&&(o={}),o.remote===void 0&&(o.remote={}),o.LIMIT_NODES=!0;o.remote._fromResDTO=function(e,t,n,r,i){var s=t[e.id];e.x=s.p[0],e.y=s.p[1],e.w=s.p[2],e.h=s.p[3],s.ln!=null&&(e.leftNeighbor=i[s.ln]),s.rn!=null&&(e.rightNeighbor=i[s.rn]);for(var a=0;a<e.stChildren.length;a++)o.remote._fromResDTO(e.stChildren[a],t,n,r,i);for(a=0;a<e.children.length;a++)o.remote._fromResDTO(e.children[a],t,n,r,i)},o.remote._toReqDTO=function(e,t){var n={p:[e.id,e.parent!=null?e.parent.id:null,e.stParent!=null?e.stParent.id:null,e.w,e.h]};e.children.length>0&&(n.c=o.remote._convertToIdArray(e.children)),e.stChildren.length>0&&(n.v=o.remote._convertToIdArray(e.stChildren)),e.layout!=null&&e.layout!=0&&(n.l=e.layout),e.isAssistant&&(n.a=1),e.isSplit&&(n.s=e.isSplit),e.isMirror&&(n.im=e.isMirror),e.padding&&(n.q=e.padding),e.lcn&&(n.k=e.lcn),e.stContainerNodes&&(n.b=o.remote._convertToIdArray(e.stContainerNodes)),e.isPartner&&(n.i=e.isPartner),e.hasPartners&&(n.g=e.hasPartners),e.partnerSeparation&&(n.e=e.partnerSeparation),t.push(n);for(var r=0;r<e.stChildren.length;r++)o.remote._toReqDTO(e.stChildren[r],t);for(r=0;r<e.children.length;r++)o.remote._toReqDTO(e.children[r],t)},o.remote._toReqLayoutConfigsDTO=function(e){var t={};for(var n in e){var r=e[n];t[n]||(t[n]=[]),t[n][0]=r.orientation,t[n][1]=r.levelSeparation,t[n][2]=r.mixedHierarchyNodesSeparation,t[n][3]=r.subtreeSeparation,t[n][4]=r.siblingSeparation,t[n][5]=r.layout,t[n][6]=r.columns,t[n][7]=r.collapse,t[n][8]=r.assistantSeparation,t[n][9]=r.partnerNodeSeparation}return t},o.remote._convertToIdArray=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].id);return t},o.remote._setPositions=function(e,t,n,r){for(var i=[],s=[],a=o.remote._toReqLayoutConfigsDTO(t),c=0;c<e.length;c++)s.push(e[c].id),o.remote._toReqDTO(e[c],i);var l={n:i,c:a,r:s,v:"8.14.00"};if(o.LIMIT_NODES||(l.l=!0),o.remote._fromReqDTO!=null)o.remote._fromReqDTO(l.n,l.r,l.c,function(u){for(var f=0;f<e.length;f++)o.remote._fromResDTO(e[f],u,0,e,r);n()});else{l=JSON.stringify(l);var d=o.localStorage.getItem(l);d&&(d=JSON.parse(d)),d&&!d.limit?o.remote._proceed(e,d,r,n):o.remote._findRegion(function(u){o._ajax(u,"post",l,"json",function(f){f.error?n(2):(o.remote._proceed(e,f,r,n),o.localStorage.setItem(l,JSON.stringify(f)))})})}},o.remote._proceed=function(e,t,n,r){if(typeof t=="string"&&(t=JSON.parse(t)),t.limit&&t.limit==1)r(t.limit);else{for(var i=0;i<e.length;i++)o.remote._fromResDTO(e[i],t,0,e,n);r()}},o.remote._findRegion=function(e){var t=o.localStorage.getItem(o.FUNC_URL_NAME);if(t)e(t);else{for(var n=["defunc2","cusfunc2","bsfunc2","acfunc2","kcfunc2","safunc2","wifunc2"],r=[],i=0;i<n.length;i++)r.push(new XMLHttpRequest);for(i=0;i<n.length;i++)(function(){var s="https://"+n[i]+o.SERVER_PREFIX,a=r[i];a.onreadystatechange=function(){if(this.readyState==4&&this.status==200){o.localStorage.setItem(o.FUNC_URL_NAME,s),e(s);for(var c=0;c<r.length;c++)r[c].abort()}},a.open("GET",s,!0),a.send()})()}}});function pp(e,t){return Object.is(e,t)}var ye=null,ci=!1,ns=1,_n=Symbol("SIGNAL");function ce(e){let t=ye;return ye=e,t}function $l(){return ye}var ui={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Hl(e){if(ci)throw new Error("");if(ye===null)return;ye.consumerOnSignalRead(e);let t=ye.nextProducerIndex++;if(fi(ye),t<ye.producerNode.length&&ye.producerNode[t]!==e&&fr(ye)){let n=ye.producerNode[t];di(n,ye.producerIndexOfThis[t])}ye.producerNode[t]!==e&&(ye.producerNode[t]=e,ye.producerIndexOfThis[t]=fr(ye)?Gl(e,ye,t):0),ye.producerLastReadVersion[t]=e.version}function gp(){ns++}function mp(e){if(!(fr(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===ns)){if(!e.producerMustRecompute(e)&&!is(e)){Vl(e);return}e.producerRecomputeValue(e),Vl(e)}}function zl(e){if(e.liveConsumerNode===void 0)return;let t=ci;ci=!0;try{for(let n of e.liveConsumerNode)n.dirty||yp(n)}finally{ci=t}}function vp(){return ye?.consumerAllowSignalWrites!==!1}function yp(e){e.dirty=!0,zl(e),e.consumerMarkedDirty?.(e)}function Vl(e){e.dirty=!1,e.lastCleanEpoch=ns}function rs(e){return e&&(e.nextProducerIndex=0),ce(e)}function ql(e,t){if(ce(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(fr(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)di(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function is(e){fi(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(mp(n),r!==n.version))return!0}return!1}function os(e){if(fi(e),fr(e))for(let t=0;t<e.producerNode.length;t++)di(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Gl(e,t,n){if(Wl(e),e.liveConsumerNode.length===0&&Yl(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=Gl(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function di(e,t){if(Wl(e),e.liveConsumerNode.length===1&&Yl(e))for(let r=0;r<e.producerNode.length;r++)di(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];fi(i),i.producerIndexOfThis[r]=t}}function fr(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function fi(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Wl(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function Yl(e){return e.producerNode!==void 0}function bp(){throw new Error}var Xl=bp;function wp(){Xl()}function Zl(e){Xl=e}var _p=null;function Ql(e,t){vp()||wp(),e.equal(e.value,t)||(e.value=t,xp(e))}var Kl=fe(F({},ui),{equal:pp,value:void 0,kind:"signal"});function xp(e){e.version++,gp(),zl(e),_p?.()}function z(e){return typeof e=="function"}function xn(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var hi=xn(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function hr(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var me=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(z(r))try{r()}catch(s){t=s instanceof hi?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Jl(s)}catch(a){t=t??[],a instanceof hi?t=[...t,...a.errors]:t.push(a)}}if(t)throw new hi(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Jl(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&hr(n,t)}remove(t){let{_finalizers:n}=this;n&&hr(n,t),t instanceof e&&t._removeParent(this)}};me.EMPTY=(()=>{let e=new me;return e.closed=!0,e})();var ss=me.EMPTY;function pi(e){return e instanceof me||e&&"closed"in e&&z(e.remove)&&z(e.add)&&z(e.unsubscribe)}function Jl(e){z(e)?e():e.unsubscribe()}var rt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var In={setTimeout(e,t,...n){let{delegate:r}=In;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=In;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function gi(e){In.setTimeout(()=>{let{onUnhandledError:t}=rt;if(t)t(e);else throw e})}function pr(){}var ec=as("C",void 0,void 0);function tc(e){return as("E",void 0,e)}function nc(e){return as("N",e,void 0)}function as(e,t,n){return{kind:e,value:t,error:n}}var Qt=null;function Cn(e){if(rt.useDeprecatedSynchronousErrorHandling){let t=!Qt;if(t&&(Qt={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=Qt;if(Qt=null,n)throw r}}else e()}function rc(e){rt.useDeprecatedSynchronousErrorHandling&&Qt&&(Qt.errorThrown=!0,Qt.error=e)}var Kt=class extends me{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,pi(t)&&t.add(this)):this.destination=Ep}static create(t,n,r){return new En(t,n,r)}next(t){this.isStopped?cs(nc(t),this):this._next(t)}error(t){this.isStopped?cs(tc(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?cs(ec,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Ip=Function.prototype.bind;function ls(e,t){return Ip.call(e,t)}var us=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){mi(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){mi(r)}else mi(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){mi(n)}}},En=class extends Kt{constructor(t,n,r){super();let i;if(z(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&rt.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&ls(t.next,s),error:t.error&&ls(t.error,s),complete:t.complete&&ls(t.complete,s)}):i=t}this.destination=new us(i)}};function mi(e){rt.useDeprecatedSynchronousErrorHandling?rc(e):gi(e)}function Cp(e){throw e}function cs(e,t){let{onStoppedNotification:n}=rt;n&&In.setTimeout(()=>n(e,t))}var Ep={closed:!0,next:pr,error:Cp,complete:pr};var Dn=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Fe(e){return e}function ds(...e){return fs(e)}function fs(e){return e.length===0?Fe:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var ae=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=Sp(n)?n:new En(n,r,i);return Cn(()=>{let{operator:a,source:c}=this;s.add(a?a.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=ic(r),new r((i,s)=>{let a=new En({next:c=>{try{n(c)}catch(l){s(l),a.unsubscribe()}},error:s,complete:i});this.subscribe(a)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Dn](){return this}pipe(...n){return fs(n)(this)}toPromise(n){return n=ic(n),new n((r,i)=>{let s;this.subscribe(a=>s=a,a=>i(a),()=>r(s))})}}return e.create=t=>new e(t),e})();function ic(e){var t;return(t=e??rt.Promise)!==null&&t!==void 0?t:Promise}function Dp(e){return e&&z(e.next)&&z(e.error)&&z(e.complete)}function Sp(e){return e&&e instanceof Kt||Dp(e)&&pi(e)}function hs(e){return z(e?.lift)}function ee(e){return t=>{if(hs(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function te(e,t,n,r,i){return new ps(e,t,n,r,i)}var ps=class extends Kt{constructor(t,n,r,i,s,a){super(t),this.onFinalize=s,this.shouldUnsubscribe=a,this._next=n?function(c){try{n(c)}catch(l){t.error(l)}}:super._next,this._error=i?function(c){try{i(c)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Sn(){return ee((e,t)=>{let n=null;e._refCount++;let r=te(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var Mn=class extends ae{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,hs(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new me;let n=this.getSubject();t.add(this.source.subscribe(te(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=me.EMPTY)}return t}refCount(){return Sn()(this)}};var oc=xn(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ne=(()=>{class e extends ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new vi(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new oc}next(n){Cn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Cn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Cn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?ss:(this.currentObservers=null,s.push(n),new me(()=>{this.currentObservers=null,hr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ae;return n.source=this,n}}return e.create=(t,n)=>new vi(t,n),e})(),vi=class extends Ne{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:ss}};var De=class extends Ne{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Oe=new ae(e=>e.complete());function sc(e){return e&&z(e.schedule)}function ac(e){return e[e.length-1]}function lc(e){return z(ac(e))?e.pop():void 0}function Lt(e){return sc(ac(e))?e.pop():void 0}function uc(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function c(u){try{d(r.next(u))}catch(f){a(f)}}function l(u){try{d(r.throw(u))}catch(f){a(f)}}function d(u){u.done?s(u.value):i(u.value).then(c,l)}d((r=r.apply(e,t||[])).next())})}function cc(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jt(e){return this instanceof Jt?(this.v=e,this):new Jt(e)}function dc(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(h){return function(m){return Promise.resolve(m).then(h,f)}}function c(h,m){r[h]&&(i[h]=function(b){return new Promise(function(_,g){s.push([h,b,_,g])>1||l(h,b)})},m&&(i[h]=m(i[h])))}function l(h,m){try{d(r[h](m))}catch(b){p(s[0][3],b)}}function d(h){h.value instanceof Jt?Promise.resolve(h.value.v).then(u,f):p(s[0][2],h)}function u(h){l("next",h)}function f(h){l("throw",h)}function p(h,m){h(m),s.shift(),s.length&&l(s[0][0],s[0][1])}}function fc(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof cc=="function"?cc(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(a){return new Promise(function(c,l){a=e[s](a),i(c,l,a.done,a.value)})}}function i(s,a,c,l){Promise.resolve(l).then(function(d){s({value:d,done:c})},a)}}var yi=e=>e&&typeof e.length=="number"&&typeof e!="function";function bi(e){return z(e?.then)}function wi(e){return z(e[Dn])}function _i(e){return Symbol.asyncIterator&&z(e?.[Symbol.asyncIterator])}function xi(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Mp(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ii=Mp();function Ci(e){return z(e?.[Ii])}function Ei(e){return dc(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield Jt(n.read());if(i)return yield Jt(void 0);yield yield Jt(r)}}finally{n.releaseLock()}})}function Di(e){return z(e?.getReader)}function _e(e){if(e instanceof ae)return e;if(e!=null){if(wi(e))return Np(e);if(yi(e))return Ap(e);if(bi(e))return Tp(e);if(_i(e))return hc(e);if(Ci(e))return kp(e);if(Di(e))return Rp(e)}throw xi(e)}function Np(e){return new ae(t=>{let n=e[Dn]();if(z(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Ap(e){return new ae(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Tp(e){return new ae(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,gi)})}function kp(e){return new ae(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function hc(e){return new ae(t=>{Op(e,t).catch(n=>t.error(n))})}function Rp(e){return hc(Ei(e))}function Op(e,t){var n,r,i,s;return uc(this,void 0,void 0,function*(){try{for(n=fc(e);r=yield n.next(),!r.done;){let a=r.value;if(t.next(a),t.closed)return}}catch(a){i={error:a}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}t.complete()})}function Le(e,t,n,r=0,i=!1){let s=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!i)return s}function Si(e,t=0){return ee((n,r)=>{n.subscribe(te(r,i=>Le(r,e,()=>r.next(i),t),()=>Le(r,e,()=>r.complete(),t),i=>Le(r,e,()=>r.error(i),t)))})}function Mi(e,t=0){return ee((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function pc(e,t){return _e(e).pipe(Mi(t),Si(t))}function gc(e,t){return _e(e).pipe(Mi(t),Si(t))}function mc(e,t){return new ae(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function vc(e,t){return new ae(n=>{let r;return Le(n,t,()=>{r=e[Ii](),Le(n,t,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(a){n.error(a);return}s?n.complete():n.next(i)},0,!0)}),()=>z(r?.return)&&r.return()})}function Ni(e,t){if(!e)throw new Error("Iterable cannot be null");return new ae(n=>{Le(n,t,()=>{let r=e[Symbol.asyncIterator]();Le(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function yc(e,t){return Ni(Ei(e),t)}function bc(e,t){if(e!=null){if(wi(e))return pc(e,t);if(yi(e))return mc(e,t);if(bi(e))return gc(e,t);if(_i(e))return Ni(e,t);if(Ci(e))return vc(e,t);if(Di(e))return yc(e,t)}throw xi(e)}function ve(e,t){return t?bc(e,t):_e(e)}function $(...e){let t=Lt(e);return ve(e,t)}function Nn(e,t){let n=z(e)?e:()=>e,r=i=>i.error(n());return new ae(t?i=>t.schedule(r,0,i):r)}function gs(e){return!!e&&(e instanceof ae||z(e.lift)&&z(e.subscribe))}var It=xn(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function J(e,t){return ee((n,r)=>{let i=0;n.subscribe(te(r,s=>{r.next(e.call(t,s,i++))}))})}var{isArray:Lp}=Array;function Pp(e,t){return Lp(t)?e(...t):e(t)}function wc(e){return J(t=>Pp(e,t))}var{isArray:Fp}=Array,{getPrototypeOf:jp,prototype:Up,keys:Bp}=Object;function _c(e){if(e.length===1){let t=e[0];if(Fp(t))return{args:t,keys:null};if(Vp(t)){let n=Bp(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function Vp(e){return e&&typeof e=="object"&&jp(e)===Up}function xc(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function Ai(...e){let t=Lt(e),n=lc(e),{args:r,keys:i}=_c(e);if(r.length===0)return ve([],t);let s=new ae($p(r,t,i?a=>xc(i,a):Fe));return n?s.pipe(wc(n)):s}function $p(e,t,n=Fe){return r=>{Ic(t,()=>{let{length:i}=e,s=new Array(i),a=i,c=i;for(let l=0;l<i;l++)Ic(t,()=>{let d=ve(e[l],t),u=!1;d.subscribe(te(r,f=>{s[l]=f,u||(u=!0,c--),c||r.next(n(s.slice()))},()=>{--a||r.complete()}))},r)},r)}}function Ic(e,t,n){e?Le(n,e,t):t()}function Cc(e,t,n,r,i,s,a,c){let l=[],d=0,u=0,f=!1,p=()=>{f&&!l.length&&!d&&t.complete()},h=b=>d<r?m(b):l.push(b),m=b=>{s&&t.next(b),d++;let _=!1;_e(n(b,u++)).subscribe(te(t,g=>{i?.(g),s?h(g):t.next(g)},()=>{_=!0},void 0,()=>{if(_)try{for(d--;l.length&&d<r;){let g=l.shift();a?Le(t,a,()=>m(g)):m(g)}p()}catch(g){t.error(g)}}))};return e.subscribe(te(t,h,()=>{f=!0,p()})),()=>{c?.()}}function be(e,t,n=1/0){return z(t)?be((r,i)=>J((s,a)=>t(r,s,i,a))(_e(e(r,i))),n):(typeof t=="number"&&(n=t),ee((r,i)=>Cc(r,i,e,n)))}function ms(e=1/0){return be(Fe,e)}function Ec(){return ms(1)}function An(...e){return Ec()(ve(e,Lt(e)))}function Ti(e){return new ae(t=>{_e(e()).subscribe(t)})}function Ge(e,t){return ee((n,r)=>{let i=0;n.subscribe(te(r,s=>e.call(t,s,i++)&&r.next(s)))})}function Pt(e){return ee((t,n)=>{let r=null,i=!1,s;r=t.subscribe(te(n,void 0,void 0,a=>{s=_e(e(a,Pt(e)(t))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Dc(e,t,n,r,i){return(s,a)=>{let c=n,l=t,d=0;s.subscribe(te(a,u=>{let f=d++;l=c?e(l,u,f):(c=!0,u),r&&a.next(l)},i&&(()=>{c&&a.next(l),a.complete()})))}}function en(e,t){return z(t)?be(e,t,1):be(e,1)}function Ft(e){return ee((t,n)=>{let r=!1;t.subscribe(te(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function Ct(e){return e<=0?()=>Oe:ee((t,n)=>{let r=0;t.subscribe(te(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function ki(e=Hp){return ee((t,n)=>{let r=!1;t.subscribe(te(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function Hp(){return new It}function Tn(e){return ee((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function Et(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Ge((i,s)=>e(i,s,r)):Fe,Ct(1),n?Ft(t):ki(()=>new It))}function kn(e){return e<=0?()=>Oe:ee((t,n)=>{let r=[];t.subscribe(te(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function vs(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Ge((i,s)=>e(i,s,r)):Fe,kn(1),n?Ft(t):ki(()=>new It))}function ys(e,t){return ee(Dc(e,t,arguments.length>=2,!0))}function bs(...e){let t=Lt(e);return ee((n,r)=>{(t?An(e,n,t):An(e,n)).subscribe(r)})}function We(e,t){return ee((n,r)=>{let i=null,s=0,a=!1,c=()=>a&&!i&&r.complete();n.subscribe(te(r,l=>{i?.unsubscribe();let d=0,u=s++;_e(e(l,u)).subscribe(i=te(r,f=>r.next(t?t(l,f,u,d++):f),()=>{i=null,c()}))},()=>{a=!0,c()}))})}function ws(e){return ee((t,n)=>{_e(e).subscribe(te(n,()=>n.complete(),pr)),!n.closed&&t.subscribe(n)})}function we(e,t,n){let r=z(e)||t||n?{next:e,error:t,complete:n}:e;return r?ee((i,s)=>{var a;(a=r.subscribe)===null||a===void 0||a.call(r);let c=!0;i.subscribe(te(s,l=>{var d;(d=r.next)===null||d===void 0||d.call(r,l),s.next(l)},()=>{var l;c=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},l=>{var d;c=!1,(d=r.error)===null||d===void 0||d.call(r,l),s.error(l)},()=>{var l,d;c&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):Fe}var j=class extends Error{code;constructor(t,n){super(oo(t,n)),this.code=t}};function oo(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}var fu=Symbol("InputSignalNode#UNSET"),zp=fe(F({},Kl),{transformFn:void 0,applyValueToInputSignal(e,t){Ql(e,t)}});function hu(e,t){let n=Object.create(zp);n.value=e,n.transformFn=t?.transform;function r(){if(Hl(n),n.value===fu)throw new j(-950,!1);return n.value}return r[_n]=n,r}function ca(e){return{toString:e}.toString()}function ue(e){for(let t in e)if(e[t]===ue)return t;throw Error("Could not find renamed property on target object.")}function Ue(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(Ue).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function Sc(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var qp=ue({__forward_ref__:ue});function pu(e){return e.__forward_ref__=pu,e.toString=function(){return Ue(this())},e}function Xe(e){return gu(e)?e():e}function gu(e){return typeof e=="function"&&e.hasOwnProperty(qp)&&e.__forward_ref__===pu}function H(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function so(e){return Mc(e,vu)||Mc(e,yu)}function mu(e){return so(e)!==null}function Mc(e,t){return e.hasOwnProperty(t)?e[t]:null}function Gp(e){let t=e&&(e[vu]||e[yu]);return t||null}function Nc(e){return e&&(e.hasOwnProperty(Ac)||e.hasOwnProperty(Wp))?e[Ac]:null}var vu=ue({\u0275prov:ue}),Ac=ue({\u0275inj:ue}),yu=ue({ngInjectableDef:ue}),Wp=ue({ngInjectorDef:ue}),B=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=H({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function bu(e){return e&&!!e.\u0275providers}var Yp=ue({\u0275cmp:ue}),Xp=ue({\u0275dir:ue}),Zp=ue({\u0275pipe:ue}),Qp=ue({\u0275mod:ue}),Ui=ue({\u0275fac:ue}),yr=ue({__NG_ELEMENT_ID__:ue}),Tc=ue({__NG_ENV_ID__:ue});function Kp(e){return typeof e=="string"?e:e==null?"":String(e)}function Jp(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Kp(e)}function eg(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new j(-200,e)}function ua(e,t){throw new j(-201,!1)}var X=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(X||{}),As;function wu(){return As}function Ye(e){let t=As;return As=e,t}function _u(e,t,n){let r=so(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&X.Optional)return null;if(t!==void 0)return t;ua(e,"Injector")}var tg={},br=tg,ng="__NG_DI_FLAG__",Bi="ngTempTokenPath",rg="ngTokenPath",ig=/\n/gm,og="\u0275",kc="__source",Pn;function sg(){return Pn}function jt(e){let t=Pn;return Pn=e,t}function ag(e,t=X.Default){if(Pn===void 0)throw new j(-203,!1);return Pn===null?_u(e,void 0,t):Pn.get(e,t&X.Optional?null:void 0,t)}function K(e,t=X.Default){return(wu()||ag)(Xe(e),t)}function A(e,t=X.Default){return K(e,ao(t))}function ao(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Ts(e){let t=[];for(let n=0;n<e.length;n++){let r=Xe(e[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,s=X.Default;for(let a=0;a<r.length;a++){let c=r[a],l=lg(c);typeof l=="number"?l===-1?i=c.token:s|=l:i=c}t.push(K(i,s))}else t.push(K(r))}return t}function lg(e){return e[ng]}function cg(e,t,n,r){let i=e[Bi];throw t[kc]&&i.unshift(t[kc]),e.message=ug(`
`+e.message,i,n,r),e[rg]=i,e[Bi]=null,e}function ug(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==og?e.slice(2):e;let i=Ue(t);if(Array.isArray(t))i=t.map(Ue).join(" -> ");else if(typeof t=="object"){let s=[];for(let a in t)if(t.hasOwnProperty(a)){let c=t[a];s.push(a+":"+(typeof c=="string"?JSON.stringify(c):Ue(c)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(ig,`
  `)}`}function jn(e,t){let n=e.hasOwnProperty(Ui);return n?e[Ui]:null}function da(e,t){e.forEach(n=>Array.isArray(n)?da(n,t):t(n))}function xu(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Vi(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}var wr={},Un=[],nn=new B(""),Iu=new B("",-1),Cu=new B(""),$i=class{get(t,n=br){if(n===br){let r=new Error(`NullInjectorError: No provider for ${Ue(t)}!`);throw r.name="NullInjectorError",r}return n}};function Eu(e,t){let n=e[Qp]||null;if(!n&&t===!0)throw new Error(`Type ${Ue(e)} does not have '\u0275mod' property.`);return n}function rn(e){return e[Yp]||null}function Du(e){return e[Xp]||null}function Su(e){return e[Zp]||null}function Mu(e){let t=rn(e)||Du(e)||Su(e);return t!==null&&t.standalone}function ln(e){return{\u0275providers:e}}function dg(...e){return{\u0275providers:Nu(!0,e),\u0275fromNgModule:!0}}function Nu(e,...t){let n=[],r=new Set,i,s=a=>{n.push(a)};return da(t,a=>{let c=a;ks(c,s,[],r)&&(i||=[],i.push(c))}),i!==void 0&&Au(i,s),n}function Au(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];fa(i,s=>{t(s,r)})}}function ks(e,t,n,r){if(e=Xe(e),!e)return!1;let i=null,s=Nc(e),a=!s&&rn(e);if(!s&&!a){let l=e.ngModule;if(s=Nc(l),s)i=l;else return!1}else{if(a&&!a.standalone)return!1;i=e}let c=r.has(i);if(a){if(c)return!1;if(r.add(i),a.dependencies){let l=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let d of l)ks(d,t,n,r)}}else if(s){if(s.imports!=null&&!c){r.add(i);let d;try{da(s.imports,u=>{ks(u,t,n,r)&&(d||=[],d.push(u))})}finally{}d!==void 0&&Au(d,t)}if(!c){let d=jn(i)||(()=>new i);t({provide:i,useFactory:d,deps:Un},i),t({provide:Cu,useValue:i,multi:!0},i),t({provide:nn,useValue:()=>K(i),multi:!0},i)}let l=s.providers;if(l!=null&&!c){let d=e;fa(l,u=>{t(u,d)})}}else return!1;return i!==e&&e.providers!==void 0}function fa(e,t){for(let n of e)bu(n)&&(n=n.\u0275providers),Array.isArray(n)?fa(n,t):t(n)}var fg=ue({provide:String,useValue:ue});function Tu(e){return e!==null&&typeof e=="object"&&fg in e}function hg(e){return!!(e&&e.useExisting)}function pg(e){return!!(e&&e.useFactory)}function Rs(e){return typeof e=="function"}var lo=new B(""),Oi={},gg={},_s;function ha(){return _s===void 0&&(_s=new $i),_s}var Ze=class{},_r=class extends Ze{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Ls(t,a=>this.processProvider(a)),this.records.set(Iu,Rn(void 0,this)),i.has("environment")&&this.records.set(Ze,Rn(void 0,this));let s=this.records.get(lo);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Cu,Un,X.Self))}destroy(){mr(this),this._destroyed=!0;let t=ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ce(t)}}onDestroy(t){return mr(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){mr(this);let n=jt(this),r=Ye(void 0),i;try{return t()}finally{jt(n),Ye(r)}}get(t,n=br,r=X.Default){if(mr(this),t.hasOwnProperty(Tc))return t[Tc](this);r=ao(r);let i,s=jt(this),a=Ye(void 0);try{if(!(r&X.SkipSelf)){let l=this.records.get(t);if(l===void 0){let d=_g(t)&&so(t);d&&this.injectableDefInScope(d)?l=Rn(Os(t),Oi):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let c=r&X.Self?ha():this.parent;return n=r&X.Optional&&n===br?null:n,c.get(t,n)}catch(c){if(c.name==="NullInjectorError"){if((c[Bi]=c[Bi]||[]).unshift(Ue(t)),s)throw c;return cg(c,t,"R3InjectorError",this.source)}else throw c}finally{Ye(a),jt(s)}}resolveInjectorInitializers(){let t=ce(null),n=jt(this),r=Ye(void 0),i;try{let s=this.get(nn,Un,X.Self);for(let a of s)a()}finally{jt(n),Ye(r),ce(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Ue(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Xe(t);let n=Rs(t)?t:Xe(t&&t.provide),r=vg(t);if(!Rs(t)&&t.multi===!0){let i=this.records.get(n);i||(i=Rn(void 0,Oi,!0),i.factory=()=>Ts(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=ce(null);try{return n.value===Oi&&(n.value=gg,n.value=n.factory()),typeof n.value=="object"&&n.value&&wg(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ce(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Xe(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Os(e){let t=so(e),n=t!==null?t.factory:jn(e);if(n!==null)return n;if(e instanceof B)throw new j(204,!1);if(e instanceof Function)return mg(e);throw new j(204,!1)}function mg(e){if(e.length>0)throw new j(204,!1);let n=Gp(e);return n!==null?()=>n.factory(e):()=>new e}function vg(e){if(Tu(e))return Rn(void 0,e.useValue);{let t=yg(e);return Rn(t,Oi)}}function yg(e,t,n){let r;if(Rs(e)){let i=Xe(e);return jn(i)||Os(i)}else if(Tu(e))r=()=>Xe(e.useValue);else if(pg(e))r=()=>e.useFactory(...Ts(e.deps||[]));else if(hg(e))r=()=>K(Xe(e.useExisting));else{let i=Xe(e&&(e.useClass||e.provide));if(bg(e))r=()=>new i(...Ts(e.deps));else return jn(i)||Os(i)}return r}function mr(e){if(e.destroyed)throw new j(205,!1)}function Rn(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function bg(e){return!!e.deps}function wg(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function _g(e){return typeof e=="function"||typeof e=="object"&&e instanceof B}function Ls(e,t){for(let n of e)Array.isArray(n)?Ls(n,t):n&&bu(n)?Ls(n.\u0275providers,t):t(n)}function Ke(e,t){e instanceof _r&&mr(e);let n,r=jt(e),i=Ye(void 0);try{return t()}finally{jt(r),Ye(i)}}function xg(){return wu()!==void 0||sg()!=null}function Ig(e){return typeof e=="function"}var $e=0,ne=1,Y=2,Ae=3,ot=4,at=5,pt=6,Rc=7,Dt=8,xr=9,Bt=10,Te=11,Ir=12,Oc=13,Tr=14,Qe=15,Cr=16,On=17,co=18,uo=19,ku=20,Ut=21,xs=22,Hi=23,Be=24,Pe=25,Ru=1,Er=6,St=7,zi=8,qi=9,Ve=10;function ht(e){return Array.isArray(e)&&typeof e[Ru]=="object"}function yt(e){return Array.isArray(e)&&e[Ru]===!0}function Ou(e){return(e.flags&4)!==0}function Hn(e){return e.componentOffset>-1}function Cg(e){return(e.flags&1)===1}function zn(e){return!!e.template}function Dr(e){return(e[Y]&512)!==0}function kr(e){return(e[Y]&256)===256}var Ps=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Lu(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var pa=(()=>{let e=()=>Pu;return e.ngInherit=!0,e})();function Pu(e){return e.type.prototype.ngOnChanges&&(e.setInput=Dg),Eg}function Eg(){let e=ju(this),t=e?.current;if(t){let n=e.previous;if(n===wr)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function Dg(e,t,n,r,i){let s=this.declaredInputs[r],a=ju(e)||Sg(e,{previous:wr,current:null}),c=a.current||(a.current={}),l=a.previous,d=l[s];c[s]=new Ps(d&&d.currentValue,n,l===wr),Lu(e,t,i,n)}var Fu="__ngSimpleChanges__";function ju(e){return e[Fu]||null}function Sg(e,t){return e[Fu]=t}var Lc=null;var dt=function(e,t,n){Lc?.(e,t,n)},Mg="svg",Ng="math";function Mt(e){for(;Array.isArray(e);)e=e[$e];return e}function Nt(e,t){return Mt(t[e.index])}function Ag(e,t){return e.data[t]}function on(e,t){let n=t[e];return ht(n)?n:n[$e]}function ga(e){return(e[Y]&128)===128}function Tg(e){return yt(e[Ae])}function Pc(e,t){return t==null?null:e[t]}function Uu(e){e[On]=0}function ma(e){e[Y]&1024||(e[Y]|=1024,ga(e)&&ho(e))}function fo(e){return!!(e[Y]&9216||e[Be]?.dirty)}function Fs(e){e[Bt].changeDetectionScheduler?.notify(9),e[Y]&64&&(e[Y]|=1024),fo(e)&&ho(e)}function ho(e){e[Bt].changeDetectionScheduler?.notify(0);let t=sn(e);for(;t!==null&&!(t[Y]&8192||(t[Y]|=8192,!ga(t)));)t=sn(t)}function Bu(e,t){if(kr(e))throw new j(911,!1);e[Ut]===null&&(e[Ut]=[]),e[Ut].push(t)}function kg(e,t){if(e[Ut]===null)return;let n=e[Ut].indexOf(t);n!==-1&&e[Ut].splice(n,1)}function sn(e){let t=e[Ae];return yt(t)?t[Ae]:t}var le={lFrame:Yu(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var js=!1;function Rg(){return le.lFrame.elementDepthCount}function Og(){le.lFrame.elementDepthCount++}function Lg(){le.lFrame.elementDepthCount--}function Vu(){return le.bindingsEnabled}function Rr(){return le.skipHydrationRootTNode!==null}function Pg(e){return le.skipHydrationRootTNode===e}function Fg(e){le.skipHydrationRootTNode=e}function jg(){le.skipHydrationRootTNode=null}function gt(){return le.lFrame.lView}function va(){return le.lFrame.tView}function cn(){let e=$u();for(;e!==null&&e.type===64;)e=e.parent;return e}function $u(){return le.lFrame.currentTNode}function Ug(){let e=le.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function po(e,t){let n=le.lFrame;n.currentTNode=e,n.isParent=t}function Hu(){return le.lFrame.isParent}function Bg(){le.lFrame.isParent=!1}function zu(){return js}function Fc(e){let t=js;return js=e,t}function Vg(e){return le.lFrame.bindingIndex=e}function $g(){return le.lFrame.inI18n}function Hg(e,t){let n=le.lFrame;n.bindingIndex=n.bindingRootIndex=e,Us(t)}function zg(){return le.lFrame.currentDirectiveIndex}function Us(e){le.lFrame.currentDirectiveIndex=e}function qu(e){le.lFrame.currentQueryIndex=e}function qg(e){let t=e[ne];return t.type===2?t.declTNode:t.type===1?e[at]:null}function Gu(e,t,n){if(n&X.SkipSelf){let i=t,s=e;for(;i=i.parent,i===null&&!(n&X.Host);)if(i=qg(s),i===null||(s=s[Tr],i.type&10))break;if(i===null)return!1;t=i,e=s}let r=le.lFrame=Wu();return r.currentTNode=t,r.lView=e,!0}function ya(e){let t=Wu(),n=e[ne];le.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Wu(){let e=le.lFrame,t=e===null?null:e.child;return t===null?Yu(e):t}function Yu(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function Xu(){let e=le.lFrame;return le.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Zu=Xu;function ba(){let e=Xu();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Gg(){return le.lFrame.selectedIndex}function an(e){le.lFrame.selectedIndex=e}function Qu(){return le.lFrame.currentNamespace}var Ku=!0;function Ju(){return Ku}function zt(e){Ku=e}function Wg(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){let a=Pu(t);(n.preOrderHooks??=[]).push(e,a),(n.preOrderCheckHooks??=[]).push(e,a)}i&&(n.preOrderHooks??=[]).push(0-e,i),s&&((n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s))}function Yg(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let s=e.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:c,ngAfterViewInit:l,ngAfterViewChecked:d,ngOnDestroy:u}=s;a&&(e.contentHooks??=[]).push(-n,a),c&&((e.contentHooks??=[]).push(n,c),(e.contentCheckHooks??=[]).push(n,c)),l&&(e.viewHooks??=[]).push(-n,l),d&&((e.viewHooks??=[]).push(n,d),(e.viewCheckHooks??=[]).push(n,d)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function Li(e,t,n){ed(e,t,3,n)}function Pi(e,t,n,r){(e[Y]&3)===n&&ed(e,t,n,r)}function Is(e,t){let n=e[Y];(n&3)===t&&(n&=16383,n+=1,e[Y]=n)}function ed(e,t,n,r){let i=r!==void 0?e[On]&65535:0,s=r??-1,a=t.length-1,c=0;for(let l=i;l<a;l++)if(typeof t[l+1]=="number"){if(c=t[l],r!=null&&c>=r)break}else t[l]<0&&(e[On]+=65536),(c<s||s==-1)&&(Xg(e,n,t,l),e[On]=(e[On]&4294901760)+l+2),l++}function jc(e,t){dt(4,e,t);let n=ce(null);try{t.call(e)}finally{ce(n),dt(5,e,t)}}function Xg(e,t,n,r){let i=n[r]<0,s=n[r+1],a=i?-n[r]:n[r],c=e[a];i?e[Y]>>14<e[On]>>16&&(e[Y]&3)===t&&(e[Y]+=16384,jc(c,s)):jc(c,s)}var Fn=-1,Sr=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r){this.factory=t,this.canSeeViewProviders=n,this.injectImpl=r}};function Zg(e){return e instanceof Sr}function Qg(e){return(e.flags&8)!==0}function Kg(e){return(e.flags&16)!==0}function Jg(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],a=n[r++],c=n[r++];e.setAttribute(t,a,c,s)}else{let s=i,a=n[++r];tm(s)?e.setProperty(t,s,a):e.setAttribute(t,s,a),r++}}return r}function em(e){return e===3||e===4||e===6}function tm(e){return e.charCodeAt(0)===64}function td(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Uc(e,n,i,null,t[++r]):Uc(e,n,i,null,null))}}return e}function Uc(e,t,n,r,i){let s=0,a=e.length;if(t===-1)a=-1;else for(;s<e.length;){let c=e[s++];if(typeof c=="number"){if(c===t){a=-1;break}else if(c>t){a=s-1;break}}}for(;s<e.length;){let c=e[s];if(typeof c=="number")break;if(c===n){if(r===null){i!==null&&(e[s+1]=i);return}else if(r===e[s+1]){e[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}a!==-1&&(e.splice(a,0,t),s=a+1),e.splice(s++,0,n),r!==null&&e.splice(s++,0,r),i!==null&&e.splice(s++,0,i)}var Cs={},Bs=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=ao(r);let i=this.injector.get(t,Cs,r);return i!==Cs||n===Cs?i:this.parentInjector.get(t,n,r)}};function nd(e){return e!==Fn}function Gi(e){return e&32767}function nm(e){return e>>16}function Wi(e,t){let n=nm(e),r=t;for(;n>0;)r=r[Tr],n--;return r}var Vs=!0;function Bc(e){let t=Vs;return Vs=e,t}var rm=256,rd=rm-1,id=5,im=0,ft={};function om(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(yr)&&(r=n[yr]),r==null&&(r=n[yr]=im++);let i=r&rd,s=1<<i;t.data[e+(i>>id)]|=s}function od(e,t){let n=sd(e,t);if(n!==-1)return n;let r=t[ne];r.firstCreatePass&&(e.injectorIndex=t.length,Es(r.data,e),Es(t,null),Es(r.blueprint,null));let i=wa(e,t),s=e.injectorIndex;if(nd(i)){let a=Gi(i),c=Wi(i,t),l=c[ne].data;for(let d=0;d<8;d++)t[s+d]=c[a+d]|l[a+d]}return t[s+8]=i,s}function Es(e,t){e.push(0,0,0,0,0,0,0,0,t)}function sd(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function wa(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=dd(i),r===null)return Fn;if(n++,i=i[Tr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Fn}function sm(e,t,n){om(e,t,n)}function ad(e,t,n){if(n&X.Optional||e!==void 0)return e;ua(t,"NodeInjector")}function ld(e,t,n,r){if(n&X.Optional&&r===void 0&&(r=null),!(n&(X.Self|X.Host))){let i=e[xr],s=Ye(void 0);try{return i?i.get(t,r,n&X.Optional):_u(t,r,n&X.Optional)}finally{Ye(s)}}return ad(r,t,n)}function cd(e,t,n,r=X.Default,i){if(e!==null){if(t[Y]&2048&&!(r&X.Self)){let a=dm(e,t,n,r,ft);if(a!==ft)return a}let s=ud(e,t,n,r,ft);if(s!==ft)return s}return ld(t,n,r,i)}function ud(e,t,n,r,i){let s=cm(n);if(typeof s=="function"){if(!Gu(t,e,r))return r&X.Host?ad(i,n,r):ld(t,n,r,i);try{let a;if(a=s(r),a==null&&!(r&X.Optional))ua(n);else return a}finally{Zu()}}else if(typeof s=="number"){let a=null,c=sd(e,t),l=Fn,d=r&X.Host?t[Qe][at]:null;for((c===-1||r&X.SkipSelf)&&(l=c===-1?wa(e,t):t[c+8],l===Fn||!$c(r,!1)?c=-1:(a=t[ne],c=Gi(l),t=Wi(l,t)));c!==-1;){let u=t[ne];if(Vc(s,c,u.data)){let f=am(c,t,n,a,r,d);if(f!==ft)return f}l=t[c+8],l!==Fn&&$c(r,t[ne].data[c+8]===d)&&Vc(s,c,t)?(a=u,c=Gi(l),t=Wi(l,t)):c=-1}}return i}function am(e,t,n,r,i,s){let a=t[ne],c=a.data[e+8],l=r==null?Hn(c)&&Vs:r!=a&&(c.type&3)!==0,d=i&X.Host&&s===c,u=lm(c,a,n,l,d);return u!==null?$s(t,a,u,c):ft}function lm(e,t,n,r,i){let s=e.providerIndexes,a=t.data,c=s&1048575,l=e.directiveStart,d=e.directiveEnd,u=s>>20,f=r?c:c+u,p=i?c+u:d;for(let h=f;h<p;h++){let m=a[h];if(h<l&&n===m||h>=l&&m.type===n)return h}if(i){let h=a[l];if(h&&zn(h)&&h.type===n)return l}return null}function $s(e,t,n,r){let i=e[n],s=t.data;if(Zg(i)){let a=i;a.resolving&&eg(Jp(s[n]));let c=Bc(a.canSeeViewProviders);a.resolving=!0;let l,d=a.injectImpl?Ye(a.injectImpl):null,u=Gu(e,r,X.Default);try{i=e[n]=a.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&Wg(n,s[n],t)}finally{d!==null&&Ye(d),Bc(c),a.resolving=!1,Zu()}}return i}function cm(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(yr)?e[yr]:void 0;return typeof t=="number"?t>=0?t&rd:um:t}function Vc(e,t,n){let r=1<<e;return!!(n[t+(e>>id)]&r)}function $c(e,t){return!(e&X.Self)&&!(e&X.Host&&t)}var tn=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return cd(this._tNode,this._lView,t,ao(r),n)}};function um(){return new tn(cn(),gt())}function _a(e){return ca(()=>{let t=e.prototype.constructor,n=t[Ui]||Hs(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let s=i[Ui]||Hs(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Hs(e){return gu(e)?()=>{let t=Hs(Xe(e));return t&&t()}:jn(e)}function dm(e,t,n,r,i){let s=e,a=t;for(;s!==null&&a!==null&&a[Y]&2048&&!Dr(a);){let c=ud(s,a,n,r|X.Self,ft);if(c!==ft)return c;let l=s.parent;if(!l){let d=a[ku];if(d){let u=d.get(n,ft,r);if(u!==ft)return u}l=dd(a),a=a[Tr]}s=l}return i}function dd(e){let t=e[ne],n=t.type;return n===2?t.declTNode:n===1?e[at]:null}function Hc(e,t=null,n=null,r){let i=fd(e,t,n,r);return i.resolveInjectorInitializers(),i}function fd(e,t=null,n=null,r,i=new Set){let s=[n||Un,dg(e)];return r=r||(typeof e=="object"?void 0:Ue(e)),new _r(s,t||ha(),r||null,i)}var mt=class e{static THROW_IF_NOT_FOUND=br;static NULL=new $i;static create(t,n){if(Array.isArray(t))return Hc({name:""},n,t,"");{let r=t.name??"";return Hc({name:r},t.parent,t.providers,r)}}static \u0275prov=H({token:e,providedIn:"any",factory:()=>K(Iu)});static __NG_ELEMENT_ID__=-1};var fm=new B("");fm.__NG_ELEMENT_ID__=e=>{let t=cn();if(t===null)throw new j(204,!1);if(t.type&2)return t.value;if(e&X.Optional)return null;throw new j(204,!1)};var hd=!1,go=(()=>{class e{static __NG_ELEMENT_ID__=hm;static __NG_ENV_ID__=n=>n}return e})(),zs=class extends go{_lView;constructor(t){super(),this._lView=t}onDestroy(t){return Bu(this._lView,t),()=>kg(this._lView,t)}};function hm(){return new zs(gt())}var Mr=class{},mo=new B("",{providedIn:"root",factory:()=>!1});var pd=new B(""),gd=new B(""),un=(()=>{class e{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new De(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=H({token:e,providedIn:"root",factory:()=>new e})}return e})();var qs=class extends Ne{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,xg()&&(this.destroyRef=A(go,{optional:!0})??void 0,this.pendingTasks=A(un,{optional:!0})??void 0)}emit(t){let n=ce(null);try{super.next(t)}finally{ce(n)}}subscribe(t,n,r){let i=t,s=n||(()=>null),a=r;if(t&&typeof t=="object"){let l=t;i=l.next?.bind(l),s=l.error?.bind(l),a=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),a&&(a=this.wrapInTimeout(a)));let c=super.subscribe({next:i,error:s,complete:a});return t instanceof me&&t.add(c),c}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},je=qs;function Yi(...e){}function md(e){let t,n;function r(){e=Yi;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function zc(e){return queueMicrotask(()=>e()),()=>{e=Yi}}var xa="isAngularZone",Xi=xa+"_ID",pm=0,xe=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new je(!1);onMicrotaskEmpty=new je(!1);onStable=new je(!1);onError=new je(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=hd}=t;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!i&&r,a.shouldCoalesceRunChangeDetection=i,a.callbackScheduled=!1,a.scheduleInRootZone=s,vm(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(xa)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new j(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let s=this._inner,a=s.scheduleEventTask("NgZoneEvent: "+i,t,gm,Yi,Yi);try{return s.runTask(a,n,r)}finally{s.cancelTask(a)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},gm={};function Ia(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function mm(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){md(()=>{e.callbackScheduled=!1,Gs(e),e.isCheckStableRunning=!0,Ia(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Gs(e)}function vm(e){let t=()=>{mm(e)},n=pm++;e._inner=e._inner.fork({name:"angular",properties:{[xa]:!0,[Xi]:n,[Xi+n]:!0},onInvokeTask:(r,i,s,a,c,l)=>{if(ym(l))return r.invokeTask(s,a,c,l);try{return qc(e),r.invokeTask(s,a,c,l)}finally{(e.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),Gc(e)}},onInvoke:(r,i,s,a,c,l,d)=>{try{return qc(e),r.invoke(s,a,c,l,d)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!bm(l)&&t(),Gc(e)}},onHasTask:(r,i,s,a)=>{r.hasTask(s,a),i===s&&(a.change=="microTask"?(e._hasPendingMicrotasks=a.microTask,Gs(e),Ia(e)):a.change=="macroTask"&&(e.hasPendingMacrotasks=a.macroTask))},onHandleError:(r,i,s,a)=>(r.handleError(s,a),e.runOutsideAngular(()=>e.onError.emit(a)),!1)})}function Gs(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function qc(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Gc(e){e._nesting--,Ia(e)}var Ws=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new je;onMicrotaskEmpty=new je;onStable=new je;onError=new je;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function ym(e){return vd(e,"__ignore_ng_zone__")}function bm(e){return vd(e,"__scheduler_tick__")}function vd(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Vt=class{_console=console;handleError(t){this._console.error("ERROR",t)}},wm=new B("",{providedIn:"root",factory:()=>{let e=A(xe),t=A(Vt);return n=>e.runOutsideAngular(()=>t.handleError(n))}});function Wc(e,t){return hu(e,t)}function _m(e){return hu(fu,e)}var yd=(Wc.required=_m,Wc);function xm(){return Ca(cn(),gt())}function Ca(e,t){return new vo(Nt(e,t))}var vo=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=xm}return e})();var Yc=new Set;function qn(e){Yc.has(e)||(Yc.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var Im="ngSkipHydration",Cm="ngskiphydration";function bd(e){let t=e.mergedAttrs;if(t===null)return!1;for(let n=0;n<t.length;n+=2){let r=t[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===Cm)return!0}return!1}function wd(e){return e.hasAttribute(Im)}function Zi(e){return(e.flags&128)===128}function Em(e){if(Zi(e))return!0;let t=e.parent;for(;t;){if(Zi(e)||bd(t))return!0;t=t.parent}return!1}var _d=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(_d||{}),xd=new Map,Dm=0;function Sm(){return Dm++}function Mm(e){xd.set(e[uo],e)}function Ys(e){xd.delete(e[uo])}var Xc="__ngContext__";function Or(e,t){ht(t)?(e[Xc]=t[uo],Mm(t)):e[Xc]=t}function Id(e){return Ed(e[Ir])}function Cd(e){return Ed(e[ot])}function Ed(e){for(;e!==null&&!yt(e);)e=e[ot];return e}var Xs;function Dd(e){Xs=e}function yo(){if(Xs!==void 0)return Xs;if(typeof document<"u")return document;throw new j(210,!1)}var bo=new B("",{providedIn:"root",factory:()=>Nm}),Nm="ng",Ea=new B(""),dn=new B("",{providedIn:"platform",factory:()=>"unknown"});var Da=new B("",{providedIn:"root",factory:()=>yo().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Am(){let e=new Gn;return A(dn)==="browser"&&(e.store=Tm(yo(),A(bo))),e}var Gn=(()=>{class e{static \u0275prov=H({token:e,providedIn:"root",factory:Am});store={};onSerializeCallbacks={};get(n,r){return this.store[n]!==void 0?this.store[n]:r}set(n,r){this.store[n]=r}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(n,r){this.onSerializeCallbacks[n]=r}toJson(){for(let n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return e})();function Tm(e,t){let n=e.getElementById(t+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+t,r)}return{}}var Sd="h",Md="b",km="f",Rm="n",Om="e",Lm="t",Sa="c",Nd="x",Qi="r",Pm="i",Fm="n",Ad="d";var jm="di";var Ri=new B(""),Td=!1,kd=new B("",{providedIn:"root",factory:()=>Td});var Rd=function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e}(Rd||{}),wo=new B("");var Um=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:e,providedIn:"root",factory:()=>new e})}return e})();var Bm="__nghData__",Od=Bm;var Ds="ngh",Vm="nghm",Ld=()=>null;function $m(e,t,n=!1){let r=e.getAttribute(Ds);if(r==null)return null;let[i,s]=r.split("|");if(r=n?s:i,!r)return null;let a=s?`|${s}`:"",c=n?i:a,l={};if(r!==""){let u=t.get(Gn,null,{optional:!0});u!==null&&(l=u.get(Od,[])[Number(r)])}let d={data:l,firstChild:e.firstChild??null};return n&&(d.firstChild=e,_o(d,0,e.nextSibling)),c?e.setAttribute(Ds,c):e.removeAttribute(Ds),d}function Hm(){Ld=$m}function Pd(e,t,n=!1){return Ld(e,t,n)}function zm(e){let t=e._lView;return t[ne].type===2?null:(Dr(t)&&(t=t[Pe]),t)}function qm(e){return e.textContent?.replace(/\s/gm,"")}function Gm(e){let t=yo(),n=t.createNodeIterator(e,NodeFilter.SHOW_COMMENT,{acceptNode(s){let a=qm(s);return a==="ngetn"||a==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let s of i)s.textContent==="ngetn"?s.replaceWith(t.createTextNode("")):s.remove()}function _o(e,t,n){e.segmentHeads??={},e.segmentHeads[t]=n}function Zs(e,t){return e.segmentHeads?.[t]??null}function Wm(e,t){let n=e.data,r=n[Om]?.[t]??null;return r===null&&n[Sa]?.[t]&&(r=Ma(e,t)),r}function Fd(e,t){return e.data[Sa]?.[t]??null}function Ma(e,t){let n=Fd(e,t)??[],r=0;for(let i of n)r+=i[Qi]*(i[Nd]??1);return r}function Ym(e){if(typeof e.disconnectedNodes>"u"){let t=e.data[Ad];e.disconnectedNodes=t?new Set(t):null}return e.disconnectedNodes}function Lr(e,t){if(typeof e.disconnectedNodes>"u"){let n=e.data[Ad];e.disconnectedNodes=n?new Set(n):null}return!!Ym(e)?.has(t)}function jd(e,t){let n=e.contentQueries;if(n!==null){let r=ce(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],a=n[i+1];if(a!==-1){let c=e.data[a];qu(s),c.contentQueries(2,t[a],a)}}}finally{ce(r)}}}function Qs(e,t,n){qu(0);let r=ce(null);try{t(e,n)}finally{ce(r)}}function Ud(e,t,n){if(Ou(t)){let r=ce(null);try{let i=t.directiveStart,s=t.directiveEnd;for(let a=i;a<s;a++){let c=e.data[a];if(c.contentQueries){let l=n[a];c.contentQueries(1,l,a)}}}finally{ce(r)}}}var vt=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(vt||{});var Xm=/^>|^->|<!--|-->|--!>|<!-$/g,Zm=/(<|>)/g,Qm="\u200B$1\u200B";function Km(e){return e.replace(Xm,t=>t.replace(Zm,Qm))}function Jm(e){return e.ownerDocument.body}function Bd(e){return e instanceof Function?e():e}function e0(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let s=t.length;if(i+s===r||e.charCodeAt(i+s)<=32)return i}n=i+1}}var Vd="ng-template";function t0(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&e0(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Na(e))return!1;if(i=t.indexOf(1,i),i>-1){let s;for(;++i<t.length&&typeof(s=t[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Na(e){return e.type===4&&e.value!==Vd}function n0(e,t,n){let r=e.type===4&&!n?Vd:e.value;return t===r}function r0(e,t,n){let r=4,i=e.attrs,s=i!==null?s0(i):0,a=!1;for(let c=0;c<t.length;c++){let l=t[c];if(typeof l=="number"){if(!a&&!it(r)&&!it(l))return!1;if(a&&it(l))continue;a=!1,r=l|r&1;continue}if(!a)if(r&4){if(r=2|r&1,l!==""&&!n0(e,l,n)||l===""&&t.length===1){if(it(r))return!1;a=!0}}else if(r&8){if(i===null||!t0(e,i,l,n)){if(it(r))return!1;a=!0}}else{let d=t[++c],u=i0(l,i,Na(e),n);if(u===-1){if(it(r))return!1;a=!0;continue}if(d!==""){let f;if(u>s?f="":f=i[u+1].toLowerCase(),r&2&&d!==f){if(it(r))return!1;a=!0}}}}return it(r)||a}function it(e){return(e&1)===0}function i0(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<t.length;){let a=t[i];if(a===e)return i;if(a===3||a===6)s=!0;else if(a===1||a===2){let c=t[++i];for(;typeof c=="string";)c=t[++i];continue}else{if(a===4)break;if(a===0){i+=4;continue}}i+=s?1:2}return-1}else return a0(t,e)}function o0(e,t,n=!1){for(let r=0;r<t.length;r++)if(r0(e,t[r],n))return!0;return!1}function s0(e){for(let t=0;t<e.length;t++){let n=e[t];if(em(n))return t}return e.length}function a0(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function Zc(e,t){return e?":not("+t.trim()+")":t}function l0(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let a=e[n];if(typeof a=="string")if(r&2){let c=e[++n];i+="["+a+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+a:r&4&&(i+=" "+a);else i!==""&&!it(a)&&(t+=Zc(s,i),i=""),r=a,s=s||!it(r);n++}return i!==""&&(t+=Zc(s,i)),t}function c0(e){return e.map(l0).join(",")}function u0(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let s=e[r];if(typeof s=="string")i===2?s!==""&&t.push(s,e[++r]):i===8&&n.push(s);else{if(!it(i))break;i=s}r++}return n.length&&t.push(1,...n),t}var $d={};function Hd(e,t){return e.createText(t)}function zd(e,t){return e.createComment(Km(t))}function Aa(e,t,n){return e.createElement(t,n)}function Ki(e,t,n,r,i){e.insertBefore(t,n,r,i)}function qd(e,t,n){e.appendChild(t,n)}function Qc(e,t,n,r,i){r!==null?Ki(e,t,n,r,i):qd(e,t,n)}function Ta(e,t,n){e.removeChild(null,t,n)}function Gd(e){e.textContent=""}function d0(e,t,n){e.setAttribute(t,"style",n)}function f0(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Wd(e,t,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Jg(e,t,r),i!==null&&f0(e,t,i),s!==null&&d0(e,t,s)}function h0(e,t,n,r){if(!r)if((t[Y]&3)===3){let s=e.preOrderCheckHooks;s!==null&&Li(t,s,n)}else{let s=e.preOrderHooks;s!==null&&Pi(t,s,0,n)}an(n)}var $t=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}($t||{});function Yd(e,t,n,r,i,s){let a=ce(null);try{let c=null;i&$t.SignalBased&&(c=t[r][_n]),c!==null&&c.transformFn!==void 0&&(s=c.transformFn(s)),i&$t.HasDecoratorInputTransform&&(s=e.inputTransforms[r].call(t,s)),e.setInput!==null?e.setInput(t,c,s,n,r):Lu(t,c,r,s)}finally{ce(a)}}function Xd(e,t,n,r,i,s,a,c,l,d,u){let f=t.blueprint.slice();return f[$e]=i,f[Y]=r|4|128|8|64|1024,(d!==null||e&&e[Y]&2048)&&(f[Y]|=2048),Uu(f),f[Ae]=f[Tr]=e,f[Dt]=n,f[Bt]=a||e&&e[Bt],f[Te]=c||e&&e[Te],f[xr]=l||e&&e[xr]||null,f[at]=s,f[uo]=Sm(),f[pt]=u,f[ku]=d,f[Qe]=t.type==2?e[Qe]:f,f}function Zd(e,t,n,r,i){let s=Gg(),a=r&2;try{an(-1),a&&t.length>Pe&&h0(e,t,Pe,!1),dt(a?2:0,i),n(r,i)}finally{an(s),dt(a?3:1,i)}}function p0(e,t,n){Vu()&&(Or(Nt(n,t),t),Qd(e,t,n))}function Qd(e,t,n){x0(e,t,n),(n.flags&64)===64&&I0(e,t,n)}function g0(e,t,n=Nt){let r=t.localNames;if(r!==null){let i=t.index+1;for(let s=0;s<r.length;s+=2){let a=r[s+1],c=a===-1?n(t,e):e[a];e[i++]=c}}}function m0(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=Kd(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Kd(e,t,n,r,i,s,a,c,l,d,u){let f=Pe+r,p=f+i,h=v0(f,p),m=typeof d=="function"?d():d;return h[ne]={type:e,blueprint:h,template:n,queries:null,viewQuery:c,declTNode:t,data:h.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1,ssrId:u}}function v0(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:$d);return n}function y0(e,t,n,r){let s=r.get(kd,Td)||n===vt.ShadowDom,a=e.selectRootElement(t,s);return b0(a),a}function b0(e){Jd(e)}var Jd=()=>null;function w0(e){wd(e)?Gd(e):Gm(e)}function _0(){Jd=w0}function x0(e,t,n){let r=n.directiveStart,i=n.directiveEnd;Hn(n)&&D0(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||od(n,t);let s=n.initialInputs;for(let a=r;a<i;a++){let c=e.data[a],l=$s(t,e,a,n);if(Or(l,t),s!==null&&S0(t,a-r,l,c,n,s),zn(c)){let d=on(n.index,t);d[Dt]=$s(t,e,a,n)}}}function I0(e,t,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,a=zg();try{an(s);for(let c=r;c<i;c++){let l=e.data[c],d=t[c];Us(c),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&C0(l,d)}}finally{an(-1),Us(a)}}function C0(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function E0(e,t){let n=e.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let s=n[i];o0(t,s.selectors,!1)&&(r??=[],zn(s)?r.unshift(s):r.push(s))}return r}function ef(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function D0(e,t,n){let r=Nt(t,e),i=m0(n),s=e[Bt].rendererFactory,a=tf(e,Xd(e,i,null,ef(n),r,t,null,s.createRenderer(r,n),null,null,null));return e[t.index]=a}function S0(e,t,n,r,i,s){let a=s[t];if(a!==null)for(let c=0;c<a.length;){let l=a[c++],d=a[c++],u=a[c++],f=a[c++];Yd(r,n,l,d,u,f)}}function M0(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function tf(e,t){return e[Ir]?e[Oc][ot]=t:e[Ir]=t,e[Oc]=t,t}function N0(e,t){let n=e[xr],r=n?n.get(Vt,null):null;r&&r.handleError(t)}function nf(e,t,n,r,i){for(let s=0;s<n.length;){let a=n[s++],c=n[s++],l=n[s++],d=t[a],u=e.data[a];Yd(u,d,r,c,l,i)}}function A0(e,t){let n=on(t,e),r=n[ne];T0(r,n);let i=n[$e];i!==null&&n[pt]===null&&(n[pt]=Pd(i,n[xr])),rf(r,n,n[Dt])}function T0(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function rf(e,t,n){ya(t);try{let r=e.viewQuery;r!==null&&Qs(1,r,n);let i=e.template;i!==null&&Zd(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[co]?.finishViewCreation(e),e.staticContentQueries&&jd(e,t),e.staticViewQueries&&Qs(2,e.viewQuery,n);let s=e.components;s!==null&&k0(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[Y]&=-5,ba()}}function k0(e,t){for(let n=0;n<t.length;n++)A0(e,t[n])}var fn=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(fn||{}),R0;function ka(e,t){return R0(e,t)}function Wn(e){return(e.flags&32)===32}function Ln(e,t,n,r,i){if(r!=null){let s,a=!1;yt(r)?s=r:ht(r)&&(a=!0,r=r[$e]);let c=Mt(r);e===0&&n!==null?i==null?qd(t,n,c):Ki(t,n,c,i||null,!0):e===1&&n!==null?Ki(t,n,c,i||null,!0):e===2?Ta(t,c,a):e===3&&t.destroyNode(c),s!=null&&G0(t,e,s,n,i)}}function O0(e,t){of(e,t),t[$e]=null,t[at]=null}function L0(e,t,n,r,i,s){r[$e]=i,r[at]=t,xo(e,r,n,1,i,s)}function of(e,t){t[Bt].changeDetectionScheduler?.notify(10),xo(e,t,t[Te],2,null,null)}function P0(e){let t=e[Ir];if(!t)return Ss(e[ne],e);for(;t;){let n=null;if(ht(t))n=t[Ir];else{let r=t[Ve];r&&(n=r)}if(!n){for(;t&&!t[ot]&&t!==e;)ht(t)&&Ss(t[ne],t),t=t[Ae];t===null&&(t=e),ht(t)&&Ss(t[ne],t),n=t&&t[ot]}t=n}}function F0(e,t,n,r){let i=Ve+r,s=n.length;r>0&&(n[i-1][ot]=t),r<s-Ve?(t[ot]=n[i],xu(n,Ve+r,t)):(n.push(t),t[ot]=null),t[Ae]=n;let a=t[Cr];a!==null&&n!==a&&sf(a,t);let c=t[co];c!==null&&c.insertView(e),Fs(t),t[Y]|=128}function sf(e,t){let n=e[qi],r=t[Ae];if(ht(r))e[Y]|=2;else{let i=r[Ae][Qe];t[Qe]!==i&&(e[Y]|=2)}n===null?e[qi]=[t]:n.push(t)}function Ra(e,t){let n=e[qi],r=n.indexOf(t);n.splice(r,1)}function Ks(e,t){if(e.length<=Ve)return;let n=Ve+t,r=e[n];if(r){let i=r[Cr];i!==null&&i!==e&&Ra(i,r),t>0&&(e[n-1][ot]=r[ot]);let s=Vi(e,Ve+t);O0(r[ne],r);let a=s[co];a!==null&&a.detachView(s[ne]),r[Ae]=null,r[ot]=null,r[Y]&=-129}return r}function af(e,t){if(kr(t))return;let n=t[Te];n.destroyNode&&xo(e,t,n,3,null,null),P0(t)}function Ss(e,t){if(kr(t))return;let n=ce(null);try{t[Y]&=-129,t[Y]|=256,t[Be]&&os(t[Be]),U0(e,t),j0(e,t),t[ne].type===1&&t[Te].destroy();let r=t[Cr];if(r!==null&&yt(t[Ae])){r!==t[Ae]&&Ra(r,t);let i=t[co];i!==null&&i.detachView(e)}Ys(t)}finally{ce(n)}}function j0(e,t){let n=e.cleanup,r=t[Rc];if(n!==null)for(let a=0;a<n.length-1;a+=2)if(typeof n[a]=="string"){let c=n[a+3];c>=0?r[c]():r[-c].unsubscribe(),a+=2}else{let c=r[n[a+1]];n[a].call(c)}r!==null&&(t[Rc]=null);let i=t[Ut];if(i!==null){t[Ut]=null;for(let a=0;a<i.length;a++){let c=i[a];c()}}let s=t[Hi];if(s!==null){t[Hi]=null;for(let a of s)a.destroy()}}function U0(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof Sr)){let s=n[r+1];if(Array.isArray(s))for(let a=0;a<s.length;a+=2){let c=i[s[a]],l=s[a+1];dt(4,c,l);try{l.call(c)}finally{dt(5,c,l)}}else{dt(4,i,s);try{s.call(i)}finally{dt(5,i,s)}}}}}function B0(e,t,n){return V0(e,t.parent,n)}function V0(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[$e];if(Hn(r)){let{encapsulation:i}=e.data[r.directiveStart+r.componentOffset];if(i===vt.None||i===vt.Emulated)return null}return Nt(r,n)}function $0(e,t,n){return z0(e,t,n)}function H0(e,t,n){return e.type&40?Nt(e,n):null}var z0=H0,Kc;function lf(e,t,n,r){let i=B0(e,r,t),s=t[Te],a=r.parent||t[at],c=$0(a,r,t);if(i!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)Qc(s,i,n[l],c,!1);else Qc(s,i,n,c,!1);Kc!==void 0&&Kc(s,r,t,n,i)}function vr(e,t){if(t!==null){let n=t.type;if(n&3)return Nt(t,e);if(n&4)return Js(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return vr(e,r);{let i=e[t.index];return yt(i)?Js(-1,i):Mt(i)}}else{if(n&128)return vr(e,t.next);if(n&32)return ka(t,e)()||Mt(e[t.index]);{let r=cf(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=sn(e[Qe]);return vr(i,r)}else return vr(e,t.next)}}}return null}function cf(e,t){if(t!==null){let r=e[Qe][at],i=t.projection;return r.projection[i]}return null}function Js(e,t){let n=Ve+e+1;if(n<t.length){let r=t[n],i=r[ne].firstChild;if(i!==null)return vr(r,i)}return t[St]}function Oa(e,t,n,r,i,s,a){for(;n!=null;){if(n.type===128){n=n.next;continue}let c=r[n.index],l=n.type;if(a&&t===0&&(c&&Or(Mt(c),r),n.flags|=2),!Wn(n))if(l&8)Oa(e,t,n.child,r,i,s,!1),Ln(t,e,i,c,s);else if(l&32){let d=ka(n,r),u;for(;u=d();)Ln(t,e,i,u,s);Ln(t,e,i,c,s)}else l&16?q0(e,t,r,n,i,s):Ln(t,e,i,c,s);n=a?n.projectionNext:n.next}}function xo(e,t,n,r,i,s){Oa(n,r,e.firstChild,t,i,s,!1)}function q0(e,t,n,r,i,s){let a=n[Qe],l=a[at].projection[r.projection];if(Array.isArray(l))for(let d=0;d<l.length;d++){let u=l[d];Ln(t,e,i,u,s)}else{let d=l,u=a[Ae];Zi(r)&&(d.flags|=128),Oa(e,t,d,u,i,s,!0)}}function G0(e,t,n,r,i){let s=n[St],a=Mt(n);s!==a&&Ln(t,e,r,s,i);for(let c=Ve;c<n.length;c++){let l=n[c];xo(l[ne],l,e,t,r,s)}}function Jc(e,t){return!t||t.firstChild===null||Zi(e)}function W0(e,t,n,r=!0){let i=t[ne];if(F0(i,t,e,n),r){let a=Js(n,e),c=t[Te],l=c.parentNode(e[St]);l!==null&&L0(i,e[at],c,t,l,a)}let s=t[pt];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Ji(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=t[n.index];s!==null&&r.push(Mt(s)),yt(s)&&Y0(s,r);let a=n.type;if(a&8)Ji(e,t,n.child,r);else if(a&32){let c=ka(n,t),l;for(;l=c();)r.push(l)}else if(a&16){let c=cf(t,n);if(Array.isArray(c))r.push(...c);else{let l=sn(t[Qe]);Ji(l[ne],l,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function Y0(e,t){for(let n=Ve;n<e.length;n++){let r=e[n],i=r[ne].firstChild;i!==null&&Ji(r[ne],r,i,t)}e[St]!==e[$e]&&t.push(e[St])}var uf=[];function X0(e){return e[Be]??Z0(e)}function Z0(e){let t=uf.pop()??Object.create(K0);return t.lView=e,t}function Q0(e){e.lView[Be]!==e&&(e.lView=null,uf.push(e))}var K0=fe(F({},ui),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{ho(e.lView)},consumerOnSignalRead(){this.lView[Be]=this}});function J0(e){let t=e[Be]??Object.create(e1);return t.lView=e,t}var e1=fe(F({},ui),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=sn(e.lView);for(;t&&!df(t[ne]);)t=sn(t);t&&ma(t)},consumerOnSignalRead(){this.lView[Be]=this}});function df(e){return e.type!==2}function ff(e){if(e[Hi]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[Hi])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[Y]&8192)}}var t1=100;function hf(e,t=!0,n=0){let i=e[Bt].rendererFactory,s=!1;s||i.begin?.();try{n1(e,n)}catch(a){throw t&&N0(e,a),a}finally{s||i.end?.()}}function n1(e,t){let n=zu();try{Fc(!0),ea(e,t);let r=0;for(;fo(e);){if(r===t1)throw new j(103,!1);r++,ea(e,1)}}finally{Fc(n)}}function r1(e,t,n,r){if(kr(t))return;let i=t[Y],s=!1,a=!1;ya(t);let c=!0,l=null,d=null;s||(df(e)?(d=X0(t),l=rs(d)):$l()===null?(c=!1,d=J0(t),l=rs(d)):t[Be]&&(os(t[Be]),t[Be]=null));try{Uu(t),Vg(e.bindingStartIndex),n!==null&&Zd(e,t,n,2,r);let u=(i&3)===3;if(!s)if(u){let h=e.preOrderCheckHooks;h!==null&&Li(t,h,null)}else{let h=e.preOrderHooks;h!==null&&Pi(t,h,0,null),Is(t,0)}if(a||i1(t),ff(t),pf(t,0),e.contentQueries!==null&&jd(e,t),!s)if(u){let h=e.contentCheckHooks;h!==null&&Li(t,h)}else{let h=e.contentHooks;h!==null&&Pi(t,h,1),Is(t,1)}s1(e,t);let f=e.components;f!==null&&mf(t,f,0);let p=e.viewQuery;if(p!==null&&Qs(2,p,r),!s)if(u){let h=e.viewCheckHooks;h!==null&&Li(t,h)}else{let h=e.viewHooks;h!==null&&Pi(t,h,2),Is(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[xs]){for(let h of t[xs])h();t[xs]=null}s||(t[Y]&=-73)}catch(u){throw s||ho(t),u}finally{d!==null&&(ql(d,l),c&&Q0(d)),ba()}}function pf(e,t){for(let n=Id(e);n!==null;n=Cd(n))for(let r=Ve;r<n.length;r++){let i=n[r];gf(i,t)}}function i1(e){for(let t=Id(e);t!==null;t=Cd(t)){if(!(t[Y]&2))continue;let n=t[qi];for(let r=0;r<n.length;r++){let i=n[r];ma(i)}}}function o1(e,t,n){let r=on(t,e);gf(r,n)}function gf(e,t){ga(e)&&ea(e,t)}function ea(e,t){let r=e[ne],i=e[Y],s=e[Be],a=!!(t===0&&i&16);if(a||=!!(i&64&&t===0),a||=!!(i&1024),a||=!!(s?.dirty&&is(s)),a||=!1,s&&(s.dirty=!1),e[Y]&=-9217,a)r1(r,e,r.template,e[Dt]);else if(i&8192){ff(e),pf(e,1);let c=r.components;c!==null&&mf(e,c,1)}}function mf(e,t,n){for(let r=0;r<t.length;r++)o1(e,t[r],n)}function s1(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)an(~i);else{let s=i,a=n[++r],c=n[++r];Hg(a,s);let l=t[s];dt(24,l),c(2,l),dt(25,l)}}}finally{an(-1)}}function vf(e,t){let n=zu()?64:1088;for(e[Bt].changeDetectionScheduler?.notify(t);e;){e[Y]|=n;let r=sn(e);if(Dr(e)&&!r)return e;e=r}return null}var Bn=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,n=t[ne];return Ji(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[Dt]}get dirty(){return!!(this._lView[Y]&9280)||!!this._lView[Be]?.dirty}set context(t){this._lView[Dt]=t}get destroyed(){return kr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Ae];if(yt(t)){let n=t[zi],r=n?n.indexOf(this):-1;r>-1&&(Ks(t,r),Vi(n,r))}this._attachedToViewContainer=!1}af(this._lView[ne],this._lView)}onDestroy(t){Bu(this._lView,t)}markForCheck(){vf(this._cdRefInjectingView||this._lView,4)}markForRefresh(){ma(this._cdRefInjectingView||this._lView)}detach(){this._lView[Y]&=-129}reattach(){Fs(this._lView),this._lView[Y]|=128}detectChanges(){this._lView[Y]|=1024,hf(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Dr(this._lView),n=this._lView[Cr];n!==null&&!t&&Ra(n,this._lView),of(this._lView[ne],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=t;let n=Dr(this._lView),r=this._lView[Cr];r!==null&&!n&&sf(r,this._lView),Fs(this._lView)}};function yf(e,t,n,r,i){let s=e.data[t];if(s===null)s=a1(e,t,n,r,i),$g()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let a=Ug();s.injectorIndex=a===null?-1:a.injectorIndex}return po(s,!0),s}function a1(e,t,n,r,i){let s=$u(),a=Hu(),c=a?s:s&&s.parent,l=e.data[t]=c1(e,c,n,t,r,i);return l1(e,l,s,a),l}function l1(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function c1(e,t,n,r,i,s){let a=t?t.injectorIndex:-1,c=0;return Rr()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var u1=new RegExp(`^(\\d+)*(${Md}|${Sd})*(.*)`);function d1(e){let t=e.match(u1),[n,r,i,s]=t,a=r?parseInt(r,10):i,c=[];for(let[l,d,u]of s.matchAll(/(f|n)(\d*)/g)){let f=parseInt(u,10)||1;c.push(d,f)}return[a,...c]}function f1(e){return!e.prev&&e.parent?.type===8}function Ms(e){return e.index-Pe}function h1(e,t){let n=e.i18nNodes;if(n)return n.get(t)}function Io(e,t,n,r){let i=Ms(r),s=h1(e,i);if(s===void 0){let a=e.data[Fm];if(a?.[i])s=g1(a[i],n);else if(t.firstChild===r)s=e.firstChild;else{let c=r.prev===null,l=r.prev??r.parent;if(f1(r)){let d=Ms(r.parent);s=Zs(e,d)}else{let d=Nt(l,n);if(c)s=d.firstChild;else{let u=Ms(l),f=Zs(e,u);if(l.type===2&&f){let h=Ma(e,u)+1;s=Co(h,f)}else s=d.nextSibling}}}}return s}function Co(e,t){let n=t;for(let r=0;r<e;r++)n=n.nextSibling;return n}function p1(e,t){let n=e;for(let r=0;r<t.length;r+=2){let i=t[r],s=t[r+1];for(let a=0;a<s;a++)switch(i){case km:n=n.firstChild;break;case Rm:n=n.nextSibling;break}}return n}function g1(e,t){let[n,...r]=d1(e),i;if(n===Sd)i=t[Qe][$e];else if(n===Md)i=Jm(t[Qe][$e]);else{let s=Number(n);i=Mt(t[s+Pe])}return p1(i,r)}var m1=!1;function v1(e){m1=e}function y1(e){let t=e[pt];if(t){let{i18nNodes:n,dehydratedIcuData:r}=t;if(n&&r){let i=e[Te];for(let s of r.values())b1(i,n,s)}t.i18nNodes=void 0,t.dehydratedIcuData=void 0}}function b1(e,t,n){for(let r of n.node.cases[n.case]){let i=t.get(r.index-Pe);i&&Ta(e,i,!1)}}function bf(e){let t=e[Er]??[],r=e[Ae][Te],i=[];for(let s of t)s.data[jm]!==void 0?i.push(s):w1(s,r);e[Er]=i}function w1(e,t){let n=0,r=e.firstChild;if(r){let i=e.data[Qi];for(;n<i;){let s=r.nextSibling;Ta(t,r,!1),r=s,n++}}}function wf(e){bf(e);let t=e[$e];ht(t)&&eo(t);for(let n=Ve;n<e.length;n++)eo(e[n])}function eo(e){y1(e);let t=e[ne];for(let n=Pe;n<t.bindingStartIndex;n++)if(yt(e[n])){let r=e[n];wf(r)}else ht(e[n])&&eo(e[n])}function _1(e){let t=e._views;for(let n of t){let r=zm(n);r!==null&&r[$e]!==null&&(ht(r)?eo(r):wf(r))}}function x1(e,t){let n=[];for(let r of t)for(let i=0;i<(r[Nd]??1);i++){let s={data:r,firstChild:null};r[Qi]>0&&(s.firstChild=e,e=Co(r[Qi],e)),n.push(s)}return[e,n]}var _f=()=>null;function I1(e,t){let n=e[Er];return!t||n===null||n.length===0?null:n[0].data[Pm]===t?n.shift():(bf(e),null)}function C1(){_f=I1}function eu(e,t){return _f(e,t)}var ta=class{},to=class{},na=class{resolveComponentFactory(t){throw Error(`No component factory found for ${Ue(t)}.`)}},Vn=class{static NULL=new na},$n=class{};var E1=(()=>{class e{static \u0275prov=H({token:e,providedIn:"root",factory:()=>null})}return e})();function tu(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(t!==null)for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number")s=c;else if(s==1)i=Sc(i,c);else if(s==2){let l=c,d=t[++a];r=Sc(r,l+": "+d+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function La(e,t=X.Default){let n=gt();if(n===null)return K(e,t);let r=cn();return cd(r,n,Xe(e),t)}function xf(e,t,n,r){if(n===0)return-1;let i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function D1(e,t,n,r,i){let s=r===null?null:{"":-1},a=i(e,n);if(a!==null){let[c,l]=M1(e,n,a);A1(e,t,n,c,s,l)}s!==null&&r!==null&&S1(n,r,s)}function S1(e,t,n){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let s=n[t[i+1]];if(s==null)throw new j(-301,!1);r.push(t[i],s)}}function M1(e,t,n){let r=[],i=null;for(let s of n)s.findHostDirectiveDefs!==null&&(i??=new Map,s.findHostDirectiveDefs(s,r,i)),zn(s)&&(r.push(s),N1(e,t,r.length-1));return Hn(t)?r.push(...n.slice(1)):r.push(...n),[r,i]}function N1(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function A1(e,t,n,r,i,s){for(let d=0;d<r.length;d++)sm(od(n,t),e,r[d].type);F1(n,e.data.length,r.length);for(let d=0;d<r.length;d++){let u=r[d];u.providersResolver&&u.providersResolver(u)}let a=!1,c=!1,l=xf(e,t,r.length,null);for(let d=0;d<r.length;d++){let u=r[d];n.mergedAttrs=td(n.mergedAttrs,u.hostAttrs),R1(e,n,t,l,u),P1(l,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let f=u.type.prototype;!a&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),a=!0),!c&&(f.ngOnChanges||f.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),c=!0),l++}T1(e,n,s)}function T1(e,t,n){let r=t.directiveStart,i=t.directiveEnd,s=e.data,a=t.attrs,c=[],l=null,d=null;for(let u=r;u<i;u++){let f=s[u],p=n?n.get(f):null,h=p?p.inputs:null,m=p?p.outputs:null;l=nu(0,f.inputs,u,l,h),d=nu(1,f.outputs,u,d,m);let b=l!==null&&a!==null&&!Na(t)?k1(l,u,a):null;c.push(b)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=c,t.inputs=l,t.outputs=d}function nu(e,t,n,r,i){for(let s in t){if(!t.hasOwnProperty(s))continue;let a=t[s];if(a===void 0)continue;r??={};let c,l=$t.None;Array.isArray(a)?(c=a[0],l=a[1]):c=a;let d=s;if(i!==null){if(!i.hasOwnProperty(s))continue;d=i[s]}e===0?ru(r,n,d,c,l):ru(r,n,d,c)}return r}function ru(e,t,n,r,i){let s;e.hasOwnProperty(n)?(s=e[n]).push(t,r):s=e[n]=[t,r],i!==void 0&&s.push(i)}function k1(e,t,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(e.hasOwnProperty(s)){r===null&&(r=[]);let a=e[s];for(let c=0;c<a.length;c+=3)if(a[c]===t){r.push(s,a[c+1],a[c+2],n[i+1]);break}}i+=2}return r}function R1(e,t,n,r,i){e.data[r]=i;let s=i.factory||(i.factory=jn(i.type,!0)),a=new Sr(s,zn(i),La);e.blueprint[r]=a,n[r]=a,O1(e,t,r,xf(e,n,i.hostVars,$d),i)}function O1(e,t,n,r,i){let s=i.hostBindings;if(s){let a=e.hostBindingOpCodes;a===null&&(a=e.hostBindingOpCodes=[]);let c=~t.index;L1(a)!=c&&a.push(c),a.push(n,r,s)}}function L1(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function P1(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;zn(t)&&(n[""]=e)}}function F1(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function If(e,t,n,r,i,s,a,c){let l=t.consts,d=Pc(l,a),u=yf(t,e,2,r,d);return s&&D1(t,n,u,Pc(l,c),i),u.mergedAttrs=td(u.mergedAttrs,u.attrs),u.attrs!==null&&tu(u,u.attrs,!1),u.mergedAttrs!==null&&tu(u,u.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,u),u}function Cf(e,t){Yg(e,t),Ou(t)&&e.queries.elementEnd(t)}var no=class extends Vn{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=rn(t);return new Nr(n,this.ngModule)}};function iu(e,t){let n=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let i=e[r];if(i===void 0)continue;let s=Array.isArray(i),a=s?i[0]:i,c=s?i[1]:$t.None;t?n.push({propName:a,templateName:r,isSignal:(c&$t.SignalBased)!==0}):n.push({propName:a,templateName:r})}return n}function j1(e,t,n){let r=t instanceof Ze?t:t?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new Bs(n,r):n}function U1(e){let t=e.get($n,null);if(t===null)throw new j(407,!1);let n=e.get(E1,null),r=e.get(Mr,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:r}}function B1(e,t){let n=(e.selectors[0][0]||"div").toLowerCase();return Aa(t,n,n==="svg"?Mg:n==="math"?Ng:null)}var Nr=class extends to{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let t=this.componentDef,n=t.inputTransforms,r=iu(t.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return iu(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=c0(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,i){let s=ce(null);try{let a=this.componentDef,c=r?["ng-version","19.1.5"]:u0(this.componentDef.selectors[0]),l=Kd(0,null,null,1,0,null,null,null,null,[c],null),d=j1(a,i||this.ngModule,t),u=U1(d),f=u.rendererFactory.createRenderer(null,a),p=r?y0(f,r,a.encapsulation,d):B1(a,f),h=Xd(null,l,null,512|ef(a),null,null,u,f,d,null,Pd(p,d,!0));h[Pe]=p,ya(h);let m=null;try{let b=If(Pe,l,h,"#host",()=>[this.componentDef],!0,0);p&&(Wd(f,p,b),Or(p,h)),Qd(l,h,b),Ud(l,b,h),Cf(l,b),n!==void 0&&V1(b,this.ngContentSelectors,n),m=on(b.index,h),h[Dt]=m[Dt],rf(l,h,null)}catch(b){throw m!==null&&Ys(m),Ys(h),b}finally{ba()}return new ra(this.componentType,h)}finally{ce(s)}}},ra=class extends ta{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n){super(),this._rootLView=n,this._tNode=Ag(n[ne],Pe),this.location=Ca(this._tNode,n),this.instance=on(this._tNode.index,n)[Dt],this.hostView=this.changeDetectorRef=new Bn(n,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let s=this._rootLView;nf(s[ne],s,i,t,n),this.previousInputValues.set(t,n);let a=on(this._tNode.index,s);vf(a,1)}}get injector(){return new tn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function V1(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let s=n[i];r.push(s!=null&&s.length?Array.from(s):null)}}var Eo=(()=>{class e{static __NG_ELEMENT_ID__=$1}return e})();function $1(){let e=cn();return z1(e,gt())}var H1=Eo,Ef=class extends H1{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Ca(this._hostTNode,this._hostLView)}get injector(){return new tn(this._hostTNode,this._hostLView)}get parentInjector(){let t=wa(this._hostTNode,this._hostLView);if(nd(t)){let n=Wi(t,this._hostLView),r=Gi(t),i=n[ne].data[r+8];return new tn(i,n)}else return new tn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=ou(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-Ve}createEmbeddedView(t,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let a=eu(this._lContainer,t.ssrId),c=t.createEmbeddedViewImpl(n||{},s,a);return this.insertImpl(c,i,Jc(this._hostTNode,a)),c}createComponent(t,n,r,i,s){let a=t&&!Ig(t),c;if(a)c=n;else{let m=n||{};c=m.index,r=m.injector,i=m.projectableNodes,s=m.environmentInjector||m.ngModuleRef}let l=a?t:new Nr(rn(t)),d=r||this.parentInjector;if(!s&&l.ngModule==null){let b=(a?d:this.parentInjector).get(Ze,null);b&&(s=b)}let u=rn(l.componentType??{}),f=eu(this._lContainer,u?.id??null),p=f?.firstChild??null,h=l.create(d,i,p,s);return this.insertImpl(h.hostView,c,Jc(this._hostTNode,f)),h}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(Tg(i)){let c=this.indexOf(t);if(c!==-1)this.detach(c);else{let l=i[Ae],d=new Ef(l,l[at],l[Ae]);d.detach(d.indexOf(t))}}let s=this._adjustIndex(n),a=this._lContainer;return W0(a,i,s,r),t.attachToViewContainerRef(),xu(Ns(a),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=ou(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Ks(this._lContainer,n);r&&(Vi(Ns(this._lContainer),n),af(r[ne],r))}detach(t){let n=this._adjustIndex(t,-1),r=Ks(this._lContainer,n);return r&&Vi(Ns(this._lContainer),n)!=null?new Bn(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function ou(e){return e[zi]}function Ns(e){return e[zi]||(e[zi]=[])}function z1(e,t){let n,r=t[e.index];return yt(r)?n=r:(n=M0(r,t,null,e),t[e.index]=n,tf(t,n)),Df(n,t,e,r),new Ef(n,e,t)}function q1(e,t){let n=e[Te],r=n.createComment(""),i=Nt(t,e),s=n.parentNode(i);return Ki(n,s,r,n.nextSibling(i),!1),r}var Df=Mf,Sf=()=>!1;function Mf(e,t,n,r){if(e[St])return;let i;n.type&8?i=Mt(r):i=q1(t,n),e[St]=i}function G1(e,t,n){if(e[St]&&e[Er])return!0;let r=n[pt],i=t.index-Pe;if(!r||Em(t)||Lr(r,i))return!1;let a=Zs(r,i),c=r.data[Sa]?.[i],[l,d]=x1(a,c);return e[St]=l,e[Er]=d,!0}function W1(e,t,n,r){Sf(e,n,t)||Mf(e,t,n,r)}function Y1(){Df=W1,Sf=G1}var Ht=class{},Ar=class{};var ia=class extends Ht{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new no(this);constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n;let s=Eu(t);this._bootstrapComponents=Bd(s.bootstrap),this._r3Injector=fd(t,n,[{provide:Ht,useValue:this},{provide:Vn,useValue:this.componentFactoryResolver},...r],Ue(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},oa=class extends Ar{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new ia(this.moduleType,t,[])}};var ro=class extends Ht{injector;componentFactoryResolver=new no(this);instance=null;constructor(t){super();let n=new _r([...t.providers,{provide:Ht,useValue:this},{provide:Vn,useValue:this.componentFactoryResolver}],t.parent||ha(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Pa(e,t,n=null){return new ro({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var X1=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Nu(!1,n.type),i=r.length>0?Pa([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:e,providedIn:"environment",factory:()=>new e(K(Ze))})}return e})();function Yn(e){return ca(()=>{let t=Nf(e),n=fe(F({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===_d.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(X1).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||vt.Emulated,styles:e.styles||Un,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&qn("NgStandalone"),Af(n);let r=e.dependencies;return n.directiveDefs=au(r,!1),n.pipeDefs=au(r,!0),n.id=K1(n),n})}function Z1(e){return rn(e)||Du(e)}function Q1(e){return e!==null}function su(e,t){if(e==null)return wr;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],s,a,c=$t.None;Array.isArray(i)?(c=i[0],s=i[1],a=i[2]??s):(s=i,a=i),t?(n[s]=c!==$t.None?[r,c]:r,t[s]=a):n[s]=r}return n}function Fa(e){return ca(()=>{let t=Nf(e);return Af(t),t})}function Nf(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||wr,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||Un,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:su(e.inputs,t),outputs:su(e.outputs),debugInfo:null}}function Af(e){e.features?.forEach(t=>t(e))}function au(e,t){if(!e)return null;let n=t?Su:Z1;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(Q1)}function K1(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let s of r.join("|"))t=Math.imul(31,t)+s.charCodeAt(0)<<0;return t+=2147483648,"c"+t}var J1=Tf;function Tf(e,t,n,r){return zt(!0),t[Te].createComment("")}function ev(e,t,n,r){let i=t[pt],s=!i||Rr()||Wn(n)||Lr(i,r);if(zt(s),s)return Tf(e,t,n,r);let a=i.data[Lm]?.[r]??null;a!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=a);let c=Io(i,e,t,n);_o(i,r,c);let l=Ma(i,r);return Co(l,c)}function tv(){J1=ev}var ja=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var kf=new B("");function Pr(e){return!!e&&typeof e.then=="function"}function Rf(e){return!!e&&typeof e.subscribe=="function"}var Of=new B("");var Lf=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=A(Of,{optional:!0})??[];injector=A(mt);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=Ke(this.injector,i);if(Pr(s))n.push(s);else if(Rf(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});n.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),nv=(()=>{class e{static \u0275prov=H({token:e,providedIn:"root",factory:()=>new sa})}return e})(),sa=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),this.queuedEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||(this.queuedEffectCount++,r.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,n]of this.queues)t===null?this.flushQueue(n):t.run(()=>this.flushQueue(n))}flushQueue(t){for(let n of t)t.delete(n),this.queuedEffectCount--,n.run()}},Xn=new B("");function rv(){Zl(()=>{throw new j(600,!1)})}function iv(e){return e.isBoundToModule}var ov=10;var st=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=A(wm);afterRenderManager=A(Um);zonelessEnabled=A(mo);rootEffectScheduler=A(nv);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Ne;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=A(un).hasPendingTasks.pipe(J(n=>!n));constructor(){A(wo,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=A(Ze);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){let i=n instanceof to;if(!this._injector.get(Lf).done){let p=!i&&Mu(n),h=!1;throw new j(405,h)}let a;i?a=n:a=this._injector.get(Vn).resolveComponentFactory(n),this.componentTypes.push(a.componentType);let c=iv(a)?void 0:this._injector.get(Ht),l=r||a.selector,d=a.create(mt.NULL,[],l,c),u=d.location.nativeElement,f=d.injector.get(kf,null);return f?.registerApplication(u),d.onDestroy(()=>{this.detachView(d.hostView),Fi(this.components,d),f?.unregisterApplication(u)}),this._loadComponent(d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let r=this.tracingSnapshot;this.tracingSnapshot=null,r.run(Rd.CHANGE_DETECTION,this._tick),r.dispose();return}if(this._runningTick)throw new j(101,!1);let n=ce(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,ce(n),this.afterTick.next()}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get($n,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let n=0;for(;this.dirtyFlags!==0&&n++<ov;)this.synchronizeOnce()}synchronizeOnce(){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)sv(r,i,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>fo(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Fi(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(Xn,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Fi(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new j(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Fi(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function sv(e,t,n,r){if(!n&&!fo(e))return;hf(e,t,n&&!r?0:1)}function lu(e,t,n,r,i){let s=t.inputs,a=i?"class":"style";nf(e,n,s[a],a,r)}function Zn(e,t,n,r){let i=gt(),s=va(),a=Pe+e,c=i[Te],l=s.firstCreatePass?If(a,s,i,t,E0,Vu(),n,r):s.data[a],d=Pf(s,i,l,c,t,e);i[a]=d;let u=Cg(l);return po(l,!0),Wd(c,d,l),!Wn(l)&&Ju()&&lf(s,i,d,l),Rg()===0&&Or(d,i),Og(),u&&(p0(s,i,l),Ud(s,l,i)),r!==null&&g0(i,l),Zn}function Qn(){let e=cn();Hu()?Bg():(e=e.parent,po(e,!1));let t=e;Pg(t)&&jg(),Lg();let n=va();return n.firstCreatePass&&Cf(n,t),t.classesWithoutHost!=null&&Qg(t)&&lu(n,t,gt(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Kg(t)&&lu(n,t,gt(),t.stylesWithoutHost,!1),Qn}function hn(e,t,n,r){return Zn(e,t,n,r),Qn(),hn}var Pf=(e,t,n,r,i,s)=>(zt(!0),Aa(r,i,Qu()));function av(e,t,n,r,i,s){let a=t[pt],c=!a||Rr()||Wn(n)||Lr(a,s);if(zt(c),c)return Aa(r,i,Qu());let l=Io(a,e,t,n);return Fd(a,s)&&_o(a,s,l.nextSibling),a&&(bd(n)||wd(l))&&Hn(n)&&(Fg(n),Gd(l)),l}function lv(){Pf=av}var cv=(e,t,n,r)=>(zt(!0),zd(t[Te],""));function uv(e,t,n,r){let i,s=t[pt],a=!s||Rr()||Lr(s,r)||Wn(n);if(zt(a),a)return zd(t[Te],"");let c=Io(s,e,t,n),l=Wm(s,r);return _o(s,r,c),i=Co(l,c),i}function dv(){cv=uv}var io="en-US";var fv=io;function hv(e){typeof e=="string"&&(fv=e.toLowerCase().replace(/_/g,"-"))}function Do(e,t=""){let n=gt(),r=va(),i=e+Pe,s=r.firstCreatePass?yf(r,i,1,t,null):r.data[i],a=Ff(r,n,s,t,e);n[i]=a,Ju()&&lf(r,n,a,s),po(s,!1)}var Ff=(e,t,n,r,i)=>(zt(!0),Hd(t[Te],r));function pv(e,t,n,r,i){let s=t[pt],a=!s||Rr()||Wn(n)||Lr(s,i);return zt(a),a?Hd(t[Te],r):Io(s,e,t,n)}function gv(){Ff=pv}var aa=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Ua=(()=>{class e{compileModuleSync(n){return new oa(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Eu(n),s=Bd(i.declarations).reduce((a,c)=>{let l=rn(c);return l&&a.push(new Nr(l)),a},[]);return new aa(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var mv=(()=>{class e{zone=A(xe);changeDetectionScheduler=A(Mr);applicationRef=A(st);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),vv=new B("",{factory:()=>!1});function jf({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new xe(fe(F({},Bf()),{scheduleInRootZone:n})),[{provide:xe,useFactory:e},{provide:nn,multi:!0,useFactory:()=>{let r=A(mv,{optional:!0});return()=>r.initialize()}},{provide:nn,multi:!0,useFactory:()=>{let r=A(yv);return()=>{r.initialize()}}},t===!0?{provide:pd,useValue:!0}:[],{provide:gd,useValue:n??hd}]}function Uf(e){let t=e?.ignoreChangesOutsideZone,n=e?.scheduleInRootZone,r=jf({ngZoneFactory:()=>{let i=Bf(e);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&qn("NgZone_CoalesceEvent"),new xe(i)},ignoreChangesOutsideZone:t,scheduleInRootZone:n});return ln([{provide:vv,useValue:!0},{provide:mo,useValue:!1},r])}function Bf(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var yv=(()=>{class e{subscription=new me;initialized=!1;zone=A(xe);pendingTasks=A(un);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{xe.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{xe.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var bv=(()=>{class e{appRef=A(st);taskService=A(un);ngZone=A(xe);zonelessEnabled=A(mo);tracing=A(wo,{optional:!0});disableScheduling=A(pd,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new me;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Xi):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(A(gd,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ws||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 13:{this.appRef.dirtyFlags|=16,r=!0;break}case 14:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{r=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?zc:md;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Xi+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,zc(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function wv(){return typeof $localize<"u"&&$localize.locale||io}var Ba=new B("",{providedIn:"root",factory:()=>A(Ba,X.Optional|X.SkipSelf)||wv()});var la=new B(""),_v=new B("");function gr(e){return!e.moduleRef}function xv(e){let t=gr(e)?e.r3Injector:e.moduleRef.injector,n=t.get(xe);return n.run(()=>{gr(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(Vt,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),gr(e)){let s=()=>t.destroy(),a=e.platformInjector.get(la);a.add(s),t.onDestroy(()=>{i.unsubscribe(),a.delete(s)})}else{let s=()=>e.moduleRef.destroy(),a=e.platformInjector.get(la);a.add(s),e.moduleRef.onDestroy(()=>{Fi(e.allPlatformModules,e.moduleRef),i.unsubscribe(),a.delete(s)})}return Cv(r,n,()=>{let s=t.get(Lf);return s.runInitializers(),s.donePromise.then(()=>{let a=t.get(Ba,io);if(hv(a||io),!t.get(_v,!0))return gr(e)?t.get(st):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(gr(e)){let l=t.get(st);return e.rootComponent!==void 0&&l.bootstrap(e.rootComponent),l}else return Iv(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function Iv(e,t){let n=e.injector.get(st);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(n);else throw new j(-403,!1);t.push(e)}function Cv(e,t,n){try{let r=n();return Pr(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var ji=null;function Ev(e=[],t){return mt.create({name:t,providers:[{provide:lo,useValue:"platform"},{provide:la,useValue:new Set([()=>ji=null])},...e]})}function Dv(e=[]){if(ji)return ji;let t=Ev(e);return ji=t,rv(),Sv(t),t}function Sv(e){let t=e.get(Ea,null);Ke(e,()=>{t?.forEach(n=>n())})}var Fr=(()=>{class e{static __NG_ELEMENT_ID__=Mv}return e})();function Mv(e){return Nv(cn(),gt(),(e&16)===16)}function Nv(e,t,n){if(Hn(e)&&!n){let r=on(e.index,t);return new Bn(r,r)}else if(e.type&175){let r=t[Qe];return new Bn(r,t)}return null}function Vf(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,i=Dv(r),s=[jf({}),{provide:Mr,useExisting:bv},...n||[]],a=new ro({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return xv({r3Injector:a.injector,platformInjector:i,rootComponent:t})}catch(t){return Promise.reject(t)}}var cu=!1;function Av(){cu||(cu=!0,Hm(),lv(),gv(),dv(),tv(),Y1(),C1(),_0())}function Tv(e){return e.whenStable()}function $f(){let e=[{provide:Ri,useFactory:()=>{let t=!0;return t=!!A(Gn,{optional:!0})?.get(Od,null),t&&qn("NgHydration"),t}},{provide:nn,useValue:()=>{v1(!1),A(Ri)&&(kv(),Av())},multi:!0}];return e.push({provide:kd,useFactory:()=>A(Ri)},{provide:Xn,useFactory:()=>{if(A(Ri)){let t=A(st);return()=>{Tv(t).then(()=>{t.destroyed||_1(t)})}}return()=>{}},multi:!0}),ln(e)}function kv(){let e=yo(),t;for(let n of e.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===Vm){t=n;break}if(!t)throw new j(-507,!1)}var uu=class{[_n];constructor(t){this[_n]=t}destroy(){this[_n].destroy()}};var Xf=null;function Kn(){return Xf}function Zf(e){Xf??=e}var So=class{};var Je=new B(""),Qf=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:()=>A(Fv),providedIn:"platform"})}return e})();var Fv=(()=>{class e extends Qf{_location;_history;_doc=A(Je);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Kn().getBaseHref(this._doc)}onPopState(n){let r=Kn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Kn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function Kf(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function Hf(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function pn(e){return e&&e[0]!=="?"?"?"+e:e}var No=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:()=>A(Jf),providedIn:"root"})}return e})(),jv=new B(""),Jf=(()=>{class e extends No{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??A(Je).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Kf(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+pn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let a=this.prepareExternalUrl(i+pn(s));this._platformLocation.pushState(n,r,a)}replaceState(n,r,i,s){let a=this.prepareExternalUrl(i+pn(s));this._platformLocation.replaceState(n,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(K(Qf),K(jv,8))};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Ur=(()=>{class e{_subject=new Ne;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=Vv(Hf(zf(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+pn(r))}normalize(n){return e.stripTrailingSlash(Bv(this._basePath,zf(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+pn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+pn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=pn;static joinWithSlash=Kf;static stripTrailingSlash=Hf;static \u0275fac=function(r){return new(r||e)(K(No))};static \u0275prov=H({token:e,factory:()=>Uv(),providedIn:"root"})}return e})();function Uv(){return new Ur(K(No))}function Bv(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function zf(e){return e.replace(/\/index.html$/,"")}function Vv(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function eh(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(s)}return null}var th="browser",$v="server";function Va(e){return e===$v}var Mo=class{};var To=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=n.slice(r+1).trim();this.addHeaderEntry(i,s)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let i=(t.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=t.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let a=this.headers.get(n);if(!a)return;a=a.filter(c=>s.indexOf(c)===-1),a.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,a)}break}}addHeaderEntry(t,n){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var Hv="X-Request-URL",zv="text/plain",qv="application/json",$I=`${qv}, ${zv}, */*`;var rh=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(rh||{}),$a=class{headers;status;statusText;url;ok;type;constructor(t,n=200,r="OK"){this.headers=t.headers||new To,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var ko=class e extends $a{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=rh.Response;clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};var Gv=new B("");var HI=RegExp(`^${Hv}:`,"m");var Wv=new B(""),Yv="b",Xv="h",Zv="s",Qv="st",Kv="u",Jv="rt",Ao=new B(""),ey=["GET","HEAD"];function ty(e,t){let p=A(Ao),{isCacheActive:n}=p,r=Bl(p,["isCacheActive"]),{transferCache:i,method:s}=e;if(!n||i===!1||s==="POST"&&!r.includePostRequests&&!i||s!=="POST"&&!ey.includes(s)||!r.includeRequestsWithAuthHeaders&&ny(e)||r.filter?.(e)===!1)return t(e);let a=A(Gn);if(A(Wv,{optional:!0}))throw new j(2803,!1);let l=e.url,d=ry(e,l),u=a.get(d,null),f=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(f=i.includeHeaders),u){let{[Yv]:h,[Jv]:m,[Xv]:b,[Zv]:_,[Qv]:g,[Kv]:w}=u,y=h;switch(m){case"arraybuffer":y=new TextEncoder().encode(h).buffer;break;case"blob":y=new Blob([h]);break}let v=new To(b);return $(new ko({body:y,headers:v,status:_,statusText:g,url:w}))}return t(e).pipe(we(h=>{h instanceof ko}))}function ny(e){return e.headers.has("authorization")||e.headers.has("proxy-authorization")}function nh(e){return[...e.keys()].sort().map(t=>`${t}=${e.getAll(t)}`).join("&")}function ry(e,t){let{params:n,method:r,responseType:i}=e,s=nh(n),a=e.serializeBody();a instanceof URLSearchParams?a=nh(a):typeof a!="string"&&(a="");let c=[r,i,t,a,s].join("|"),l=iy(c);return l}function iy(e){let t=0;for(let n of e)t=Math.imul(31,t)+n.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function ih(e){return[{provide:Ao,useFactory:()=>(qn("NgHttpTransferCache"),F({isCacheActive:!0},e))},{provide:Gv,useValue:ty,multi:!0,deps:[Gn,Ao]},{provide:Xn,multi:!0,useFactory:()=>{let t=A(st),n=A(Ao);return()=>{t.whenStable().then(()=>{n.isCacheActive=!1})}}}]}var za=class extends So{supportsDOMEvents=!0},qa=class e extends za{static makeCurrent(){Zf(new e)}onAndCancel(t,n,r,i){return t.addEventListener(n,r,i),()=>{t.removeEventListener(n,r,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=oy();return n==null?null:sy(n)}resetBaseElement(){Br=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return eh(document.cookie,t)}},Br=null;function oy(){return Br=Br||document.querySelector("base"),Br?Br.getAttribute("href"):null}function sy(e){return new URL(e,document.baseURI).pathname}var ay=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:e.\u0275fac})}return e})(),Ga=new B(""),uh=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,s){return this._findPluginFor(r).addEventListener(n,r,i,s)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(K(Ga),K(xe))};static \u0275prov=H({token:e,factory:e.\u0275fac})}return e})(),Oo=class{_doc;constructor(t){this._doc=t}manager},Ro="ng-app-id";function oh(e){for(let t of e)t.remove()}function sh(e,t){let n=t.createElement("style");return n.textContent=e,n}function ly(e,t,n,r){let i=e.head?.querySelectorAll(`style[${Ro}="${t}"],link[${Ro}="${t}"]`);if(i)for(let s of i)s.removeAttribute(Ro),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&n.set(s.textContent,{usage:0,elements:[s]})}function Wa(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var dh=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.isServer=Va(s),ly(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,sh);r?.forEach(i=>this.addUsage(i,this.external,Wa))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let s=r.get(n);s?s.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(oh(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])oh(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,sh(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Wa(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Ro,this.appId),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(K(Je),K(bo),K(Da,8),K(dn))};static \u0275prov=H({token:e,factory:e.\u0275fac})}return e})(),Ha={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Za=/%COMP%/g;var fh="%COMP%",cy=`_nghost-${fh}`,uy=`_ngcontent-${fh}`,dy=!0,fy=new B("",{providedIn:"root",factory:()=>dy});function hy(e){return uy.replace(Za,e)}function py(e){return cy.replace(Za,e)}function hh(e,t){return t.map(n=>n.replace(Za,e))}var ah=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,s,a,c,l,d=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.tracingService=u,this.platformIsServer=Va(c),this.defaultRenderer=new Vr(n,a,l,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===vt.ShadowDom&&(r=fe(F({},r),{encapsulation:vt.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof Lo?i.applyToHost(n):i instanceof $r&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,f=this.platformIsServer,p=this.tracingService;switch(r.encapsulation){case vt.Emulated:s=new Lo(l,d,r,this.appId,u,a,c,f,p);break;case vt.ShadowDom:return new Ya(l,d,n,r,a,c,this.nonce,f,p);default:s=new $r(l,d,r,u,a,c,f,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(K(uh),K(dh),K(bo),K(fy),K(Je),K(dn),K(xe),K(Da),K(wo,8))};static \u0275prov=H({token:e,factory:e.\u0275fac})}return e})(),Vr=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,i,s){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(Ha[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(lh(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(lh(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let s=Ha[i];s?t.setAttributeNS(s,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=Ha[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(fn.DashCase|fn.Important)?t.style.setProperty(n,r,i&fn.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&fn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,i){if(typeof t=="string"&&(t=Kn().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);let s=this.decoratePreventDefault(r);return this.tracingService!==null&&this.tracingService.wrapEventListener&&(s=this.tracingService.wrapEventListener(t,n,s)),this.eventManager.addEventListener(t,n,s,i)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function lh(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Ya=class extends Vr{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,r,i,s,a,c,l,d){super(t,s,a,l,d),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=hh(i.id,u);for(let p of u){let h=document.createElement("style");c&&h.setAttribute("nonce",c),h.textContent=p,this.shadowRoot.appendChild(h)}let f=i.getExternalStyles?.();if(f)for(let p of f){let h=Wa(p,s);c&&h.setAttribute("nonce",c),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},$r=class extends Vr{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,i,s,a,c,l,d){super(t,s,a,c,l),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=d?hh(d,u):u,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Lo=class extends $r{contentAttr;hostAttr;constructor(t,n,r,i,s,a,c,l,d){let u=i+"-"+r.id;super(t,n,r,s,a,c,l,d,u),this.contentAttr=hy(u),this.hostAttr=py(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},gy=(()=>{class e extends Oo{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,s){return n.addEventListener(r,i,s),()=>this.removeEventListener(n,r,i,s)}removeEventListener(n,r,i,s){return n.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||e)(K(Je))};static \u0275prov=H({token:e,factory:e.\u0275fac})}return e})(),ch=["alt","control","meta","shift"],my={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vy={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},yy=(()=>{class e extends Oo{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i,s){let a=e.parseEventName(r),c=e.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Kn().onAndCancel(n,a.domEventName,c,s))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=e._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),ch.forEach(d=>{let u=r.indexOf(d);u>-1&&(r.splice(u,1),a+=d+".")}),a+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=a,l}static matchEventFullKeyCode(n,r){let i=my[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),ch.forEach(a=>{if(a!==i){let c=vy[a];c(n)&&(s+=a+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{e.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(K(Je))};static \u0275prov=H({token:e,factory:e.\u0275fac})}return e})();function ph(e,t){return Vf(F({rootComponent:e},by(t)))}function by(e){return{appProviders:[...Cy,...e?.providers??[]],platformProviders:Iy}}function wy(){qa.makeCurrent()}function _y(){return new Vt}function xy(){return Dd(document),document}var Iy=[{provide:dn,useValue:th},{provide:Ea,useValue:wy,multi:!0},{provide:Je,useFactory:xy,deps:[]}];var Cy=[{provide:lo,useValue:"root"},{provide:Vt,useFactory:_y,deps:[]},{provide:Ga,useClass:gy,multi:!0,deps:[Je]},{provide:Ga,useClass:yy,multi:!0,deps:[Je]},ah,dh,uh,{provide:$n,useExisting:ah},{provide:Mo,useClass:ay,deps:[]},[]];var gh=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(K(Je))};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Xa=function(e){return e[e.NoHttpTransferCache=0]="NoHttpTransferCache",e[e.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",e[e.I18nSupport=2]="I18nSupport",e[e.EventReplay=3]="EventReplay",e[e.IncrementalHydration=4]="IncrementalHydration",e}(Xa||{});function mh(...e){let t=[],n=new Set,r=n.has(Xa.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:s}of e)n.add(s),i.length&&t.push(i);return ln([[],$f(),n.has(Xa.NoHttpTransferCache)||r?[]:ih({}),t])}var q="primary",ii=Symbol("RouteTitle"),tl=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ir(e){return new tl(e)}function Dy(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let s=0;s<r.length;s++){let a=r[s],c=e[s];if(a[0]===":")i[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Sy(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!bt(e[n],t[n]))return!1;return!0}function bt(e,t){let n=e?nl(e):void 0,r=t?nl(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Ch(e[i],t[i]))return!1;return!0}function nl(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function Ch(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,s)=>r[s]===i)}else return e===t}function Eh(e){return e.length>0?e[e.length-1]:null}function qt(e){return gs(e)?e:Pr(e)?ve(Promise.resolve(e)):$(e)}var My={exact:Sh,subset:Mh},Dh={exact:Ny,subset:Ay,ignored:()=>!0};function vh(e,t,n){return My[n.paths](e.root,t.root,n.matrixParams)&&Dh[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function Ny(e,t){return bt(e,t)}function Sh(e,t,n){if(!mn(e.segments,t.segments)||!jo(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!Sh(e.children[r],t.children[r],n))return!1;return!0}function Ay(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Ch(e[n],t[n]))}function Mh(e,t,n){return Nh(e,t,t.segments,n)}function Nh(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!mn(i,n)||t.hasChildren()||!jo(i,n,r))}else if(e.segments.length===n.length){if(!mn(e.segments,n)||!jo(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!Mh(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!mn(e.segments,i)||!jo(e.segments,i,r)||!e.children[q]?!1:Nh(e.children[q],t,s,r)}}function jo(e,t,n){return t.every((r,i)=>Dh[n](e[i].parameters,r.parameters))}var Tt=class{root;queryParams;fragment;_queryParamMap;constructor(t=new oe([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ir(this.queryParams),this._queryParamMap}toString(){return Ry.serialize(this)}},oe=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Uo(this)}},gn=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=ir(this.parameters),this._parameterMap}toString(){return Th(this)}};function Ty(e,t){return mn(e,t)&&e.every((n,r)=>bt(n.parameters,t[r].parameters))}function mn(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function ky(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===q&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==q&&(n=n.concat(t(i,r)))}),n}var Ml=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:()=>new Yr,providedIn:"root"})}return e})(),Yr=class{parse(t){let n=new il(t);return new Tt(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${Hr(t.root,!0)}`,r=Py(t.queryParams),i=typeof t.fragment=="string"?`#${Oy(t.fragment)}`:"";return`${n}${r}${i}`}},Ry=new Yr;function Uo(e){return e.segments.map(t=>Th(t)).join("/")}function Hr(e,t){if(!e.hasChildren())return Uo(e);if(t){let n=e.children[q]?Hr(e.children[q],!1):"",r=[];return Object.entries(e.children).forEach(([i,s])=>{i!==q&&r.push(`${i}:${Hr(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=ky(e,(r,i)=>i===q?[Hr(e.children[q],!1)]:[`${i}:${Hr(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[q]!=null?`${Uo(e)}/${n[0]}`:`${Uo(e)}/(${n.join("//")})`}}function Ah(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Po(e){return Ah(e).replace(/%3B/gi,";")}function Oy(e){return encodeURI(e)}function rl(e){return Ah(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bo(e){return decodeURIComponent(e)}function yh(e){return Bo(e.replace(/\+/g,"%20"))}function Th(e){return`${rl(e.path)}${Ly(e.parameters)}`}function Ly(e){return Object.entries(e).map(([t,n])=>`;${rl(t)}=${rl(n)}`).join("")}function Py(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Po(n)}=${Po(i)}`).join("&"):`${Po(n)}=${Po(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var Fy=/^[^\/()?;#]+/;function Qa(e){let t=e.match(Fy);return t?t[0]:""}var jy=/^[^\/()?;=#]+/;function Uy(e){let t=e.match(jy);return t?t[0]:""}var By=/^[^=?&#]+/;function Vy(e){let t=e.match(By);return t?t[0]:""}var $y=/^[^&#]+/;function Hy(e){let t=e.match($y);return t?t[0]:""}var il=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new oe([],{}):new oe([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[q]=new oe(t,n)),r}parseSegment(){let t=Qa(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(t),new gn(Bo(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=Uy(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Qa(this.remaining);i&&(r=i,this.capture(r))}t[Bo(n)]=Bo(r)}parseQueryParam(t){let n=Vy(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let a=Hy(this.remaining);a&&(r=a,this.capture(r))}let i=yh(n),s=yh(r);if(t.hasOwnProperty(i)){let a=t[i];Array.isArray(a)||(a=[a],t[i]=a),a.push(s)}else t[i]=s}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Qa(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=q);let a=this.parseChildren();n[s]=Object.keys(a).length===1?a[q]:new oe([],a),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new j(4011,!1)}};function kh(e){return e.segments.length>0?new oe([],{[q]:e}):e}function Rh(e){let t={};for(let[r,i]of Object.entries(e.children)){let s=Rh(i);if(r===q&&s.segments.length===0&&s.hasChildren())for(let[a,c]of Object.entries(s.children))t[a]=c;else(s.segments.length>0||s.hasChildren())&&(t[r]=s)}let n=new oe(e.segments,t);return zy(n)}function zy(e){if(e.numberOfChildren===1&&e.children[q]){let t=e.children[q];return new oe(e.segments.concat(t.segments),t.children)}return e}function Xr(e){return e instanceof Tt}function qy(e,t,n=null,r=null){let i=Oh(e);return Lh(i,t,n,r)}function Oh(e){let t;function n(s){let a={};for(let l of s.children){let d=n(l);a[l.outlet]=d}let c=new oe(s.url,a);return s===e&&(t=c),c}let r=n(e.root),i=kh(r);return t??i}function Lh(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return Ka(i,i,i,n,r);let s=Gy(t);if(s.toRoot())return Ka(i,i,new oe([],{}),n,r);let a=Wy(s,i,e),c=a.processChildren?qr(a.segmentGroup,a.index,s.commands):Fh(a.segmentGroup,a.index,s.commands);return Ka(i,a.segmentGroup,c,n,r)}function Vo(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Zr(e){return typeof e=="object"&&e!=null&&e.outlets}function Ka(e,t,n,r,i){let s={};r&&Object.entries(r).forEach(([l,d])=>{s[l]=Array.isArray(d)?d.map(u=>`${u}`):`${d}`});let a;e===t?a=n:a=Ph(e,t,n);let c=kh(Rh(a));return new Tt(c,s,i)}function Ph(e,t,n){let r={};return Object.entries(e.children).forEach(([i,s])=>{s===t?r[i]=n:r[i]=Ph(s,t,n)}),new oe(e.segments,r)}var $o=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Vo(r[0]))throw new j(4003,!1);let i=r.find(Zr);if(i&&i!==Eh(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Gy(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new $o(!0,0,e);let t=0,n=!1,r=e.reduce((i,s,a)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,d])=>{c[l]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:a===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?n=!0:c===".."?t++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new $o(n,t,r)}var tr=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function Wy(e,t,n){if(e.isAbsolute)return new tr(t,!0,0);if(!n)return new tr(t,!1,NaN);if(n.parent===null)return new tr(n,!0,0);let r=Vo(e.commands[0])?0:1,i=n.segments.length-1+r;return Yy(n,i,e.numberOfDoubleDots)}function Yy(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new tr(r,!1,i-s)}function Xy(e){return Zr(e[0])?e[0].outlets:{[q]:e}}function Fh(e,t,n){if(e??=new oe([],{}),e.segments.length===0&&e.hasChildren())return qr(e,t,n);let r=Zy(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let s=new oe(e.segments.slice(0,r.pathIndex),{});return s.children[q]=new oe(e.segments.slice(r.pathIndex),e.children),qr(s,0,i)}else return r.match&&i.length===0?new oe(e.segments,{}):r.match&&!e.hasChildren()?ol(e,t,n):r.match?qr(e,0,i):ol(e,t,n)}function qr(e,t,n){if(n.length===0)return new oe(e.segments,{});{let r=Xy(n),i={};if(Object.keys(r).some(s=>s!==q)&&e.children[q]&&e.numberOfChildren===1&&e.children[q].segments.length===0){let s=qr(e.children[q],t,n);return new oe(e.segments,s.children)}return Object.entries(r).forEach(([s,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[s]=Fh(e.children[s],t,a))}),Object.entries(e.children).forEach(([s,a])=>{r[s]===void 0&&(i[s]=a)}),new oe(e.segments,i)}}function Zy(e,t,n){let r=0,i=t,s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;let a=e.segments[i],c=n[r];if(Zr(c))break;let l=`${c}`,d=r<n.length-1?n[r+1]:null;if(i>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!wh(l,d,a))return s;r+=2}else{if(!wh(l,{},a))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ol(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let s=n[i];if(Zr(s)){let l=Qy(s.outlets);return new oe(r,l)}if(i===0&&Vo(n[0])){let l=e.segments[t];r.push(new gn(l.path,bh(n[0]))),i++;continue}let a=Zr(s)?s.outlets[q]:`${s}`,c=i<n.length-1?n[i+1]:null;a&&c&&Vo(c)?(r.push(new gn(a,bh(c))),i+=2):(r.push(new gn(a,{})),i++)}return new oe(r,{})}function Qy(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=ol(new oe([],{}),0,r))}),t}function bh(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function wh(e,t,n){return e==n.path&&bt(t,n.parameters)}var Gr="imperative",Se=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Se||{}),et=class{id;url;constructor(t,n){this.id=t,this.url=n}},Qr=class extends et{type=Se.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",i=null){super(t,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},vn=class extends et{urlAfterRedirects;type=Se.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ze=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(ze||{}),sl=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(sl||{}),At=class extends et{reason;code;type=Se.NavigationCancel;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},yn=class extends et{reason;code;type=Se.NavigationSkipped;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}},Kr=class extends et{error;target;type=Se.NavigationError;constructor(t,n,r,i){super(t,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ho=class extends et{urlAfterRedirects;state;type=Se.RoutesRecognized;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},al=class extends et{urlAfterRedirects;state;type=Se.GuardsCheckStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ll=class extends et{urlAfterRedirects;state;shouldActivate;type=Se.GuardsCheckEnd;constructor(t,n,r,i,s){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},cl=class extends et{urlAfterRedirects;state;type=Se.ResolveStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ul=class extends et{urlAfterRedirects;state;type=Se.ResolveEnd;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dl=class{route;type=Se.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},fl=class{route;type=Se.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},hl=class{snapshot;type=Se.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pl=class{snapshot;type=Se.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gl=class{snapshot;type=Se.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ml=class{snapshot;type=Se.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Jr=class{},or=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function Ky(e,t){return e.providers&&!e._injector&&(e._injector=Pa(e.providers,t,`Route: ${e.path}`)),e._injector??t}function lt(e){return e.outlet||q}function Jy(e,t){let n=e.filter(r=>lt(r)===t);return n.push(...e.filter(r=>lt(r)!==t)),n}function oi(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var vl=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return oi(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Zo(this.rootInjector)}},Zo=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new vl(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(K(Ze))};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),zo=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=yl(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=yl(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=bl(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return bl(t,this._root).map(n=>n.value)}};function yl(e,t){if(e===t.value)return t;for(let n of t.children){let r=yl(e,n);if(r)return r}return null}function bl(e,t){if(e===t.value)return[t];for(let n of t.children){let r=bl(e,n);if(r.length)return r.unshift(t),r}return[]}var He=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function er(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var qo=class extends zo{snapshot;constructor(t,n){super(t),this.snapshot=n,Nl(this,t)}toString(){return this.snapshot.toString()}};function jh(e){let t=e2(e),n=new De([new gn("",{})]),r=new De({}),i=new De({}),s=new De({}),a=new De(""),c=new sr(n,r,s,a,i,q,e,t.root);return c.snapshot=t.root,new qo(new He(c,[]),t)}function e2(e){let t={},n={},r={},i="",s=new nr([],t,r,i,n,q,e,null,{});return new Wo("",new He(s,[]))}var sr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,i,s,a,c,l){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=a,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(J(d=>d[ii]))??$(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(J(t=>ir(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(J(t=>ir(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Go(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:F(F({},t.params),e.params),data:F(F({},t.data),e.data),resolve:F(F(F(F({},e.data),t.data),i?.data),e._resolvedData)}:r={params:F({},e.params),data:F({},e.data),resolve:F(F({},e.data),e._resolvedData??{})},i&&Bh(i)&&(r.resolve[ii]=i.title),r}var nr=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ii]}constructor(t,n,r,i,s,a,c,l,d){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=c,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ir(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ir(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Wo=class extends zo{url;constructor(t,n){super(n),this.url=t,Nl(this,n)}toString(){return Uh(this._root)}};function Nl(e,t){t.value._routerState=e,t.children.forEach(n=>Nl(e,n))}function Uh(e){let t=e.children.length>0?` { ${e.children.map(Uh).join(", ")} } `:"";return`${e.value}${t}`}function Ja(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,bt(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),bt(t.params,n.params)||e.paramsSubject.next(n.params),Sy(t.url,n.url)||e.urlSubject.next(n.url),bt(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function wl(e,t){let n=bt(e.params,t.params)&&Ty(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||wl(e.parent,t.parent))}function Bh(e){return typeof e.title=="string"||e.title===null}var t2=new B(""),Al=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=q;activateEvents=new je;deactivateEvents=new je;attachEvents=new je;detachEvents=new je;routerOutletData=yd(void 0);parentContexts=A(Zo);location=A(Eo);changeDetector=A(Fr);inputBinder=A(Tl,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=n;let i=this.location,a=n.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new _l(n,c,i.injector,this.routerOutletData);this.activated=i.createComponent(a,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Fa({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[pa]})}return e})(),_l=class e{route;childContexts;parent;outletData;__ngOutletInjector(t){return new e(this.route,this.childContexts,t,this.outletData)}constructor(t,n,r,i){this.route=t,this.childContexts=n,this.parent=r,this.outletData=i}get(t,n){return t===sr?this.route:t===Zo?this.childContexts:t===t2?this.outletData:this.parent.get(t,n)}},Tl=new B("");function n2(e,t,n){let r=ei(e,t._root,n?n._root:void 0);return new qo(r,t)}function ei(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=r2(e,t,n);return new He(r,i)}else{if(e.shouldAttach(t.value)){let s=e.retrieve(t.value);if(s!==null){let a=s.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(c=>ei(e,c)),a}}let r=i2(t.value),i=t.children.map(s=>ei(e,s));return new He(r,i)}}function r2(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return ei(e,r,i);return ei(e,r)})}function i2(e){return new sr(new De(e.url),new De(e.params),new De(e.queryParams),new De(e.fragment),new De(e.data),e.outlet,e.component,e)}var ti=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},Vh="ngNavigationCancelingError";function Yo(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=Xr(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=$h(!1,ze.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function $h(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[Vh]=!0,n.cancellationCode=t,n}function o2(e){return Hh(e)&&Xr(e.url)}function Hh(e){return!!e&&e[Vh]}var s2=(e,t,n,r)=>J(i=>(new xl(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),xl=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,i,s){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Ja(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=er(n);t.children.forEach(s=>{let a=s.value.outlet;this.deactivateRoutes(s,i[a],r),delete i[a]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(t,n,r){let i=t.value,s=n?n.value:null;if(i===s)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(t,n,a.children)}else this.deactivateChildRoutes(t,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=er(t);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:c})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=er(t);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=er(n);t.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new ml(s.value.snapshot))}),t.children.length&&this.forwardEvent(new pl(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,s=n?n.value:null;if(Ja(i),i===s)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,a.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),Ja(c.route.value),this.activateChildRoutes(t,null,a.children)}else a.attachRef=null,a.route=i,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(t,null,a.children)}else this.activateChildRoutes(t,null,r)}},Xo=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},rr=class{component;route;constructor(t,n){this.component=t,this.route=n}};function a2(e,t,n){let r=e._root,i=t?t._root:null;return zr(r,i,n,[r.value])}function l2(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function lr(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!mu(e)?e:t.get(e):r}function zr(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=er(t);return e.children.forEach(a=>{c2(a,s[a.value.outlet],n,r.concat([a.value]),i),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,c])=>Wr(c,n.getContext(a),i)),i}function c2(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=e.value,a=t?t.value:null,c=n?n.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){let l=u2(a,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Xo(r)):(s.data=a.data,s._resolvedData=a._resolvedData),s.component?zr(e,t,c?c.children:null,r,i):zr(e,t,n,r,i),l&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new rr(c.outlet.component,a))}else a&&Wr(t,c,i),i.canActivateChecks.push(new Xo(r)),s.component?zr(e,null,c?c.children:null,r,i):zr(e,null,n,r,i);return i}function u2(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!mn(e.url,t.url);case"pathParamsOrQueryParamsChange":return!mn(e.url,t.url)||!bt(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!wl(e,t)||!bt(e.queryParams,t.queryParams);case"paramsChange":default:return!wl(e,t)}}function Wr(e,t,n){let r=er(e),i=e.value;Object.entries(r).forEach(([s,a])=>{i.component?t?Wr(a,t.children.getContext(s),n):Wr(a,null,n):Wr(a,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new rr(t.outlet.component,i)):n.canDeactivateChecks.push(new rr(null,i)):n.canDeactivateChecks.push(new rr(null,i))}function si(e){return typeof e=="function"}function d2(e){return typeof e=="boolean"}function f2(e){return e&&si(e.canLoad)}function h2(e){return e&&si(e.canActivate)}function p2(e){return e&&si(e.canActivateChild)}function g2(e){return e&&si(e.canDeactivate)}function m2(e){return e&&si(e.canMatch)}function zh(e){return e instanceof It||e?.name==="EmptyError"}var Fo=Symbol("INITIAL_VALUE");function ar(){return We(e=>Ai(e.map(t=>t.pipe(Ct(1),bs(Fo)))).pipe(J(t=>{for(let n of t)if(n!==!0){if(n===Fo)return Fo;if(n===!1||v2(n))return n}return!0}),Ge(t=>t!==Fo),Ct(1)))}function v2(e){return Xr(e)||e instanceof ti}function y2(e,t){return be(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=n;return a.length===0&&s.length===0?$(fe(F({},n),{guardsResult:!0})):b2(a,r,i,e).pipe(be(c=>c&&d2(c)?w2(r,s,e,t):$(c)),J(c=>fe(F({},n),{guardsResult:c})))})}function b2(e,t,n,r){return ve(e).pipe(be(i=>E2(i.component,i.route,n,t,r)),Et(i=>i!==!0,!0))}function w2(e,t,n,r){return ve(t).pipe(en(i=>An(x2(i.route.parent,r),_2(i.route,r),C2(e,i.path,n),I2(e,i.route,n))),Et(i=>i!==!0,!0))}function _2(e,t){return e!==null&&t&&t(new gl(e)),$(!0)}function x2(e,t){return e!==null&&t&&t(new hl(e)),$(!0)}function I2(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return $(!0);let i=r.map(s=>Ti(()=>{let a=oi(t)??n,c=lr(s,a),l=h2(c)?c.canActivate(t,e):Ke(a,()=>c(t,e));return qt(l).pipe(Et())}));return $(i).pipe(ar())}function C2(e,t,n){let r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(a=>l2(a)).filter(a=>a!==null).map(a=>Ti(()=>{let c=a.guards.map(l=>{let d=oi(a.node)??n,u=lr(l,d),f=p2(u)?u.canActivateChild(r,e):Ke(d,()=>u(r,e));return qt(f).pipe(Et())});return $(c).pipe(ar())}));return $(s).pipe(ar())}function E2(e,t,n,r,i){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return $(!0);let a=s.map(c=>{let l=oi(t)??i,d=lr(c,l),u=g2(d)?d.canDeactivate(e,t,n,r):Ke(l,()=>d(e,t,n,r));return qt(u).pipe(Et())});return $(a).pipe(ar())}function D2(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return $(!0);let s=i.map(a=>{let c=lr(a,e),l=f2(c)?c.canLoad(t,n):Ke(e,()=>c(t,n));return qt(l)});return $(s).pipe(ar(),qh(r))}function qh(e){return ds(we(t=>{if(typeof t!="boolean")throw Yo(e,t)}),J(t=>t===!0))}function S2(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return $(!0);let s=i.map(a=>{let c=lr(a,e),l=m2(c)?c.canMatch(t,n):Ke(e,()=>c(t,n));return qt(l)});return $(s).pipe(ar(),qh(r))}var ni=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},ri=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function Jn(e){return Nn(new ni(e))}function M2(e){return Nn(new j(4e3,!1))}function N2(e){return Nn($h(!1,ze.GuardRejected))}var Il=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return $(r);if(i.numberOfChildren>1||!i.children[q])return M2(`${t.redirectTo}`);i=i.children[q]}}applyRedirectCommands(t,n,r,i,s){if(typeof n!="string"){let c=n,{queryParams:l,fragment:d,routeConfig:u,url:f,outlet:p,params:h,data:m,title:b}=i,_=Ke(s,()=>c({params:h,data:m,queryParams:l,fragment:d,routeConfig:u,url:f,outlet:p,title:b}));if(_ instanceof Tt)throw new ri(_);n=_}let a=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n[0]==="/")throw new ri(a);return a}applyRedirectCreateUrlTree(t,n,r,i){let s=this.createSegmentGroup(t,n.root,r,i);return new Tt(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);r[i]=n[c]}else r[i]=s}),r}createSegmentGroup(t,n,r,i){let s=this.createSegments(t,n.segments,r,i),a={};return Object.entries(n.children).forEach(([c,l])=>{a[c]=this.createSegmentGroup(t,l,r,i)}),new oe(s,a)}createSegments(t,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(t,s,i):this.findOrReturn(s,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},Cl={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function A2(e,t,n,r,i){let s=Gh(e,t,n);return s.matched?(r=Ky(t,r),S2(r,t,n,i).pipe(J(a=>a===!0?s:F({},Cl)))):$(s)}function Gh(e,t,n){if(t.path==="**")return T2(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?F({},Cl):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||Dy)(n,e,t);if(!i)return F({},Cl);let s={};Object.entries(i.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let a=i.consumed.length>0?F(F({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function T2(e){return{matched:!0,parameters:e.length>0?Eh(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function _h(e,t,n,r){return n.length>0&&O2(e,n,r)?{segmentGroup:new oe(t,R2(r,new oe(n,e.children))),slicedSegments:[]}:n.length===0&&L2(e,n,r)?{segmentGroup:new oe(e.segments,k2(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new oe(e.segments,e.children),slicedSegments:n}}function k2(e,t,n,r){let i={};for(let s of n)if(Qo(e,t,s)&&!r[lt(s)]){let a=new oe([],{});i[lt(s)]=a}return F(F({},r),i)}function R2(e,t){let n={};n[q]=t;for(let r of e)if(r.path===""&&lt(r)!==q){let i=new oe([],{});n[lt(r)]=i}return n}function O2(e,t,n){return n.some(r=>Qo(e,t,r)&&lt(r)!==q)}function L2(e,t,n){return n.some(r=>Qo(e,t,r))}function Qo(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function P2(e,t,n){return t.length===0&&!e.children[n]}var El=class{};function F2(e,t,n,r,i,s,a="emptyOnly"){return new Dl(e,t,n,r,i,a,s).recognize()}var j2=31,Dl=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,i,s,a,c){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.applyRedirects=new Il(this.urlSerializer,this.urlTree)}noMatchError(t){return new j(4002,`'${t.segmentGroup}'`)}recognize(){let t=_h(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(J(({children:n,rootSnapshot:r})=>{let i=new He(r,n),s=new Wo("",i),a=qy(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),{state:s,tree:a}}))}match(t){let n=new nr([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),q,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,q,n).pipe(J(r=>({children:r,rootSnapshot:n})),Pt(r=>{if(r instanceof ri)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ni?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,s):this.processSegment(t,n,r,r.segments,i,!0,s).pipe(J(a=>a instanceof He?[a]:[]))}processChildren(t,n,r,i){let s=[];for(let a of Object.keys(r.children))a==="primary"?s.unshift(a):s.push(a);return ve(s).pipe(en(a=>{let c=r.children[a],l=Jy(n,a);return this.processSegmentGroup(t,l,c,a,i)}),ys((a,c)=>(a.push(...c),a)),Ft(null),vs(),be(a=>{if(a===null)return Jn(r);let c=Wh(a);return U2(c),$(c)}))}processSegment(t,n,r,i,s,a,c){return ve(n).pipe(en(l=>this.processSegmentAgainstRoute(l._injector??t,n,l,r,i,s,a,c).pipe(Pt(d=>{if(d instanceof ni)return $(null);throw d}))),Et(l=>!!l),Pt(l=>{if(zh(l))return P2(r,i,s)?$(new El):Jn(r);throw l}))}processSegmentAgainstRoute(t,n,r,i,s,a,c,l){return lt(r)!==a&&(a===q||!Qo(i,s,r))?Jn(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,s,a,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,s,a,l):Jn(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,s,a,c){let{matched:l,parameters:d,consumedSegments:u,positionalParamSegments:f,remainingSegments:p}=Gh(n,i,s);if(!l)return Jn(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>j2&&(this.allowRedirects=!1));let h=new nr(s,d,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,xh(i),lt(i),i.component??i._loadedComponent??null,i,Ih(i)),m=Go(h,c,this.paramsInheritanceStrategy);h.params=Object.freeze(m.params),h.data=Object.freeze(m.data);let b=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,f,h,t);return this.applyRedirects.lineralizeSegments(i,b).pipe(be(_=>this.processSegment(t,r,n,_.concat(p),a,!1,c)))}matchSegmentAgainstRoute(t,n,r,i,s,a){let c=A2(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),c.pipe(We(l=>l.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(We(({routes:d})=>{let u=r._loadedInjector??t,{parameters:f,consumedSegments:p,remainingSegments:h}=l,m=new nr(p,f,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,xh(r),lt(r),r.component??r._loadedComponent??null,r,Ih(r)),b=Go(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(b.params),m.data=Object.freeze(b.data);let{segmentGroup:_,slicedSegments:g}=_h(n,p,h,d);if(g.length===0&&_.hasChildren())return this.processChildren(u,d,_,m).pipe(J(y=>new He(m,y)));if(d.length===0&&g.length===0)return $(new He(m,[]));let w=lt(r)===s;return this.processSegment(u,d,_,g,w?q:s,!0,m).pipe(J(y=>new He(m,y instanceof He?[y]:[])))}))):Jn(n)))}getChildConfig(t,n,r){return n.children?$({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?$({routes:n._loadedRoutes,injector:n._loadedInjector}):D2(t,n,r,this.urlSerializer).pipe(be(i=>i?this.configLoader.loadChildren(t,n).pipe(we(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):N2(n))):$({routes:[],injector:t})}};function U2(e){e.sort((t,n)=>t.value.outlet===q?-1:n.value.outlet===q?1:t.value.outlet.localeCompare(n.value.outlet))}function B2(e){let t=e.value.routeConfig;return t&&t.path===""}function Wh(e){let t=[],n=new Set;for(let r of e){if(!B2(r)){t.push(r);continue}let i=t.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=Wh(r.children);t.push(new He(r.value,i))}return t.filter(r=>!n.has(r))}function xh(e){return e.data||{}}function Ih(e){return e.resolve||{}}function V2(e,t,n,r,i,s){return be(a=>F2(e,t,n,r,a.extractedUrl,i,s).pipe(J(({state:c,tree:l})=>fe(F({},a),{targetSnapshot:c,urlAfterRedirects:l}))))}function $2(e,t){return be(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return $(n);let s=new Set(i.map(l=>l.route)),a=new Set;for(let l of s)if(!a.has(l))for(let d of Yh(l))a.add(d);let c=0;return ve(a).pipe(en(l=>s.has(l)?H2(l,r,e,t):(l.data=Go(l,l.parent,e).resolve,$(void 0))),we(()=>c++),kn(1),be(l=>c===a.size?$(n):Oe))})}function Yh(e){let t=e.children.map(n=>Yh(n)).flat();return[e,...t]}function H2(e,t,n,r){let i=e.routeConfig,s=e._resolve;return i?.title!==void 0&&!Bh(i)&&(s[ii]=i.title),z2(s,e,t,r).pipe(J(a=>(e._resolvedData=a,e.data=Go(e,e.parent,n).resolve,null)))}function z2(e,t,n,r){let i=nl(e);if(i.length===0)return $({});let s={};return ve(i).pipe(be(a=>q2(e[a],t,n,r).pipe(Et(),we(c=>{if(c instanceof ti)throw Yo(new Yr,c);s[a]=c}))),kn(1),J(()=>s),Pt(a=>zh(a)?Oe:Nn(a)))}function q2(e,t,n,r){let i=oi(t)??r,s=lr(e,i),a=s.resolve?s.resolve(t,n):Ke(i,()=>s(t,n));return qt(a)}function el(e){return We(t=>{let n=e(t);return n?ve(n).pipe(J(()=>t)):$(t)})}var Xh=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===q);return r}getResolvedTitleForRoute(n){return n.data[ii]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:()=>A(G2),providedIn:"root"})}return e})(),G2=(()=>{class e extends Xh{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(K(gh))};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),kl=new B("",{providedIn:"root",factory:()=>({})}),W2=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Yn({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&hn(0,"router-outlet")},dependencies:[Al],encapsulation:2})}return e})();function Rl(e){let t=e.children&&e.children.map(Rl),n=t?fe(F({},e),{children:t}):F({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==q&&(n.component=W2),n}var Ol=new B(""),Y2=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=A(Ua);loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return $(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=qt(n.loadComponent()).pipe(J(Zh),we(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Tn(()=>{this.componentLoaders.delete(n)})),i=new Mn(r,()=>new Ne).pipe(Sn());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return $({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=X2(r,this.compiler,n,this.onLoadEndListener).pipe(Tn(()=>{this.childrenLoaders.delete(r)})),a=new Mn(s,()=>new Ne).pipe(Sn());return this.childrenLoaders.set(r,a),a}static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function X2(e,t,n,r){return qt(e.loadChildren()).pipe(J(Zh),be(i=>i instanceof Ar||Array.isArray(i)?$(i):ve(t.compileModuleAsync(i))),J(i=>{r&&r(e);let s,a,c=!1;return Array.isArray(i)?(a=i,c=!0):(s=i.create(n).injector,a=s.get(Ol,[],{optional:!0,self:!0}).flat()),{routes:a.map(Rl),injector:s}}))}function Z2(e){return e&&typeof e=="object"&&"default"in e}function Zh(e){return Z2(e)?e.default:e}var Ll=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:()=>A(Q2),providedIn:"root"})}return e})(),Q2=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),K2=new B("");var J2=new B(""),eb=(()=>{class e{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ne;transitionAbortSubject=new Ne;configLoader=A(Y2);environmentInjector=A(Ze);destroyRef=A(go);urlSerializer=A(Ml);rootContexts=A(Zo);location=A(Ur);inputBindingEnabled=A(Tl,{optional:!0})!==null;titleStrategy=A(Xh);options=A(kl,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=A(Ll);createViewTransition=A(K2,{optional:!0});navigationErrorHandler=A(J2,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>$(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new dl(i)),r=i=>this.events.next(new fl(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(fe(F(F({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new De({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Gr,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ge(s=>s.id!==0),J(s=>fe(F({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),We(s=>{let a=!1,c=!1;return $(s).pipe(We(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",ze.SupersededByNewNavigation),Oe;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?fe(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=l.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!d&&u!=="reload"){let f="";return this.events.next(new yn(l.id,this.urlSerializer.serialize(l.rawUrl),f,sl.IgnoredSameUrlNavigation)),l.resolve(!1),Oe}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return $(l).pipe(We(f=>{let p=this.transitions?.getValue();return this.events.next(new Qr(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),p!==this.transitions?.getValue()?Oe:Promise.resolve(f)}),V2(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),we(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=fe(F({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let p=new Ho(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:f,extractedUrl:p,source:h,restoredState:m,extras:b}=l,_=new Qr(f,this.urlSerializer.serialize(p),h,m);this.events.next(_);let g=jh(this.rootComponentType).snapshot;return this.currentTransition=s=fe(F({},l),{targetSnapshot:g,urlAfterRedirects:p,extras:fe(F({},b),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,$(s)}else{let f="";return this.events.next(new yn(l.id,this.urlSerializer.serialize(l.extractedUrl),f,sl.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Oe}}),we(l=>{let d=new al(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),J(l=>(this.currentTransition=s=fe(F({},l),{guards:a2(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),y2(this.environmentInjector,l=>this.events.next(l)),we(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Yo(this.urlSerializer,l.guardsResult);let d=new ll(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),Ge(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",ze.GuardRejected),!1)),el(l=>{if(l.guards.canActivateChecks.length)return $(l).pipe(we(d=>{let u=new cl(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}),We(d=>{let u=!1;return $(d).pipe($2(this.paramsInheritanceStrategy,this.environmentInjector),we({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(d,"",ze.NoDataFromResolver)}}))}),we(d=>{let u=new ul(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}))}),el(l=>{let d=u=>{let f=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(u.routeConfig).pipe(we(p=>{u.component=p}),J(()=>{})));for(let p of u.children)f.push(...d(p));return f};return Ai(d(l.targetSnapshot.root)).pipe(Ft(null),Ct(1))}),el(()=>this.afterPreactivation()),We(()=>{let{currentSnapshot:l,targetSnapshot:d}=s,u=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return u?ve(u).pipe(J(()=>s)):$(s)}),J(l=>{let d=n2(n.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=fe(F({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),we(()=>{this.events.next(new Jr)}),s2(this.rootContexts,n.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Ct(1),we({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new vn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),ws(this.transitionAbortSubject.pipe(we(l=>{throw l}))),Tn(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",ze.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Pt(l=>{if(this.destroyed)return s.resolve(!1),Oe;if(c=!0,Hh(l))this.events.next(new At(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),o2(l)?this.events.next(new or(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let d=new Kr(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let u=Ke(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(u instanceof ti){let{message:f,cancellationCode:p}=Yo(this.urlSerializer,u);this.events.next(new At(s.id,this.urlSerializer.serialize(s.extractedUrl),f,p)),this.events.next(new or(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(d),l}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return Oe}))}))}cancelNavigationTransition(n,r,i){let s=new At(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function tb(e){return e!==Gr}var nb=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:()=>A(rb),providedIn:"root"})}return e})(),Sl=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},rb=(()=>{class e extends Sl{static \u0275fac=(()=>{let n;return function(i){return(n||(n=_a(e)))(i||e)}})();static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Qh=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:()=>A(ib),providedIn:"root"})}return e})(),ib=(()=>{class e extends Qh{location=A(Ur);urlSerializer=A(Ml);options=A(kl,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=A(Ll);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Tt;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=jh(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Qr)this.stateMemento=this.createStateMemento();else if(n instanceof yn)this.rawUrlTree=r.initialUrl;else if(n instanceof Ho){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof Jr?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof At&&(n.code===ze.GuardRejected||n.code===ze.NoDataFromResolver)?this.restoreHistory(r):n instanceof Kr?this.restoreHistory(r,!0):n instanceof vn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof Tt?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,a=F(F({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",a)}else{let s=F(F({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=_a(e)))(i||e)}})();static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ob(e,t){e.events.pipe(Ge(n=>n instanceof vn||n instanceof At||n instanceof Kr||n instanceof yn),J(n=>n instanceof vn||n instanceof yn?0:(n instanceof At?n.code===ze.Redirect||n.code===ze.SupersededByNewNavigation:!1)?2:1),Ge(n=>n!==2),Ct(1)).subscribe(()=>{t()})}var sb={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ab={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Kh=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=A(ja);stateManager=A(Qh);options=A(kl,{optional:!0})||{};pendingTasks=A(un);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=A(eb);urlSerializer=A(Ml);location=A(Ur);urlHandlingStrategy=A(Ll);_events=new Ne;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=A(nb);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=A(Ol,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!A(Tl,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new me;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof At&&r.code!==ze.Redirect&&r.code!==ze.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof vn)this.navigated=!0;else if(r instanceof or){let a=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||tb(i.source)},a);this.scheduleNavigation(c,Gr,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}cb(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Gr,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let l=F({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(n);this.scheduleNavigation(c,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Rl),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,d=l?this.currentUrlTree.fragment:a,u=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":u=F(F({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let f;try{let p=i?i.snapshot:this.routerState.snapshot.root;f=Oh(p)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),f=this.currentUrlTree.root}return Lh(f,n,u,d??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Xr(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Gr,null,r)}navigate(n,r={skipLocationChange:!1}){return lb(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=F({},sb):r===!1?i=F({},ab):i=r,Xr(n))return vh(this.currentUrlTree,n,i);let s=this.parseUrl(n);return vh(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,d;a?(c=a.resolve,l=a.reject,d=a.promise):d=new Promise((f,p)=>{c=f,l=p});let u=this.pendingTasks.add();return ob(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function lb(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new j(4008,!1)}function cb(e){return!(e instanceof Jr)&&!(e instanceof or)}var ub=new B("");function Jh(e,...t){return ln([{provide:Ol,multi:!0,useValue:e},[],{provide:sr,useFactory:db,deps:[Kh]},{provide:Xn,multi:!0,useFactory:fb},t.map(n=>n.\u0275providers)])}function db(e){return e.routerState.root}function fb(){let e=A(mt);return t=>{let n=e.get(st);if(t!==n.components[0])return;let r=e.get(Kh),i=e.get(hb);e.get(pb)===1&&r.initialNavigation(),e.get(gb,null,X.Optional)?.setUpPreloading(),e.get(ub,null,X.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var hb=new B("",{factory:()=>new Ne}),pb=new B("",{providedIn:"root",factory:()=>1});var gb=new B("");var tp=hp(ep());var Ko=class e{constructor(){}ngOnInit(){let t=document.getElementById("tree");if(t){var n=new tp.default(t,{nodeBinding:{field_0:"name",img_0:"img"}});n.load([{id:1,pids:[2],name:"Amber McKenzie",gender:"female",img:"https://cdn.balkan.app/shared/2.jpg"},{id:2,pids:[1],name:"Ava Field",gender:"male",img:"https://cdn.balkan.app/shared/m30/5.jpg"},{id:3,mid:1,fid:2,name:"Peter Stevens",gender:"male",img:"https://cdn.balkan.app/shared/m10/2.jpg"},{id:4,mid:1,fid:2,name:"Savin Stevens",gender:"male",img:"https://cdn.balkan.app/shared/m10/1.jpg"},{id:5,mid:1,fid:2,name:"Emma Stevens",gender:"female",img:"https://cdn.balkan.app/shared/w10/3.jpg"}])}}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Yn({type:e,selectors:[["app-gia-pha"]],decls:3,vars:0,consts:[["id","tree"]],template:function(n,r){n&1&&(Zn(0,"p"),Do(1,"gia-pha works!"),Qn(),hn(2,"div",0))},encapsulation:2})};var cr=class e{title="LuuVan";static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Yn({type:e,selectors:[["app-root"]],decls:3,vars:0,template:function(n,r){n&1&&(Zn(0,"p"),Do(1,"LuuVan works!"),Qn(),hn(2,"router-outlet"))},dependencies:[Al],encapsulation:2})};var np=[{path:"gia-pha",component:Ko},{path:"",component:cr}];var rp={providers:[Uf({eventCoalescing:!0}),Jh(np),mh()]};ph(cr,rp).catch(e=>console.error(e));
